"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9478],{16190:function(et,ue,o){o.d(ue,{D:function(){return ie},L:function(){return z}});var t=o(18868),w=o(49558),A=o(30705),x=o(73495),L=o(64279),F=o(2784),Y=o(12053),I=o(26228),ne=o(75951),ye=o.n(ne),re=o(90436),ve=o(34520);const ie=[{component:t.E,name:"EntityPicker",schema:t.n},{component:t.o,name:"EntityNamePicker",validation:t.p,schema:t.q},{component:t.t,name:"EntityTagsPicker",schema:t.w},{component:t.R,name:"RepoUrlPicker",validation:t.x,schema:t.y},{component:t.O,name:"OwnerPicker",schema:t.z},{component:t.B,name:"OwnedEntityPicker",schema:t.C}],$=({createdAt:W})=>{const V=I.ou.fromISO(W),K=I.Xp.fromDateTimes(V,I.ou.local()).toDuration().valueOf();return F.createElement(re.Z,{paragraph:!0},ye()(K,{round:!0})," ago")},be=({entityRef:W})=>{var V,K,H;const G=(0,A.h_)(x.Ah),{value:j,loading:Q,error:ee}=(0,L.default)(()=>G.getEntityByRef(W||""),[G,W]);return W?Q||ee?null:F.createElement(x.dx,{entityRef:(0,ve.of)(W),title:(H=(K=(V=j==null?void 0:j.spec)==null?void 0:V.profile)==null?void 0:K.displayName)!=null?H:j==null?void 0:j.metadata.name}):F.createElement(re.Z,{paragraph:!0},"Unknown")},Ce=({status:W})=>{switch(W){case"processing":return F.createElement(w.wA,null,W);case"completed":return F.createElement(w.Kq,null,W);case"error":default:return F.createElement(w.vK,null,W)}},X=({entityRef:W})=>{const V=(0,A.h_)(Y.lc),{value:K,loading:H,error:G}=(0,L.default)(()=>V.getTemplateParameterSchema(W||""),[V,W]);return H||G||!W?null:F.createElement(x.dx,{entityRef:(0,ve.of)(W),title:K==null?void 0:K.title})},le=W=>{var V;const{initiallySelectedFilter:K="owned"}=W,H=(0,A.h_)(Y.lc),G=(0,A.tg)(t.d),[j,Q]=(0,F.useState)(K),{value:ee,loading:q,error:se}=(0,L.default)(()=>{var k;return H.listTasks?(k=H.listTasks)==null?void 0:k.call(H,{filterByOwnership:j}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[]}))},[H,j]);return q?F.createElement(w.Ex,null):se?F.createElement(F.Fragment,null,F.createElement(w.yu,{error:se}),F.createElement(w.ub,{missing:"info",title:"No information to display",description:"There is no Tasks or there was an issue communicating with backend."})):F.createElement(x._i,null,F.createElement(x._i.Filters,null,F.createElement(t.F,{filter:j,onSelectOwner:k=>Q(k)})),F.createElement(x._i.Content,null,F.createElement(w.iA,{data:(V=ee==null?void 0:ee.tasks)!=null?V:[],title:"Tasks",columns:[{title:"Task ID",field:"id",render:k=>F.createElement(w.rU,{to:`${G()}/tasks/${k.id}`},k.id)},{title:"Template",render:k=>{var _;return F.createElement(X,{entityRef:(_=k.spec.templateInfo)==null?void 0:_.entityRef})}},{title:"Created",field:"createdAt",render:k=>F.createElement($,{createdAt:k.createdAt})},{title:"Owner",field:"createdBy",render:k=>{var _,Ee;return F.createElement(be,{entityRef:(Ee=(_=k.spec)==null?void 0:_.user)==null?void 0:Ee.ref})}},{title:"Status",field:"status",render:k=>F.createElement(Ce,{status:k.status})}]})))},z=W=>F.createElement(w.T3,{themeId:"home"},F.createElement(w.h4,{pageTitleOverride:"Templates Tasks",title:F.createElement(F.Fragment,null,"List template tasks ",F.createElement(w.Fw,{shorthand:!0,alpha:!0})),subtitle:"All tasks that have been started"}),F.createElement(w.VY,null,F.createElement(le,{...W})))},79478:function(et,ue,o){o.r(ue),o.d(ue,{Router:function(){return Ya}});var t=o(2784),w=o(73557),A=o(49558),x=o(30705),L=o(73495),F=o(34520),Y=o(79692),I=o(90436),ne=o(80030),ye=o(60364),re=o(94339),ve=o(16111),ie=o(24579),$=o(95544),be=o(7089),Ce=o(14503),X=o(61837),le=o(27556),z=o(77277),W=o(31625),V=o(31377),K=o(34546),H=o(67471),G=o(67358),j=o(42494),Q=o(56939),ee=o(73698),q=o(12231),se=o(32552),k=o(49462),_=o(52160),Ee=o(39781),O=o(18868),tt=o(75650),at=o(56563),ge=o(86136),he=o(49378),nt=o(50758),rt=o(79784),lt=o(30254),ot=o(27604),it=o(33882),st=o(43054),ct=o(19126),we=o.n(ct),We=o(64279),te=o(12053),M=o(74182),U=o(60905),Be=o(65549),dt=o(90324),mt=o(70595),ut=o(17373),Re=o(11776),Ne=o(38402),vt=o(16715),Le=o(64860),Et=o(85256),ke=o(74828),Ie=o(29611),je=o(21324),Te=o(5806),Fe=o(84899),gt=o(64326),ht=o(44962),ft=o(2682),pt=o(11433),Ze=o(86619);function ce(){return ce=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},ce.apply(this,arguments)}function xe(a){if(a==null)throw new TypeError("Cannot destructure undefined")}function Me(a,e){if(a==null)return{};var n={},r=Object.keys(a),l,i;for(i=0;i<r.length;i++)l=r[i],!(e.indexOf(l)>=0)&&(n[l]=a[l]);return n}var Se=function(e){return t.createElement(z.Z,Object.assign({},e,{color:"secondary"}),t.createElement(Be.Z,null)," Add Item")},yt={remove:ut.Z,plus:Be.Z,"arrow-up":dt.Z,"arrow-down":mt.Z},fe=function(e){var n=e.icon,r=e.iconProps,l=Me(e,["icon","className","iconProps"]),i=yt[n];return t.createElement(z.Z,Object.assign({},l,{size:"small"}),t.createElement(i,Object.assign({},r)))},bt=M.P6.qX,Ct=M.P6.c6,Tt=function(e){var n=e.schema,r=e.registry,l=r===void 0?Ct():r;return bt(n,l.rootSchema)?t.createElement(Zt,Object.assign({},e)):t.createElement(xt,Object.assign({},e))},Ue=function(e){var n=e.TitleField,r=e.idSchema,l=e.title,i=e.required;if(!l)return null;var c=r.$id+"__title";return t.createElement(n,{id:c,title:l,required:i})},Ft=function(e){var n=e.DescriptionField,r=e.idSchema,l=e.description;if(!l)return null;var i=r.$id+"__description";return t.createElement(n,{id:i,description:l})},$e=function(e){var n={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold",minWidth:0};return t.createElement(U.Z,{container:!0,key:e.key,alignItems:"center"},t.createElement(U.Z,{item:!0,xs:!0,style:{overflow:"auto"}},t.createElement($.Z,{mb:2},t.createElement(le.Z,{elevation:2},t.createElement($.Z,{p:2},e.children)))),e.hasToolbar&&t.createElement(U.Z,{item:!0},(e.hasMoveUp||e.hasMoveDown)&&t.createElement(fe,{icon:"arrow-up",className:"array-item-move-up",tabIndex:-1,style:n,iconProps:{fontSize:"small"},disabled:e.disabled||e.readonly||!e.hasMoveUp,onClick:e.onReorderClick(e.index,e.index-1)}),(e.hasMoveUp||e.hasMoveDown)&&t.createElement(fe,{icon:"arrow-down",tabIndex:-1,style:n,iconProps:{fontSize:"small"},disabled:e.disabled||e.readonly||!e.hasMoveDown,onClick:e.onReorderClick(e.index,e.index+1)}),e.hasRemove&&t.createElement(fe,{icon:"remove",tabIndex:-1,style:n,iconProps:{fontSize:"small"},disabled:e.disabled||e.readonly,onClick:e.onDropIndexClick(e.index)})))},Zt=function(e){return t.createElement("fieldset",{className:e.className},t.createElement(Ue,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&t.createElement("div",{className:"field-description",key:"field-description-"+e.idSchema.$id},e.uiSchema["ui:description"]||e.schema.description),t.createElement("div",{className:"row array-item-list",key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map($e)),e.canAdd&&t.createElement(Se,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly}))},xt=function(e){return t.createElement(le.Z,{elevation:2},t.createElement($.Z,{p:2},t.createElement(Ue,{key:"array-field-title-"+e.idSchema.$id,TitleField:e.TitleField,idSchema:e.idSchema,title:e.uiSchema["ui:title"]||e.title,required:e.required}),(e.uiSchema["ui:description"]||e.schema.description)&&t.createElement(Ft,{key:"array-field-description-"+e.idSchema.$id,DescriptionField:e.DescriptionField,idSchema:e.idSchema,description:e.uiSchema["ui:description"]||e.schema.description}),t.createElement(U.Z,{container:!0,key:"array-item-list-"+e.idSchema.$id},e.items&&e.items.map(function(n){return $e(n)}),e.canAdd&&t.createElement(U.Z,{container:!0,justify:"flex-end"},t.createElement(U.Z,{item:!0},t.createElement($.Z,{mt:2},t.createElement(Se,{className:"array-item-add",onClick:e.onAddClick,disabled:e.disabled||e.readonly})))))))},St=function(e){var n=e.errors;return t.createElement(le.Z,{elevation:2},t.createElement($.Z,{mb:2,p:2},t.createElement(I.Z,{variant:"h6"},"Errors"),t.createElement(Re.Z,{dense:!0},n.map(function(r,l){return t.createElement(Ne.Z,{key:l},t.createElement(ge.Z,null,t.createElement(vt.Z,{color:"error"})),t.createElement(he.Z,{primary:r.stack}))}))))},Dt=(0,Le.Z)({root:{marginTop:5}}),At=function(e){var n=e.description;if(n){var r=Dt();return t.createElement(I.Z,{variant:"subtitle2",className:r.root},n)}return null},Ot=function(e){var n=e.title;return t.createElement(t.Fragment,null,t.createElement($.Z,{mb:1,mt:1},t.createElement(I.Z,{variant:"h5"},n),t.createElement(Et.Z,null)))},Pt={DescriptionField:At,TitleField:Ot},wt=M.P6.jk,Wt=function(e){var n=e.children,r=e.disabled,l=e.id,i=e.label,c=e.onDropPropertyClick,d=e.onKeyChange,s=e.readonly,v=e.required,h=e.schema,g=i+" Key",m=h.hasOwnProperty(wt),b={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};if(!m)return t.createElement(t.Fragment,null,n);var u=function(y){var C=y.target;return d(C.value)};return t.createElement(U.Z,{container:!0,key:l+"-key",alignItems:"center",spacing:2},t.createElement(U.Z,{item:!0,xs:!0},t.createElement(j.Z,{fullWidth:!0,required:v},t.createElement(Q.Z,null,g),t.createElement(Ie.Z,{defaultValue:i,disabled:r||s,id:l+"-key",name:l+"-key",onBlur:s?void 0:u,type:"text"}))),t.createElement(U.Z,{item:!0,xs:!0},n),t.createElement(U.Z,{item:!0},t.createElement(fe,{icon:"remove",tabIndex:-1,style:b,disabled:r||s,onClick:c(i)})))},Bt=function(e){var n=e.id,r=e.children,l=e.classNames,i=e.disabled,c=e.displayLabel,d=e.hidden,s=e.label,v=e.onDropPropertyClick,h=e.onKeyChange,g=e.readonly,m=e.required,b=e.rawErrors,u=b===void 0?[]:b,f=e.rawHelp,y=e.rawDescription,C=e.schema;return d?r:t.createElement(Wt,{classNames:l,disabled:i,id:n,label:s,onDropPropertyClick:v,onKeyChange:h,readonly:g,required:m,schema:C},t.createElement(j.Z,{fullWidth:!0,error:!!u.length,required:m},r,c&&y?t.createElement(I.Z,{variant:"caption",color:"textSecondary"},y):null,u.length>0&&t.createElement(Re.Z,{dense:!0,disablePadding:!0},u.map(function(E,p){return t.createElement(Ne.Z,{key:p,disableGutters:!0},t.createElement(ke.Z,{id:n},E))})),f&&t.createElement(ke.Z,{id:n},f)))},Rt=M.P6.Rc,Nt=(0,Le.Z)({root:{marginTop:10}}),Lt=function(e){var n=e.DescriptionField,r=e.description,l=e.TitleField,i=e.title,c=e.properties,d=e.required,s=e.disabled,v=e.readonly,h=e.uiSchema,g=e.idSchema,m=e.schema,b=e.formData,u=e.onAddClick,f=Nt();return t.createElement(t.Fragment,null,(h["ui:title"]||i)&&t.createElement(l,{id:g.$id+"-title",title:i,required:d}),r&&t.createElement(n,{id:g.$id+"-description",description:r}),t.createElement(U.Z,{container:!0,spacing:2,className:f.root},c.map(function(y,C){return y.hidden?y.content:t.createElement(U.Z,{item:!0,xs:12,key:C,style:{marginBottom:"10px"}},y.content)}),Rt(m,h,b)&&t.createElement(U.Z,{container:!0,justify:"flex-end"},t.createElement(U.Z,{item:!0},t.createElement(Se,{className:"object-property-expand",onClick:u(m),disabled:s||v})))))},kt=M.P6.iE,It=function(e){var n=e.schema,r=e.id,l=e.value,i=e.disabled,c=e.readonly,d=e.label,s=e.autofocus,v=e.onChange,h=e.onBlur,g=e.onFocus,m=kt(n),b=function(C,E){return xe(C),v(E)},u=function(C){var E=C.target.value;return h(r,E)},f=function(C){var E=C.target.value;return g(r,E)};return t.createElement(Te.Z,{control:t.createElement(je.Z,{id:r,checked:typeof l=="undefined"?!1:l,required:m,disabled:i||c,autoFocus:s,onChange:b,onBlur:u,onFocus:f}),label:d})},jt=function(e,n,r){var l=r.indexOf(e),i=n.slice(0,l).concat(e,n.slice(l));return i.sort(function(c,d){return r.indexOf(c)>r.indexOf(d)})},Mt=function(e,n){return n.filter(function(r){return r!==e})},Ut=function(e){var n=e.schema,r=e.label,l=e.id,i=e.disabled,c=e.options,d=e.value,s=e.autofocus,v=e.readonly,h=e.required,g=e.onChange,m=e.onBlur,b=e.onFocus,u=c.enumOptions,f=c.enumDisabled,y=c.inline,C=function(T){return function(Z){var R=Z.target.checked,P=u.map(function(S){var N=S.value;return N});g(R?jt(T.value,d,P):Mt(T.value,d))}},E=function(T){var Z=T.target.value;return m(l,Z)},p=function(T){var Z=T.target.value;return b(l,Z)};return t.createElement(t.Fragment,null,t.createElement(Fe.Z,{required:h,htmlFor:l},r||n.title),t.createElement(gt.Z,{row:!!y},u.map(function(D,T){var Z=d.indexOf(D.value)!==-1,R=f&&f.indexOf(D.value)!=-1,P=t.createElement(je.Z,{id:l+"_"+T,checked:Z,disabled:i||R||v,autoFocus:s&&T===0,onChange:C(D),onBlur:E,onFocus:p});return t.createElement(Te.Z,{control:P,key:T,label:D.label})})))},$t=function(e){var n=e.registry,r=n.widgets.TextWidget;return t.createElement(r,Object.assign({type:"color"},e))},Vt=function(e){var n=e.registry,r=n.widgets.TextWidget;return t.createElement(r,Object.assign({type:"date",InputLabelProps:{shrink:!0}},e))},zt=M.P6._4,Kt=M.P6.Yp,Ht=function(e){var n=e.registry,r=n.widgets.TextWidget,l=Kt(e.value),i=function(d){e.onChange(zt(d))};return t.createElement(r,Object.assign({type:"datetime-local",InputLabelProps:{shrink:!0}},e,{value:l,onChange:i}))},Yt=function(e){var n=e.registry,r=n.widgets.TextWidget;return t.createElement(r,Object.assign({type:"email"},e))},Gt=function(e){var n=e.registry,r=n.widgets.TextWidget;return t.createElement(r,Object.assign({type:"password"},e))},Jt=function(e){var n=e.id,r=e.schema,l=e.options,i=e.value,c=e.required,d=e.disabled,s=e.readonly,v=e.label,h=e.onChange,g=e.onBlur,m=e.onFocus,b=l.enumOptions,u=l.enumDisabled,f=function(D,T){return xe(D),h(r.type=="boolean"?T!=="false":T)},y=function(D){var T=D.target.value;return g(n,T)},C=function(D){var T=D.target.value;return m(n,T)},E=l?l.inline:!1;return t.createElement(t.Fragment,null,t.createElement(Fe.Z,{required:c,htmlFor:n},v||r.title),t.createElement(ft.Z,{value:""+i,row:E,onChange:f,onBlur:y,onFocus:C},b.map(function(p,D){var T=u&&u.indexOf(p.value)!=-1,Z=t.createElement(Te.Z,{control:t.createElement(ht.Z,{color:"primary",key:D}),label:""+p.label,value:""+p.value,key:D,disabled:d||T||s});return Z})))},Xt=M.P6.um,Qt=function(e){var n=e.value,r=e.readonly,l=e.disabled,i=e.onBlur,c=e.onFocus,d=e.options,s=e.schema,v=e.onChange,h=e.required,g=e.label,m=e.id,b=ce({value:n,label:g,id:m},Xt(s)),u=function(E,p){return xe(E),v(p===""?d.emptyValue:p)},f=function(E){var p=E.target.value;return i(m,p)},y=function(E){var p=E.target.value;return c(m,p)};return t.createElement(t.Fragment,null,t.createElement(Fe.Z,{required:h,id:m},g),t.createElement(pt.Z,Object.assign({disabled:l||r,onChange:u,onBlur:f,onFocus:y,valueLabelDisplay:"auto"},b)))},De=M.P6.mH,Ve=M.P6.sm,qt=new Set(["number","integer"]),Ae=function(e,n){var r=e.type,l=e.items;if(n!==""){{if(r==="array"&&l&&qt.has(l.type))return n.map(De);if(r==="boolean")return n==="true";if(r==="number")return De(n)}if(e.enum){if(e.enum.every(function(i){return Ve(i)==="number"}))return De(n);if(e.enum.every(function(i){return Ve(i)==="boolean"}))return n==="true"}return n}},_t=function(e){var n=e.schema,r=e.id,l=e.options,i=e.label,c=e.required,d=e.disabled,s=e.readonly,v=e.value,h=e.multiple,g=e.autofocus,m=e.onChange,b=e.onBlur,u=e.onFocus,f=e.rawErrors,y=f===void 0?[]:f,C=l.enumOptions,E=l.enumDisabled,p=h?[]:"",D=function(P){var S=P.target.value;return m(Ae(n,S))},T=function(P){var S=P.target.value;return b(r,Ae(n,S))},Z=function(P){var S=P.target.value;return u(r,Ae(n,S))};return t.createElement(Ze.Z,{id:r,label:i||n.title,select:!0,value:typeof v=="undefined"?p:v,required:c,disabled:d||s,autoFocus:g,error:y.length>0,onChange:D,onBlur:T,onFocus:Z,InputLabelProps:{shrink:!0},SelectProps:{multiple:typeof h=="undefined"?!1:h}},C.map(function(R,P){var S=R.value,N=R.label,B=E&&E.indexOf(S)!=-1;return t.createElement(q.Z,{key:P,value:S,disabled:B},N)}))},ea=function(e){var n=e.id,r=e.placeholder,l=e.value,i=e.required,c=e.disabled,d=e.autofocus,s=e.label,v=e.readonly,h=e.onBlur,g=e.onFocus,m=e.onChange,b=e.options,u=e.schema,f=e.rawErrors,y=f===void 0?[]:f,C=function(T){var Z=T.target.value;return m(Z===""?b.emptyValue:Z)},E=function(T){var Z=T.target.value;return h(n,Z)},p=function(T){var Z=T.target.value;return g(n,Z)};return t.createElement(Ze.Z,{id:n,label:s||u.title,placeholder:r,disabled:c||v,value:l,required:i,autoFocus:d,multiline:!0,rows:b.rows||5,error:y.length>0,onChange:C,onBlur:E,onFocus:p})},ta=M.P6.ON,aa=function(e){var n=e.id,r=e.placeholder,l=e.required,i=e.readonly,c=e.disabled,d=e.type,s=e.label,v=e.value,h=e.onChange,g=e.onBlur,m=e.onFocus,b=e.autofocus,u=e.options,f=e.schema,y=e.uiSchema,C=e.rawErrors,E=C===void 0?[]:C,p=Me(e,["id","placeholder","required","readonly","disabled","type","label","value","onChange","onBlur","onFocus","autofocus","options","schema","uiSchema","rawErrors","formContext","registry"]),D=function(N){var B=N.target.value;return h(B===""?u.emptyValue:B)},T=function(N){var B=N.target.value;return g(n,B)},Z=function(N){var B=N.target.value;return m(n,B)},R=ta(f,y),P=(d||f.type)==="string"?"text":""+(d||f.type);return t.createElement(Ze.Z,Object.assign({id:n,placeholder:r,label:R?s||f.title:!1,autoFocus:b,required:l,disabled:c||i,type:P,value:v||v===0?v:"",error:E.length>0,onChange:D,onBlur:T,onFocus:Z},p))},na=function(e){var n=e.id,r=e.required,l=e.readonly,i=e.disabled,c=e.label,d=e.value,s=e.onChange,v=e.onBlur,h=e.onFocus,g=e.autofocus,m=function(y){var C=y.target.value;return s(C)},b=function(y){var C=y.target.value;return v(n,C)},u=function(y){var C=y.target.value;return h(n,C)};return t.createElement(j.Z,{fullWidth:!0,required:r},t.createElement(Q.Z,null,c),t.createElement(Ie.Z,{id:n,autoFocus:g,required:r,type:"number",disabled:i||l,value:d||d===0?d:"",onChange:m,onBlur:b,onFocus:u}))},ra=function(e){var n=e.registry,r=n.widgets.TextWidget;return t.createElement(r,Object.assign({type:"url"},e))},la={CheckboxWidget:It,CheckboxesWidget:Ut,ColorWidget:$t,DateWidget:Vt,DateTimeWidget:Ht,EmailWidget:Yt,PasswordWidget:Gt,RadioWidget:Jt,RangeWidget:Qt,SelectWidget:_t,TextareaWidget:ea,TextWidget:aa,UpDownWidget:na,URLWidget:ra},oa=M.P6.c6,ze=oa(),ia=ze.fields,sa=ze.widgets,ca=function(){return t.createElement($.Z,{marginTop:3},t.createElement(z.Z,{type:"submit",variant:"contained",color:"primary"},"Submit"))},Ke={children:t.createElement(ca,null),ArrayFieldTemplate:Tt,fields:ce({},ia,Pt),FieldTemplate:Bt,ObjectFieldTemplate:Lt,widgets:ce({},sa,la),ErrorList:St},Ga=null,Ja=null,da=o(9850),ma=o.n(da),ua=o(31011),va=o(77120),Ea=o(42123),He=o(87685),ga=o(77799),Oe=o(72847),ha=o(48760),Ye=o(16190),Xa=o(32272),Qa=o(82394),qa=o(68111),_a=o(82108),en=o(72779),tn=o(26228),an=o(75951),nn=o(39362);const fa=(0,Y.Z)(a=>({cardHeader:{position:"relative"},title:{backgroundImage:({backgroundImage:e})=>e,color:({fontColor:e})=>e},box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},label:{color:a.palette.text.secondary,textTransform:"uppercase",fontSize:"0.65rem",fontWeight:"bold",letterSpacing:.5,lineHeight:1,paddingBottom:"0.2rem"},linksLabel:{padding:"0 16px"},description:{"& p":{margin:"0px"}},leftButton:{marginRight:"auto"},starButton:{position:"absolute",top:a.spacing(.5),right:a.spacing(.5),padding:"0.25rem",color:a.palette.common.white}})),Ge=({icon:a})=>t.createElement(a,null),pa=(0,Y.Z)(a=>({deprecationIcon:{position:"absolute",top:a.spacing(.5),right:a.spacing(3.5),padding:"0.25rem"},link:{color:a.palette.warning.light}})),ya=a=>{var e,n,r,l,i,c;return{key:a.metadata.uid,name:a.metadata.name,title:`${(e=a.metadata.title||a.metadata.name)!=null?e:""}`,type:(n=a.spec.type)!=null?n:"",description:(r=a.metadata.description)!=null?r:"-",tags:(i=(l=a.metadata)==null?void 0:l.tags)!=null?i:[],links:(c=a.metadata.links)!=null?c:[]}},ba=()=>{const a=pa(),e=t.createElement(I.Z,{style:{padding:10,maxWidth:300}},"This template uses a syntax that has been deprecated, and should be migrated to a newer syntax. Click for more info.");return t.createElement("div",{className:a.deprecationIcon},t.createElement(ne.ZP,{title:e},t.createElement(A.rU,{to:"https://backstage.io/docs/features/software-templates/migrating-from-v1beta2-to-v1beta3",className:a.link},t.createElement(Ee.Z,null))))},Ca=({template:a,deprecated:e})=>{var n,r,l;const i=(0,x.qD)(),c=(0,ye.Z)(),d=(0,x.tg)(O.s),s=ya(a),v=(0,L.hF)(a,F.S4),h=c.getPageTheme({themeId:s.type})?s.type:"other",g=c.getPageTheme({themeId:h}),m=fa({fontColor:g.fontColor,backgroundImage:g.backgroundImage}),{name:b,namespace:u}=(0,F.of)((0,F.eE)(a)),f=d({templateName:b,namespace:u}),y=(0,x.tg)(O.v),E=!!((n=a.metadata.annotations)==null?void 0:n["backstage.io/techdocs-ref"])&&!!y&&y({namespace:a.metadata.namespace||F.zG,kind:a.kind,name:a.metadata.name}),p=Z=>{var R;return Z&&(R=i.getSystemIcon(Z))!=null?R:_.Z},D=(0,x.h_)(k.q3),T=(0,L.CV)(a,D);return t.createElement(re.Z,null,t.createElement(ve.Z,{className:m.cardHeader},t.createElement(L.LH,{className:m.starButton,entity:a}),e&&t.createElement(ba,null),t.createElement(A.hu,{title:s.title,subtitle:s.type,classes:{root:m.title}})),t.createElement(ie.Z,{style:{display:"flex",flexDirection:"column",gap:"16px"}},t.createElement($.Z,{className:m.box},t.createElement(I.Z,{variant:"body2",className:m.label},"Description"),t.createElement(A.SA,{className:m.description,content:s.description})),t.createElement($.Z,{className:m.box},t.createElement(I.Z,{variant:"body2",className:m.label},"Owner"),t.createElement(L.rI,{entityRefs:v,defaultKind:"Group"})),t.createElement($.Z,null,t.createElement(I.Z,{style:{marginBottom:"4px"},variant:"body2",className:m.label},"Tags"),(r=s.tags)==null?void 0:r.map(Z=>t.createElement(be.Z,{size:"small",label:Z,key:Z})))),t.createElement(I.Z,{variant:"body2",className:[m.label,m.linksLabel].join(" ")},"Links"),t.createElement(Ce.Z,null,t.createElement("div",{className:m.leftButton},T&&t.createElement(ne.ZP,{title:T.integrationType||T.locationTargetUrl},t.createElement(X.Z,{className:m.leftButton,href:T.locationTargetUrl},t.createElement(k.nW,{type:T.integrationType}))),E&&t.createElement(ne.ZP,{title:"View TechDocs"},t.createElement(X.Z,{className:m.leftButton,href:E},t.createElement(Ge,{icon:p("docs")}))),(l=s.links)==null?void 0:l.map((Z,R)=>t.createElement(ne.ZP,{key:`${Z.url}_${R}`,title:Z.title||Z.url},t.createElement(X.Z,{size:"medium",href:Z.url},t.createElement(Ge,{icon:p(Z.icon)}))))),t.createElement(A.Qj,{color:"primary",to:f,"aria-label":`Choose ${s.title}`},"Choose")))},Je=({TemplateCardComponent:a,group:e})=>{const{loading:n,error:r,entities:l}=(0,L.wp)(),i=a||Ca,c=e?l.filter(s=>e.filter(s)):l,d=(()=>e&&e.title?typeof e.title=="string"?t.createElement(A.yW,{title:e.title}):e.title:t.createElement(A.yW,{title:"Other Templates"}))();return e&&c.length===0?null:t.createElement(t.Fragment,null,n&&t.createElement(A.Ex,null),r&&t.createElement(A.GB,{title:"Oops! Something went wrong loading the templates"},r.message),!r&&!n&&!l.length&&t.createElement(I.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",t.createElement(A.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."),t.createElement(A.VY,null,d,t.createElement(A.Oh,null,c&&(c==null?void 0:c.length)>0&&c.map(s=>t.createElement(i,{key:(0,F.eE)(s),template:s,deprecated:s.apiVersion==="backstage.io/v1beta2"})))))},Ta=(0,Y.Z)(a=>({button:{color:a.page.fontColor}}));function Fa(a){const e=Ta(),[n,r]=(0,t.useState)(),l=(0,x.tg)(O.e),i=(0,x.tg)(O.a),c=(0,x.tg)(O.b),d=(0,w.s0)(),s=a.editor!==!1,v=a.actions!==!1,h=a.tasks!==!1;if(!s&&!v)return null;const g=b=>{r(b.currentTarget)},m=()=>{r(void 0)};return t.createElement(t.Fragment,null,t.createElement(X.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:g,"data-testid":"menu-button",color:"inherit",className:e.button},t.createElement(st.Z,null)),t.createElement(rt.ZP,{open:Boolean(n),onClose:m,anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},t.createElement(nt.Z,null,s&&t.createElement(q.Z,{onClick:()=>d(l())},t.createElement(ge.Z,null,t.createElement(ot.Z,{fontSize:"small"})),t.createElement(he.Z,{primary:"Template Editor"})),v&&t.createElement(q.Z,{onClick:()=>d(i())},t.createElement(ge.Z,null,t.createElement(lt.Z,{fontSize:"small"})),t.createElement(he.Z,{primary:"Installed Actions"})),h&&t.createElement(q.Z,{onClick:()=>d(c())},t.createElement(ge.Z,null,t.createElement(it.Z,{fontSize:"small"})),t.createElement(he.Z,{primary:"Task List"})))))}const Za=({TemplateCardComponent:a,groups:e,contextMenu:n,headerOptions:r})=>{const l=(0,x.tg)(O.r),i={title:e?"Other Templates":"Templates",filter:d=>!(e!=null?e:[]).map(v=>v.filter(d)).some(v=>v===!0)},{allowed:c}=(0,at.gI)({permission:tt.x7});return t.createElement(A.T3,{themeId:"home"},t.createElement(A.h4,{pageTitleOverride:"Create a New Component",title:"Create a New Component",subtitle:"Create new software components using standard templates",...r},t.createElement(Fa,{...n})),t.createElement(A.VY,null,t.createElement(A.yW,{title:"Available Templates"},c&&t.createElement(A.XF,{title:"Register Existing Component",to:l&&l()}),t.createElement(A.qt,null,"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).")),t.createElement(L._i,null,t.createElement(L._i.Filters,null,t.createElement(L.nN,null),t.createElement(L.tW,{initialFilter:"template",hidden:!0}),t.createElement(L.EW,{initialFilter:"all",availableFilters:["all","starred"]}),t.createElement(O.T,null),t.createElement(L.xE,null)),t.createElement(L._i.Content,null,e&&e.map((d,s)=>t.createElement(Je,{key:s,TemplateCardComponent:a,group:d})),t.createElement(Je,{key:"other",TemplateCardComponent:a,group:i})))))},xa=({TemplateCardComponent:a,groups:e,contextMenu:n,headerOptions:r})=>t.createElement(L.UO,null,t.createElement(Za,{TemplateCardComponent:a,groups:e,contextMenu:n,headerOptions:r}));function J(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function ae(a,e){if(!J(a))return;const{properties:n,items:r,anyOf:l,oneOf:i,allOf:c,dependencies:d}=a;for(const s in a)a.hasOwnProperty(s)&&s.startsWith("ui:")&&(e[s]=a[s],delete a[s]);if(J(n))for(const s in n){if(!n.hasOwnProperty(s))continue;const v=n[s];if(!J(v))continue;const h={};e[s]=e[s]||h,ae(v,h)}if(J(r)){const s={};e.items=s,ae(r,s)}if(Array.isArray(l))for(const s of l)J(s)&&ae(s,e);if(Array.isArray(i))for(const s of i)J(s)&&ae(s,e);if(Array.isArray(c))for(const s of c)J(s)&&ae(s,e);if(J(d))for(const s of Object.keys(d)){const v=d[s];J(v)&&ae(v,e)}}function Sa(a,e=[]){var n;const r=a["ui:ObjectFieldTemplate"];a.type=a.type||"object";const l=JSON.parse(JSON.stringify(a));delete l.title;const i={};if(ae(l,i),r){const c=(n=e.find(d=>d.name===r))==null?void 0:n.component;c&&(i["ui:ObjectFieldTemplate"]=c)}return{schema:l,uiSchema:i}}var Xe=Object.freeze({__proto__:null,DescriptionField:({description:a})=>a&&t.createElement(A.SA,{content:a,linkTarget:"_blank"})});function Da(a,e){const n={},r=new Set(e.map(l=>l.name).concat(Object.getOwnPropertyNames(a)));for(const l of r){const i=e.find(d=>d.name===l);if(!i){n[l]=a[l];continue}if(i["ui:widget"]==="password"){n[l]="******";continue}if(!i["ui:backstage"]||!i["ui:backstage"].review){n[l]=a[l];continue}const c=i["ui:backstage"].review;if(c.mask){n[l]=c.mask;continue}c.show&&(n[l]=a[l])}return n}function Aa(a){const e=[];return a.forEach(n=>{const r=n.schema.properties;for(const l in r)if(r.hasOwnProperty(l)){const i=r[l];i.name=l,e.push(i)}}),e}const Oa=a=>{const{disableButtons:e,formData:n,handleBack:r,handleCreate:l,handleReset:i,steps:c}=a;return t.createElement(A.VY,null,t.createElement(le.Z,{square:!0,elevation:0},t.createElement(I.Z,{variant:"h6"},"Review and create"),t.createElement(A.xT,{dense:!0,metadata:Da(n,Aa(c.map(({mergedSchema:d})=>({schema:d}))))}),t.createElement($.Z,{mb:4}),t.createElement(z.Z,{onClick:r,disabled:e},"Back"),t.createElement(z.Z,{onClick:i,disabled:e},"Reset"),t.createElement(z.Z,{variant:"contained",color:"primary",onClick:l,disabled:e},"Create")))},Pa=(0,M.Zz)(Ke);function wa(a){return a.map(({schema:e})=>({mergedSchema:e,...(0,ua.mg)(e)}))}const Qe=a=>{const{formData:e,onChange:n,onReset:r,onFinish:l,fields:i,widgets:c,layouts:d,ReviewStepComponent:s}=a,{templateName:v}=(0,x.Oi)(O.s),h=(0,x.z$)(),[g,m]=(0,t.useState)(0),[b,u]=(0,t.useState)(!1),f=(0,x.h_)(x.VE),y=(0,x.h_)(x.W0),C="backstage:featureFlag",E=S=>{var N;const B=ma()(S),pe=[];return B.schema.properties&&(B.schema.properties=Object.fromEntries(Object.entries(B.schema.properties).filter(([me,_e])=>_e[C]?y.isActive(_e[C])?!0:(pe.push(me),!1):!0)),B.schema.required=Array.isArray(B.schema.required)?(N=B.schema.required)==null?void 0:N.filter(me=>!pe.includes(me)):B.schema.required),B},p=a.steps.filter(S=>{const N=S.schema[C];return typeof N!="string"||y.isActive(N)}).map(E),D=()=>{m(0),r()},T=()=>{const S=Math.min(g+1,p.length);m(S),h.captureEvent("click",`Next Step (${S})`)},Z=()=>m(Math.max(g-1,0)),R=async()=>{if(l){u(!0);try{await l(),h.captureEvent("create",e.name||`new ${v}`)}catch(S){f.post(S)}finally{u(!1)}}},P=s!=null?s:Oa;return t.createElement(t.Fragment,null,t.createElement(W.Z,{activeStep:g,orientation:"vertical"},p.map(({title:S,schema:N,...B},pe)=>t.createElement(V.Z,{key:S},t.createElement(K.Z,{"aria-label":`Step ${pe+1} ${S}`,"aria-disabled":"false",tabIndex:0},t.createElement(I.Z,{variant:"h6",component:"h3"},S)),t.createElement(H.Z,{key:S},t.createElement(Pa,{showErrorList:!1,fields:{...Xe,...i},widgets:c,noHtml5Validate:!0,formData:e,formContext:{formData:e},onChange:n,onSubmit:me=>{me.errors.length===0&&T()},...B,...Sa(N,d)},t.createElement(z.Z,{disabled:g===0,onClick:Z},"Back"),t.createElement(z.Z,{variant:"contained",color:"primary",type:"submit"},"Next step")))))),g===p.length&&t.createElement(P,{disableButtons:b,handleBack:Z,handleCreate:R,handleReset:D,formData:e,steps:wa(p)}))};function oe(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Wa(a){return typeof a=="object"&&a!==null&&Array.isArray(a)}const qe=(a,e,n)=>{function r(l,i,c){var d;const s=l.properties,v=l.type==="object"&&s===void 0;if(!(!oe(s)&&!v)){if(s)for(const[h,g]of Object.entries(i)){const m=c[h],b=f=>{if(f&&oe(f)){const y=f["ui:field"];y&&typeof e[y]=="function"&&e[y](g,m,n)}},u=s[h];if(oe(g)&&oe(u))r(u,g,m);else if(Wa(g)){if(oe(u)){const{items:f}=u;if(oe(f))if(f.type==="object"){const y=(d=f==null?void 0:f.properties)!=null?d:[];for(const[,C]of Object.entries(y))b(C)}else b(f)}}else b(u)}else if(v){const h=l["ui:field"];h&&typeof e[h]=="function"&&e[h](i,c,n)}}}return(l,i)=>(r(a,l,i),i)},Ba=a=>{const e=(0,x.h_)(te.lc),{value:n,loading:r,error:l}=(0,We.default)(()=>e.getTemplateParameterSchema(a),[e,a]);return{schema:n,loading:r,error:l}},Ra=({ReviewStepComponent:a,customFieldExtensions:e=[],layouts:n=[],headerOptions:r})=>{const l=(0,x.I_)(),i=(0,te.TD)(),c=(0,x.h_)(x.VE),d=(0,x.h_)(te.lc),{templateName:s,namespace:v}=(0,x.Oi)(O.s),h=(0,F.eE)({name:s,kind:"template",namespace:v}),g=(0,w.s0)(),m=(0,x.tg)(O.c),b=(0,x.tg)(O.d),{schema:u,loading:f,error:y}=Ba(h),[C,E]=(0,t.useState)(()=>{var P;const S=we().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(S.formData)}catch{return(P=S.formData)!=null?P:{}}}),p=()=>E({}),D=(0,t.useCallback)(P=>E(P.formData),[E]),T=async()=>{var P;const{taskId:S}=await d.scaffold({templateRef:h,values:C,secrets:i==null?void 0:i.secrets}),N=we().stringify({formData:C},{addQueryPrefix:!0}),B=`${window.location.pathname}${N}`;(P=window.history)==null||P.replaceState(null,document.title,B),g(m({taskId:S}))};if(y)return c.post(new Error(`Failed to load template, ${y}`)),t.createElement(w.Fg,{to:b()});if(!f&&!u)return c.post(new Error("Template was not found.")),t.createElement(w.Fg,{to:b()});const Z=Object.fromEntries(e.map(({name:P,component:S})=>[P,S])),R=Object.fromEntries(e.map(({name:P,validation:S})=>[P,S]));return t.createElement(x.fC,{attributes:{entityRef:h}},t.createElement(A.T3,{themeId:"home"},t.createElement(A.h4,{pageTitleOverride:"Create a New Component",title:"Create a New Component",subtitle:"Create new software components using standard templates",...r}),t.createElement(A.VY,null,f&&t.createElement(G.Z,{"data-testid":"loading-progress"}),u&&t.createElement(A.rJ,{title:u.title,noPadding:!0,titleTypographyProps:{component:"h2"}},t.createElement(Qe,{ReviewStepComponent:a,formData:C,fields:Z,onChange:D,onReset:p,onFinish:T,layouts:n,steps:u.steps.map(P=>({...P,validate:qe(P.schema,R,{apiHolder:l})}))})))))},Na=(0,Y.Z)({containerWrapper:{position:"relative",width:"100%",height:"100%"},container:{position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto"}});class La extends t.Component{constructor(){super(...arguments),this.state={shouldRender:!0}}componentDidUpdate(e){e.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(e){this.props.setErrorText(e.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function Pe(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function de(a){const{content:e,contentIsSpec:n,data:r,onUpdate:l,onDryRun:i,setErrorText:c,fieldExtensions:d=[],layouts:s=[]}=a,v=Na(),h=(0,x.I_)(),[g,m]=(0,t.useState)(),b=(0,t.useMemo)(()=>Object.fromEntries(d.map(({name:u,component:f})=>[u,f])),[d]);return(0,ha.Z)(()=>{try{if(!e){m(void 0);return}const u=Oe.ZP.parse(e);if(!Pe(u)){m(void 0);return}let f=u;if(!n){if(!(String(u.kind).toLocaleLowerCase("en-US")==="template")){m(void 0);return}f=Pe(u.spec)?u.spec:{}}const{parameters:y}=f;if(!Array.isArray(y)){c("Template parameters must be an array"),m(void 0);return}const C=Object.fromEntries(d.map(({name:E,validation:p})=>[E,p]));c(),m(y.flatMap(E=>Pe(E)?[{title:String(E.title),schema:E,validate:qe(E,C,{apiHolder:h})}]:[]))}catch(u){c(u.message)}},250,[n,e,h]),g?t.createElement("div",{className:v.containerWrapper},t.createElement("div",{className:v.container},t.createElement(La,{invalidator:g,setErrorText:c},t.createElement(Qe,{steps:g,fields:b,formData:r,onChange:u=>l(u.formData),onReset:()=>l({}),finishButtonLabel:i&&"Try It",onFinish:i&&(()=>i(r)),layouts:s})))):null}function ka(a){const{setErrorText:e,fieldExtensions:n=[],layouts:r}=a,l=(0,O.u)(),i=(0,O.f)(),{selectedFile:c}=i,[d,s]=(0,t.useState)({}),v=async()=>{if(c)try{await l.execute({templateContent:c.content,values:d,files:i.files}),e()}catch(g){throw e(String(g.cause||g)),g}},h=c&&c.path.match(/\.ya?ml$/)?c.content:void 0;return t.createElement(de,{onDryRun:v,fieldExtensions:n,setErrorText:e,content:h,data:d,onUpdate:s,layouts:r})}de.DirectoryEditorDryRun=ka;const Ia=(0,M.Zz)(Ke),ja=(0,Y.Z)(a=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:a.spacing(1)},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview"}})),Ma=({customFieldExtensions:a=[],onClose:e})=>{var n,r;const l=ja(),i=a.filter(E=>!!E.schema),[c,d]=(0,t.useState)(i[0]),[s,v]=(0,t.useState)({}),[h,g]=(0,t.useState)({}),[m,b]=(0,t.useState)(Date.now()),u=(0,t.useMemo)(()=>{var E,p;return Oe.ZP.stringify({parameters:[{title:`${c.name} Example`,properties:{[c.name]:{type:(p=(E=c.schema)==null?void 0:E.returnValue)==null?void 0:p.type,"ui:field":c.name,"ui:options":s}}}]})},[s,c]),f=(0,t.useMemo)(()=>Object.fromEntries(a.map(({name:E,component:p})=>[E,p])),[a]),y=(0,t.useCallback)(E=>{d(E),v({}),g({})},[v,g,d]),C=(0,t.useCallback)(E=>{v(E),g({}),b(Date.now())},[v,b]);return t.createElement("main",{className:l.root},t.createElement("div",{className:l.controls},t.createElement(j.Z,{variant:"outlined",size:"small",fullWidth:!0},t.createElement(Q.Z,{id:"select-field-label"},"Choose Custom Field Extension"),t.createElement(ee.Z,{value:c,label:"Choose Custom Field Extension",labelId:"select-field-label",onChange:E=>y(E.target.value)},i.map((E,p)=>t.createElement(q.Z,{key:p,value:E},E.name)))),t.createElement(X.Z,{size:"medium",onClick:e},t.createElement(He.Z,null))),t.createElement("div",{className:l.fieldForm},t.createElement(re.Z,null,t.createElement(se.Z,{title:"Field Options"}),t.createElement(ie.Z,null,t.createElement(Ia,{showErrorList:!1,fields:{...Xe,...f},noHtml5Validate:!0,formData:s,formContext:{fieldFormState:s},onSubmit:E=>C(E.formData),schema:((n=c.schema)==null?void 0:n.uiOptions)||{}},t.createElement(z.Z,{variant:"contained",color:"primary",type:"submit",disabled:!((r=c.schema)!=null&&r.uiOptions)},"Apply"))))),t.createElement("div",{className:l.preview},t.createElement(re.Z,null,t.createElement(se.Z,{title:"Example Template Spec"}),t.createElement(ie.Z,null,t.createElement(ga.ZP,{readOnly:!0,theme:"dark",height:"100%",extensions:[va.il.define(Ea.r)],value:u}))),t.createElement(de,{key:m,content:u,contentIsSpec:!0,fieldExtensions:a,data:h,onUpdate:g,setErrorText:()=>null})))},Ua=(0,Y.Z)({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"1fr auto"},browser:{gridArea:"browser",overflow:"auto"},editor:{gridArea:"editor",overflow:"auto"},preview:{gridArea:"preview",overflow:"auto"},results:{gridArea:"results"}}),$a=a=>{const e=Ua(),[n,r]=(0,t.useState)();return t.createElement(O.D,{directory:a.directory},t.createElement(O.g,null,t.createElement("main",{className:e.root},t.createElement("section",{className:e.browser},t.createElement(O.h,{onClose:a.onClose})),t.createElement("section",{className:e.editor},t.createElement(O.i.DirectoryEditor,{errorText:n})),t.createElement("section",{className:e.preview},t.createElement(de.DirectoryEditorDryRun,{setErrorText:r,fieldExtensions:a.fieldExtensions,layouts:a.layouts})),t.createElement("section",{className:e.results},t.createElement(O.j,null)))))},Va=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,za=(0,Y.Z)(a=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:a.spacing(1)},textArea:{gridArea:"textArea"},preview:{gridArea:"preview"}})),Ka=({defaultPreviewTemplate:a=Va,customFieldExtensions:e=[],onClose:n,layouts:r=[]})=>{const l=za(),i=(0,x.h_)(x.$v),c=(0,x.h_)(L.Ah),[d,s]=(0,t.useState)(""),[v,h]=(0,t.useState)(),[g,m]=(0,t.useState)([]),[b,u]=(0,t.useState)(a),[f,y]=(0,t.useState)({}),{loading:C}=(0,We.default)(()=>c.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:p})=>m(p.map(D=>{var T;return{label:(T=D.metadata.title)!=null?T:(0,L.$3)(D,{defaultKind:"template"}),value:D}}))).catch(p=>i.post({message:`Error loading exisiting templates: ${p.message}`,severity:"error"})),[c]),E=(0,t.useCallback)(p=>{s(p),u(Oe.ZP.stringify(p.spec))},[u]);return t.createElement(t.Fragment,null,C&&t.createElement(G.Z,null),t.createElement("main",{className:l.root},t.createElement("div",{className:l.controls},t.createElement(j.Z,{variant:"outlined",size:"small",fullWidth:!0},t.createElement(Q.Z,{id:"select-template-label"},"Load Existing Template"),t.createElement(ee.Z,{value:d,label:"Load Existing Template",labelId:"select-template-label",onChange:p=>E(p.target.value)},g.map((p,D)=>t.createElement(q.Z,{key:D,value:p.value},p.label)))),t.createElement(X.Z,{size:"medium",onClick:n},t.createElement(He.Z,null))),t.createElement("div",{className:l.textArea},t.createElement(O.i,{content:b,onUpdate:u,errorText:v})),t.createElement("div",{className:l.preview},t.createElement(de,{content:b,contentIsSpec:!0,fieldExtensions:e,data:f,onUpdate:y,setErrorText:h,layouts:r}))))};function Ha(a){const[e,n]=(0,t.useState)();let r=null;return(e==null?void 0:e.type)==="local"?r=t.createElement($a,{directory:e.directory,fieldExtensions:a.customFieldExtensions,onClose:()=>n(void 0),layouts:a.layouts}):(e==null?void 0:e.type)==="form"?r=t.createElement(Ka,{defaultPreviewTemplate:a.defaultPreviewTemplate,customFieldExtensions:a.customFieldExtensions,onClose:()=>n(void 0),layouts:a.layouts}):(e==null?void 0:e.type)==="field-explorer"?r=t.createElement(Ma,{customFieldExtensions:a.customFieldExtensions,onClose:()=>n(void 0)}):r=t.createElement(A.VY,null,t.createElement(O.k,{onSelect:l=>{l==="local"?O.W.requestDirectoryAccess().then(i=>n({type:"local",directory:i})).catch(()=>{}):l==="form"?n({type:"form"}):l==="field-explorer"&&n({type:"field-explorer"})}})),t.createElement(A.T3,{themeId:"home"},t.createElement(A.h4,{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms"}),r)}const Ya=a=>{const{groups:e,components:n={},defaultPreviewTemplate:r}=a,{ReviewStepComponent:l,TemplateCardComponent:i,TaskPageComponent:c}=n,d=(0,w.pC)(),s=c!=null?c:O.m,v=(0,te.PT)(d),h=[...v,...Ye.D.filter(({name:b})=>!v.some(u=>u.name===b))],g=(0,te.zS)(d),m=()=>{const{templateName:b}=(0,x.Oi)(O.l),u=(0,x.tg)(O.s);return(0,t.useEffect)(()=>console.warn("The route /template/:templateName is deprecated, please use the new /template/:namespace/:templateName route instead"),[]),t.createElement(w.Fg,{to:u({namespace:"default",templateName:b})})};return t.createElement(w.Z5,null,t.createElement(w.AW,{path:"/",element:t.createElement(xa,{groups:e,TemplateCardComponent:i,contextMenu:a.contextMenu,headerOptions:a.headerOptions})}),t.createElement(w.AW,{path:O.l.path,element:t.createElement(m,null)}),t.createElement(w.AW,{path:O.s.path,element:t.createElement(te.A3,null,t.createElement(Ra,{ReviewStepComponent:l,customFieldExtensions:h,layouts:g,headerOptions:a.headerOptions}))}),t.createElement(w.AW,{path:O.b.path,element:t.createElement(Ye.L,null)}),t.createElement(w.AW,{path:O.c.path,element:t.createElement(s,null)}),t.createElement(w.AW,{path:O.a.path,element:t.createElement(O.A,null)}),t.createElement(w.AW,{path:O.e.path,element:t.createElement(te.A3,null,t.createElement(Ha,{defaultPreviewTemplate:r,customFieldExtensions:h,layouts:g}))}),t.createElement(w.AW,{path:"preview",element:t.createElement(w.Fg,{to:"../edit"})}))}}}]);})();

//# sourceMappingURL=9478.1e91ec8e.chunk.js.map