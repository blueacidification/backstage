"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:function(Kt,d,e){e.d(d,{r:function(){return Vt}});var n=e(53907),c=e(30705),m=e(56563),u=e(2784),r=e(77277),l=e(49558),C=e(73557),_=e(39857),t=e(43642),y=e(80079),f=e(90941),F=e(32915),B=e(40562),k=e(21853),X=e(60744),A=e(66569),D=e(30254),N=e(13384),p=e(15933),h=e(58838),b=e(86737),E=e(4989),S=e(44407),K=e(18628),pe=e(84219),he=e(98685),Fe=e(39781),ct=e(73689),Ut=e(48032),dt=e(34505);const Wt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},Ct={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function G(de){var Tt;const{colors:xt,shape:ln,options:mn}=de,Ln=`linear-gradient(90deg, ${(xt.length===1?[xt[0],xt[0]]:xt).join(", ")})`,it=`${ln},  ${Ln}`,$e=(Tt=mn==null?void 0:mn.fontColor)!=null?Tt:"#FFFFFF";return{colors:xt,shape:ln,backgroundImage:it,fontColor:$e}}const fn={home:G({colors:Ct.teal,shape:Wt.wave}),documentation:G({colors:Ct.pinkSea,shape:Wt.wave2}),tool:G({colors:Ct.purpleSky,shape:Wt.round}),service:G({colors:Ct.marineBlue,shape:Wt.wave}),website:G({colors:Ct.veryBlue,shape:Wt.wave}),library:G({colors:Ct.rubyRed,shape:Wt.wave}),other:G({colors:Ct.darkGrey,shape:Wt.wave}),app:G({colors:Ct.toastyOrange,shape:Wt.wave}),apis:G({colors:Ct.teal,shape:Wt.wave2}),card:G({colors:Ct.greens,shape:Wt.wave})},Et=16,je='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif';function P(de){const{palette:Tt,htmlFontSize:xt=Et,fontFamily:ln=je,defaultPageTheme:mn,pageTheme:dn=fn}=de;if(!dn[mn])throw new Error(`${mn} is not defined in pageTheme.`);return{palette:Tt,props:{MuiGrid:{spacing:2},MuiSwitch:{color:"primary"}},typography:{htmlFontSize:xt,fontFamily:ln,h6:{fontWeight:700,fontSize:20,marginBottom:2},h5:{fontWeight:700,fontSize:24,marginBottom:4},h4:{fontWeight:700,fontSize:28,marginBottom:6},h3:{fontSize:32,fontWeight:700,marginBottom:6},h2:{fontSize:40,fontWeight:700,marginBottom:8},h1:{fontSize:54,fontWeight:700,marginBottom:10}},page:dn[mn],getPageTheme:({themeId:Ln})=>{var it;return(it=dn[Ln])!=null?it:dn[mn]}}}function Ue(de){return{MuiCssBaseline:{"@global":{html:{height:"100%",fontFamily:de.typography.fontFamily},body:{height:"100%",fontFamily:de.typography.fontFamily,"overscroll-behavior-y":"none"},a:{color:"inherit",textDecoration:"none"}}},MuiTableRow:{root:{"&:nth-of-type(odd)":{backgroundColor:de.palette.background.default}},hover:{"&:hover":{cursor:"pointer"}},head:{"&:nth-of-type(odd)":{backgroundColor:de.palette.background.paper}}},MuiTableCell:{root:{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:de.spacing(3,2,3,2.5),borderBottom:0},sizeSmall:{padding:de.spacing(1.5,2,1.5,2.5)},head:{wordBreak:"break-word",overflow:"hidden",color:de.palette.textSubtle,fontWeight:"normal",lineHeight:"1"}},MuiTabs:{root:{minHeight:24}},MuiTab:{root:{color:de.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,Ut.darken)(de.palette.link,.3),background:(0,Ut.lighten)(de.palette.link,.95)},[de.breakpoints.up("md")]:{minWidth:120,fontSize:de.typography.pxToRem(14),fontWeight:500}},textColorPrimary:{color:de.palette.link}},MuiTableSortLabel:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"}},active:{fontWeight:"bold",color:"inherit"}},MuiListItemText:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},MuiButton:{text:{padding:void 0}},MuiChip:{root:{backgroundColor:"#D9D9D9",marginRight:de.spacing(1),marginBottom:de.spacing(1),color:de.palette.grey[900]},outlined:{color:de.palette.text.primary},label:{lineHeight:`${de.spacing(2.5)}px`,fontWeight:de.typography.fontWeightMedium,fontSize:`${de.spacing(1.75)}px`},labelSmall:{fontSize:`${de.spacing(1.5)}px`},deleteIcon:{color:de.palette.grey[500],width:`${de.spacing(3)}px`,height:`${de.spacing(3)}px`,margin:`0 ${de.spacing(.75)}px 0 -${de.spacing(.75)}px`},deleteIconSmall:{width:`${de.spacing(2)}px`,height:`${de.spacing(2)}px`,margin:`0 ${de.spacing(.5)}px 0 -${de.spacing(.5)}px`}},MuiCard:{root:{display:"flex",flexDirection:"column"}},MuiCardHeader:{root:{paddingBottom:0}},MuiCardContent:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}},MuiCardActions:{root:{justifyContent:"flex-end"}}}}function H(de){const Tt=P(de),xt=(0,ct.Z)(Tt),ln=Ue(xt);return{...xt,overrides:ln}}const R=H({palette:{type:"light",background:{default:"#F8F8F8"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#2E77D0",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#2E77D0"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:dt.Z.A700,navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:fn}),W=H({palette:{type:"dark",background:{default:"#333333"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:dt.Z.A700,navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},defaultPageTheme:"home",pageTheme:fn});var ge=e(98192),Me=e(15222),et=e(41547),pt=e(87561);const mt=[(0,c.ni)({api:c.NW,deps:{configApi:c.Ds},factory:({configApi:de})=>n.pM.compile(`${de.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,c.ni)({api:c.$v,deps:{},factory:()=>new n.CX}),(0,c.ni)({api:c.v_,deps:{},factory:()=>new n.gN}),(0,c.ni)({api:c.VE,deps:{alertApi:c.$v},factory:({alertApi:de})=>{const Tt=new n.KN(de,new n.gr);return n.Jv.forward(Tt,{hidden:!1}),Tt}}),(0,c.ni)({api:c.E6,deps:{errorApi:c.VE},factory:({errorApi:de})=>n.CJ.create({errorApi:de})}),(0,c.ni)({api:c.gP,deps:{configApi:c.Ds,identityApi:c.$4,discoveryApi:c.NW},factory:({configApi:de,identityApi:Tt,discoveryApi:xt})=>(0,n.jJ)({middleware:[n.II.resolvePluginProtocol({discoveryApi:xt}),n.II.injectIdentityAuth({identityApi:Tt,config:de})]})}),(0,c.ni)({api:c.ZM,deps:{},factory:()=>new n.YM}),(0,c.ni)({api:c.Kp,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.eE.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.p_,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n._i.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.F4,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.Td.create({discoveryApi:de,oauthRequestApi:Tt,defaultScopes:["read:user"],environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.D,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.sn.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.ux,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.aq.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.gW,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.$_.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.bq,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.xP.create({discoveryApi:de,oauthRequestApi:Tt,defaultScopes:["team"],environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:c.Km,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM},factory:({discoveryApi:de,oauthRequestApi:Tt})=>n.C4.create({discoveryApi:de,oauthRequestApi:Tt,defaultScopes:["REPO_READ"]})}),(0,c.ni)({api:c.uB,deps:{discoveryApi:c.NW,oauthRequestApi:c.ZM,configApi:c.Ds},factory:({discoveryApi:de,oauthRequestApi:Tt,configApi:xt})=>n.uC.create({discoveryApi:de,oauthRequestApi:Tt,environment:xt.getOptionalString("auth.environment")})}),(0,c.ni)({api:m.RV,deps:{discovery:c.NW,identity:c.$4,config:c.Ds},factory:({config:de,discovery:Tt,identity:xt})=>m.iM.create({config:de,discovery:Tt,identity:xt})})];function Dt({children:de}){return(0,C.GV)()?u.createElement(u.Fragment,null,de):u.createElement(C.VA,null,de)}const ie=()=>u.createElement(l.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),o=({step:de,error:Tt})=>{let xt="";return de==="load-config"?xt=`The configuration failed to load, someone should have a look at this error: ${Tt.message}`:de==="load-chunk"&&(xt=`Lazy loaded chunk failed to load, try to reload the page: ${Tt.message}`),u.createElement(Dt,null,u.createElement(l.mf,{status:"501",statusMessage:xt}))},xe=({error:de,resetError:Tt,plugin:xt})=>u.createElement(l.yu,{title:`Error in ${xt==null?void 0:xt.getId()}`,defaultExpanded:!0,error:de},u.createElement(r.Z,{variant:"outlined",onClick:Tt},"Retry")),be={Progress:l.Ex,Router:_.VK,NotFoundErrorPage:ie,BootErrorPage:o,ErrorBoundaryFallback:xe},Rt={brokenImage:y.Z,catalog:K.Z,scaffolder:F.Z,techdocs:B.Z,search:k.Z,chat:X.Z,dashboard:A.Z,docs:D.Z,email:N.Z,github:h.Z,group:pe.Z,help:b.Z,"kind:api":p.Z,"kind:component":S.Z,"kind:domain":t.Z,"kind:group":pe.Z,"kind:location":E.Z,"kind:system":f.Z,"kind:user":he.Z,user:he.Z,warning:Fe.Z},vt=[{id:"light",title:"Light Theme",variant:"light",icon:u.createElement(Me.Z,null),Provider:({children:de})=>u.createElement(et.Z,{theme:R},u.createElement(pt.ZP,null,de))},{id:"dark",title:"Dark Theme",variant:"dark",icon:u.createElement(ge.Z,null),Provider:({children:de})=>u.createElement(et.Z,{theme:W},u.createElement(pt.ZP,null,de))}];function Vt(de){var Tt,xt,ln,mn;return(0,n.bg)({...de,apis:(Tt=de==null?void 0:de.apis)!=null?Tt:[],bindRoutes:de==null?void 0:de.bindRoutes,components:{...be,...de==null?void 0:de.components},configLoader:de==null?void 0:de.configLoader,defaultApis:mt,icons:{...Rt,...de==null?void 0:de.icons},plugins:(xt=de==null?void 0:de.plugins)!=null?xt:[],featureFlags:(ln=de==null?void 0:de.featureFlags)!=null?ln:[],themes:(mn=de==null?void 0:de.themes)!=null?mn:vt})}},88285:function(Kt,d,e){e.d(d,{MS:function(){return C},mk:function(){return _},n3:function(){return r}});var n=e(34520),c=e(32272),m=e(96279),u=e.n(m);const r=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function l(t){return!t.cursor}class C{constructor(y){this.discoveryApi=y.discoveryApi,this.fetchApi=y.fetchApi||{fetch:u()}}async getEntityAncestors(y,f){const{kind:F,namespace:B,name:k}=(0,n.of)(y.entityRef);return await this.requestRequired("GET",`/entities/by-name/${encodeURIComponent(F)}/${encodeURIComponent(B)}/${encodeURIComponent(k)}/ancestry`,f)}async getLocationById(y,f){return await this.requestOptional("GET",`/locations/${encodeURIComponent(y)}`,f)}async getEntities(y,f){const{filter:F=[],fields:B=[],order:k,offset:X,limit:A,after:D}=y!=null?y:{},N=this.getParams(F);if(B.length&&N.push(`fields=${B.map(encodeURIComponent).join(",")}`),k)for(const E of[k].flat())E&&N.push(`order=${encodeURIComponent(E.order)}:${encodeURIComponent(E.field)}`);X!==void 0&&N.push(`offset=${X}`),A!==void 0&&N.push(`limit=${A}`),D!==void 0&&N.push(`after=${encodeURIComponent(D)}`);const p=N.length?`?${N.join("&")}`:"",h=await this.requestRequired("GET",`/entities${p}`,f),b=(E,S)=>{var K,pe;if(((K=E.metadata)==null?void 0:K.name)===void 0||E.kind===void 0||((pe=S.metadata)==null?void 0:pe.name)===void 0||S.kind===void 0)return 0;const he=(0,n.eE)(E),Fe=(0,n.eE)(S);return he<Fe?-1:he>Fe?1:0};return{items:h.sort(b)}}async getEntitiesByRefs(y,f){var F;const B={entityRefs:y.entityRefs};(F=y.fields)!=null&&F.length&&(B.fields=y.fields);const X=`${await this.discoveryApi.getBaseUrl("catalog")}/entities/by-refs`,A=await this.fetchApi.fetch(X,{headers:{"Content-Type":"application/json",...(f==null?void 0:f.token)&&{Authorization:`Bearer ${f==null?void 0:f.token}`}},method:"POST",body:JSON.stringify(B)});if(!A.ok)throw await c.VL.fromResponse(A);const{items:D}=await A.json();return{items:D.map(N=>N!=null?N:void 0)}}async queryEntities(y={},f){var F,B;const k=[];if(l(y)){const{fields:A=[],filter:D,limit:N,orderFields:p,fullTextFilter:h}=y;k.push(...this.getParams(D)),N!==void 0&&k.push(`limit=${N}`),p!==void 0&&(Array.isArray(p)?p:[p]).forEach(({field:E,order:S})=>k.push(`sortField=${E},${S}`)),A.length&&k.push(`fields=${A.map(encodeURIComponent).join(",")}`);const b=(F=h==null?void 0:h.term)==null?void 0:F.trim();b&&k.push(`fullTextFilterTerm=${b}`),(B=h==null?void 0:h.fields)!=null&&B.length&&k.push(`fullTextFilterFields=${h.fields.join(",")}`)}else{const{fields:A=[],limit:D,cursor:N}=y;k.push(`cursor=${N}`),D!==void 0&&k.push(`limit=${D}`),A.length&&k.push(`fields=${A.map(encodeURIComponent).join(",")}`)}const X=k.length?`?${k.join("&")}`:"";return this.requestRequired("GET",`/entities/by-query${X}`,f)}async getEntityByRef(y,f){const{kind:F,namespace:B,name:k}=(0,n.of)(y);return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(F)}/${encodeURIComponent(B)}/${encodeURIComponent(k)}`,f)}async getEntityByName(y,f){const{kind:F,namespace:B="default",name:k}=y;return this.requestOptional("GET",`/entities/by-name/${encodeURIComponent(F)}/${encodeURIComponent(B)}/${encodeURIComponent(k)}`,f)}async refreshEntity(y,f){const F=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/refresh`,{headers:{"Content-Type":"application/json",...(f==null?void 0:f.token)&&{Authorization:`Bearer ${f==null?void 0:f.token}`}},method:"POST",body:JSON.stringify({entityRef:y})});if(F.status!==200)throw new Error(await F.text())}async getEntityFacets(y,f){const{filter:F=[],facets:B}=y,k=this.getParams(F);for(const A of B)k.push(`facet=${encodeURIComponent(A)}`);const X=k.length?`?${k.join("&")}`:"";return await this.requestOptional("GET",`/entity-facets${X}`,f)}async addLocation(y,f){const{type:F="url",target:B,dryRun:k}=y,X=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/locations${k?"?dryRun=true":""}`,{headers:{"Content-Type":"application/json",...(f==null?void 0:f.token)&&{Authorization:`Bearer ${f==null?void 0:f.token}`}},method:"POST",body:JSON.stringify({type:F,target:B})});if(X.status!==201)throw new Error(await X.text());const{location:A,entities:D,exists:N}=await X.json();if(!A)throw new Error(`Location wasn't added: ${B}`);return{location:A,entities:D,exists:N}}async getLocationByRef(y,f){return(await this.requestRequired("GET","/locations",f)).map(B=>B.data).find(B=>y===(0,n.NZ)(B))}async removeLocationById(y,f){await this.requestIgnored("DELETE",`/locations/${encodeURIComponent(y)}`,f)}async removeEntityByUid(y,f){await this.requestIgnored("DELETE",`/entities/by-uid/${encodeURIComponent(y)}`,f)}async validateEntity(y,f,F){const B=await this.fetchApi.fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/validate-entity`,{headers:{"Content-Type":"application/json",...(F==null?void 0:F.token)&&{Authorization:`Bearer ${F==null?void 0:F.token}`}},method:"POST",body:JSON.stringify({entity:y,location:f})});if(B.ok)return{valid:!0};if(B.status!==400)throw await c.VL.fromResponse(B);const{errors:k=[]}=await B.json();return{valid:!1,errors:k}}async requestIgnored(y,f,F){const B=`${await this.discoveryApi.getBaseUrl("catalog")}${f}`,k=F!=null&&F.token?{Authorization:`Bearer ${F.token}`}:{},X=await this.fetchApi.fetch(B,{method:y,headers:k});if(!X.ok)throw await c.VL.fromResponse(X)}async requestRequired(y,f,F){const B=`${await this.discoveryApi.getBaseUrl("catalog")}${f}`,k=F!=null&&F.token?{Authorization:`Bearer ${F.token}`}:{},X=await this.fetchApi.fetch(B,{method:y,headers:k});if(!X.ok)throw await c.VL.fromResponse(X);return X.json()}async requestOptional(y,f,F){const B=`${await this.discoveryApi.getBaseUrl("catalog")}${f}`,k=F!=null&&F.token?{Authorization:`Bearer ${F.token}`}:{},X=await this.fetchApi.fetch(B,{method:y,headers:k});if(!X.ok){if(X.status===404)return;throw await c.VL.fromResponse(X)}return await X.json()}getParams(y=[]){const f=[];for(const F of[y].flat()){const B=[];for(const[k,X]of Object.entries(F))for(const A of[X].flat())A===r?B.push(encodeURIComponent(k)):typeof A=="string"&&B.push(`${encodeURIComponent(k)}=${encodeURIComponent(A)}`);B.length&&f.push(`filter=${B.join(",")}`)}return f}}const _="backstage.io/catalog-processing"},34520:function(Kt,d,e){e.d(d,{$1:function(){return Kn},CV:function(){return I},Dg:function(){return sa},In:function(){return ne},KS:function(){return Qa},M6:function(){return Ra},M_:function(){return jn},NZ:function(){return g},Ou:function(){return i},P1:function(){return Pa},S4:function(){return yn},Tf:function(){return X},X9:function(){return zn},Zj:function(){return ua},_b:function(){return Ha},aS:function(){return Ja},cz:function(){return pr},eE:function(){return S},hr:function(){return er},iB:function(){return b},l2:function(){return k},nP:function(){return _a},of:function(){return E},q1:function(){return ya},w$:function(){return Ga},wP:function(){return ur},y$:function(){return M},zG:function(){return B}});var n=e(76635),c=e.n(n),m=e(53911),u=e.n(m);function r(w){return w.kind.toLocaleUpperCase("en-US")==="API"}function l(w){return w.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function C(w){return w.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function _(w){return w.kind.toLocaleUpperCase("en-US")==="GROUP"}function t(w){return w.kind.toLocaleUpperCase("en-US")==="LOCATION"}function y(w){return w.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function f(w){return w.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function F(w){return w.kind.toLocaleUpperCase("en-US")==="USER"}const B="default",k="backstage.io/view-url",X="backstage.io/edit-url",A="kubernetes.io/api-server",D="kubernetes.io/api-server-certificate-authority",N="kubernetes.io/auth-provider";class p{constructor($=B){this.namespace=$}async enforce($){return $.metadata.namespace?$:lodash.merge({metadata:{namespace:this.namespace}},$)}}function h(w){let $=w.indexOf(":");const Re=w.indexOf("/");Re!==-1&&Re<$&&($=-1);const ze=$===-1?void 0:w.slice(0,$),ht=Re===-1?void 0:w.slice($+1,Re),Yt=w.slice(Math.max($+1,Re+1));if(ze===""||ht===""||Yt==="")throw new TypeError(`Entity reference "${w}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:ze,namespace:ht,name:Yt}}function b(w){return{kind:w.kind,namespace:w.metadata.namespace||B,name:w.metadata.name}}function E(w,$){var Re,ze,ht,Yt;if(!w)throw new Error("Entity reference must not be empty");const un=$==null?void 0:$.defaultKind,Tn=($==null?void 0:$.defaultNamespace)||B;let Mn,Cn,Yn;if(typeof w=="string"){const ta=h(w);Mn=(Re=ta.kind)!=null?Re:un,Cn=(ze=ta.namespace)!=null?ze:Tn,Yn=ta.name}else Mn=(ht=w.kind)!=null?ht:un,Cn=(Yt=w.namespace)!=null?Yt:Tn,Yn=w.name;if(Mn)if(Cn){if(!Yn){const ta=JSON.stringify(w);throw new Error(`Entity reference ${ta} had missing or empty name`)}}else{const ta=JSON.stringify(w);throw new Error(`Entity reference ${ta} had missing or empty namespace`)}else{const ta=JSON.stringify(w);throw new Error(`Entity reference ${ta} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Mn,namespace:Cn,name:Yn}}function S(w){var $,Re;let ze,ht,Yt;return"metadata"in w?(ze=w.kind,ht=($=w.metadata.namespace)!=null?$:B,Yt=w.metadata.name):(ze=w.kind,ht=(Re=w.namespace)!=null?Re:B,Yt=w.name),`${ze.toLocaleLowerCase("en-US")}:${ht.toLocaleLowerCase("en-US")}/${Yt.toLocaleLowerCase("en-US")}`}class K{constructor($){const{kind:Re,namespace:ze,name:ht}=E($,{defaultKind:"Group",defaultNamespace:B});if(Re.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=S({kind:Re,namespace:ze,name:ht})}async enforce($){if($.kind!=="Group")return $;const Re=$;return Re.spec.parent||S(Re)!==this.parentRef&&(Re.spec.parent=this.parentRef),Re}}class pe{static isValidPrefixAndOrSuffix($,Re,ze,ht){if(typeof $!="string")return!1;const Yt=$.split(Re);return Yt.length===1?ht(Yt[0]):Yt.length===2?ze(Yt[0])&&ht(Yt[1]):!1}static isJsonSafe($){try{return c().isEqual($,JSON.parse(JSON.stringify($)))}catch{return!1}}static isValidDnsSubdomain($){return typeof $=="string"&&$.length>=1&&$.length<=253&&$.split(".").every(pe.isValidDnsLabel)}static isValidDnsLabel($){return typeof $=="string"&&$.length>=1&&$.length<=63&&/^[a-z0-9]+(\-[a-z0-9]+)*$/.test($)}static isValidTag($){return typeof $=="string"&&$.length>=1&&$.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test($)}static isValidUrl($){if(typeof $!="string")return!1;try{return new URL($),!0}catch{return!1}}static isValidString($){var Re;return typeof $=="string"&&((Re=$==null?void 0:$.trim())==null?void 0:Re.length)>=1}static isNonEmptyString($){var Re;return typeof $=="string"&&((Re=$==null?void 0:$.trim())==null?void 0:Re.length)>=1}}var he="http://json-schema.org/draft-07/schema",Fe="EntityEnvelope",ct="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",Ut=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],dt="object",Wt=["apiVersion","kind","metadata"],Ct=!0,G={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},fn={$schema:he,$id:Fe,description:ct,examples:Ut,type:dt,required:Wt,additionalProperties:Ct,properties:G},Et="http://json-schema.org/draft-07/schema",je="Entity",P="The parts of the format that's common to all versions/kinds of entity.",Ue=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],H="object",R=["apiVersion","kind","metadata"],W=!1,ge={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},Me={$schema:Et,$id:je,description:P,examples:Ue,type:H,required:R,additionalProperties:W,properties:ge},et="http://json-schema.org/draft-07/schema",pt="EntityMeta",mt="Metadata fields common to all versions/kinds of entity.",Dt=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],ie="object",o=["name"],xe=!0,be={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},Rt={$schema:et,$id:pt,description:mt,examples:Dt,type:ie,required:o,additionalProperties:xe,properties:be},vt="http://json-schema.org/draft-07/schema",Vt="common",de="object",Tt="Common definitions to import from other schemas",xt={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","target"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference"},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},ln={$schema:vt,$id:Vt,type:de,description:Tt,definitions:xt};const mn=new Map,dn=[fn,Me,Rt,ln];function Ln(w){if(!(w!=null&&w.length))throw new TypeError("Unknown error");const $=w[0];throw new TypeError(`${$.instancePath||"<root>"} ${$.message}${$.params?` - ${Object.entries($.params).map(([Re,ze])=>`${Re}: ${ze}`).join(", ")}`:""}`)}function it(w,$={}){var Re;const ze=(Re=$==null?void 0:$.disableCache)!=null?Re:!1,ht=ze?"":JSON.stringify(w);if(!ze){const Mn=mn.get(ht);if(Mn)return Mn}const Yt=$e(w),un=new(u())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});Yt.length&&un.addSchema(Yt,void 0,void 0,!0);const Tn=un.compile(w);return ze||mn.set(ht,Tn),Tn}function $e(w){if(typeof w!="object")return[];const $=new Set;w.$id&&$.add(w.$id);const Re=new Array,ze=[w];for(;ze.length;){const ht=ze.pop();for(const Yt of Zt(ht))if(!$.has(Yt)){$.add(Yt);const un=dn.find(Tn=>Tn.$id===Yt);un&&(Re.push(un),ze.push(un))}}return Re}function*Zt(w){const $=[w];for(;$.length;){const Re=$.pop();if(typeof Re=="object"&&Re)for(const[ze,ht]of Object.entries(Re))ze==="$ref"&&typeof ht=="string"?yield ht.split("#")[0]:$.push(ht)}}function Je(w){const $=it(w||fn);return Re=>{if($(Re)===!0)return Re;throw Ln($.errors)}}function Pe(w){const $=it(w);return Re=>{var ze;if($(Re)===!0)return Re;const Yt=(ze=$.errors)==null?void 0:ze.filter(un=>["/kind","/apiVersion"].includes(un.instancePath));if(Yt!=null&&Yt.length&&Yt.every(un=>un.keyword==="enum"))return!1;throw Ln($.errors)}}function T(w){const $=it(w||Me);return Re=>{if($(Re)===!0)return Re;throw Ln($.errors)}}class M{static isValidApiVersion($){return pe.isValidPrefixAndOrSuffix($,"/",pe.isValidDnsSubdomain,Re=>Re.length>=1&&Re.length<=63&&/^[a-z0-9A-Z]+$/.test(Re))}static isValidKind($){return typeof $=="string"&&$.length>=1&&$.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test($)}static isValidObjectName($){return typeof $=="string"&&$.length>=1&&$.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test($)}static isValidNamespace($){return pe.isValidDnsLabel($)}static isValidLabelKey($){return pe.isValidPrefixAndOrSuffix($,"/",pe.isValidDnsSubdomain,M.isValidObjectName)}static isValidLabelValue($){return $===""||M.isValidObjectName($)}static isValidAnnotationKey($){return pe.isValidPrefixAndOrSuffix($,"/",pe.isValidDnsSubdomain,M.isValidObjectName)}static isValidAnnotationValue($){return typeof $=="string"}}const J={isValidApiVersion:M.isValidApiVersion,isValidKind:M.isValidKind,isValidEntityName:M.isValidObjectName,isValidNamespace:M.isValidNamespace,isValidLabelKey:M.isValidLabelKey,isValidLabelValue:M.isValidLabelValue,isValidAnnotationKey:M.isValidAnnotationKey,isValidAnnotationValue:M.isValidAnnotationValue,isValidTag:w=>typeof w=="string"&&w.length>=1&&w.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(w)};function ne(w={}){return{...J,...w}}class re{constructor($=ne()){this.validators=$}async enforce($){var Re,ze,ht,Yt,un,Tn,Mn;function Cn(In,xa,V){if(xa==null)throw new Error(`${In} must have a value`);let ve;try{ve=V(xa)}catch(we){throw new Error(`${In} could not be validated, ${we}`)}if(!ve){let we;switch(V.name){case"isValidLabelValue":case"isValidObjectName":we="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":we="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":we="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":we="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":we="a string";break;case"isValidKind":we="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":we="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":we="a non empty string";break;default:we=void 0;break}const lt=we?` expected ${we} but found "${xa}".`:"";throw new Error(`"${In}" is not valid;${lt} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Yn(In,xa,V){return xa===void 0||Cn(In,xa,V)}Cn("apiVersion",$.apiVersion,this.validators.isValidApiVersion),Cn("kind",$.kind,this.validators.isValidKind),Cn("metadata.name",$.metadata.name,this.validators.isValidEntityName),Yn("metadata.namespace",$.metadata.namespace,this.validators.isValidNamespace);for(const[In,xa]of Object.entries((Re=$.metadata.labels)!=null?Re:[]))Cn(`labels.${In}`,In,this.validators.isValidLabelKey),Cn(`labels.${In}`,xa,this.validators.isValidLabelValue);for(const[In,xa]of Object.entries((ze=$.metadata.annotations)!=null?ze:[]))Cn(`annotations.${In}`,In,this.validators.isValidAnnotationKey),Cn(`annotations.${In}`,xa,this.validators.isValidAnnotationValue);const ta=(ht=$.metadata.tags)!=null?ht:[];for(let In=0;In<ta.length;++In)Cn(`tags.${In}`,ta[In],this.validators.isValidTag);const ga=(Yt=$.metadata.links)!=null?Yt:[];for(let In=0;In<ga.length;++In)Cn(`links.${In}.url`,(un=ga[In])==null?void 0:un.url,pe.isValidUrl),Yn(`links.${In}.title`,(Tn=ga[In])==null?void 0:Tn.title,pe.isNonEmptyString),Yn(`links.${In}.icon`,(Mn=ga[In])==null?void 0:Mn.icon,M.isValidObjectName);return $}}const Ae=null;class Ie{constructor($=Ae){this.knownFields=$}async enforce($){for(const Re of Object.keys($))if(!this.knownFields.includes(Re))throw new Error(`Unknown field ${Re}`);return $}}class Ve{async enforce($){if(!this.validate){const ht=new Ajv({allowUnionTypes:!0});this.validate=ht.addSchema([ln,Rt],void 0,void 0,!0).compile(Me)}if(this.validate($)===!0)return $;const[ze]=this.validate.errors||[];throw ze?new Error(`Malformed envelope, ${ze.instancePath||"<root>"} ${ze.message}`):new Error("Malformed envelope, Unknown error")}}class at{constructor($){this.policies=$}async enforce($){let Re=$;for(const ze of this.policies){const ht=await ze.enforce(Re);if(!ht)throw new Error(`Policy ${ze.constructor.name} did not return a result`);Re=ht}return Re}}class Se{constructor($){this.policies=$}async enforce($){for(const Re of this.policies){const ze=await Re.enforce($);if(ze)return ze}throw new Error("The entity did not match any known policy")}}const te={allOf(w){return new at(w)},oneOf(w){return new Se(w)}};var ae="http://json-schema.org/draft-07/schema",Be="ApiV1alpha1",tt="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",ft=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],bt=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],rn={$schema:ae,$id:Be,description:tt,examples:ft,allOf:bt};function Gt(w){let $;return{async check(Re){return $||($=Pe(w)),$(Re)===Re}}}const gn=Gt(rn);var Ke="http://json-schema.org/draft-07/schema",nt="ComponentV1alpha1",oe='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Ee=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],ke=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],ot={$schema:Ke,$id:nt,description:oe,examples:Ee,allOf:ke};const Ye=Gt(ot);var ut="http://json-schema.org/draft-07/schema",At="DomainV1alpha1",Ft="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",ue=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],ye=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],Oe={$schema:ut,$id:At,description:Ft,examples:ue,allOf:ye};const He=Gt(Oe);var rt="http://json-schema.org/draft-07/schema",Pt="GroupV1alpha1",Ot="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",jt=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],pn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],_n={$schema:rt,$id:Pt,description:Ot,examples:jt,allOf:pn};const bn=Gt(_n);var $n="http://json-schema.org/draft-07/schema",Jn="LocationV1alpha1",Dn="A location is a marker that references other places to look for catalog data.",Un=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],hn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],Bn={$schema:$n,$id:Jn,description:Dn,examples:Un,allOf:hn};const Pn=Gt(Bn),yn="ownedBy",Kn="ownerOf",sa="consumesApi",zn="apiConsumedBy",jn="providesApi",ua="apiProvidedBy",_a="dependsOn",Ga="dependencyOf",Ha="parentOf",ur="childOf",er="memberOf",Qa="hasMember",pr="partOf",Ja="hasPart";var L="http://json-schema.org/draft-07/schema",Z="ResourceV1alpha1",q="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",_e=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],U=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],se={$schema:L,$id:Z,description:q,examples:_e,allOf:U};const Ce=Gt(se);var Le="http://json-schema.org/draft-07/schema",wt="SystemV1alpha1",It="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",kt=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],En=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Rn={$schema:Le,$id:wt,description:It,examples:kt,allOf:En};const cn=Gt(Rn);var na="http://json-schema.org/draft-07/schema",kn="UserV1alpha1",aa="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",ha=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],oa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Qn={$schema:na,$id:kn,description:aa,examples:ha,allOf:oa};const $a=Gt(Qn),Pa="backstage.io/managed-by-location",ya="backstage.io/managed-by-origin-location",Ra="backstage.io/source-location",j=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function i(w){if(typeof w!="string")throw new TypeError(`Unable to parse location ref '${w}', unexpected argument ${typeof w}`);const $=w.indexOf(":");if($<0)throw new TypeError(`Unable to parse location ref '${w}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const Re=w.substring(0,$).trim(),ze=w.substring($+1).trim();if(!Re||!ze)throw new TypeError(`Unable to parse location ref '${w}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(Re==="http"||Re==="https")throw new TypeError(`Invalid location ref '${w}', please prefix it with 'url:', e.g. 'url:${w}'`);if(j.test(ze))throw new TypeError(`Invalid location ref '${w}', target is a javascript: URL`);return{type:Re,target:ze}}function g(w){const{type:$,target:Re}=w;if($){if(!Re)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(j.test(Re))throw new TypeError(`Invalid location ref '${$}:${Re}', target is a javascript: URL`);return`${$}:${Re}`}function I(w){var $,Re,ze,ht,Yt;const un=(Yt=(Re=($=w.metadata)==null?void 0:$.annotations)==null?void 0:Re[Ra])!=null?Yt:(ht=(ze=w.metadata)==null?void 0:ze.annotations)==null?void 0:ht[Pa];if(!un)throw new Error(`Entity '${S(w)}' is missing location`);return i(un)}},53911:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.MissingRefError=d.ValidationError=d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;const n=e(61889),c=e(57993),m=e(99908),u=e(51020),r=["/properties"],l="http://json-schema.org/draft-07/schema";class C extends n.default{_addVocabularies(){super._addVocabularies(),c.default.forEach(B=>this.addVocabulary(B)),this.opts.discriminator&&this.addKeyword(m.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const B=this.opts.$data?this.$dataMetaSchema(u,r):u;this.addMetaSchema(B,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}Kt.exports=d=C,Object.defineProperty(d,"__esModule",{value:!0}),d.default=C;var _=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return _.KeywordCxt}});var t=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});var y=e(14319);Object.defineProperty(d,"ValidationError",{enumerable:!0,get:function(){return y.default}});var f=e(30283);Object.defineProperty(d,"MissingRefError",{enumerable:!0,get:function(){return f.default}})},91475:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.regexpCode=d.getEsmExportName=d.getProperty=d.safeStringify=d.stringify=d.strConcat=d.addCodeArg=d.str=d._=d.nil=d._Code=d.Name=d.IDENTIFIER=d._CodeOrName=void 0;class e{}d._CodeOrName=e,d.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends e{constructor(D){if(super(),!d.IDENTIFIER.test(D))throw new Error("CodeGen: name must be a valid identifier");this.str=D}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}d.Name=n;class c extends e{constructor(D){super(),this._items=typeof D=="string"?[D]:D}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const D=this._items[0];return D===""||D==='""'}get str(){var D;return(D=this._str)!==null&&D!==void 0?D:this._str=this._items.reduce((N,p)=>`${N}${p}`,"")}get names(){var D;return(D=this._names)!==null&&D!==void 0?D:this._names=this._items.reduce((N,p)=>(p instanceof n&&(N[p.str]=(N[p.str]||0)+1),N),{})}}d._Code=c,d.nil=new c("");function m(A,...D){const N=[A[0]];let p=0;for(;p<D.length;)l(N,D[p]),N.push(A[++p]);return new c(N)}d._=m;const u=new c("+");function r(A,...D){const N=[F(A[0])];let p=0;for(;p<D.length;)N.push(u),l(N,D[p]),N.push(u,F(A[++p]));return C(N),new c(N)}d.str=r;function l(A,D){D instanceof c?A.push(...D._items):D instanceof n?A.push(D):A.push(y(D))}d.addCodeArg=l;function C(A){let D=1;for(;D<A.length-1;){if(A[D]===u){const N=_(A[D-1],A[D+1]);if(N!==void 0){A.splice(D-1,3,N);continue}A[D++]="+"}D++}}function _(A,D){if(D==='""')return A;if(A==='""')return D;if(typeof A=="string")return D instanceof n||A[A.length-1]!=='"'?void 0:typeof D!="string"?`${A.slice(0,-1)}${D}"`:D[0]==='"'?A.slice(0,-1)+D.slice(1):void 0;if(typeof D=="string"&&D[0]==='"'&&!(A instanceof n))return`"${A}${D.slice(1)}`}function t(A,D){return D.emptyStr()?A:A.emptyStr()?D:r`${A}${D}`}d.strConcat=t;function y(A){return typeof A=="number"||typeof A=="boolean"||A===null?A:F(Array.isArray(A)?A.join(","):A)}function f(A){return new c(F(A))}d.stringify=f;function F(A){return JSON.stringify(A).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}d.safeStringify=F;function B(A){return typeof A=="string"&&d.IDENTIFIER.test(A)?new c(`.${A}`):m`[${A}]`}d.getProperty=B;function k(A){if(typeof A=="string"&&d.IDENTIFIER.test(A))return new c(`${A}`);throw new Error(`CodeGen: invalid export name: ${A}, use explicit $id name mapping`)}d.getEsmExportName=k;function X(A){return new c(A.toString())}d.regexpCode=X},82481:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.or=d.and=d.not=d.CodeGen=d.operators=d.varKinds=d.ValueScopeName=d.ValueScope=d.Scope=d.Name=d.regexpCode=d.stringify=d.getProperty=d.nil=d.strConcat=d.str=d._=void 0;const n=e(91475),c=e(66162);var m=e(91475);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return m._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return m.str}}),Object.defineProperty(d,"strConcat",{enumerable:!0,get:function(){return m.strConcat}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return m.nil}}),Object.defineProperty(d,"getProperty",{enumerable:!0,get:function(){return m.getProperty}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return m.stringify}}),Object.defineProperty(d,"regexpCode",{enumerable:!0,get:function(){return m.regexpCode}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return m.Name}});var u=e(66162);Object.defineProperty(d,"Scope",{enumerable:!0,get:function(){return u.Scope}}),Object.defineProperty(d,"ValueScope",{enumerable:!0,get:function(){return u.ValueScope}}),Object.defineProperty(d,"ValueScopeName",{enumerable:!0,get:function(){return u.ValueScopeName}}),Object.defineProperty(d,"varKinds",{enumerable:!0,get:function(){return u.varKinds}}),d.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class r{optimizeNodes(){return this}optimizeNames(R,W){return this}}class l extends r{constructor(R,W,ge){super(),this.varKind=R,this.name=W,this.rhs=ge}render({es5:R,_n:W}){const ge=R?c.varKinds.var:this.varKind,Me=this.rhs===void 0?"":` = ${this.rhs}`;return`${ge} ${this.name}${Me};`+W}optimizeNames(R,W){if(R[this.name.str])return this.rhs&&(this.rhs=dt(this.rhs,R,W)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class C extends r{constructor(R,W,ge){super(),this.lhs=R,this.rhs=W,this.sideEffects=ge}render({_n:R}){return`${this.lhs} = ${this.rhs};`+R}optimizeNames(R,W){if(!(this.lhs instanceof n.Name&&!R[this.lhs.str]&&!this.sideEffects))return this.rhs=dt(this.rhs,R,W),this}get names(){const R=this.lhs instanceof n.Name?{}:{...this.lhs.names};return Ut(R,this.rhs)}}class _ extends C{constructor(R,W,ge,Me){super(R,ge,Me),this.op=W}render({_n:R}){return`${this.lhs} ${this.op}= ${this.rhs};`+R}}class t extends r{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`${this.label}:`+R}}class y extends r{constructor(R){super(),this.label=R,this.names={}}render({_n:R}){return`break${this.label?` ${this.label}`:""};`+R}}class f extends r{constructor(R){super(),this.error=R}render({_n:R}){return`throw ${this.error};`+R}get names(){return this.error.names}}class F extends r{constructor(R){super(),this.code=R}render({_n:R}){return`${this.code};`+R}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(R,W){return this.code=dt(this.code,R,W),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class B extends r{constructor(R=[]){super(),this.nodes=R}render(R){return this.nodes.reduce((W,ge)=>W+ge.render(R),"")}optimizeNodes(){const{nodes:R}=this;let W=R.length;for(;W--;){const ge=R[W].optimizeNodes();Array.isArray(ge)?R.splice(W,1,...ge):ge?R[W]=ge:R.splice(W,1)}return R.length>0?this:void 0}optimizeNames(R,W){const{nodes:ge}=this;let Me=ge.length;for(;Me--;){const et=ge[Me];et.optimizeNames(R,W)||(Wt(R,et.names),ge.splice(Me,1))}return ge.length>0?this:void 0}get names(){return this.nodes.reduce((R,W)=>ct(R,W.names),{})}}class k extends B{render(R){return"{"+R._n+super.render(R)+"}"+R._n}}class X extends B{}class A extends k{}A.kind="else";class D extends k{constructor(R,W){super(W),this.condition=R}render(R){let W=`if(${this.condition})`+super.render(R);return this.else&&(W+="else "+this.else.render(R)),W}optimizeNodes(){super.optimizeNodes();const R=this.condition;if(R===!0)return this.nodes;let W=this.else;if(W){const ge=W.optimizeNodes();W=this.else=Array.isArray(ge)?new A(ge):ge}if(W)return R===!1?W instanceof D?W:W.nodes:this.nodes.length?this:new D(Ct(R),W instanceof D?[W]:W.nodes);if(!(R===!1||!this.nodes.length))return this}optimizeNames(R,W){var ge;if(this.else=(ge=this.else)===null||ge===void 0?void 0:ge.optimizeNames(R,W),!!(super.optimizeNames(R,W)||this.else))return this.condition=dt(this.condition,R,W),this}get names(){const R=super.names;return Ut(R,this.condition),this.else&&ct(R,this.else.names),R}}D.kind="if";class N extends k{}N.kind="for";class p extends N{constructor(R){super(),this.iteration=R}render(R){return`for(${this.iteration})`+super.render(R)}optimizeNames(R,W){if(super.optimizeNames(R,W))return this.iteration=dt(this.iteration,R,W),this}get names(){return ct(super.names,this.iteration.names)}}class h extends N{constructor(R,W,ge,Me){super(),this.varKind=R,this.name=W,this.from=ge,this.to=Me}render(R){const W=R.es5?c.varKinds.var:this.varKind,{name:ge,from:Me,to:et}=this;return`for(${W} ${ge}=${Me}; ${ge}<${et}; ${ge}++)`+super.render(R)}get names(){const R=Ut(super.names,this.from);return Ut(R,this.to)}}class b extends N{constructor(R,W,ge,Me){super(),this.loop=R,this.varKind=W,this.name=ge,this.iterable=Me}render(R){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(R)}optimizeNames(R,W){if(super.optimizeNames(R,W))return this.iterable=dt(this.iterable,R,W),this}get names(){return ct(super.names,this.iterable.names)}}class E extends k{constructor(R,W,ge){super(),this.name=R,this.args=W,this.async=ge}render(R){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(R)}}E.kind="func";class S extends B{render(R){return"return "+super.render(R)}}S.kind="return";class K extends k{render(R){let W="try"+super.render(R);return this.catch&&(W+=this.catch.render(R)),this.finally&&(W+=this.finally.render(R)),W}optimizeNodes(){var R,W;return super.optimizeNodes(),(R=this.catch)===null||R===void 0||R.optimizeNodes(),(W=this.finally)===null||W===void 0||W.optimizeNodes(),this}optimizeNames(R,W){var ge,Me;return super.optimizeNames(R,W),(ge=this.catch)===null||ge===void 0||ge.optimizeNames(R,W),(Me=this.finally)===null||Me===void 0||Me.optimizeNames(R,W),this}get names(){const R=super.names;return this.catch&&ct(R,this.catch.names),this.finally&&ct(R,this.finally.names),R}}class pe extends k{constructor(R){super(),this.error=R}render(R){return`catch(${this.error})`+super.render(R)}}pe.kind="catch";class he extends k{render(R){return"finally"+super.render(R)}}he.kind="finally";class Fe{constructor(R,W={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...W,_n:W.lines?`
`:""},this._extScope=R,this._scope=new c.Scope({parent:R}),this._nodes=[new X]}toString(){return this._root.render(this.opts)}name(R){return this._scope.name(R)}scopeName(R){return this._extScope.name(R)}scopeValue(R,W){const ge=this._extScope.value(R,W);return(this._values[ge.prefix]||(this._values[ge.prefix]=new Set)).add(ge),ge}getScopeValue(R,W){return this._extScope.getValue(R,W)}scopeRefs(R){return this._extScope.scopeRefs(R,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(R,W,ge,Me){const et=this._scope.toName(W);return ge!==void 0&&Me&&(this._constants[et.str]=ge),this._leafNode(new l(R,et,ge)),et}const(R,W,ge){return this._def(c.varKinds.const,R,W,ge)}let(R,W,ge){return this._def(c.varKinds.let,R,W,ge)}var(R,W,ge){return this._def(c.varKinds.var,R,W,ge)}assign(R,W,ge){return this._leafNode(new C(R,W,ge))}add(R,W){return this._leafNode(new _(R,d.operators.ADD,W))}code(R){return typeof R=="function"?R():R!==n.nil&&this._leafNode(new F(R)),this}object(...R){const W=["{"];for(const[ge,Me]of R)W.length>1&&W.push(","),W.push(ge),(ge!==Me||this.opts.es5)&&(W.push(":"),(0,n.addCodeArg)(W,Me));return W.push("}"),new n._Code(W)}if(R,W,ge){if(this._blockNode(new D(R)),W&&ge)this.code(W).else().code(ge).endIf();else if(W)this.code(W).endIf();else if(ge)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(R){return this._elseNode(new D(R))}else(){return this._elseNode(new A)}endIf(){return this._endBlockNode(D,A)}_for(R,W){return this._blockNode(R),W&&this.code(W).endFor(),this}for(R,W){return this._for(new p(R),W)}forRange(R,W,ge,Me,et=this.opts.es5?c.varKinds.var:c.varKinds.let){const pt=this._scope.toName(R);return this._for(new h(et,pt,W,ge),()=>Me(pt))}forOf(R,W,ge,Me=c.varKinds.const){const et=this._scope.toName(R);if(this.opts.es5){const pt=W instanceof n.Name?W:this.var("_arr",W);return this.forRange("_i",0,(0,n._)`${pt}.length`,mt=>{this.var(et,(0,n._)`${pt}[${mt}]`),ge(et)})}return this._for(new b("of",Me,et,W),()=>ge(et))}forIn(R,W,ge,Me=this.opts.es5?c.varKinds.var:c.varKinds.const){if(this.opts.ownProperties)return this.forOf(R,(0,n._)`Object.keys(${W})`,ge);const et=this._scope.toName(R);return this._for(new b("in",Me,et,W),()=>ge(et))}endFor(){return this._endBlockNode(N)}label(R){return this._leafNode(new t(R))}break(R){return this._leafNode(new y(R))}return(R){const W=new S;if(this._blockNode(W),this.code(R),W.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(R,W,ge){if(!W&&!ge)throw new Error('CodeGen: "try" without "catch" and "finally"');const Me=new K;if(this._blockNode(Me),this.code(R),W){const et=this.name("e");this._currNode=Me.catch=new pe(et),W(et)}return ge&&(this._currNode=Me.finally=new he,this.code(ge)),this._endBlockNode(pe,he)}throw(R){return this._leafNode(new f(R))}block(R,W){return this._blockStarts.push(this._nodes.length),R&&this.code(R).endBlock(W),this}endBlock(R){const W=this._blockStarts.pop();if(W===void 0)throw new Error("CodeGen: not in self-balancing block");const ge=this._nodes.length-W;if(ge<0||R!==void 0&&ge!==R)throw new Error(`CodeGen: wrong number of nodes: ${ge} vs ${R} expected`);return this._nodes.length=W,this}func(R,W=n.nil,ge,Me){return this._blockNode(new E(R,W,ge)),Me&&this.code(Me).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(R=1){for(;R-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(R){return this._currNode.nodes.push(R),this}_blockNode(R){this._currNode.nodes.push(R),this._nodes.push(R)}_endBlockNode(R,W){const ge=this._currNode;if(ge instanceof R||W&&ge instanceof W)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${W?`${R.kind}/${W.kind}`:R.kind}"`)}_elseNode(R){const W=this._currNode;if(!(W instanceof D))throw new Error('CodeGen: "else" without "if"');return this._currNode=W.else=R,this}get _root(){return this._nodes[0]}get _currNode(){const R=this._nodes;return R[R.length-1]}set _currNode(R){const W=this._nodes;W[W.length-1]=R}}d.CodeGen=Fe;function ct(H,R){for(const W in R)H[W]=(H[W]||0)+(R[W]||0);return H}function Ut(H,R){return R instanceof n._CodeOrName?ct(H,R.names):H}function dt(H,R,W){if(H instanceof n.Name)return ge(H);if(!Me(H))return H;return new n._Code(H._items.reduce((et,pt)=>(pt instanceof n.Name&&(pt=ge(pt)),pt instanceof n._Code?et.push(...pt._items):et.push(pt),et),[]));function ge(et){const pt=W[et.str];return pt===void 0||R[et.str]!==1?et:(delete R[et.str],pt)}function Me(et){return et instanceof n._Code&&et._items.some(pt=>pt instanceof n.Name&&R[pt.str]===1&&W[pt.str]!==void 0)}}function Wt(H,R){for(const W in R)H[W]=(H[W]||0)-(R[W]||0)}function Ct(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,n._)`!${Ue(H)}`}d.not=Ct;const G=P(d.operators.AND);function fn(...H){return H.reduce(G)}d.and=fn;const Et=P(d.operators.OR);function je(...H){return H.reduce(Et)}d.or=je;function P(H){return(R,W)=>R===n.nil?W:W===n.nil?R:(0,n._)`${Ue(R)} ${H} ${Ue(W)}`}function Ue(H){return H instanceof n.Name?H:(0,n._)`(${H})`}},66162:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.ValueScope=d.ValueScopeName=d.Scope=d.varKinds=d.UsedValueState=void 0;const n=e(91475);class c extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}}var m;(function(_){_[_.Started=0]="Started",_[_.Completed=1]="Completed"})(m=d.UsedValueState||(d.UsedValueState={})),d.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class u{constructor({prefixes:t,parent:y}={}){this._names={},this._prefixes=t,this._parent=y}toName(t){return t instanceof n.Name?t:this.name(t)}name(t){return new n.Name(this._newName(t))}_newName(t){const y=this._names[t]||this._nameGroup(t);return`${t}${y.index++}`}_nameGroup(t){var y,f;if(!((f=(y=this._parent)===null||y===void 0?void 0:y._prefixes)===null||f===void 0)&&f.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}}d.Scope=u;class r extends n.Name{constructor(t,y){super(y),this.prefix=t}setValue(t,{property:y,itemIndex:f}){this.value=t,this.scopePath=(0,n._)`.${new n.Name(y)}[${f}]`}}d.ValueScopeName=r;const l=(0,n._)`\n`;class C extends u{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?l:n.nil}}get(){return this._scope}name(t){return new r(t,this._newName(t))}value(t,y){var f;if(y.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const F=this.toName(t),{prefix:B}=F,k=(f=y.key)!==null&&f!==void 0?f:y.ref;let X=this._values[B];if(X){const N=X.get(k);if(N)return N}else X=this._values[B]=new Map;X.set(k,F);const A=this._scope[B]||(this._scope[B]=[]),D=A.length;return A[D]=y.ref,F.setValue(y,{property:B,itemIndex:D}),F}getValue(t,y){const f=this._values[t];if(f)return f.get(y)}scopeRefs(t,y=this._values){return this._reduceValues(y,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,n._)`${t}${f.scopePath}`})}scopeCode(t=this._values,y,f){return this._reduceValues(t,F=>{if(F.value===void 0)throw new Error(`CodeGen: name "${F}" has no value`);return F.value.code},y,f)}_reduceValues(t,y,f={},F){let B=n.nil;for(const k in t){const X=t[k];if(!X)continue;const A=f[k]=f[k]||new Map;X.forEach(D=>{if(A.has(D))return;A.set(D,m.Started);let N=y(D);if(N){const p=this.opts.es5?d.varKinds.var:d.varKinds.const;B=(0,n._)`${B}${p} ${D} = ${N};${this.opts._n}`}else if(N=F==null?void 0:F(D))B=(0,n._)`${B}${N}${this.opts._n}`;else throw new c(D);A.set(D,m.Completed)})}return B}}d.ValueScope=C},59428:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendErrors=d.resetErrorsCount=d.reportExtraError=d.reportError=d.keyword$DataError=d.keywordError=void 0;const n=e(82481),c=e(1849),m=e(99583);d.keywordError={message:({keyword:A})=>(0,n.str)`must pass "${A}" keyword validation`},d.keyword$DataError={message:({keyword:A,schemaType:D})=>D?(0,n.str)`"${A}" keyword must be ${D} ($data)`:(0,n.str)`"${A}" keyword is invalid ($data)`};function u(A,D=d.keywordError,N,p){const{it:h}=A,{gen:b,compositeRule:E,allErrors:S}=h,K=f(A,D,N);(p!=null?p:E||S)?_(b,K):t(h,(0,n._)`[${K}]`)}d.reportError=u;function r(A,D=d.keywordError,N){const{it:p}=A,{gen:h,compositeRule:b,allErrors:E}=p,S=f(A,D,N);_(h,S),b||E||t(p,m.default.vErrors)}d.reportExtraError=r;function l(A,D){A.assign(m.default.errors,D),A.if((0,n._)`${m.default.vErrors} !== null`,()=>A.if(D,()=>A.assign((0,n._)`${m.default.vErrors}.length`,D),()=>A.assign(m.default.vErrors,null)))}d.resetErrorsCount=l;function C({gen:A,keyword:D,schemaValue:N,data:p,errsCount:h,it:b}){if(h===void 0)throw new Error("ajv implementation error");const E=A.name("err");A.forRange("i",h,m.default.errors,S=>{A.const(E,(0,n._)`${m.default.vErrors}[${S}]`),A.if((0,n._)`${E}.instancePath === undefined`,()=>A.assign((0,n._)`${E}.instancePath`,(0,n.strConcat)(m.default.instancePath,b.errorPath))),A.assign((0,n._)`${E}.schemaPath`,(0,n.str)`${b.errSchemaPath}/${D}`),b.opts.verbose&&(A.assign((0,n._)`${E}.schema`,N),A.assign((0,n._)`${E}.data`,p))})}d.extendErrors=C;function _(A,D){const N=A.const("err",D);A.if((0,n._)`${m.default.vErrors} === null`,()=>A.assign(m.default.vErrors,(0,n._)`[${N}]`),(0,n._)`${m.default.vErrors}.push(${N})`),A.code((0,n._)`${m.default.errors}++`)}function t(A,D){const{gen:N,validateName:p,schemaEnv:h}=A;h.$async?N.throw((0,n._)`new ${A.ValidationError}(${D})`):(N.assign((0,n._)`${p}.errors`,D),N.return(!1))}const y={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function f(A,D,N){const{createErrors:p}=A.it;return p===!1?(0,n._)`{}`:F(A,D,N)}function F(A,D,N={}){const{gen:p,it:h}=A,b=[B(h,N),k(A,N)];return X(A,D,b),p.object(...b)}function B({errorPath:A},{instancePath:D}){const N=D?(0,n.str)`${A}${(0,c.getErrorPath)(D,c.Type.Str)}`:A;return[m.default.instancePath,(0,n.strConcat)(m.default.instancePath,N)]}function k({keyword:A,it:{errSchemaPath:D}},{schemaPath:N,parentSchema:p}){let h=p?D:(0,n.str)`${D}/${A}`;return N&&(h=(0,n.str)`${h}${(0,c.getErrorPath)(N,c.Type.Str)}`),[y.schemaPath,h]}function X(A,{params:D,message:N},p){const{keyword:h,data:b,schemaValue:E,it:S}=A,{opts:K,propertyName:pe,topSchemaRef:he,schemaPath:Fe}=S;p.push([y.keyword,h],[y.params,typeof D=="function"?D(A):D||(0,n._)`{}`]),K.messages&&p.push([y.message,typeof N=="function"?N(A):N]),K.verbose&&p.push([y.schema,E],[y.parentSchema,(0,n._)`${he}${Fe}`],[m.default.data,b]),pe&&p.push([y.propertyName,pe])}},62902:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.resolveSchema=d.getCompilingSchema=d.resolveRef=d.compileSchema=d.SchemaEnv=void 0;const n=e(82481),c=e(14319),m=e(99583),u=e(2710),r=e(1849),l=e(4371);class C{constructor(N){var p;this.refs={},this.dynamicAnchors={};let h;typeof N.schema=="object"&&(h=N.schema),this.schema=N.schema,this.schemaId=N.schemaId,this.root=N.root||this,this.baseId=(p=N.baseId)!==null&&p!==void 0?p:(0,u.normalizeId)(h==null?void 0:h[N.schemaId||"$id"]),this.schemaPath=N.schemaPath,this.localRefs=N.localRefs,this.meta=N.meta,this.$async=h==null?void 0:h.$async,this.refs={}}}d.SchemaEnv=C;function _(D){const N=f.call(this,D);if(N)return N;const p=(0,u.getFullPath)(this.opts.uriResolver,D.root.baseId),{es5:h,lines:b}=this.opts.code,{ownProperties:E}=this.opts,S=new n.CodeGen(this.scope,{es5:h,lines:b,ownProperties:E});let K;D.$async&&(K=S.scopeValue("Error",{ref:c.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const pe=S.scopeName("validate");D.validateName=pe;const he={gen:S,allErrors:this.opts.allErrors,data:m.default.data,parentData:m.default.parentData,parentDataProperty:m.default.parentDataProperty,dataNames:[m.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:S.scopeValue("schema",this.opts.code.source===!0?{ref:D.schema,code:(0,n.stringify)(D.schema)}:{ref:D.schema}),validateName:pe,ValidationError:K,schema:D.schema,schemaEnv:D,rootId:p,baseId:D.baseId||p,schemaPath:n.nil,errSchemaPath:D.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let Fe;try{this._compilations.add(D),(0,l.validateFunctionCode)(he),S.optimize(this.opts.code.optimize);const ct=S.toString();Fe=`${S.scopeRefs(m.default.scope)}return ${ct}`,this.opts.code.process&&(Fe=this.opts.code.process(Fe,D));const dt=new Function(`${m.default.self}`,`${m.default.scope}`,Fe)(this,this.scope.get());if(this.scope.value(pe,{ref:dt}),dt.errors=null,dt.schema=D.schema,dt.schemaEnv=D,D.$async&&(dt.$async=!0),this.opts.code.source===!0&&(dt.source={validateName:pe,validateCode:ct,scopeValues:S._values}),this.opts.unevaluated){const{props:Wt,items:Ct}=he;dt.evaluated={props:Wt instanceof n.Name?void 0:Wt,items:Ct instanceof n.Name?void 0:Ct,dynamicProps:Wt instanceof n.Name,dynamicItems:Ct instanceof n.Name},dt.source&&(dt.source.evaluated=(0,n.stringify)(dt.evaluated))}return D.validate=dt,D}catch(ct){throw delete D.validate,delete D.validateName,Fe&&this.logger.error("Error compiling schema, function code:",Fe),ct}finally{this._compilations.delete(D)}}d.compileSchema=_;function t(D,N,p){var h;p=(0,u.resolveUrl)(this.opts.uriResolver,N,p);const b=D.refs[p];if(b)return b;let E=B.call(this,D,p);if(E===void 0){const S=(h=D.localRefs)===null||h===void 0?void 0:h[p],{schemaId:K}=this.opts;S&&(E=new C({schema:S,schemaId:K,root:D,baseId:N}))}if(E!==void 0)return D.refs[p]=y.call(this,E)}d.resolveRef=t;function y(D){return(0,u.inlineRef)(D.schema,this.opts.inlineRefs)?D.schema:D.validate?D:_.call(this,D)}function f(D){for(const N of this._compilations)if(F(N,D))return N}d.getCompilingSchema=f;function F(D,N){return D.schema===N.schema&&D.root===N.root&&D.baseId===N.baseId}function B(D,N){let p;for(;typeof(p=this.refs[N])=="string";)N=p;return p||this.schemas[N]||k.call(this,D,N)}function k(D,N){const p=this.opts.uriResolver.parse(N),h=(0,u._getFullPath)(this.opts.uriResolver,p);let b=(0,u.getFullPath)(this.opts.uriResolver,D.baseId,void 0);if(Object.keys(D.schema).length>0&&h===b)return A.call(this,p,D);const E=(0,u.normalizeId)(h),S=this.refs[E]||this.schemas[E];if(typeof S=="string"){const K=k.call(this,D,S);return typeof(K==null?void 0:K.schema)!="object"?void 0:A.call(this,p,K)}if(typeof(S==null?void 0:S.schema)=="object"){if(S.validate||_.call(this,S),E===(0,u.normalizeId)(N)){const{schema:K}=S,{schemaId:pe}=this.opts,he=K[pe];return he&&(b=(0,u.resolveUrl)(this.opts.uriResolver,b,he)),new C({schema:K,schemaId:pe,root:D,baseId:b})}return A.call(this,p,S)}}d.resolveSchema=k;const X=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function A(D,{baseId:N,schema:p,root:h}){var b;if(((b=D.fragment)===null||b===void 0?void 0:b[0])!=="/")return;for(const K of D.fragment.slice(1).split("/")){if(typeof p=="boolean")return;const pe=p[(0,r.unescapeFragment)(K)];if(pe===void 0)return;p=pe;const he=typeof p=="object"&&p[this.opts.schemaId];!X.has(K)&&he&&(N=(0,u.resolveUrl)(this.opts.uriResolver,N,he))}let E;if(typeof p!="boolean"&&p.$ref&&!(0,r.schemaHasRulesButRef)(p,this.RULES)){const K=(0,u.resolveUrl)(this.opts.uriResolver,N,p.$ref);E=k.call(this,h,K)}const{schemaId:S}=this.opts;if(E=E||new C({schema:p,schemaId:S,root:h,baseId:N}),E.schema!==E.root.schema)return E}},99583:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};d.default=c},30283:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(2710);class c extends Error{constructor(u,r,l,C){super(C||`can't resolve reference ${l} from id ${r}`),this.missingRef=(0,n.resolveUrl)(u,r,l),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(u,this.missingRef))}}d.default=c},2710:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getSchemaRefs=d.resolveUrl=d.normalizeId=d._getFullPath=d.getFullPath=d.inlineRef=void 0;const n=e(1849),c=e(69378),m=e(19522),u=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r(A,D=!0){return typeof A=="boolean"?!0:D===!0?!C(A):D?_(A)<=D:!1}d.inlineRef=r;const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function C(A){for(const D in A){if(l.has(D))return!0;const N=A[D];if(Array.isArray(N)&&N.some(C)||typeof N=="object"&&C(N))return!0}return!1}function _(A){let D=0;for(const N in A){if(N==="$ref")return 1/0;if(D++,!u.has(N)&&(typeof A[N]=="object"&&(0,n.eachItem)(A[N],p=>D+=_(p)),D===1/0))return 1/0}return D}function t(A,D="",N){N!==!1&&(D=F(D));const p=A.parse(D);return y(A,p)}d.getFullPath=t;function y(A,D){return A.serialize(D).split("#")[0]+"#"}d._getFullPath=y;const f=/#\/?$/;function F(A){return A?A.replace(f,""):""}d.normalizeId=F;function B(A,D,N){return N=F(N),A.resolve(D,N)}d.resolveUrl=B;const k=/^[a-z_][-a-z0-9._]*$/i;function X(A,D){if(typeof A=="boolean")return{};const{schemaId:N,uriResolver:p}=this.opts,h=F(A[N]||D),b={"":h},E=t(p,h,!1),S={},K=new Set;return m(A,{allKeys:!0},(Fe,ct,Ut,dt)=>{if(dt===void 0)return;const Wt=E+ct;let Ct=b[dt];typeof Fe[N]=="string"&&(Ct=G.call(this,Fe[N])),fn.call(this,Fe.$anchor),fn.call(this,Fe.$dynamicAnchor),b[ct]=Ct;function G(Et){const je=this.opts.uriResolver.resolve;if(Et=F(Ct?je(Ct,Et):Et),K.has(Et))throw he(Et);K.add(Et);let P=this.refs[Et];return typeof P=="string"&&(P=this.refs[P]),typeof P=="object"?pe(Fe,P.schema,Et):Et!==F(Wt)&&(Et[0]==="#"?(pe(Fe,S[Et],Et),S[Et]=Fe):this.refs[Et]=Wt),Et}function fn(Et){if(typeof Et=="string"){if(!k.test(Et))throw new Error(`invalid anchor "${Et}"`);G.call(this,`#${Et}`)}}}),S;function pe(Fe,ct,Ut){if(ct!==void 0&&!c(Fe,ct))throw he(Ut)}function he(Fe){return new Error(`reference "${Fe}" resolves to more than one schema`)}}d.getSchemaRefs=X},18288:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.getRules=d.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],n=new Set(e);function c(u){return typeof u=="string"&&n.has(u)}d.isJSONType=c;function m(){const u={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...u,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},u.number,u.string,u.array,u.object],post:{rules:[]},all:{},keywords:{}}}d.getRules=m},1849:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.checkStrictMode=d.getErrorPath=d.Type=d.useFunc=d.setEvaluated=d.evaluatedPropsToName=d.mergeEvaluated=d.eachItem=d.unescapeJsonPointer=d.escapeJsonPointer=d.escapeFragment=d.unescapeFragment=d.schemaRefOrVal=d.schemaHasRulesButRef=d.schemaHasRules=d.checkUnknownRules=d.alwaysValidSchema=d.toHash=void 0;const n=e(82481),c=e(91475);function m(E){const S={};for(const K of E)S[K]=!0;return S}d.toHash=m;function u(E,S){return typeof S=="boolean"?S:Object.keys(S).length===0?!0:(r(E,S),!l(S,E.self.RULES.all))}d.alwaysValidSchema=u;function r(E,S=E.schema){const{opts:K,self:pe}=E;if(!K.strictSchema||typeof S=="boolean")return;const he=pe.RULES.keywords;for(const Fe in S)he[Fe]||b(E,`unknown keyword: "${Fe}"`)}d.checkUnknownRules=r;function l(E,S){if(typeof E=="boolean")return!E;for(const K in E)if(S[K])return!0;return!1}d.schemaHasRules=l;function C(E,S){if(typeof E=="boolean")return!E;for(const K in E)if(K!=="$ref"&&S.all[K])return!0;return!1}d.schemaHasRulesButRef=C;function _({topSchemaRef:E,schemaPath:S},K,pe,he){if(!he){if(typeof K=="number"||typeof K=="boolean")return K;if(typeof K=="string")return(0,n._)`${K}`}return(0,n._)`${E}${S}${(0,n.getProperty)(pe)}`}d.schemaRefOrVal=_;function t(E){return F(decodeURIComponent(E))}d.unescapeFragment=t;function y(E){return encodeURIComponent(f(E))}d.escapeFragment=y;function f(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}d.escapeJsonPointer=f;function F(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}d.unescapeJsonPointer=F;function B(E,S){if(Array.isArray(E))for(const K of E)S(K);else S(E)}d.eachItem=B;function k({mergeNames:E,mergeToName:S,mergeValues:K,resultToName:pe}){return(he,Fe,ct,Ut)=>{const dt=ct===void 0?Fe:ct instanceof n.Name?(Fe instanceof n.Name?E(he,Fe,ct):S(he,Fe,ct),ct):Fe instanceof n.Name?(S(he,ct,Fe),Fe):K(Fe,ct);return Ut===n.Name&&!(dt instanceof n.Name)?pe(he,dt):dt}}d.mergeEvaluated={props:k({mergeNames:(E,S,K)=>E.if((0,n._)`${K} !== true && ${S} !== undefined`,()=>{E.if((0,n._)`${S} === true`,()=>E.assign(K,!0),()=>E.assign(K,(0,n._)`${K} || {}`).code((0,n._)`Object.assign(${K}, ${S})`))}),mergeToName:(E,S,K)=>E.if((0,n._)`${K} !== true`,()=>{S===!0?E.assign(K,!0):(E.assign(K,(0,n._)`${K} || {}`),A(E,K,S))}),mergeValues:(E,S)=>E===!0?!0:{...E,...S},resultToName:X}),items:k({mergeNames:(E,S,K)=>E.if((0,n._)`${K} !== true && ${S} !== undefined`,()=>E.assign(K,(0,n._)`${S} === true ? true : ${K} > ${S} ? ${K} : ${S}`)),mergeToName:(E,S,K)=>E.if((0,n._)`${K} !== true`,()=>E.assign(K,S===!0?!0:(0,n._)`${K} > ${S} ? ${K} : ${S}`)),mergeValues:(E,S)=>E===!0?!0:Math.max(E,S),resultToName:(E,S)=>E.var("items",S)})};function X(E,S){if(S===!0)return E.var("props",!0);const K=E.var("props",(0,n._)`{}`);return S!==void 0&&A(E,K,S),K}d.evaluatedPropsToName=X;function A(E,S,K){Object.keys(K).forEach(pe=>E.assign((0,n._)`${S}${(0,n.getProperty)(pe)}`,!0))}d.setEvaluated=A;const D={};function N(E,S){return E.scopeValue("func",{ref:S,code:D[S.code]||(D[S.code]=new c._Code(S.code))})}d.useFunc=N;var p;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(p=d.Type||(d.Type={}));function h(E,S,K){if(E instanceof n.Name){const pe=S===p.Num;return K?pe?(0,n._)`"[" + ${E} + "]"`:(0,n._)`"['" + ${E} + "']"`:pe?(0,n._)`"/" + ${E}`:(0,n._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return K?(0,n.getProperty)(E).toString():"/"+f(E)}d.getErrorPath=h;function b(E,S,K=E.opts.strictSchema){if(K){if(S=`strict mode: ${S}`,K===!0)throw new Error(S);E.self.logger.warn(S)}}d.checkStrictMode=b},66557:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.shouldUseRule=d.shouldUseGroup=d.schemaHasRulesForType=void 0;function e({schema:m,self:u},r){const l=u.RULES.types[r];return l&&l!==!0&&n(m,l)}d.schemaHasRulesForType=e;function n(m,u){return u.rules.some(r=>c(m,r))}d.shouldUseGroup=n;function c(m,u){var r;return m[u.keyword]!==void 0||((r=u.definition.implements)===null||r===void 0?void 0:r.some(l=>m[l]!==void 0))}d.shouldUseRule=c},74616:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.boolOrEmptySchema=d.topBoolOrEmptySchema=void 0;const n=e(59428),c=e(82481),m=e(99583),u={message:"boolean schema is false"};function r(_){const{gen:t,schema:y,validateName:f}=_;y===!1?C(_,!1):typeof y=="object"&&y.$async===!0?t.return(m.default.data):(t.assign((0,c._)`${f}.errors`,null),t.return(!0))}d.topBoolOrEmptySchema=r;function l(_,t){const{gen:y,schema:f}=_;f===!1?(y.var(t,!1),C(_)):y.var(t,!0)}d.boolOrEmptySchema=l;function C(_,t){const{gen:y,data:f}=_,F={gen:y,keyword:"false schema",data:f,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:_};(0,n.reportError)(F,u,void 0,t)}},93277:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.reportTypeError=d.checkDataTypes=d.checkDataType=d.coerceAndCheckDataType=d.getJSONTypes=d.getSchemaTypes=d.DataType=void 0;const n=e(18288),c=e(66557),m=e(59428),u=e(82481),r=e(1849);var l;(function(p){p[p.Correct=0]="Correct",p[p.Wrong=1]="Wrong"})(l=d.DataType||(d.DataType={}));function C(p){const h=_(p.type);if(h.includes("null")){if(p.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!h.length&&p.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');p.nullable===!0&&h.push("null")}return h}d.getSchemaTypes=C;function _(p){const h=Array.isArray(p)?p:p?[p]:[];if(h.every(n.isJSONType))return h;throw new Error("type must be JSONType or JSONType[]: "+h.join(","))}d.getJSONTypes=_;function t(p,h){const{gen:b,data:E,opts:S}=p,K=f(h,S.coerceTypes),pe=h.length>0&&!(K.length===0&&h.length===1&&(0,c.schemaHasRulesForType)(p,h[0]));if(pe){const he=X(h,E,S.strictNumbers,l.Wrong);b.if(he,()=>{K.length?F(p,h,K):D(p)})}return pe}d.coerceAndCheckDataType=t;const y=new Set(["string","number","integer","boolean","null"]);function f(p,h){return h?p.filter(b=>y.has(b)||h==="array"&&b==="array"):[]}function F(p,h,b){const{gen:E,data:S,opts:K}=p,pe=E.let("dataType",(0,u._)`typeof ${S}`),he=E.let("coerced",(0,u._)`undefined`);K.coerceTypes==="array"&&E.if((0,u._)`${pe} == 'object' && Array.isArray(${S}) && ${S}.length == 1`,()=>E.assign(S,(0,u._)`${S}[0]`).assign(pe,(0,u._)`typeof ${S}`).if(X(h,S,K.strictNumbers),()=>E.assign(he,S))),E.if((0,u._)`${he} !== undefined`);for(const ct of b)(y.has(ct)||ct==="array"&&K.coerceTypes==="array")&&Fe(ct);E.else(),D(p),E.endIf(),E.if((0,u._)`${he} !== undefined`,()=>{E.assign(S,he),B(p,he)});function Fe(ct){switch(ct){case"string":E.elseIf((0,u._)`${pe} == "number" || ${pe} == "boolean"`).assign(he,(0,u._)`"" + ${S}`).elseIf((0,u._)`${S} === null`).assign(he,(0,u._)`""`);return;case"number":E.elseIf((0,u._)`${pe} == "boolean" || ${S} === null
              || (${pe} == "string" && ${S} && ${S} == +${S})`).assign(he,(0,u._)`+${S}`);return;case"integer":E.elseIf((0,u._)`${pe} === "boolean" || ${S} === null
              || (${pe} === "string" && ${S} && ${S} == +${S} && !(${S} % 1))`).assign(he,(0,u._)`+${S}`);return;case"boolean":E.elseIf((0,u._)`${S} === "false" || ${S} === 0 || ${S} === null`).assign(he,!1).elseIf((0,u._)`${S} === "true" || ${S} === 1`).assign(he,!0);return;case"null":E.elseIf((0,u._)`${S} === "" || ${S} === 0 || ${S} === false`),E.assign(he,null);return;case"array":E.elseIf((0,u._)`${pe} === "string" || ${pe} === "number"
              || ${pe} === "boolean" || ${S} === null`).assign(he,(0,u._)`[${S}]`)}}}function B({gen:p,parentData:h,parentDataProperty:b},E){p.if((0,u._)`${h} !== undefined`,()=>p.assign((0,u._)`${h}[${b}]`,E))}function k(p,h,b,E=l.Correct){const S=E===l.Correct?u.operators.EQ:u.operators.NEQ;let K;switch(p){case"null":return(0,u._)`${h} ${S} null`;case"array":K=(0,u._)`Array.isArray(${h})`;break;case"object":K=(0,u._)`${h} && typeof ${h} == "object" && !Array.isArray(${h})`;break;case"integer":K=pe((0,u._)`!(${h} % 1) && !isNaN(${h})`);break;case"number":K=pe();break;default:return(0,u._)`typeof ${h} ${S} ${p}`}return E===l.Correct?K:(0,u.not)(K);function pe(he=u.nil){return(0,u.and)((0,u._)`typeof ${h} == "number"`,he,b?(0,u._)`isFinite(${h})`:u.nil)}}d.checkDataType=k;function X(p,h,b,E){if(p.length===1)return k(p[0],h,b,E);let S;const K=(0,r.toHash)(p);if(K.array&&K.object){const pe=(0,u._)`typeof ${h} != "object"`;S=K.null?pe:(0,u._)`!${h} || ${pe}`,delete K.null,delete K.array,delete K.object}else S=u.nil;K.number&&delete K.integer;for(const pe in K)S=(0,u.and)(S,k(pe,h,b,E));return S}d.checkDataTypes=X;const A={message:({schema:p})=>`must be ${p}`,params:({schema:p,schemaValue:h})=>typeof p=="string"?(0,u._)`{type: ${p}}`:(0,u._)`{type: ${h}}`};function D(p){const h=N(p);(0,m.reportError)(h,A)}d.reportTypeError=D;function N(p){const{gen:h,data:b,schema:E}=p,S=(0,r.schemaRefOrVal)(p,E,"type");return{gen:h,keyword:"type",data:b,schema:E.type,schemaCode:S,schemaValue:S,parentSchema:E,params:{},it:p}}},35192:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.assignDefaults=void 0;const n=e(82481),c=e(1849);function m(r,l){const{properties:C,items:_}=r.schema;if(l==="object"&&C)for(const t in C)u(r,t,C[t].default);else l==="array"&&Array.isArray(_)&&_.forEach((t,y)=>u(r,y,t.default))}d.assignDefaults=m;function u(r,l,C){const{gen:_,compositeRule:t,data:y,opts:f}=r;if(C===void 0)return;const F=(0,n._)`${y}${(0,n.getProperty)(l)}`;if(t){(0,c.checkStrictMode)(r,`default is ignored for: ${F}`);return}let B=(0,n._)`${F} === undefined`;f.useDefaults==="empty"&&(B=(0,n._)`${B} || ${F} === null || ${F} === ""`),_.if(B,(0,n._)`${F} = ${(0,n.stringify)(C)}`)}},4371:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.getData=d.KeywordCxt=d.validateFunctionCode=void 0;const n=e(74616),c=e(93277),m=e(66557),u=e(93277),r=e(35192),l=e(83558),C=e(20521),_=e(82481),t=e(99583),y=e(2710),f=e(1849),F=e(59428);function B(ie){if(E(ie)&&(K(ie),b(ie))){D(ie);return}k(ie,()=>(0,n.topBoolOrEmptySchema)(ie))}d.validateFunctionCode=B;function k({gen:ie,validateName:o,schema:xe,schemaEnv:be,opts:Rt},vt){Rt.code.es5?ie.func(o,(0,_._)`${t.default.data}, ${t.default.valCxt}`,be.$async,()=>{ie.code((0,_._)`"use strict"; ${p(xe,Rt)}`),A(ie,Rt),ie.code(vt)}):ie.func(o,(0,_._)`${t.default.data}, ${X(Rt)}`,be.$async,()=>ie.code(p(xe,Rt)).code(vt))}function X(ie){return(0,_._)`{${t.default.instancePath}="", ${t.default.parentData}, ${t.default.parentDataProperty}, ${t.default.rootData}=${t.default.data}${ie.dynamicRef?(0,_._)`, ${t.default.dynamicAnchors}={}`:_.nil}}={}`}function A(ie,o){ie.if(t.default.valCxt,()=>{ie.var(t.default.instancePath,(0,_._)`${t.default.valCxt}.${t.default.instancePath}`),ie.var(t.default.parentData,(0,_._)`${t.default.valCxt}.${t.default.parentData}`),ie.var(t.default.parentDataProperty,(0,_._)`${t.default.valCxt}.${t.default.parentDataProperty}`),ie.var(t.default.rootData,(0,_._)`${t.default.valCxt}.${t.default.rootData}`),o.dynamicRef&&ie.var(t.default.dynamicAnchors,(0,_._)`${t.default.valCxt}.${t.default.dynamicAnchors}`)},()=>{ie.var(t.default.instancePath,(0,_._)`""`),ie.var(t.default.parentData,(0,_._)`undefined`),ie.var(t.default.parentDataProperty,(0,_._)`undefined`),ie.var(t.default.rootData,t.default.data),o.dynamicRef&&ie.var(t.default.dynamicAnchors,(0,_._)`{}`)})}function D(ie){const{schema:o,opts:xe,gen:be}=ie;k(ie,()=>{xe.$comment&&o.$comment&&dt(ie),Fe(ie),be.let(t.default.vErrors,null),be.let(t.default.errors,0),xe.unevaluated&&N(ie),pe(ie),Wt(ie)})}function N(ie){const{gen:o,validateName:xe}=ie;ie.evaluated=o.const("evaluated",(0,_._)`${xe}.evaluated`),o.if((0,_._)`${ie.evaluated}.dynamicProps`,()=>o.assign((0,_._)`${ie.evaluated}.props`,(0,_._)`undefined`)),o.if((0,_._)`${ie.evaluated}.dynamicItems`,()=>o.assign((0,_._)`${ie.evaluated}.items`,(0,_._)`undefined`))}function p(ie,o){const xe=typeof ie=="object"&&ie[o.schemaId];return xe&&(o.code.source||o.code.process)?(0,_._)`/*# sourceURL=${xe} */`:_.nil}function h(ie,o){if(E(ie)&&(K(ie),b(ie))){S(ie,o);return}(0,n.boolOrEmptySchema)(ie,o)}function b({schema:ie,self:o}){if(typeof ie=="boolean")return!ie;for(const xe in ie)if(o.RULES.all[xe])return!0;return!1}function E(ie){return typeof ie.schema!="boolean"}function S(ie,o){const{schema:xe,gen:be,opts:Rt}=ie;Rt.$comment&&xe.$comment&&dt(ie),ct(ie),Ut(ie);const vt=be.const("_errs",t.default.errors);pe(ie,vt),be.var(o,(0,_._)`${vt} === ${t.default.errors}`)}function K(ie){(0,f.checkUnknownRules)(ie),he(ie)}function pe(ie,o){if(ie.opts.jtd)return G(ie,[],!1,o);const xe=(0,c.getSchemaTypes)(ie.schema),be=(0,c.coerceAndCheckDataType)(ie,xe);G(ie,xe,!be,o)}function he(ie){const{schema:o,errSchemaPath:xe,opts:be,self:Rt}=ie;o.$ref&&be.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(o,Rt.RULES)&&Rt.logger.warn(`$ref: keywords ignored in schema at path "${xe}"`)}function Fe(ie){const{schema:o,opts:xe}=ie;o.default!==void 0&&xe.useDefaults&&xe.strictSchema&&(0,f.checkStrictMode)(ie,"default is ignored in the schema root")}function ct(ie){const o=ie.schema[ie.opts.schemaId];o&&(ie.baseId=(0,y.resolveUrl)(ie.opts.uriResolver,ie.baseId,o))}function Ut(ie){if(ie.schema.$async&&!ie.schemaEnv.$async)throw new Error("async schema in sync schema")}function dt({gen:ie,schemaEnv:o,schema:xe,errSchemaPath:be,opts:Rt}){const vt=xe.$comment;if(Rt.$comment===!0)ie.code((0,_._)`${t.default.self}.logger.log(${vt})`);else if(typeof Rt.$comment=="function"){const Vt=(0,_.str)`${be}/$comment`,de=ie.scopeValue("root",{ref:o.root});ie.code((0,_._)`${t.default.self}.opts.$comment(${vt}, ${Vt}, ${de}.schema)`)}}function Wt(ie){const{gen:o,schemaEnv:xe,validateName:be,ValidationError:Rt,opts:vt}=ie;xe.$async?o.if((0,_._)`${t.default.errors} === 0`,()=>o.return(t.default.data),()=>o.throw((0,_._)`new ${Rt}(${t.default.vErrors})`)):(o.assign((0,_._)`${be}.errors`,t.default.vErrors),vt.unevaluated&&Ct(ie),o.return((0,_._)`${t.default.errors} === 0`))}function Ct({gen:ie,evaluated:o,props:xe,items:be}){xe instanceof _.Name&&ie.assign((0,_._)`${o}.props`,xe),be instanceof _.Name&&ie.assign((0,_._)`${o}.items`,be)}function G(ie,o,xe,be){const{gen:Rt,schema:vt,data:Vt,allErrors:de,opts:Tt,self:xt}=ie,{RULES:ln}=xt;if(vt.$ref&&(Tt.ignoreKeywordsWithRef||!(0,f.schemaHasRulesButRef)(vt,ln))){Rt.block(()=>et(ie,"$ref",ln.all.$ref.definition));return}Tt.jtd||Et(ie,o),Rt.block(()=>{for(const dn of ln.rules)mn(dn);mn(ln.post)});function mn(dn){(0,m.shouldUseGroup)(vt,dn)&&(dn.type?(Rt.if((0,u.checkDataType)(dn.type,Vt,Tt.strictNumbers)),fn(ie,dn),o.length===1&&o[0]===dn.type&&xe&&(Rt.else(),(0,u.reportTypeError)(ie)),Rt.endIf()):fn(ie,dn),de||Rt.if((0,_._)`${t.default.errors} === ${be||0}`))}}function fn(ie,o){const{gen:xe,schema:be,opts:{useDefaults:Rt}}=ie;Rt&&(0,r.assignDefaults)(ie,o.type),xe.block(()=>{for(const vt of o.rules)(0,m.shouldUseRule)(be,vt)&&et(ie,vt.keyword,vt.definition,o.type)})}function Et(ie,o){ie.schemaEnv.meta||!ie.opts.strictTypes||(je(ie,o),ie.opts.allowUnionTypes||P(ie,o),Ue(ie,ie.dataTypes))}function je(ie,o){if(o.length){if(!ie.dataTypes.length){ie.dataTypes=o;return}o.forEach(xe=>{R(ie.dataTypes,xe)||ge(ie,`type "${xe}" not allowed by context "${ie.dataTypes.join(",")}"`)}),W(ie,o)}}function P(ie,o){o.length>1&&!(o.length===2&&o.includes("null"))&&ge(ie,"use allowUnionTypes to allow union type keyword")}function Ue(ie,o){const xe=ie.self.RULES.all;for(const be in xe){const Rt=xe[be];if(typeof Rt=="object"&&(0,m.shouldUseRule)(ie.schema,Rt)){const{type:vt}=Rt.definition;vt.length&&!vt.some(Vt=>H(o,Vt))&&ge(ie,`missing type "${vt.join(",")}" for keyword "${be}"`)}}}function H(ie,o){return ie.includes(o)||o==="number"&&ie.includes("integer")}function R(ie,o){return ie.includes(o)||o==="integer"&&ie.includes("number")}function W(ie,o){const xe=[];for(const be of ie.dataTypes)R(o,be)?xe.push(be):o.includes("integer")&&be==="number"&&xe.push("integer");ie.dataTypes=xe}function ge(ie,o){const xe=ie.schemaEnv.baseId+ie.errSchemaPath;o+=` at "${xe}" (strictTypes)`,(0,f.checkStrictMode)(ie,o,ie.opts.strictTypes)}class Me{constructor(o,xe,be){if((0,l.validateKeywordUsage)(o,xe,be),this.gen=o.gen,this.allErrors=o.allErrors,this.keyword=be,this.data=o.data,this.schema=o.schema[be],this.$data=xe.$data&&o.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(o,this.schema,be,this.$data),this.schemaType=xe.schemaType,this.parentSchema=o.schema,this.params={},this.it=o,this.def=xe,this.$data)this.schemaCode=o.gen.const("vSchema",Dt(this.$data,o));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,xe.schemaType,xe.allowUndefined))throw new Error(`${be} value must be ${JSON.stringify(xe.schemaType)}`);("code"in xe?xe.trackErrors:xe.errors!==!1)&&(this.errsCount=o.gen.const("_errs",t.default.errors))}result(o,xe,be){this.failResult((0,_.not)(o),xe,be)}failResult(o,xe,be){this.gen.if(o),be?be():this.error(),xe?(this.gen.else(),xe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(o,xe){this.failResult((0,_.not)(o),void 0,xe)}fail(o){if(o===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(o),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(o){if(!this.$data)return this.fail(o);const{schemaCode:xe}=this;this.fail((0,_._)`${xe} !== undefined && (${(0,_.or)(this.invalid$data(),o)})`)}error(o,xe,be){if(xe){this.setParams(xe),this._error(o,be),this.setParams({});return}this._error(o,be)}_error(o,xe){(o?F.reportExtraError:F.reportError)(this,this.def.error,xe)}$dataError(){(0,F.reportError)(this,this.def.$dataError||F.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,F.resetErrorsCount)(this.gen,this.errsCount)}ok(o){this.allErrors||this.gen.if(o)}setParams(o,xe){xe?Object.assign(this.params,o):this.params=o}block$data(o,xe,be=_.nil){this.gen.block(()=>{this.check$data(o,be),xe()})}check$data(o=_.nil,xe=_.nil){if(!this.$data)return;const{gen:be,schemaCode:Rt,schemaType:vt,def:Vt}=this;be.if((0,_.or)((0,_._)`${Rt} === undefined`,xe)),o!==_.nil&&be.assign(o,!0),(vt.length||Vt.validateSchema)&&(be.elseIf(this.invalid$data()),this.$dataError(),o!==_.nil&&be.assign(o,!1)),be.else()}invalid$data(){const{gen:o,schemaCode:xe,schemaType:be,def:Rt,it:vt}=this;return(0,_.or)(Vt(),de());function Vt(){if(be.length){if(!(xe instanceof _.Name))throw new Error("ajv implementation error");const Tt=Array.isArray(be)?be:[be];return(0,_._)`${(0,u.checkDataTypes)(Tt,xe,vt.opts.strictNumbers,u.DataType.Wrong)}`}return _.nil}function de(){if(Rt.validateSchema){const Tt=o.scopeValue("validate$data",{ref:Rt.validateSchema});return(0,_._)`!${Tt}(${xe})`}return _.nil}}subschema(o,xe){const be=(0,C.getSubschema)(this.it,o);(0,C.extendSubschemaData)(be,this.it,o),(0,C.extendSubschemaMode)(be,o);const Rt={...this.it,...be,items:void 0,props:void 0};return h(Rt,xe),Rt}mergeEvaluated(o,xe){const{it:be,gen:Rt}=this;be.opts.unevaluated&&(be.props!==!0&&o.props!==void 0&&(be.props=f.mergeEvaluated.props(Rt,o.props,be.props,xe)),be.items!==!0&&o.items!==void 0&&(be.items=f.mergeEvaluated.items(Rt,o.items,be.items,xe)))}mergeValidEvaluated(o,xe){const{it:be,gen:Rt}=this;if(be.opts.unevaluated&&(be.props!==!0||be.items!==!0))return Rt.if(xe,()=>this.mergeEvaluated(o,_.Name)),!0}}d.KeywordCxt=Me;function et(ie,o,xe,be){const Rt=new Me(ie,xe,o);"code"in xe?xe.code(Rt,be):Rt.$data&&xe.validate?(0,l.funcKeywordCode)(Rt,xe):"macro"in xe?(0,l.macroKeywordCode)(Rt,xe):(xe.compile||xe.validate)&&(0,l.funcKeywordCode)(Rt,xe)}const pt=/^\/(?:[^~]|~0|~1)*$/,mt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Dt(ie,{dataLevel:o,dataNames:xe,dataPathArr:be}){let Rt,vt;if(ie==="")return t.default.rootData;if(ie[0]==="/"){if(!pt.test(ie))throw new Error(`Invalid JSON-pointer: ${ie}`);Rt=ie,vt=t.default.rootData}else{const xt=mt.exec(ie);if(!xt)throw new Error(`Invalid JSON-pointer: ${ie}`);const ln=+xt[1];if(Rt=xt[2],Rt==="#"){if(ln>=o)throw new Error(Tt("property/index",ln));return be[o-ln]}if(ln>o)throw new Error(Tt("data",ln));if(vt=xe[o-ln],!Rt)return vt}let Vt=vt;const de=Rt.split("/");for(const xt of de)xt&&(vt=(0,_._)`${vt}${(0,_.getProperty)((0,f.unescapeJsonPointer)(xt))}`,Vt=(0,_._)`${Vt} && ${vt}`);return Vt;function Tt(xt,ln){return`Cannot access ${xt} ${ln} levels up, current level is ${o}`}}d.getData=Dt},83558:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateKeywordUsage=d.validSchemaType=d.funcKeywordCode=d.macroKeywordCode=void 0;const n=e(82481),c=e(99583),m=e(9280),u=e(59428);function r(B,k){const{gen:X,keyword:A,schema:D,parentSchema:N,it:p}=B,h=k.macro.call(p.self,D,N,p),b=y(X,A,h);p.opts.validateSchema!==!1&&p.self.validateSchema(h,!0);const E=X.name("valid");B.subschema({schema:h,schemaPath:n.nil,errSchemaPath:`${p.errSchemaPath}/${A}`,topSchemaRef:b,compositeRule:!0},E),B.pass(E,()=>B.error(!0))}d.macroKeywordCode=r;function l(B,k){var X;const{gen:A,keyword:D,schema:N,parentSchema:p,$data:h,it:b}=B;t(b,k);const E=!h&&k.compile?k.compile.call(b.self,N,p,b):k.validate,S=y(A,D,E),K=A.let("valid");B.block$data(K,pe),B.ok((X=k.valid)!==null&&X!==void 0?X:K);function pe(){if(k.errors===!1)ct(),k.modifying&&C(B),Ut(()=>B.error());else{const dt=k.async?he():Fe();k.modifying&&C(B),Ut(()=>_(B,dt))}}function he(){const dt=A.let("ruleErrs",null);return A.try(()=>ct((0,n._)`await `),Wt=>A.assign(K,!1).if((0,n._)`${Wt} instanceof ${b.ValidationError}`,()=>A.assign(dt,(0,n._)`${Wt}.errors`),()=>A.throw(Wt))),dt}function Fe(){const dt=(0,n._)`${S}.errors`;return A.assign(dt,null),ct(n.nil),dt}function ct(dt=k.async?(0,n._)`await `:n.nil){const Wt=b.opts.passContext?c.default.this:c.default.self,Ct=!("compile"in k&&!h||k.schema===!1);A.assign(K,(0,n._)`${dt}${(0,m.callValidateCode)(B,S,Wt,Ct)}`,k.modifying)}function Ut(dt){var Wt;A.if((0,n.not)((Wt=k.valid)!==null&&Wt!==void 0?Wt:K),dt)}}d.funcKeywordCode=l;function C(B){const{gen:k,data:X,it:A}=B;k.if(A.parentData,()=>k.assign(X,(0,n._)`${A.parentData}[${A.parentDataProperty}]`))}function _(B,k){const{gen:X}=B;X.if((0,n._)`Array.isArray(${k})`,()=>{X.assign(c.default.vErrors,(0,n._)`${c.default.vErrors} === null ? ${k} : ${c.default.vErrors}.concat(${k})`).assign(c.default.errors,(0,n._)`${c.default.vErrors}.length`),(0,u.extendErrors)(B)},()=>B.error())}function t({schemaEnv:B},k){if(k.async&&!B.$async)throw new Error("async keyword in sync schema")}function y(B,k,X){if(X===void 0)throw new Error(`keyword "${k}" failed to compile`);return B.scopeValue("keyword",typeof X=="function"?{ref:X}:{ref:X,code:(0,n.stringify)(X)})}function f(B,k,X=!1){return!k.length||k.some(A=>A==="array"?Array.isArray(B):A==="object"?B&&typeof B=="object"&&!Array.isArray(B):typeof B==A||X&&typeof B=="undefined")}d.validSchemaType=f;function F({schema:B,opts:k,self:X,errSchemaPath:A},D,N){if(Array.isArray(D.keyword)?!D.keyword.includes(N):D.keyword!==N)throw new Error("ajv implementation error");const p=D.dependencies;if(p!=null&&p.some(h=>!Object.prototype.hasOwnProperty.call(B,h)))throw new Error(`parent schema must have dependencies of ${N}: ${p.join(",")}`);if(D.validateSchema&&!D.validateSchema(B[N])){const b=`keyword "${N}" value is invalid at path "${A}": `+X.errorsText(D.validateSchema.errors);if(k.validateSchema==="log")X.logger.error(b);else throw new Error(b)}}d.validateKeywordUsage=F},20521:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.extendSubschemaMode=d.extendSubschemaData=d.getSubschema=void 0;const n=e(82481),c=e(1849);function m(l,{keyword:C,schemaProp:_,schema:t,schemaPath:y,errSchemaPath:f,topSchemaRef:F}){if(C!==void 0&&t!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(C!==void 0){const B=l.schema[C];return _===void 0?{schema:B,schemaPath:(0,n._)`${l.schemaPath}${(0,n.getProperty)(C)}`,errSchemaPath:`${l.errSchemaPath}/${C}`}:{schema:B[_],schemaPath:(0,n._)`${l.schemaPath}${(0,n.getProperty)(C)}${(0,n.getProperty)(_)}`,errSchemaPath:`${l.errSchemaPath}/${C}/${(0,c.escapeFragment)(_)}`}}if(t!==void 0){if(y===void 0||f===void 0||F===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:t,schemaPath:y,topSchemaRef:F,errSchemaPath:f}}throw new Error('either "keyword" or "schema" must be passed')}d.getSubschema=m;function u(l,C,{dataProp:_,dataPropType:t,data:y,dataTypes:f,propertyName:F}){if(y!==void 0&&_!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:B}=C;if(_!==void 0){const{errorPath:X,dataPathArr:A,opts:D}=C,N=B.let("data",(0,n._)`${C.data}${(0,n.getProperty)(_)}`,!0);k(N),l.errorPath=(0,n.str)`${X}${(0,c.getErrorPath)(_,t,D.jsPropertySyntax)}`,l.parentDataProperty=(0,n._)`${_}`,l.dataPathArr=[...A,l.parentDataProperty]}if(y!==void 0){const X=y instanceof n.Name?y:B.let("data",y,!0);k(X),F!==void 0&&(l.propertyName=F)}f&&(l.dataTypes=f);function k(X){l.data=X,l.dataLevel=C.dataLevel+1,l.dataTypes=[],C.definedProperties=new Set,l.parentData=C.data,l.dataNames=[...C.dataNames,X]}}d.extendSubschemaData=u;function r(l,{jtdDiscriminator:C,jtdMetadata:_,compositeRule:t,createErrors:y,allErrors:f}){t!==void 0&&(l.compositeRule=t),y!==void 0&&(l.createErrors=y),f!==void 0&&(l.allErrors=f),l.jtdDiscriminator=C,l.jtdMetadata=_}d.extendSubschemaMode=r},61889:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.CodeGen=d.Name=d.nil=d.stringify=d.str=d._=d.KeywordCxt=void 0;var n=e(4371);Object.defineProperty(d,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var c=e(82481);Object.defineProperty(d,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(d,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(d,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(d,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(d,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(d,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});const m=e(14319),u=e(30283),r=e(18288),l=e(62902),C=e(82481),_=e(2710),t=e(93277),y=e(1849),f=e(85310),F=e(3075),B=(je,P)=>new RegExp(je,P);B.code="new RegExp";const k=["removeAdditional","useDefaults","coerceTypes"],X=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),A={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},D={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},N=200;function p(je){var P,Ue,H,R,W,ge,Me,et,pt,mt,Dt,ie,o,xe,be,Rt,vt,Vt,de,Tt,xt,ln,mn,dn,Ln;const it=je.strict,$e=(P=je.code)===null||P===void 0?void 0:P.optimize,Zt=$e===!0||$e===void 0?1:$e||0,Je=(H=(Ue=je.code)===null||Ue===void 0?void 0:Ue.regExp)!==null&&H!==void 0?H:B,Pe=(R=je.uriResolver)!==null&&R!==void 0?R:F.default;return{strictSchema:(ge=(W=je.strictSchema)!==null&&W!==void 0?W:it)!==null&&ge!==void 0?ge:!0,strictNumbers:(et=(Me=je.strictNumbers)!==null&&Me!==void 0?Me:it)!==null&&et!==void 0?et:!0,strictTypes:(mt=(pt=je.strictTypes)!==null&&pt!==void 0?pt:it)!==null&&mt!==void 0?mt:"log",strictTuples:(ie=(Dt=je.strictTuples)!==null&&Dt!==void 0?Dt:it)!==null&&ie!==void 0?ie:"log",strictRequired:(xe=(o=je.strictRequired)!==null&&o!==void 0?o:it)!==null&&xe!==void 0?xe:!1,code:je.code?{...je.code,optimize:Zt,regExp:Je}:{optimize:Zt,regExp:Je},loopRequired:(be=je.loopRequired)!==null&&be!==void 0?be:N,loopEnum:(Rt=je.loopEnum)!==null&&Rt!==void 0?Rt:N,meta:(vt=je.meta)!==null&&vt!==void 0?vt:!0,messages:(Vt=je.messages)!==null&&Vt!==void 0?Vt:!0,inlineRefs:(de=je.inlineRefs)!==null&&de!==void 0?de:!0,schemaId:(Tt=je.schemaId)!==null&&Tt!==void 0?Tt:"$id",addUsedSchema:(xt=je.addUsedSchema)!==null&&xt!==void 0?xt:!0,validateSchema:(ln=je.validateSchema)!==null&&ln!==void 0?ln:!0,validateFormats:(mn=je.validateFormats)!==null&&mn!==void 0?mn:!0,unicodeRegExp:(dn=je.unicodeRegExp)!==null&&dn!==void 0?dn:!0,int32range:(Ln=je.int32range)!==null&&Ln!==void 0?Ln:!0,uriResolver:Pe}}class h{constructor(P={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,P=this.opts={...P,...p(P)};const{es5:Ue,lines:H}=this.opts.code;this.scope=new C.ValueScope({scope:{},prefixes:X,es5:Ue,lines:H}),this.logger=ct(P.logger);const R=P.validateFormats;P.validateFormats=!1,this.RULES=(0,r.getRules)(),b.call(this,A,P,"NOT SUPPORTED"),b.call(this,D,P,"DEPRECATED","warn"),this._metaOpts=he.call(this),P.formats&&K.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),P.keywords&&pe.call(this,P.keywords),typeof P.meta=="object"&&this.addMetaSchema(P.meta),S.call(this),P.validateFormats=R}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:P,meta:Ue,schemaId:H}=this.opts;let R=f;H==="id"&&(R={...f},R.id=R.$id,delete R.$id),Ue&&P&&this.addMetaSchema(R,R[H],!1)}defaultMeta(){const{meta:P,schemaId:Ue}=this.opts;return this.opts.defaultMeta=typeof P=="object"?P[Ue]||P:void 0}validate(P,Ue){let H;if(typeof P=="string"){if(H=this.getSchema(P),!H)throw new Error(`no schema with key or ref "${P}"`)}else H=this.compile(P);const R=H(Ue);return"$async"in H||(this.errors=H.errors),R}compile(P,Ue){const H=this._addSchema(P,Ue);return H.validate||this._compileSchemaEnv(H)}compileAsync(P,Ue){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return R.call(this,P,Ue);async function R(mt,Dt){await W.call(this,mt.$schema);const ie=this._addSchema(mt,Dt);return ie.validate||ge.call(this,ie)}async function W(mt){mt&&!this.getSchema(mt)&&await R.call(this,{$ref:mt},!0)}async function ge(mt){try{return this._compileSchemaEnv(mt)}catch(Dt){if(!(Dt instanceof u.default))throw Dt;return Me.call(this,Dt),await et.call(this,Dt.missingSchema),ge.call(this,mt)}}function Me({missingSchema:mt,missingRef:Dt}){if(this.refs[mt])throw new Error(`AnySchema ${mt} is loaded but ${Dt} cannot be resolved`)}async function et(mt){const Dt=await pt.call(this,mt);this.refs[mt]||await W.call(this,Dt.$schema),this.refs[mt]||this.addSchema(Dt,mt,Ue)}async function pt(mt){const Dt=this._loading[mt];if(Dt)return Dt;try{return await(this._loading[mt]=H(mt))}finally{delete this._loading[mt]}}}addSchema(P,Ue,H,R=this.opts.validateSchema){if(Array.isArray(P)){for(const ge of P)this.addSchema(ge,void 0,H,R);return this}let W;if(typeof P=="object"){const{schemaId:ge}=this.opts;if(W=P[ge],W!==void 0&&typeof W!="string")throw new Error(`schema ${ge} must be string`)}return Ue=(0,_.normalizeId)(Ue||W),this._checkUnique(Ue),this.schemas[Ue]=this._addSchema(P,H,Ue,R,!0),this}addMetaSchema(P,Ue,H=this.opts.validateSchema){return this.addSchema(P,Ue,!0,H),this}validateSchema(P,Ue){if(typeof P=="boolean")return!0;let H;if(H=P.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const R=this.validate(H,P);if(!R&&Ue){const W="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(W);else throw new Error(W)}return R}getSchema(P){let Ue;for(;typeof(Ue=E.call(this,P))=="string";)P=Ue;if(Ue===void 0){const{schemaId:H}=this.opts,R=new l.SchemaEnv({schema:{},schemaId:H});if(Ue=l.resolveSchema.call(this,R,P),!Ue)return;this.refs[P]=Ue}return Ue.validate||this._compileSchemaEnv(Ue)}removeSchema(P){if(P instanceof RegExp)return this._removeAllSchemas(this.schemas,P),this._removeAllSchemas(this.refs,P),this;switch(typeof P){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Ue=E.call(this,P);return typeof Ue=="object"&&this._cache.delete(Ue.schema),delete this.schemas[P],delete this.refs[P],this}case"object":{const Ue=P;this._cache.delete(Ue);let H=P[this.opts.schemaId];return H&&(H=(0,_.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(P){for(const Ue of P)this.addKeyword(Ue);return this}addKeyword(P,Ue){let H;if(typeof P=="string")H=P,typeof Ue=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Ue.keyword=H);else if(typeof P=="object"&&Ue===void 0){if(Ue=P,H=Ue.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(dt.call(this,H,Ue),!Ue)return(0,y.eachItem)(H,W=>Wt.call(this,W)),this;G.call(this,Ue);const R={...Ue,type:(0,t.getJSONTypes)(Ue.type),schemaType:(0,t.getJSONTypes)(Ue.schemaType)};return(0,y.eachItem)(H,R.type.length===0?W=>Wt.call(this,W,R):W=>R.type.forEach(ge=>Wt.call(this,W,R,ge))),this}getKeyword(P){const Ue=this.RULES.all[P];return typeof Ue=="object"?Ue.definition:!!Ue}removeKeyword(P){const{RULES:Ue}=this;delete Ue.keywords[P],delete Ue.all[P];for(const H of Ue.rules){const R=H.rules.findIndex(W=>W.keyword===P);R>=0&&H.rules.splice(R,1)}return this}addFormat(P,Ue){return typeof Ue=="string"&&(Ue=new RegExp(Ue)),this.formats[P]=Ue,this}errorsText(P=this.errors,{separator:Ue=", ",dataVar:H="data"}={}){return!P||P.length===0?"No errors":P.map(R=>`${H}${R.instancePath} ${R.message}`).reduce((R,W)=>R+Ue+W)}$dataMetaSchema(P,Ue){const H=this.RULES.all;P=JSON.parse(JSON.stringify(P));for(const R of Ue){const W=R.split("/").slice(1);let ge=P;for(const Me of W)ge=ge[Me];for(const Me in H){const et=H[Me];if(typeof et!="object")continue;const{$data:pt}=et.definition,mt=ge[Me];pt&&mt&&(ge[Me]=Et(mt))}}return P}_removeAllSchemas(P,Ue){for(const H in P){const R=P[H];(!Ue||Ue.test(H))&&(typeof R=="string"?delete P[H]:R&&!R.meta&&(this._cache.delete(R.schema),delete P[H]))}}_addSchema(P,Ue,H,R=this.opts.validateSchema,W=this.opts.addUsedSchema){let ge;const{schemaId:Me}=this.opts;if(typeof P=="object")ge=P[Me];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof P!="boolean")throw new Error("schema must be object or boolean")}let et=this._cache.get(P);if(et!==void 0)return et;H=(0,_.normalizeId)(ge||H);const pt=_.getSchemaRefs.call(this,P,H);return et=new l.SchemaEnv({schema:P,schemaId:Me,meta:Ue,baseId:H,localRefs:pt}),this._cache.set(et.schema,et),W&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=et),R&&this.validateSchema(P,!0),et}_checkUnique(P){if(this.schemas[P]||this.refs[P])throw new Error(`schema with key or id "${P}" already exists`)}_compileSchemaEnv(P){if(P.meta?this._compileMetaSchema(P):l.compileSchema.call(this,P),!P.validate)throw new Error("ajv implementation error");return P.validate}_compileMetaSchema(P){const Ue=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,P)}finally{this.opts=Ue}}}d.default=h,h.ValidationError=m.default,h.MissingRefError=u.default;function b(je,P,Ue,H="error"){for(const R in je){const W=R;W in P&&this.logger[H](`${Ue}: option ${R}. ${je[W]}`)}}function E(je){return je=(0,_.normalizeId)(je),this.schemas[je]||this.refs[je]}function S(){const je=this.opts.schemas;if(je)if(Array.isArray(je))this.addSchema(je);else for(const P in je)this.addSchema(je[P],P)}function K(){for(const je in this.opts.formats){const P=this.opts.formats[je];P&&this.addFormat(je,P)}}function pe(je){if(Array.isArray(je)){this.addVocabulary(je);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const P in je){const Ue=je[P];Ue.keyword||(Ue.keyword=P),this.addKeyword(Ue)}}function he(){const je={...this.opts};for(const P of k)delete je[P];return je}const Fe={log(){},warn(){},error(){}};function ct(je){if(je===!1)return Fe;if(je===void 0)return console;if(je.log&&je.warn&&je.error)return je;throw new Error("logger must implement log, warn and error methods")}const Ut=/^[a-z_$][a-z0-9_$:-]*$/i;function dt(je,P){const{RULES:Ue}=this;if((0,y.eachItem)(je,H=>{if(Ue.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!Ut.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!P&&P.$data&&!("code"in P||"validate"in P))throw new Error('$data keyword must have "code" or "validate" function')}function Wt(je,P,Ue){var H;const R=P==null?void 0:P.post;if(Ue&&R)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:W}=this;let ge=R?W.post:W.rules.find(({type:et})=>et===Ue);if(ge||(ge={type:Ue,rules:[]},W.rules.push(ge)),W.keywords[je]=!0,!P)return;const Me={keyword:je,definition:{...P,type:(0,t.getJSONTypes)(P.type),schemaType:(0,t.getJSONTypes)(P.schemaType)}};P.before?Ct.call(this,ge,Me,P.before):ge.rules.push(Me),W.all[je]=Me,(H=P.implements)===null||H===void 0||H.forEach(et=>this.addKeyword(et))}function Ct(je,P,Ue){const H=je.rules.findIndex(R=>R.keyword===Ue);H>=0?je.rules.splice(H,0,P):(je.rules.push(P),this.logger.warn(`rule ${Ue} is not defined`))}function G(je){let{metaSchema:P}=je;P!==void 0&&(je.$data&&this.opts.$data&&(P=Et(P)),je.validateSchema=this.compile(P,!0))}const fn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Et(je){return{anyOf:[je,fn]}}},55947:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(69378);n.code='require("ajv/dist/runtime/equal").default',d.default=n},7836:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0});function e(n){const c=n.length;let m=0,u=0,r;for(;u<c;)m++,r=n.charCodeAt(u++),r>=55296&&r<=56319&&u<c&&(r=n.charCodeAt(u),(r&64512)===56320&&u++);return m}d.default=e,e.code='require("ajv/dist/runtime/ucs2length").default'},3075:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(12854);n.code='require("ajv/dist/runtime/uri").default',d.default=n},14319:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0});class e extends Error{constructor(c){super("validation failed"),this.errors=c,this.ajv=this.validation=!0}}d.default=e},52251:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateAdditionalItems=void 0;const n=e(82481),c=e(1849),u={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:l}})=>(0,n.str)`must NOT have more than ${l} items`,params:({params:{len:l}})=>(0,n._)`{limit: ${l}}`},code(l){const{parentSchema:C,it:_}=l,{items:t}=C;if(!Array.isArray(t)){(0,c.checkStrictMode)(_,'"additionalItems" is ignored when "items" is not an array of schemas');return}r(l,t)}};function r(l,C){const{gen:_,schema:t,data:y,keyword:f,it:F}=l;F.items=!0;const B=_.const("len",(0,n._)`${y}.length`);if(t===!1)l.setParams({len:C.length}),l.pass((0,n._)`${B} <= ${C.length}`);else if(typeof t=="object"&&!(0,c.alwaysValidSchema)(F,t)){const X=_.var("valid",(0,n._)`${B} <= ${C.length}`);_.if((0,n.not)(X),()=>k(X)),l.ok(X)}function k(X){_.forRange("i",C.length,B,A=>{l.subschema({keyword:f,dataProp:A,dataPropType:c.Type.Num},X),F.allErrors||_.if((0,n.not)(X),()=>_.break())})}}d.validateAdditionalItems=r,d.default=u},17831:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),c=e(82481),m=e(99583),u=e(1849),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:C})=>(0,c._)`{additionalProperty: ${C.additionalProperty}}`},code(C){const{gen:_,schema:t,parentSchema:y,data:f,errsCount:F,it:B}=C;if(!F)throw new Error("ajv implementation error");const{allErrors:k,opts:X}=B;if(B.props=!0,X.removeAdditional!=="all"&&(0,u.alwaysValidSchema)(B,t))return;const A=(0,n.allSchemaProperties)(y.properties),D=(0,n.allSchemaProperties)(y.patternProperties);N(),C.ok((0,c._)`${F} === ${m.default.errors}`);function N(){_.forIn("key",f,S=>{!A.length&&!D.length?b(S):_.if(p(S),()=>b(S))})}function p(S){let K;if(A.length>8){const pe=(0,u.schemaRefOrVal)(B,y.properties,"properties");K=(0,n.isOwnProperty)(_,pe,S)}else A.length?K=(0,c.or)(...A.map(pe=>(0,c._)`${S} === ${pe}`)):K=c.nil;return D.length&&(K=(0,c.or)(K,...D.map(pe=>(0,c._)`${(0,n.usePattern)(C,pe)}.test(${S})`))),(0,c.not)(K)}function h(S){_.code((0,c._)`delete ${f}[${S}]`)}function b(S){if(X.removeAdditional==="all"||X.removeAdditional&&t===!1){h(S);return}if(t===!1){C.setParams({additionalProperty:S}),C.error(),k||_.break();return}if(typeof t=="object"&&!(0,u.alwaysValidSchema)(B,t)){const K=_.name("valid");X.removeAdditional==="failing"?(E(S,K,!1),_.if((0,c.not)(K),()=>{C.reset(),h(S)})):(E(S,K),k||_.if((0,c.not)(K),()=>_.break()))}}function E(S,K,pe){const he={keyword:"additionalProperties",dataProp:S,dataPropType:u.Type.Str};pe===!1&&Object.assign(he,{compositeRule:!0,createErrors:!1,allErrors:!1}),C.subschema(he,K)}}};d.default=l},15319:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),c={keyword:"allOf",schemaType:"array",code(m){const{gen:u,schema:r,it:l}=m;if(!Array.isArray(r))throw new Error("ajv implementation error");const C=u.name("valid");r.forEach((_,t)=>{if((0,n.alwaysValidSchema)(l,_))return;const y=m.subschema({keyword:"allOf",schemaProp:t},C);m.ok(C),m.mergeEvaluated(y)})}};d.default=c},60513:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const c={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e(9280).validateUnion,error:{message:"must match a schema in anyOf"}};d.default=c},51622:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),u={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:r,max:l}})=>l===void 0?(0,n.str)`must contain at least ${r} valid item(s)`:(0,n.str)`must contain at least ${r} and no more than ${l} valid item(s)`,params:({params:{min:r,max:l}})=>l===void 0?(0,n._)`{minContains: ${r}}`:(0,n._)`{minContains: ${r}, maxContains: ${l}}`},code(r){const{gen:l,schema:C,parentSchema:_,data:t,it:y}=r;let f,F;const{minContains:B,maxContains:k}=_;y.opts.next?(f=B===void 0?1:B,F=k):f=1;const X=l.const("len",(0,n._)`${t}.length`);if(r.setParams({min:f,max:F}),F===void 0&&f===0){(0,c.checkStrictMode)(y,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(F!==void 0&&f>F){(0,c.checkStrictMode)(y,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,c.alwaysValidSchema)(y,C)){let h=(0,n._)`${X} >= ${f}`;F!==void 0&&(h=(0,n._)`${h} && ${X} <= ${F}`),r.pass(h);return}y.items=!0;const A=l.name("valid");F===void 0&&f===1?N(A,()=>l.if(A,()=>l.break())):f===0?(l.let(A,!0),F!==void 0&&l.if((0,n._)`${t}.length > 0`,D)):(l.let(A,!1),D()),r.result(A,()=>r.reset());function D(){const h=l.name("_valid"),b=l.let("count",0);N(h,()=>l.if(h,()=>p(b)))}function N(h,b){l.forRange("i",0,X,E=>{r.subschema({keyword:"contains",dataProp:E,dataPropType:c.Type.Num,compositeRule:!0},h),b()})}function p(h){l.code((0,n._)`${h}++`),F===void 0?l.if((0,n._)`${h} >= ${f}`,()=>l.assign(A,!0).break()):(l.if((0,n._)`${h} > ${F}`,()=>l.assign(A,!1).break()),f===1?l.assign(A,!0):l.if((0,n._)`${h} >= ${f}`,()=>l.assign(A,!0)))}}};d.default=u},8524:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateSchemaDeps=d.validatePropertyDeps=d.error=void 0;const n=e(82481),c=e(1849),m=e(9280);d.error={message:({params:{property:_,depsCount:t,deps:y}})=>{const f=t===1?"property":"properties";return(0,n.str)`must have ${f} ${y} when property ${_} is present`},params:({params:{property:_,depsCount:t,deps:y,missingProperty:f}})=>(0,n._)`{property: ${_},
    missingProperty: ${f},
    depsCount: ${t},
    deps: ${y}}`};const u={keyword:"dependencies",type:"object",schemaType:"object",error:d.error,code(_){const[t,y]=r(_);l(_,t),C(_,y)}};function r({schema:_}){const t={},y={};for(const f in _){if(f==="__proto__")continue;const F=Array.isArray(_[f])?t:y;F[f]=_[f]}return[t,y]}function l(_,t=_.schema){const{gen:y,data:f,it:F}=_;if(Object.keys(t).length===0)return;const B=y.let("missing");for(const k in t){const X=t[k];if(X.length===0)continue;const A=(0,m.propertyInData)(y,f,k,F.opts.ownProperties);_.setParams({property:k,depsCount:X.length,deps:X.join(", ")}),F.allErrors?y.if(A,()=>{for(const D of X)(0,m.checkReportMissingProp)(_,D)}):(y.if((0,n._)`${A} && (${(0,m.checkMissingProp)(_,X,B)})`),(0,m.reportMissingProp)(_,B),y.else())}}d.validatePropertyDeps=l;function C(_,t=_.schema){const{gen:y,data:f,keyword:F,it:B}=_,k=y.name("valid");for(const X in t)(0,c.alwaysValidSchema)(B,t[X])||(y.if((0,m.propertyInData)(y,f,X,B.opts.ownProperties),()=>{const A=_.subschema({keyword:F,schemaProp:X},k);_.mergeValidEvaluated(A,k)},()=>y.var(k,!0)),_.ok(k))}d.validateSchemaDeps=C,d.default=u},74413:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),u={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:l})=>(0,n.str)`must match "${l.ifClause}" schema`,params:({params:l})=>(0,n._)`{failingKeyword: ${l.ifClause}}`},code(l){const{gen:C,parentSchema:_,it:t}=l;_.then===void 0&&_.else===void 0&&(0,c.checkStrictMode)(t,'"if" without "then" and "else" is ignored');const y=r(t,"then"),f=r(t,"else");if(!y&&!f)return;const F=C.let("valid",!0),B=C.name("_valid");if(k(),l.reset(),y&&f){const A=C.let("ifClause");l.setParams({ifClause:A}),C.if(B,X("then",A),X("else",A))}else y?C.if(B,X("then")):C.if((0,n.not)(B),X("else"));l.pass(F,()=>l.error(!0));function k(){const A=l.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},B);l.mergeEvaluated(A)}function X(A,D){return()=>{const N=l.subschema({keyword:A},B);C.assign(F,B),l.mergeValidEvaluated(N,F),D?C.assign(D,(0,n._)`${A}`):l.setParams({ifClause:A})}}}};function r(l,C){const _=l.schema[C];return _!==void 0&&!(0,c.alwaysValidSchema)(l,_)}d.default=u},14226:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(52251),c=e(38968),m=e(3042),u=e(69719),r=e(51622),l=e(8524),C=e(53261),_=e(17831),t=e(81734),y=e(47673),f=e(73270),F=e(60513),B=e(84959),k=e(15319),X=e(74413),A=e(5095);function D(N=!1){const p=[f.default,F.default,B.default,k.default,X.default,A.default,C.default,_.default,l.default,t.default,y.default];return N?p.push(c.default,u.default):p.push(n.default,m.default),p.push(r.default),p}d.default=D},3042:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateTuple=void 0;const n=e(82481),c=e(1849),m=e(9280),u={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(l){const{schema:C,it:_}=l;if(Array.isArray(C))return r(l,"additionalItems",C);_.items=!0,!(0,c.alwaysValidSchema)(_,C)&&l.ok((0,m.validateArray)(l))}};function r(l,C,_=l.schema){const{gen:t,parentSchema:y,data:f,keyword:F,it:B}=l;A(y),B.opts.unevaluated&&_.length&&B.items!==!0&&(B.items=c.mergeEvaluated.items(t,_.length,B.items));const k=t.name("valid"),X=t.const("len",(0,n._)`${f}.length`);_.forEach((D,N)=>{(0,c.alwaysValidSchema)(B,D)||(t.if((0,n._)`${X} > ${N}`,()=>l.subschema({keyword:F,schemaProp:N,dataProp:N},k)),l.ok(k))});function A(D){const{opts:N,errSchemaPath:p}=B,h=_.length,b=h===D.minItems&&(h===D.maxItems||D[C]===!1);if(N.strictTuples&&!b){const E=`"${F}" is ${h}-tuple, but minItems or maxItems/${C} are not specified or different at path "${p}"`;(0,c.checkStrictMode)(B,E,N.strictTuples)}}}d.validateTuple=r,d.default=u},69719:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),m=e(9280),u=e(52251),l={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:C}})=>(0,n.str)`must NOT have more than ${C} items`,params:({params:{len:C}})=>(0,n._)`{limit: ${C}}`},code(C){const{schema:_,parentSchema:t,it:y}=C,{prefixItems:f}=t;y.items=!0,!(0,c.alwaysValidSchema)(y,_)&&(f?(0,u.validateAdditionalItems)(C,f):C.ok((0,m.validateArray)(C)))}};d.default=l},73270:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),c={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(m){const{gen:u,schema:r,it:l}=m;if((0,n.alwaysValidSchema)(l,r)){m.fail();return}const C=u.name("valid");m.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},C),m.failResult(C,()=>m.reset(),()=>m.error())},error:{message:"must NOT be valid"}};d.default=c},84959:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),u={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:r})=>(0,n._)`{passingSchemas: ${r.passing}}`},code(r){const{gen:l,schema:C,parentSchema:_,it:t}=r;if(!Array.isArray(C))throw new Error("ajv implementation error");if(t.opts.discriminator&&_.discriminator)return;const y=C,f=l.let("valid",!1),F=l.let("passing",null),B=l.name("_valid");r.setParams({passing:F}),l.block(k),r.result(f,()=>r.reset(),()=>r.error(!0));function k(){y.forEach((X,A)=>{let D;(0,c.alwaysValidSchema)(t,X)?l.var(B,!0):D=r.subschema({keyword:"oneOf",schemaProp:A,compositeRule:!0},B),A>0&&l.if((0,n._)`${B} && ${f}`).assign(f,!1).assign(F,(0,n._)`[${F}, ${A}]`).else(),l.if(B,()=>{l.assign(f,!0),l.assign(F,A),D&&r.mergeEvaluated(D,n.Name)})})}}};d.default=u},47673:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),c=e(82481),m=e(1849),u=e(1849),r={keyword:"patternProperties",type:"object",schemaType:"object",code(l){const{gen:C,schema:_,data:t,parentSchema:y,it:f}=l,{opts:F}=f,B=(0,n.allSchemaProperties)(_),k=B.filter(b=>(0,m.alwaysValidSchema)(f,_[b]));if(B.length===0||k.length===B.length&&(!f.opts.unevaluated||f.props===!0))return;const X=F.strictSchema&&!F.allowMatchingProperties&&y.properties,A=C.name("valid");f.props!==!0&&!(f.props instanceof c.Name)&&(f.props=(0,u.evaluatedPropsToName)(C,f.props));const{props:D}=f;N();function N(){for(const b of B)X&&p(b),f.allErrors?h(b):(C.var(A,!0),h(b),C.if(A))}function p(b){for(const E in X)new RegExp(b).test(E)&&(0,m.checkStrictMode)(f,`property ${E} matches pattern ${b} (use allowMatchingProperties)`)}function h(b){C.forIn("key",t,E=>{C.if((0,c._)`${(0,n.usePattern)(l,b)}.test(${E})`,()=>{const S=k.includes(b);S||l.subschema({keyword:"patternProperties",schemaProp:b,dataProp:E,dataPropType:u.Type.Str},A),f.opts.unevaluated&&D!==!0?C.assign((0,c._)`${D}[${E}]`,!0):!S&&!f.allErrors&&C.if((0,c.not)(A),()=>C.break())})})}}};d.default=r},38968:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(3042),c={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:m=>(0,n.validateTuple)(m,"items")};d.default=c},81734:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(4371),c=e(9280),m=e(1849),u=e(17831),r={keyword:"properties",type:"object",schemaType:"object",code(l){const{gen:C,schema:_,parentSchema:t,data:y,it:f}=l;f.opts.removeAdditional==="all"&&t.additionalProperties===void 0&&u.default.code(new n.KeywordCxt(f,u.default,"additionalProperties"));const F=(0,c.allSchemaProperties)(_);for(const D of F)f.definedProperties.add(D);f.opts.unevaluated&&F.length&&f.props!==!0&&(f.props=m.mergeEvaluated.props(C,(0,m.toHash)(F),f.props));const B=F.filter(D=>!(0,m.alwaysValidSchema)(f,_[D]));if(B.length===0)return;const k=C.name("valid");for(const D of B)X(D)?A(D):(C.if((0,c.propertyInData)(C,y,D,f.opts.ownProperties)),A(D),f.allErrors||C.else().var(k,!0),C.endIf()),l.it.definedProperties.add(D),l.ok(k);function X(D){return f.opts.useDefaults&&!f.compositeRule&&_[D].default!==void 0}function A(D){l.subschema({keyword:"properties",schemaProp:D,dataProp:D},k)}}};d.default=r},53261:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),u={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:r})=>(0,n._)`{propertyName: ${r.propertyName}}`},code(r){const{gen:l,schema:C,data:_,it:t}=r;if((0,c.alwaysValidSchema)(t,C))return;const y=l.name("valid");l.forIn("key",_,f=>{r.setParams({propertyName:f}),r.subschema({keyword:"propertyNames",data:f,dataTypes:["string"],propertyName:f,compositeRule:!0},y),l.if((0,n.not)(y),()=>{r.error(!0),t.allErrors||l.break()})}),r.ok(y)}};d.default=u},5095:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(1849),c={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:m,parentSchema:u,it:r}){u.if===void 0&&(0,n.checkStrictMode)(r,`"${m}" without "if" is ignored`)}};d.default=c},9280:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.validateUnion=d.validateArray=d.usePattern=d.callValidateCode=d.schemaProperties=d.allSchemaProperties=d.noPropertyInData=d.propertyInData=d.isOwnProperty=d.hasPropFunc=d.reportMissingProp=d.checkMissingProp=d.checkReportMissingProp=void 0;const n=e(82481),c=e(1849),m=e(99583),u=e(1849);function r(p,h){const{gen:b,data:E,it:S}=p;b.if(f(b,E,h,S.opts.ownProperties),()=>{p.setParams({missingProperty:(0,n._)`${h}`},!0),p.error()})}d.checkReportMissingProp=r;function l({gen:p,data:h,it:{opts:b}},E,S){return(0,n.or)(...E.map(K=>(0,n.and)(f(p,h,K,b.ownProperties),(0,n._)`${S} = ${K}`)))}d.checkMissingProp=l;function C(p,h){p.setParams({missingProperty:h},!0),p.error()}d.reportMissingProp=C;function _(p){return p.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}d.hasPropFunc=_;function t(p,h,b){return(0,n._)`${_(p)}.call(${h}, ${b})`}d.isOwnProperty=t;function y(p,h,b,E){const S=(0,n._)`${h}${(0,n.getProperty)(b)} !== undefined`;return E?(0,n._)`${S} && ${t(p,h,b)}`:S}d.propertyInData=y;function f(p,h,b,E){const S=(0,n._)`${h}${(0,n.getProperty)(b)} === undefined`;return E?(0,n.or)(S,(0,n.not)(t(p,h,b))):S}d.noPropertyInData=f;function F(p){return p?Object.keys(p).filter(h=>h!=="__proto__"):[]}d.allSchemaProperties=F;function B(p,h){return F(h).filter(b=>!(0,c.alwaysValidSchema)(p,h[b]))}d.schemaProperties=B;function k({schemaCode:p,data:h,it:{gen:b,topSchemaRef:E,schemaPath:S,errorPath:K},it:pe},he,Fe,ct){const Ut=ct?(0,n._)`${p}, ${h}, ${E}${S}`:h,dt=[[m.default.instancePath,(0,n.strConcat)(m.default.instancePath,K)],[m.default.parentData,pe.parentData],[m.default.parentDataProperty,pe.parentDataProperty],[m.default.rootData,m.default.rootData]];pe.opts.dynamicRef&&dt.push([m.default.dynamicAnchors,m.default.dynamicAnchors]);const Wt=(0,n._)`${Ut}, ${b.object(...dt)}`;return Fe!==n.nil?(0,n._)`${he}.call(${Fe}, ${Wt})`:(0,n._)`${he}(${Wt})`}d.callValidateCode=k;const X=(0,n._)`new RegExp`;function A({gen:p,it:{opts:h}},b){const E=h.unicodeRegExp?"u":"",{regExp:S}=h.code,K=S(b,E);return p.scopeValue("pattern",{key:K.toString(),ref:K,code:(0,n._)`${S.code==="new RegExp"?X:(0,u.useFunc)(p,S)}(${b}, ${E})`})}d.usePattern=A;function D(p){const{gen:h,data:b,keyword:E,it:S}=p,K=h.name("valid");if(S.allErrors){const he=h.let("valid",!0);return pe(()=>h.assign(he,!1)),he}return h.var(K,!0),pe(()=>h.break()),K;function pe(he){const Fe=h.const("len",(0,n._)`${b}.length`);h.forRange("i",0,Fe,ct=>{p.subschema({keyword:E,dataProp:ct,dataPropType:c.Type.Num},K),h.if((0,n.not)(K),he)})}}d.validateArray=D;function N(p){const{gen:h,schema:b,keyword:E,it:S}=p;if(!Array.isArray(b))throw new Error("ajv implementation error");if(b.some(Fe=>(0,c.alwaysValidSchema)(S,Fe))&&!S.opts.unevaluated)return;const pe=h.let("valid",!1),he=h.name("_valid");h.block(()=>b.forEach((Fe,ct)=>{const Ut=p.subschema({keyword:E,schemaProp:ct,compositeRule:!0},he);h.assign(pe,(0,n._)`${pe} || ${he}`),p.mergeValidEvaluated(Ut,he)||h.if((0,n.not)(pe))})),p.result(pe,()=>p.reset(),()=>p.error(!0))}d.validateUnion=N},5671:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};d.default=e},10356:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(5671),c=e(24302),m=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,c.default];d.default=m},24302:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0}),d.callRef=d.getValidate=void 0;const n=e(30283),c=e(9280),m=e(82481),u=e(99583),r=e(62902),l=e(1849),C={keyword:"$ref",schemaType:"string",code(y){const{gen:f,schema:F,it:B}=y,{baseId:k,schemaEnv:X,validateName:A,opts:D,self:N}=B,{root:p}=X;if((F==="#"||F==="#/")&&k===p.baseId)return b();const h=r.resolveRef.call(N,p,k,F);if(h===void 0)throw new n.default(B.opts.uriResolver,k,F);if(h instanceof r.SchemaEnv)return E(h);return S(h);function b(){if(X===p)return t(y,A,X,X.$async);const K=f.scopeValue("root",{ref:p});return t(y,(0,m._)`${K}.validate`,p,p.$async)}function E(K){const pe=_(y,K);t(y,pe,K,K.$async)}function S(K){const pe=f.scopeValue("schema",D.code.source===!0?{ref:K,code:(0,m.stringify)(K)}:{ref:K}),he=f.name("valid"),Fe=y.subschema({schema:K,dataTypes:[],schemaPath:m.nil,topSchemaRef:pe,errSchemaPath:F},he);y.mergeEvaluated(Fe),y.ok(he)}}};function _(y,f){const{gen:F}=y;return f.validate?F.scopeValue("validate",{ref:f.validate}):(0,m._)`${F.scopeValue("wrapper",{ref:f})}.validate`}d.getValidate=_;function t(y,f,F,B){const{gen:k,it:X}=y,{allErrors:A,schemaEnv:D,opts:N}=X,p=N.passContext?u.default.this:m.nil;B?h():b();function h(){if(!D.$async)throw new Error("async schema referenced by sync schema");const K=k.let("valid");k.try(()=>{k.code((0,m._)`await ${(0,c.callValidateCode)(y,f,p)}`),S(f),A||k.assign(K,!0)},pe=>{k.if((0,m._)`!(${pe} instanceof ${X.ValidationError})`,()=>k.throw(pe)),E(pe),A||k.assign(K,!1)}),y.ok(K)}function b(){y.result((0,c.callValidateCode)(y,f,p),()=>S(f),()=>E(f))}function E(K){const pe=(0,m._)`${K}.errors`;k.assign(u.default.vErrors,(0,m._)`${u.default.vErrors} === null ? ${pe} : ${u.default.vErrors}.concat(${pe})`),k.assign(u.default.errors,(0,m._)`${u.default.vErrors}.length`)}function S(K){var pe;if(!X.opts.unevaluated)return;const he=(pe=F==null?void 0:F.validate)===null||pe===void 0?void 0:pe.evaluated;if(X.props!==!0)if(he&&!he.dynamicProps)he.props!==void 0&&(X.props=l.mergeEvaluated.props(k,he.props,X.props));else{const Fe=k.var("props",(0,m._)`${K}.evaluated.props`);X.props=l.mergeEvaluated.props(k,Fe,X.props,m.Name)}if(X.items!==!0)if(he&&!he.dynamicItems)he.items!==void 0&&(X.items=l.mergeEvaluated.items(k,he.items,X.items));else{const Fe=k.var("items",(0,m._)`${K}.evaluated.items`);X.items=l.mergeEvaluated.items(k,Fe,X.items,m.Name)}}}d.callRef=t,d.default=C},99908:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(521),m=e(62902),u=e(1849),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:C,tagName:_}})=>C===c.DiscrError.Tag?`tag "${_}" must be string`:`value of tag "${_}" must be in oneOf`,params:({params:{discrError:C,tag:_,tagName:t}})=>(0,n._)`{error: ${C}, tag: ${t}, tagValue: ${_}}`},code(C){const{gen:_,data:t,schema:y,parentSchema:f,it:F}=C,{oneOf:B}=f;if(!F.opts.discriminator)throw new Error("discriminator: requires discriminator option");const k=y.propertyName;if(typeof k!="string")throw new Error("discriminator: requires propertyName");if(y.mapping)throw new Error("discriminator: mapping is not supported");if(!B)throw new Error("discriminator: requires oneOf keyword");const X=_.let("valid",!1),A=_.const("tag",(0,n._)`${t}${(0,n.getProperty)(k)}`);_.if((0,n._)`typeof ${A} == "string"`,()=>D(),()=>C.error(!1,{discrError:c.DiscrError.Tag,tag:A,tagName:k})),C.ok(X);function D(){const h=p();_.if(!1);for(const b in h)_.elseIf((0,n._)`${A} === ${b}`),_.assign(X,N(h[b]));_.else(),C.error(!1,{discrError:c.DiscrError.Mapping,tag:A,tagName:k}),_.endIf()}function N(h){const b=_.name("valid"),E=C.subschema({keyword:"oneOf",schemaProp:h},b);return C.mergeEvaluated(E,n.Name),b}function p(){var h;const b={},E=K(f);let S=!0;for(let Fe=0;Fe<B.length;Fe++){let ct=B[Fe];ct!=null&&ct.$ref&&!(0,u.schemaHasRulesButRef)(ct,F.self.RULES)&&(ct=m.resolveRef.call(F.self,F.schemaEnv.root,F.baseId,ct==null?void 0:ct.$ref),ct instanceof m.SchemaEnv&&(ct=ct.schema));const Ut=(h=ct==null?void 0:ct.properties)===null||h===void 0?void 0:h[k];if(typeof Ut!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${k}"`);S=S&&(E||K(ct)),pe(Ut,Fe)}if(!S)throw new Error(`discriminator: "${k}" must be required`);return b;function K({required:Fe}){return Array.isArray(Fe)&&Fe.includes(k)}function pe(Fe,ct){if(Fe.const)he(Fe.const,ct);else if(Fe.enum)for(const Ut of Fe.enum)he(Ut,ct);else throw new Error(`discriminator: "properties/${k}" must have "const" or "enum"`)}function he(Fe,ct){if(typeof Fe!="string"||Fe in b)throw new Error(`discriminator: "${k}" values must be unique strings`);b[Fe]=ct}}}};d.default=l},521:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.DiscrError=void 0;var e;(function(n){n.Tag="tag",n.Mapping="mapping"})(e=d.DiscrError||(d.DiscrError={}))},57993:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(10356),c=e(16282),m=e(14226),u=e(6989),r=e(68373),l=[n.default,c.default,(0,m.default)(),u.default,r.metadataVocabulary,r.contentVocabulary];d.default=l},43202:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),m={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,n.str)`must match format "${u}"`,params:({schemaCode:u})=>(0,n._)`{format: ${u}}`},code(u,r){const{gen:l,data:C,$data:_,schema:t,schemaCode:y,it:f}=u,{opts:F,errSchemaPath:B,schemaEnv:k,self:X}=f;if(!F.validateFormats)return;_?A():D();function A(){const N=l.scopeValue("formats",{ref:X.formats,code:F.code.formats}),p=l.const("fDef",(0,n._)`${N}[${y}]`),h=l.let("fType"),b=l.let("format");l.if((0,n._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,()=>l.assign(h,(0,n._)`${p}.type || "string"`).assign(b,(0,n._)`${p}.validate`),()=>l.assign(h,(0,n._)`"string"`).assign(b,p)),u.fail$data((0,n.or)(E(),S()));function E(){return F.strictSchema===!1?n.nil:(0,n._)`${y} && !${b}`}function S(){const K=k.$async?(0,n._)`(${p}.async ? await ${b}(${C}) : ${b}(${C}))`:(0,n._)`${b}(${C})`,pe=(0,n._)`(typeof ${b} == "function" ? ${K} : ${b}.test(${C}))`;return(0,n._)`${b} && ${b} !== true && ${h} === ${r} && !${pe}`}}function D(){const N=X.formats[t];if(!N){E();return}if(N===!0)return;const[p,h,b]=S(N);p===r&&u.pass(K());function E(){if(F.strictSchema===!1){X.logger.warn(pe());return}throw new Error(pe());function pe(){return`unknown format "${t}" ignored in schema at path "${B}"`}}function S(pe){const he=pe instanceof RegExp?(0,n.regexpCode)(pe):F.code.formats?(0,n._)`${F.code.formats}${(0,n.getProperty)(t)}`:void 0,Fe=l.scopeValue("formats",{key:t,ref:pe,code:he});return typeof pe=="object"&&!(pe instanceof RegExp)?[pe.type||"string",pe.validate,(0,n._)`${Fe}.validate`]:["string",pe,Fe]}function K(){if(typeof N=="object"&&!(N instanceof RegExp)&&N.async){if(!k.$async)throw new Error("async format in sync schema");return(0,n._)`await ${b}(${C})`}return typeof h=="function"?(0,n._)`${b}(${C})`:(0,n._)`${b}.test(${C})`}}}};d.default=m},6989:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const c=[e(43202).default];d.default=c},68373:function(Kt,d){Object.defineProperty(d,"__esModule",{value:!0}),d.contentVocabulary=d.metadataVocabulary=void 0,d.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],d.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},80750:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),m=e(55947),r={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:l})=>(0,n._)`{allowedValue: ${l}}`},code(l){const{gen:C,data:_,$data:t,schemaCode:y,schema:f}=l;t||f&&typeof f=="object"?l.fail$data((0,n._)`!${(0,c.useFunc)(C,m.default)}(${_}, ${y})`):l.fail((0,n._)`${f} !== ${_}`)}};d.default=r},28109:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),m=e(55947),r={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:l})=>(0,n._)`{allowedValues: ${l}}`},code(l){const{gen:C,data:_,$data:t,schema:y,schemaCode:f,it:F}=l;if(!t&&y.length===0)throw new Error("enum must have non-empty array");const B=y.length>=F.opts.loopEnum;let k;const X=()=>k!=null?k:k=(0,c.useFunc)(C,m.default);let A;if(B||t)A=C.let("valid"),l.block$data(A,D);else{if(!Array.isArray(y))throw new Error("ajv implementation error");const p=C.const("vSchema",f);A=(0,n.or)(...y.map((h,b)=>N(p,b)))}l.pass(A);function D(){C.assign(A,!1),C.forOf("v",f,p=>C.if((0,n._)`${X()}(${_}, ${p})`,()=>C.assign(A,!0).break()))}function N(p,h){const b=y[h];return typeof b=="object"&&b!==null?(0,n._)`${X()}(${_}, ${p}[${h}])`:(0,n._)`${_} === ${b}`}}};d.default=r},16282:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(41619),c=e(36701),m=e(34660),u=e(72326),r=e(69354),l=e(60881),C=e(42632),_=e(41985),t=e(80750),y=e(28109),f=[n.default,c.default,m.default,u.default,r.default,l.default,C.default,_.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},t.default,y.default];d.default=f},42632:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),m={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:r}){const l=u==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${l} than ${r} items`},params:({schemaCode:u})=>(0,n._)`{limit: ${u}}`},code(u){const{keyword:r,data:l,schemaCode:C}=u,_=r==="maxItems"?n.operators.GT:n.operators.LT;u.fail$data((0,n._)`${l}.length ${_} ${C}`)}};d.default=m},34660:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=e(1849),m=e(7836),r={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:l,schemaCode:C}){const _=l==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${_} than ${C} characters`},params:({schemaCode:l})=>(0,n._)`{limit: ${l}}`},code(l){const{keyword:C,data:_,schemaCode:t,it:y}=l,f=C==="maxLength"?n.operators.GT:n.operators.LT,F=y.opts.unicode===!1?(0,n._)`${_}.length`:(0,n._)`${(0,c.useFunc)(l.gen,m.default)}(${_})`;l.fail$data((0,n._)`${F} ${f} ${t}`)}};d.default=r},41619:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),c=n.operators,m={maximum:{okStr:"<=",ok:c.LTE,fail:c.GT},minimum:{okStr:">=",ok:c.GTE,fail:c.LT},exclusiveMaximum:{okStr:"<",ok:c.LT,fail:c.GTE},exclusiveMinimum:{okStr:">",ok:c.GT,fail:c.LTE}},u={message:({keyword:l,schemaCode:C})=>(0,n.str)`must be ${m[l].okStr} ${C}`,params:({keyword:l,schemaCode:C})=>(0,n._)`{comparison: ${m[l].okStr}, limit: ${C}}`},r={keyword:Object.keys(m),type:"number",schemaType:"number",$data:!0,error:u,code(l){const{keyword:C,data:_,schemaCode:t}=l;l.fail$data((0,n._)`${_} ${m[C].fail} ${t} || isNaN(${_})`)}};d.default=r},69354:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:r}){const l=u==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${l} than ${r} properties`},params:({schemaCode:u})=>(0,n._)`{limit: ${u}}`},code(u){const{keyword:r,data:l,schemaCode:C}=u,_=r==="maxProperties"?n.operators.GT:n.operators.LT;u.fail$data((0,n._)`Object.keys(${l}).length ${_} ${C}`)}};d.default=m},36701:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(82481),m={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:u})=>(0,n.str)`must be multiple of ${u}`,params:({schemaCode:u})=>(0,n._)`{multipleOf: ${u}}`},code(u){const{gen:r,data:l,schemaCode:C,it:_}=u,t=_.opts.multipleOfPrecision,y=r.let("res"),f=t?(0,n._)`Math.abs(Math.round(${y}) - ${y}) > 1e-${t}`:(0,n._)`${y} !== parseInt(${y})`;u.fail$data((0,n._)`(${C} === 0 || (${y} = ${l}/${C}, ${f}))`)}};d.default=m},72326:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),c=e(82481),u={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,c.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,c._)`{pattern: ${r}}`},code(r){const{data:l,$data:C,schema:_,schemaCode:t,it:y}=r,f=y.opts.unicodeRegExp?"u":"",F=C?(0,c._)`(new RegExp(${t}, ${f}))`:(0,n.usePattern)(r,_);r.fail$data((0,c._)`!${F}.test(${l})`)}};d.default=u},60881:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(9280),c=e(82481),m=e(1849),r={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:l}})=>(0,c.str)`must have required property '${l}'`,params:({params:{missingProperty:l}})=>(0,c._)`{missingProperty: ${l}}`},code(l){const{gen:C,schema:_,schemaCode:t,data:y,$data:f,it:F}=l,{opts:B}=F;if(!f&&_.length===0)return;const k=_.length>=B.loopRequired;if(F.allErrors?X():A(),B.strictRequired){const p=l.parentSchema.properties,{definedProperties:h}=l.it;for(const b of _)if((p==null?void 0:p[b])===void 0&&!h.has(b)){const E=F.schemaEnv.baseId+F.errSchemaPath,S=`required property "${b}" is not defined at "${E}" (strictRequired)`;(0,m.checkStrictMode)(F,S,F.opts.strictRequired)}}function X(){if(k||f)l.block$data(c.nil,D);else for(const p of _)(0,n.checkReportMissingProp)(l,p)}function A(){const p=C.let("missing");if(k||f){const h=C.let("valid",!0);l.block$data(h,()=>N(p,h)),l.ok(h)}else C.if((0,n.checkMissingProp)(l,_,p)),(0,n.reportMissingProp)(l,p),C.else()}function D(){C.forOf("prop",t,p=>{l.setParams({missingProperty:p}),C.if((0,n.noPropertyInData)(C,y,p,B.ownProperties),()=>l.error())})}function N(p,h){l.setParams({missingProperty:p}),C.forOf(p,t,()=>{C.assign(h,(0,n.propertyInData)(C,y,p,B.ownProperties)),C.if((0,c.not)(h),()=>{l.error(),C.break()})},c.nil)}}};d.default=r},41985:function(Kt,d,e){Object.defineProperty(d,"__esModule",{value:!0});const n=e(93277),c=e(82481),m=e(1849),u=e(55947),l={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:C,j:_}})=>(0,c.str)`must NOT have duplicate items (items ## ${_} and ${C} are identical)`,params:({params:{i:C,j:_}})=>(0,c._)`{i: ${C}, j: ${_}}`},code(C){const{gen:_,data:t,$data:y,schema:f,parentSchema:F,schemaCode:B,it:k}=C;if(!y&&!f)return;const X=_.let("valid"),A=F.items?(0,n.getSchemaTypes)(F.items):[];C.block$data(X,D,(0,c._)`${B} === false`),C.ok(X);function D(){const b=_.let("i",(0,c._)`${t}.length`),E=_.let("j");C.setParams({i:b,j:E}),_.assign(X,!0),_.if((0,c._)`${b} > 1`,()=>(N()?p:h)(b,E))}function N(){return A.length>0&&!A.some(b=>b==="object"||b==="array")}function p(b,E){const S=_.name("item"),K=(0,n.checkDataTypes)(A,S,k.opts.strictNumbers,n.DataType.Wrong),pe=_.const("indices",(0,c._)`{}`);_.for((0,c._)`;${b}--;`,()=>{_.let(S,(0,c._)`${t}[${b}]`),_.if(K,(0,c._)`continue`),A.length>1&&_.if((0,c._)`typeof ${S} == "string"`,(0,c._)`${S} += "_"`),_.if((0,c._)`typeof ${pe}[${S}] == "number"`,()=>{_.assign(E,(0,c._)`${pe}[${S}]`),C.error(),_.assign(X,!1).break()}).code((0,c._)`${pe}[${S}] = ${b}`)})}function h(b,E){const S=(0,m.useFunc)(_,u.default),K=_.name("outer");_.label(K).for((0,c._)`;${b}--;`,()=>_.for((0,c._)`${E} = ${b}; ${E}--;`,()=>_.if((0,c._)`${S}(${t}[${b}], ${t}[${E}])`,()=>{C.error(),_.assign(X,!1).break(K)})))}}};d.default=l},53907:function(Kt,d,e){e.d(d,{CX:function(){return M},WY:function(){return jt},uC:function(){return T},xP:function(){return $e},C4:function(){return Je},KN:function(){return at},gr:function(){return Se},II:function(){return nt},wQ:function(){return Ra},Td:function(){return Me},aq:function(){return pt},eE:function(){return ie},_i:function(){return xt},gN:function(){return ne},YM:function(){return ot},sn:function(){return Rt},$_:function(){return Ln},Jv:function(){return te},pM:function(){return Ve},CJ:function(){return At},jJ:function(){return tt},bg:function(){return Pa}});var n=e(2784),c=e(13980),m=e.n(c),u=e(18473),r=e(82394),l=e.n(r),C=e(30705),_=e(30195),t=e(9850),y=e.n(t),f=e(12782),F=e.n(f);const B=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function k(j){return typeof j=="object"&&j!==null&&!Array.isArray(j)}function X(j){if(j===null)return"null";if(Array.isArray(j))return"array";const i=typeof j;return i==="number"&&isNaN(j)?"nan":i==="string"&&j===""?"empty-string":i}const A={type(j,i,g,I){return`Invalid type in config for key '${j}' in '${i}', got ${g}, wanted ${I}`},missing(j){return`Missing required config value at '${j}'`},convert(j,i,g){return`Unable to convert config value for key '${j}' in '${i}' to a ${g}`}};class D{constructor(i,g="mock-config",I,w=""){this.data=i,this.context=g,this.fallback=I,this.prefix=w,this.notifiedFilteredKeys=new Set}static fromConfigs(i){return i.length===0?new D(void 0):i.reduce((g,{data:I,context:w,filteredKeys:$,deprecatedKeys:Re})=>{const ze=new D(I,w,g);if(ze.filteredKeys=$,Re)for(const{key:ht,description:Yt}of Re)console.warn(`The configuration key '${ht}' of ${w} is deprecated and may be removed soon. ${Yt||""}`);return ze},void 0)}has(i){var g,I;return this.readValue(i)!==void 0?!0:(I=(g=this.fallback)==null?void 0:g.has(i))!=null?I:!1}keys(){var i,g;const I=this.data?Object.keys(this.data):[],w=(g=(i=this.fallback)==null?void 0:i.keys())!=null?g:[];return[...new Set([...I,...w])]}get(i){const g=this.getOptional(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i!=null?i:"")));return g}getOptional(i){var g,I;const w=y()(this.readValue(i)),$=(g=this.fallback)==null?void 0:g.getOptional(i);return w===void 0?$:$===void 0?w:F()({},{value:$},{value:w},(Re,ze)=>!k(ze)||!k(Re)?ze:void 0).value}getConfig(i){const g=this.getOptionalConfig(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalConfig(i){var g;const I=this.readValue(i),w=(g=this.fallback)==null?void 0:g.getOptionalConfig(i);if(k(I))return this.copy(I,i,w);if(I!==void 0)throw new TypeError(A.type(this.fullKey(i),this.context,X(I),"object"));return w}getConfigArray(i){const g=this.getOptionalConfigArray(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalConfigArray(i){var g;const I=this.readConfigValue(i,w=>{if(!Array.isArray(w))return{expected:"object-array"};for(const[$,Re]of w.entries())if(!k(Re))return{expected:"object-array",value:Re,key:`${i}[${$}]`};return!0});if(I)return I.map((w,$)=>this.copy(w,`${i}[${$}]`))}getNumber(i){const g=this.getOptionalNumber(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalNumber(i){const g=this.readConfigValue(i,w=>typeof w=="number"||typeof w=="string"||{expected:"number"});if(typeof g=="number"||g===void 0)return g;const I=Number(g);if(!Number.isFinite(I))throw new Error(A.convert(this.fullKey(i),this.context,"number"));return I}getBoolean(i){const g=this.getOptionalBoolean(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalBoolean(i){const g=this.readConfigValue(i,w=>typeof w=="boolean"||typeof w=="number"||typeof w=="string"||{expected:"boolean"});if(typeof g=="boolean"||g===void 0)return g;const I=String(g).trim();if(/^(?:y|yes|true|1|on)$/i.test(I))return!0;if(/^(?:n|no|false|0|off)$/i.test(I))return!1;throw new Error(A.convert(this.fullKey(i),this.context,"boolean"))}getString(i){const g=this.getOptionalString(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalString(i){return this.readConfigValue(i,g=>typeof g=="string"&&g!==""||{expected:"string"})}getStringArray(i){const g=this.getOptionalStringArray(i);if(g===void 0)throw new Error(A.missing(this.fullKey(i)));return g}getOptionalStringArray(i){return this.readConfigValue(i,g=>{if(!Array.isArray(g))return{expected:"string-array"};for(const[I,w]of g.entries())if(typeof w!="string"||w==="")return{expected:"string-array",value:w,key:`${i}[${I}]`};return!0})}fullKey(i){return`${this.prefix}${this.prefix?".":""}${i}`}copy(i,g,I){const w=new D(i,this.context,I,this.fullKey(g));return w.filteredKeys=this.filteredKeys,w}readConfigValue(i,g){var I,w;const $=this.readValue(i);if($===void 0)return(w=this.fallback)==null?void 0:w.readConfigValue(i,g);const Re=g($);if(Re!==!0){const{key:ze=i,value:ht=$,expected:Yt}=Re;throw new TypeError(A.type(this.fullKey(ze),this.context,X(ht),Yt))}return $}readValue(i){const g=i?i.split("."):[];for(const w of g)if(!B.test(w))throw new TypeError(`Invalid config key '${i}'`);if(this.data===void 0)return;let I=this.data;for(const[w,$]of g.entries())if(k(I))I=I[$];else if(I!==void 0){const Re=this.fullKey(g.slice(0,w).join("."));throw new TypeError(A.type(Re,this.context,X(I),"object"))}return I}}var N=e(73557),p=e(16060),h=e(64279),b=e(72164);class E{constructor(...i){this.holders=i}get(i){for(const g of this.holders){const I=g.get(i);if(I)return I}}}const S=(0,u.CT)("api-context"),K=j=>{var i;const{apis:g,children:I}=j,w=(i=(0,n.useContext)(S))==null?void 0:i.atVersion(1),$=w?new E(g,w):g;return n.createElement(S.Provider,{value:(0,u.EI)({1:$}),children:I})};K.propTypes={apis:m().shape({get:m().func.isRequired}).isRequired,children:m().node};class pe{constructor(i){this.factories=i,this.apis=new Map}static validateFactories(i,g){for(const I of g){const w=[I],$=new Set;for(;w.length;){const Re=w.shift(),ze=i.get(Re);if(ze)for(const ht of Object.values(ze.deps)){if(ht.id===I.id)throw new Error(`Circular dependency of api factory for ${I}`);$.has(ht)||($.add(ht),w.push(ht))}}}}get(i){return this.load(i)}load(i,g=[]){const I=this.apis.get(i.id);if(I)return I;const w=this.factories.get(i);if(!w)return;if(g.includes(w.api))throw new Error(`Circular dependency of api factory for ${w.api}`);const $=this.loadDeps(i,w.deps,[...g,w.api]),Re=w.factory($);return this.apis.set(i.id,Re),Re}loadDeps(i,g,I){const w={};for(const $ in g)if(g.hasOwnProperty($)){const Re=g[$],ze=this.load(Re,I);if(!ze)throw new Error(`No API factory available for dependency ${Re} of dependent ${i}`);w[$]=ze}return w}}var he=(j=>(j[j.default=10]="default",j[j.app=50]="app",j[j.static=100]="static",j))(he||{});class Fe{constructor(){this.factories=new Map}register(i,g){const I=he[i],w=this.factories.get(g.api.id);return w&&w.priority>=I?!1:(this.factories.set(g.api.id,{priority:I,factory:g}),!0)}get(i){const g=this.factories.get(i.id);if(g)return g.factory}getAllApis(){const i=new Set;for(const{factory:g}of this.factories.values())i.add(g.api);return i}}function ct(j){return new Promise((i,g)=>{const I=j.width||500,w=j.height||700,$=window.screen.width/2-I/2,Re=window.screen.height/2-w/2,ze=window.open(j.url,j.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${I},height=${w},top=${Re},left=${$}`);let ht="";if(!ze||typeof ze.closed=="undefined"||ze.closed){const Mn=new Error("Failed to open auth popup.");Mn.name="PopupRejectedError",g(Mn);return}const Yt=Mn=>{if(Mn.source!==ze||Mn.origin!==j.origin)return;const{data:Cn}=Mn;if(Cn.type==="config_info"){ht=Cn.targetOrigin;return}if(Cn.type!=="authorization_response")return;const Yn=Cn;if("error"in Yn){const ta=new Error(Yn.error.message);ta.name=Yn.error.name,g(ta)}else i(Yn.response);Tn()},un=setInterval(()=>{if(ze.closed){const Mn=`Login failed, ${ht&&ht!==window.location.origin?`Incorrect app origin, expected ${ht}`:"popup was closed"}`,Cn=new Error(Mn);Cn.name="PopupClosedError",g(Cn),Tn()}},100);function Tn(){window.removeEventListener("message",Yt),clearInterval(un)}window.addEventListener("message",Yt)})}function Ut(j){return[...j].join(" ")}class dt{constructor(i){const{discoveryApi:g,environment:I,provider:w,joinScopes:$=Ut,oauthRequestApi:Re,sessionTransform:ze=ht=>ht}=i;this.authRequester=Re.createAuthRequester({provider:w,onAuthRequest:ht=>this.showPopup(ht)}),this.discoveryApi=g,this.environment=I,this.provider=w,this.joinScopesFunc=$,this.sessionTransform=ze}async createSession(i){return i.instantPopup?this.showPopup(i.scopes):this.authRequester(i.scopes)}async refreshSession(){const i=await fetch(await this.buildUrl("/refresh",{optional:!0}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(I=>{throw new Error(`Auth refresh request failed, ${I}`)});if(!i.ok){const I=new Error(`Auth refresh request failed, ${i.statusText}`);throw I.status=i.status,I}const g=await i.json();if(g.error){const I=new Error(g.error.message);throw g.error.name&&(I.name=g.error.name),I}return await this.sessionTransform(g)}async removeSession(){const i=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(g=>{throw new Error(`Logout request failed, ${g}`)});if(!i.ok){const g=new Error(`Logout request failed, ${i.statusText}`);throw g.status=i.status,g}}async showPopup(i){const g=this.joinScopesFunc(i),I=await this.buildUrl("/start",{scope:g,origin:window.location.origin}),w=await ct({url:I,name:`${this.provider.title} Login`,origin:new URL(I).origin,width:450,height:730});return await this.sessionTransform(w)}async buildUrl(i,g){const I=await this.discoveryApi.getBaseUrl("auth"),w=this.buildQueryString({...g,env:this.environment});return`${I}/${this.provider.id}${i}${w}`}buildQueryString(i){if(!i)return"";const g=Object.entries(i).map(([I,w])=>{if(typeof w=="string")return`${encodeURIComponent(I)}=${encodeURIComponent(w)}`;if(w)return encodeURIComponent(I)}).filter(Boolean).join("&");return g?`?${g}`:""}}class Wt{constructor(i){const{discoveryApi:g,environment:I,provider:w}=i;this.discoveryApi=g,this.environment=I,this.provider=w}async createSession(){const i=await this.buildUrl("/start"),g=await ct({url:i,name:`${this.provider.title} Login`,origin:new URL(i).origin,width:450,height:730});return{...g,id:g.profile.email}}async refreshSession(){}async removeSession(){const i=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(g=>{throw new Error(`Logout request failed, ${g}`)});if(!i.ok){const g=new Error(`Logout request failed, ${i.statusText}`);throw g.status=i.status,g}}async buildUrl(i){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${i}?env=${this.environment}`}}function Ct(j,i){for(const g of i)if(!j.has(g))return!1;return!0}class G{constructor(i){this.options=i}sessionExistsAndHasScope(i,g){if(!i)return!1;if(!g||this.options.sessionScopes===void 0)return!0;const I=this.options.sessionScopes(i);return Ct(I,g)}getExtendedScope(i,g){const I=new Set(this.options.defaultScopes);if(i&&this.options.sessionScopes!==void 0){const w=this.options.sessionScopes(i);for(const $ of w)I.add($)}if(g)for(const w of g)I.add(w);return I}}class fn{constructor(){this.isClosed=!1,this.observable=new(l())(i=>this.isClosed?(this.terminatingError?i.error(this.terminatingError):i.complete(),()=>{}):(this.subscribers.add(i),()=>{this.subscribers.delete(i)})),this.subscribers=new Set}[Symbol.observable](){return this}get closed(){return this.isClosed}next(i){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(g=>g.next(i))}error(i){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=i,this.subscribers.forEach(g=>g.error(i))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(i=>i.complete())}subscribe(i,g,I){const w=typeof i=="function"?{next:i,error:g,complete:I}:i;return this.observable.subscribe(w)}}class Et{constructor(i){this.subscribers=new Set,this.isClosed=!1,this.currentValue=i,this.terminatingError=void 0,this.observable=new(l())(g=>this.isClosed?(this.terminatingError?g.error(this.terminatingError):g.complete(),()=>{}):(g.next(this.currentValue),this.subscribers.add(g),()=>{this.subscribers.delete(g)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(i){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=i,this.subscribers.forEach(g=>g.next(i))}error(i){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=i,this.subscribers.forEach(g=>g.error(i))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(i=>i.complete())}subscribe(i,g,I){const w=typeof i=="function"?{next:i,error:g,complete:I}:i;return this.observable.subscribe(w)}}class je{constructor(){this.subject=new Et(C.sM.SignedOut),this.signedIn=!1}setIsSignedIn(i){this.signedIn!==i&&(this.signedIn=i,this.subject.next(this.signedIn?C.sM.SignedIn:C.sM.SignedOut))}sessionState$(){return this.subject}}class P{constructor(i){this.stateTracker=new je;const{connector:g,defaultScopes:I=new Set,sessionScopes:w,sessionShouldRefresh:$}=i;this.connector=g,this.sessionScopesFunc=w,this.sessionShouldRefreshFunc=$,this.helper=new G({sessionScopes:w,defaultScopes:I})}async getSession(i){if(this.helper.sessionExistsAndHasScope(this.currentSession,i.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const I=await this.collapsedSessionRefresh(),w=this.sessionScopesFunc(this.currentSession),$=this.sessionScopesFunc(I);return Ct($,w)&&(this.currentSession=I),I}catch(I){if(i.optional)return;throw I}}if(!this.currentSession&&!i.instantPopup)try{const g=await this.collapsedSessionRefresh();return this.currentSession=g,this.getSession(i)}catch{}if(!i.optional)return this.currentSession=await this.connector.createSession({...i,scopes:this.helper.getExtendedScope(this.currentSession,i.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession();try{const i=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),i}finally{delete this.refreshPromise}}}class Ue{constructor(i){this.stateTracker=new je;const{connector:g,defaultScopes:I=new Set,sessionScopes:w}=i;this.connector=g,this.helper=new G({sessionScopes:w,defaultScopes:I})}setSession(i){this.currentSession=i,this.stateTracker.setIsSignedIn(Boolean(i))}async getSession(i){if(this.helper.sessionExistsAndHasScope(this.currentSession,i.scopes))return this.currentSession;if(!i.optional)return this.currentSession=await this.connector.createSession({...i,scopes:this.helper.getExtendedScope(this.currentSession,i.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}class H{constructor(i){const{manager:g,storageKey:I,schema:w,sessionScopes:$,sessionShouldRefresh:Re=()=>!1}=i;this.manager=g,this.storageKey=I,this.schema=w,this.sessionShouldRefreshFunc=Re,this.helper=new G({sessionScopes:$,defaultScopes:new Set})}setSession(i){this.manager.setSession(i),this.saveSession(i)}async getSession(i){const{scopes:g}=i,I=this.loadSession();if(this.helper.sessionExistsAndHasScope(I,g)&&!this.sessionShouldRefreshFunc(I))return this.manager.setSession(I),I;const w=await this.manager.getSession(i);return this.saveSession(w),w}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const i=localStorage.getItem(this.storageKey);if(i){const g=JSON.parse(i,(I,w)=>(w==null?void 0:w.__type)==="Set"?new Set(w.__value):w);try{return this.schema.parse(g)}catch(I){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${I}`),I}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(i){if(i===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(i)}catch(g){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${g}`);return}localStorage.setItem(this.storageKey,JSON.stringify(i,(g,I)=>I instanceof Set?{__type:"Set",__value:Array.from(I)}:I))}}const R={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class W{static create(i){const{discoveryApi:g,environment:I="development",provider:w=R,oauthRequestApi:$,defaultScopes:Re=[],scopeTransform:ze=un=>un}=i,ht=new dt({discoveryApi:g,environment:I,provider:w,oauthRequestApi:$,sessionTransform(un){return{...un,providerInfo:{idToken:un.providerInfo.idToken,accessToken:un.providerInfo.accessToken,scopes:W.normalizeScopes(ze,un.providerInfo.scope),expiresAt:new Date(Date.now()+un.providerInfo.expiresInSeconds*1e3)}}}}),Yt=new P({connector:ht,defaultScopes:new Set(Re),sessionScopes:un=>un.providerInfo.scopes,sessionShouldRefresh:un=>(un.providerInfo.expiresAt.getTime()-Date.now())/1e3<60*5});return new W({sessionManager:Yt,scopeTransform:ze})}constructor(i){this.sessionManager=i.sessionManager,this.scopeTransform=i.scopeTransform}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(i,g){var I;const w=W.normalizeScopes(this.scopeTransform,i),$=await this.sessionManager.getSession({...g,scopes:w});return(I=$==null?void 0:$.providerInfo.accessToken)!=null?I:""}async getIdToken(i={}){var g;const I=await this.sessionManager.getSession({...i,scopes:new Set(["openid"])});return(g=I==null?void 0:I.providerInfo.idToken)!=null?g:""}async getBackstageIdentity(i={}){const g=await this.sessionManager.getSession(i);return g==null?void 0:g.backstageIdentity}async getProfile(i={}){const g=await this.sessionManager.getSession(i);return g==null?void 0:g.profile}static normalizeScopes(i,g){if(!g)return new Set;const I=Array.isArray(g)?g:g.split(/[\s|,]/).filter(Boolean);return new Set(i(I))}}const ge={id:"github",title:"GitHub",icon:()=>null};class Me{static create(i){const{discoveryApi:g,environment:I="development",provider:w=ge,oauthRequestApi:$,defaultScopes:Re=["read:user"]}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:Re})}}const et={id:"gitlab",title:"GitLab",icon:()=>null};class pt{static create(i){const{discoveryApi:g,environment:I="development",provider:w=et,oauthRequestApi:$,defaultScopes:Re=["read_user"]}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:Re})}}const mt={id:"google",title:"Google",icon:()=>null},Dt="https://www.googleapis.com/auth/";class ie{static create(i){const{discoveryApi:g,oauthRequestApi:I,environment:w="development",provider:$=mt,defaultScopes:Re=["openid",`${Dt}userinfo.email`,`${Dt}userinfo.profile`]}=i;return W.create({discoveryApi:g,oauthRequestApi:I,provider:$,environment:w,defaultScopes:Re,scopeTransform(ze){return ze.map(ht=>ht==="openid"?ht:ht==="profile"||ht==="email"?`${Dt}userinfo.${ht}`:ht.startsWith(Dt)?ht:`${Dt}${ht}`)}})}}const o={id:"okta",title:"Okta",icon:()=>null},xe=new Set(["openid","profile","email","phone","address","groups","offline_access"]),be="okta.";class Rt{static create(i){const{discoveryApi:g,environment:I="development",provider:w=o,oauthRequestApi:$,defaultScopes:Re=["openid","email","profile","offline_access"]}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:Re,scopeTransform(ze){return ze.map(ht=>xe.has(ht)||ht.startsWith(be)?ht:`${be}${ht}`)}})}}const vt=_.z.object({profile:_.z.object({email:_.z.string().optional(),displayName:_.z.string().optional(),picture:_.z.string().optional()}),backstageIdentity:_.z.object({token:_.z.string(),identity:_.z.object({type:_.z.literal("user"),userEntityRef:_.z.string(),ownershipEntityRefs:_.z.array(_.z.string())})})}),Vt={id:"saml",title:"SAML",icon:()=>null};class de{constructor(i){this.sessionManager=i}static create(i){const{discoveryApi:g,environment:I="development",provider:w=Vt}=i,$=new Wt({discoveryApi:g,environment:I,provider:w}),Re=new Ue({connector:$}),ze=new H({manager:Re,storageKey:`${w.id}Session`,schema:vt});return new de(ze)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(i={}){const g=await this.sessionManager.getSession(i);return g==null?void 0:g.backstageIdentity}async getProfile(i={}){const g=await this.sessionManager.getSession(i);return g==null?void 0:g.profile}}const Tt={id:"microsoft",title:"Microsoft",icon:()=>null};class xt{static create(i){const{environment:g="development",provider:I=Tt,oauthRequestApi:w,discoveryApi:$,defaultScopes:Re=["openid","offline_access","profile","email","User.Read"]}=i;return W.create({discoveryApi:$,oauthRequestApi:w,provider:I,environment:g,defaultScopes:Re})}}const ln={id:"onelogin",title:"onelogin",icon:()=>null},mn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),dn="onelogin.";class Ln{static create(i){const{discoveryApi:g,environment:I="development",provider:w=ln,oauthRequestApi:$}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(Re){return Re.map(ze=>mn.has(ze)||ze.startsWith(dn)?ze:`${dn}${ze}`)}})}}const it={id:"bitbucket",title:"Bitbucket",icon:()=>null};class $e{static create(i){const{discoveryApi:g,environment:I="development",provider:w=it,oauthRequestApi:$,defaultScopes:Re=["team"]}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:Re})}}const Zt={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class Je{static create(i){const{discoveryApi:g,environment:I="development",provider:w=Zt,oauthRequestApi:$,defaultScopes:Re=["PROJECT_ADMIN"]}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I,defaultScopes:Re})}}const Pe={id:"atlassian",title:"Atlassian",icon:()=>null};class T{static create(i){const{discoveryApi:g,environment:I="development",provider:w=Pe,oauthRequestApi:$}=i;return W.create({discoveryApi:g,oauthRequestApi:$,provider:w,environment:I})}}class M{constructor(){this.subject=new fn}post(i){this.subject.next(i)}alert$(){return this.subject}}class J{constructor(i){this.actualApis=i}static fromApis(i){return new J(i)}captureEvent(i){this.actualApis.forEach(g=>{try{g.captureEvent(i)}catch{}})}}class ne{captureEvent(i){}}const re="theme";class Ae{constructor(i){this.themes=i,this.subject=new Et(void 0)}static createWithStorage(i){var g;const I=new Ae(i);if(!window.localStorage)return I;const w=(g=window.localStorage.getItem(re))!=null?g:void 0;return I.setActiveThemeId(w),I.activeThemeId$().subscribe($=>{$?window.localStorage.setItem(re,$):window.localStorage.removeItem(re)}),window.addEventListener("storage",$=>{var Re;if($.key===re){const ze=(Re=localStorage.getItem(re))!=null?Re:void 0;I.setActiveThemeId(ze)}}),I}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(i){this.activeThemeId=i,this.subject.next(i)}}const Ie="Invalid discovery URL pattern,";class Ve{constructor(i){this.parts=i}static compile(i){const g=i.split(/\{\{\s*pluginId\s*\}\}/),I=g.join("pluginId");let w;try{w=new URL(I)}catch{throw new Error(`${Ie} URL '${I}' is invalid`)}if(w.hash)throw new Error(`${Ie} URL must not have a hash`);if(w.search)throw new Error(`${Ie} URL must not have a query`);if(I.endsWith("/"))throw new Error(`${Ie} URL must not end with a slash`);return new Ve(g)}async getBaseUrl(i){return this.parts.join(i)}}class at{constructor(i,g){this.alertApi=i,this.errorApi=g}post(i,g){return g!=null&&g.hidden||this.alertApi.post({message:i.message,severity:"error"}),this.errorApi.post(i,g)}error$(){return this.errorApi.error$()}}class Se{constructor(){this.subject=new fn}post(i,g){this.subject.next({error:i,context:g})}error$(){return this.subject}}class te{static forward(i,g){window.addEventListener("unhandledrejection",I=>{i.post(I.reason,g)})}}function ae(j){if(j.length<3)throw new Error(`The '${j}' feature flag must have a minimum length of three characters.`);if(j.length>150)throw new Error(`The '${j}' feature flag must not exceed 150 characters.`);if(!j.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${j}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class Be{constructor(){this.registeredFeatureFlags=[]}registerFlag(i){ae(i.name),this.registeredFeatureFlags.push(i)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(i){return this.flags||(this.flags=this.load()),this.flags.get(i)===C.CL.Active}save(i){this.flags||(this.flags=this.load()),i.merge||this.flags.clear();for(const[I,w]of Object.entries(i.states))this.flags.set(I,w);const g=Array.from(this.flags.entries()).filter(([,I])=>I===C.CL.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(g)))}load(){try{const i=window.localStorage.getItem("featureFlags");if(!i)return new Map;const g=JSON.parse(i);if(typeof g!="object"||g===null||Array.isArray(g))return new Map;const I=Object.entries(g).filter(([w,$])=>(ae(w),$===C.CL.Active));return new Map(I)}catch{return new Map}}}function tt(j){var i;let g=j.baseImplementation||e.g.fetch;const I=[(i=j.middleware)!=null?i:[]].flat().reverse();for(const w of I)g=w.apply(g);return{fetch:g}}class ft{constructor(i,g,I,w){this.identityApi=i,this.allowUrl=g,this.headerName=I,this.headerValue=w}static create(i){var g,I;const w=bt(i),$=((g=i.header)==null?void 0:g.name)||"authorization",Re=((I=i.header)==null?void 0:I.value)||(ze=>`Bearer ${ze}`);return new ft(i.identityApi,w,$,Re)}apply(i){return async(g,I)=>{const w=new Request(g,I),{token:$}=await this.identityApi.getCredentials();return w.headers.get(this.headerName)||typeof $!="string"||!$||!this.allowUrl(w.url)?i(g,I):(w.headers.set(this.headerName,this.headerValue($)),i(w))}}}function bt(j){return j.allowUrl?j.allowUrl:j.urlPrefixAllowlist?rn(j.urlPrefixAllowlist):j.config?rn([j.config.getString("backend.baseUrl")]):()=>!1}function rn(j){const i=j.map(g=>g.replace(/\/$/,""));return g=>i.some(I=>g===I||g.startsWith(`${I}/`))}function Gt(j,i){return!i||i==="/"?j:`${j.replace(/\/$/,"")}/${i.replace(/^\//,"")}`}class gn{constructor(i){this.discoveryApi=i}apply(i){return async(g,I)=>{const w=new Request(g,I),$="plugin://";if(!w.url.startsWith($))return i(g,I);const{hostname:Re,pathname:ze,search:ht,hash:Yt,username:un,password:Tn}=new URL(`http://${w.url.substring($.length)}`);let Mn=await this.discoveryApi.getBaseUrl(Re);if(un||Tn){const Yn=new URL(Mn),ta=`${un}${Tn?`:${Tn}`:""}@`;Mn=`${Yn.protocol}//${ta}${Yn.host}${Yn.pathname}`}const Cn=`${Gt(Mn,ze)}${ht}${Yt}`;return i(Cn,typeof g=="string"||Ke(g)?I:g)}}}function Ke(j){return typeof j=="object"&&(j==null?void 0:j.constructor)===URL}class nt{static resolvePluginProtocol(i){return new gn(i.discoveryApi)}static injectIdentityAuth(i){return ft.create(i)}constructor(){}}function oe(j,i){for(const g of i)if(!j.has(g))return!1;return!0}function Ee(j,...i){const g=new Set(j);for(const I of i)for(const w of I)g.add(w);return g}class ke{constructor(){this.requests=[],this.subject=new Et(this.getCurrentPending())}request(i){return new Promise((g,I)=>{this.requests.push({scopes:i,resolve:g,reject:I}),this.subject.next(this.getCurrentPending())})}resolve(i,g){this.requests=this.requests.filter(I=>oe(i,I.scopes)?(I.resolve(g),!1):!0),this.subject.next(this.getCurrentPending())}reject(i){this.requests.forEach(g=>g.reject(i)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const i=this.requests.length===0?void 0:this.requests.slice(1).reduce((g,I)=>Ee(g,I.scopes),this.requests[0].scopes);return{scopes:i,resolve:g=>{i&&this.resolve(i,g)},reject:g=>{i&&this.reject(g)}}}}class ot{constructor(){this.subject=new Et([]),this.currentRequests=[],this.handlerCount=0}createAuthRequester(i){const g=new ke,I=this.handlerCount;return this.handlerCount++,g.pending().subscribe({next:w=>{const $=this.currentRequests.slice(),Re=this.makeAuthRequest(w,i);Re?$[I]=Re:delete $[I],this.currentRequests=$,this.subject.next($.filter(Boolean))}}),w=>g.request(w)}makeAuthRequest(i,g){const{scopes:I}=i;if(I)return{provider:g.provider,trigger:async()=>{const w=await g.onAuthRequest(I);i.resolve(w)},reject:()=>{const w=new Error("Login failed, rejected by user");w.name="RejectedError",i.reject(w)}}}authRequest$(){return this.subject}}const Ye=new Map,ut=class{constructor(j,i){this.namespace=j,this.errorApi=i,this.subscribers=new Set,this.observable=new(l())(g=>(this.subscribers.add(g),()=>{this.subscribers.delete(g)}))}static create(j){var i;return new ut((i=j.namespace)!=null?i:"",j.errorApi)}static addStorageEventListener(){window.addEventListener("storage",j=>{var i;for(const[g,I]of Ye.entries())(i=j.key)!=null&&i.startsWith(g)&&I.handleStorageChange(j.key)})}get(j){return this.snapshot(j).value}snapshot(j){let i,g="absent";try{const I=localStorage.getItem(this.getKeyName(j));I&&(i=JSON.parse(I,(w,$)=>(typeof $=="object"&&$!==null&&Object.freeze($),$)),g="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${j}`))}return{key:j,value:i,presence:g}}forBucket(j){const i=`${this.namespace}/${j}`;return Ye.has(i)||Ye.set(i,new ut(i,this.errorApi)),Ye.get(i)}async set(j,i){localStorage.setItem(this.getKeyName(j),JSON.stringify(i)),this.notifyChanges(j)}async remove(j){localStorage.removeItem(this.getKeyName(j)),this.notifyChanges(j)}observe$(j){return ut.hasSubscribed||(ut.addStorageEventListener(),ut.hasSubscribed=!0),this.observable.filter(({key:i})=>i===j)}handleStorageChange(j){if(!(j!=null&&j.startsWith(this.namespace)))return;const i=j==null?void 0:j.slice(`${this.namespace}/`.length);i.includes("/")||this.notifyChanges(decodeURIComponent(i))}getKeyName(j){return`${this.namespace}/${encodeURIComponent(j)}`}notifyChanges(j){const i=this.snapshot(j);for(const g of this.subscribers)g.next(i)}};let At=ut;At.hasSubscribed=!1;const Ft=(0,n.createContext)(void 0);function ue(){const[j]=(0,N.is)(n.createElement(N.AW,{index:!0,element:n.createElement("div",null)}));return!j.index}const ye=(j,i)=>{var g,I;try{const w=(0,p.fp)(i,{pathname:j}),$=(g=w==null?void 0:w.filter(ze=>{var ht;return((ht=ze==null?void 0:ze.route.routeRefs)==null?void 0:ht.size)>0}).pop())==null?void 0:g.route;if(!$)return{};let Re;return $.routeRefs.size===1&&(Re=$.routeRefs.values().next().value),{extension:"App",pluginId:((I=$.plugin)==null?void 0:I.getId())||"root",...Re?{routeRef:Re.id}:{}}}catch{return{}}},Oe=({pathname:j,search:i,hash:g})=>{const I=(0,C.z$)();return(0,n.useEffect)(()=>{I.captureEvent("navigate",`${j}${i}${g}`)},[I,j,i,g]),null},He=({routeObjects:j})=>{const{pathname:i,search:g,hash:I}=(0,N.TH)();return n.createElement(C.fC,{attributes:ye(i,j)},n.createElement(Oe,{pathname:i,search:g,hash:I}))};function rt(j){return ue()?Pt(j):""}function Pt(j){var i;let{pathname:g}=new URL((i=j.getOptionalString("app.baseUrl"))!=null?i:"/","http://sample.dev");return g=g.replace(/\/*$/,""),g}function Ot({component:j,appIdentityProxy:i,children:g}){const[I,w]=(0,n.useState)(),$=(0,C.h_)(C.Ds),Re=rt($);return I?(i.setTarget(I,{signOutTargetUrl:Re||"/"}),n.createElement(n.Fragment,null,g)):n.createElement(j,{onSignInSuccess:w})}function jt(j){const{Router:i,SignInPage:g}=(0,C.qD)().getComponents(),I=(0,C.h_)(C.Ds),w=Pt(I),$=`${w}/*`,Re=(0,n.useContext)(Ft);if(!Re)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:ze,appIdentityProxy:ht}=Re;return g?ue()?n.createElement(i,null,n.createElement(He,{routeObjects:ze}),n.createElement(Ot,{component:g,appIdentityProxy:ht},n.createElement(N.Z5,null,n.createElement(N.AW,{path:$,element:n.createElement(n.Fragment,null,j.children)})))):n.createElement(i,{basename:w},n.createElement(He,{routeObjects:ze}),n.createElement(Ot,{component:g,appIdentityProxy:ht},j.children)):(ht.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:w||"/"}),ue()?n.createElement(i,null,n.createElement(He,{routeObjects:ze}),n.createElement(N.Z5,null,n.createElement(N.AW,{path:$,element:n.createElement(n.Fragment,null,j.children)}))):n.createElement(i,{basename:w},n.createElement(He,{routeObjects:ze}),j.children))}function pn(j){const i={};for(const I in j.collectors)j.collectors.hasOwnProperty(I)&&(i[I]=j.collectors[I]());const g=[{node:n.Children.toArray(j.root),parent:void 0,contexts:{}}];for(;g.length!==0;){const{node:I,parent:w,contexts:$}=g.shift();n.Children.forEach(I,Re=>{if(!(0,n.isValidElement)(Re))return;const ze={};for(const ht in i)if(i.hasOwnProperty(ht)){const Yt=i[ht];ze[ht]=Yt.visit(Yt.accumulator,Re,w,$[ht])}for(const ht of j.discoverers){const Yt=ht(Re);Yt&&g.push({node:Yt,parent:Re,contexts:ze})}})}return Object.fromEntries(Object.entries(i).map(([I,w])=>[I,w.accumulator]))}function _n(j,i){return()=>({accumulator:j(),visit:i})}function bn(j){var i;return(i=j.props)==null?void 0:i.children}function $n(j){var i,g,I;if((i=j.props)!=null&&i.path&&((g=j.props)!=null&&g.element))return(I=j.props)==null?void 0:I.element}const Jn=_n(()=>new Set,(j,i)=>{const g=(0,C.IY)(i,"core.plugin");g&&j.add(g)}),Dn=j=>{const{children:i}=j,g=(0,C.h_)(C.W0),I="with"in j?g.isActive(j.with):!g.isActive(j.without);return n.createElement(n.Fragment,null,I?i:null)};(0,C.R5)(Dn,"core.featureFlagged",!0);const Un={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set};function hn(j){var i,g;const I=j;return I!=null&&I.type?(g=(i=I.type.displayName)!=null?i:I.type.name)!=null?g:String(I.type):String(I)}function Bn(j,i=new Array){return n.Children.forEach(j,g=>{if(!(0,n.isValidElement)(g))return;const I=(0,C.IY)(g,"core.mountPoint");if(I){const w=(0,C.IY)(g,"core.plugin");i.push({routeRef:I,plugin:w})}Bn(g.props.children,i)}),i}const Pn=_n(()=>({paths:new Map,parents:new Map,objects:new Array}),(j,i,g,I)=>{var w,$,Re,ze,ht,Yt;if(I!=null&&I.isElementAncestor)return I;if((g==null?void 0:g.props.element)===i)return{...I,isElementAncestor:!0};const un=(w=i.props)==null?void 0:w.path,Tn=(0,C.IY)(i,"core.mountPoint");if(Tn&&un)throw new Error(`Path property may not be set directly on a routable extension "${hn(i)}"`);const Mn=(Re=($=I==null?void 0:I.obj)==null?void 0:$.children)!=null?Re:j.objects;if(un!==void 0){if(typeof un!="string")throw new Error(`Element path must be a string at "${hn(i)}"`);const Cn=un.startsWith("/")?un.slice(1):un,Yn=i.props.element;if((0,C.IY)(i,"core.gatherMountPoints")){if(Yn)throw new Error(`Mount point gatherers may not have an element prop "${hn(i)}"`);const ta={path:Cn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((ze=i.props)==null?void 0:ze.caseSensitive),children:[Un],plugin:void 0};return Mn.push(ta),{obj:ta,gatherPath:Cn,routeRef:I==null?void 0:I.routeRef,gatherRouteRef:I==null?void 0:I.routeRef}}if(Yn){const[ta,...ga]=Bn(Yn);if(ga.length>0)throw new Error(`Route element with path "${un}" may not contain multiple routable extensions`);if(!ta)return I;const{routeRef:In,plugin:xa}=ta,V={path:Cn,element:"mounted",routeRefs:new Set([In]),caseSensitive:Boolean((ht=i.props)==null?void 0:ht.caseSensitive),children:[Un],plugin:xa};return Mn.push(V),j.paths.set(In,Cn),j.parents.set(In,I==null?void 0:I.routeRef),{obj:V,routeRef:In!=null?In:I==null?void 0:I.routeRef,gatherPath:Cn,gatherRouteRef:I==null?void 0:I.gatherRouteRef}}}if(Tn){if((I==null?void 0:I.gatherPath)===void 0)throw new Error(`Routable extension "${hn(i)}" with mount point "${Tn}" must be assigned a path`);return(Yt=I==null?void 0:I.obj)==null||Yt.routeRefs.add(Tn),j.paths.set(Tn,I.gatherPath),j.parents.set(Tn,I==null?void 0:I.gatherRouteRef),{...I,routeRef:Tn}}return I}),yn=_n(()=>({paths:new Map,parents:new Map,objects:new Array}),(j,i,g,I)=>{var w,$,Re,ze,ht;if((g==null?void 0:g.props.element)===i)return I;let Yt=I==null?void 0:I.obj,un=I==null?void 0:I.routeRef,Tn=I==null?void 0:I.sticky;const Mn=(w=i.props)==null?void 0:w.path,Cn=($=Yt==null?void 0:Yt.children)!=null?$:j.objects,Yn=Boolean((Re=i.props)==null?void 0:Re.caseSensitive);let ta=I==null?void 0:I.path;if((0,C.IY)(i,"core.gatherMountPoints")){if(!Mn)throw new Error("Mount point gatherer must have a path");ta=Mn}const ga=(ze=i.props)==null?void 0:ze.element;let In=(0,C.IY)(i,"core.mountPoint");if(!In&&(0,n.isValidElement)(ga)&&(In=(0,C.IY)(ga,"core.mountPoint")),In){let V=Mn;if(ta&&(V?ta=void 0:V=ta),!V)throw new Error("Mounted routable extension must have a path");j.paths.set(In,V),un&&Tn?(j.parents.set(In,un),Mn&&(un=In,Tn=!1)):(j.parents.set(In,un),un=In),Mn?(Yt={caseSensitive:Yn,path:Mn,element:"mounted",routeRefs:new Set([In]),children:[Un],plugin:(0,C.IY)(i.props.element,"core.plugin")},Cn.push(Yt)):Yt==null||Yt.routeRefs.add(In)}if((0,C.IY)(i,"core.gatherMountPoints")&&(Tn=!0),(0,C.IY)(i,"core.gatherMountPoints")){if(!Mn)throw new Error("Mount point gatherer must have a path");In||(Yt={caseSensitive:Yn,path:Mn,element:"gathered",routeRefs:new Set,children:[Un],plugin:(ht=I==null?void 0:I.obj)==null?void 0:ht.plugin},Cn.push(Yt))}return{obj:Yt,path:ta,routeRef:un,sticky:Tn}}),Kn=_n(()=>new Set,(j,i)=>{if(i.type===Dn){const g=i.props;j.add("with"in g?g.with:g.without)}}),sa=(0,u.uW)("route-ref-type",()=>Symbol("route-ref-type"));function zn(j){return j[sa]==="absolute"}function jn(j){return j[sa]==="sub"}function ua(j){return j[sa]==="external"}function _a(...j){const i=j.join("/").replace(/\/\/+/g,"/");return i!=="/"&&i.endsWith("/")?i.slice(0,-1):i}function Ga(j,i,g){let I,w="";if(zn(j))I=j;else if(jn(j))I=j.parent,w=j.path;else if(ua(j)){const ze=g.get(j);if(!ze)return[void 0,""];if(zn(ze))I=ze;else if(jn(ze))I=ze.parent,w=ze.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${ze}`)}else throw j[sa]?new Error(`Unknown or invalid route ref type, ${j[sa]}`):new Error(`Unknown object passed to useRouteRef, got ${j}`);if(!I)return[void 0,""];const $=i.get(I);if($===void 0)return[void 0,""];const Re=_a($,w);return[I,Re]}function Ha(j,i,g,I,w){var $;const Re=($=(0,p.fp)(w,i))!=null?$:[],ze=Array();let ht=-1;for(let Tn=j;Tn&&(ht=Re.findIndex(Mn=>Mn.route.routeRefs.has(Tn)),ht===-1);Tn=I.get(Tn))ze.unshift(Tn);ze.length===0&&(ht-=1);const Yt=ht===-1?"":Re[ht].pathname,un=ze.slice(0,-1).map(Tn=>{const Mn=g.get(Tn);if(Mn===void 0)throw new Error(`No path for ${Tn}`);if(Mn.includes(":"))throw new Error(`Cannot route to ${j} with parent ${Tn} as it has parameters`);return Mn});return`${_a(Yt,...un)}/`}class ur{constructor(i,g,I,w,$){this.routePaths=i,this.routeParents=g,this.routeObjects=I,this.routeBindings=w,this.appBasePath=$}resolve(i,g){const[I,w]=Ga(i,this.routePaths,this.routeBindings);if(!I)return;let $;typeof g=="string"?$=this.trimPath(g):g.pathname?$={...g,pathname:this.trimPath(g.pathname)}:$=g;const Re=this.appBasePath+Ha(I,$,this.routePaths,this.routeParents,this.routeObjects);return(...[ht])=>_a(Re,(0,p.Gn)(w,ht))}trimPath(i){return i&&(i.startsWith(this.appBasePath)?i.slice(this.appBasePath.length):i)}}const er=(0,u.CT)("routing-context"),Qa=({routePaths:j,routeParents:i,routeObjects:g,routeBindings:I,basePath:w="",children:$})=>{const Re=new ur(j,i,g,I,w),ze=(0,u.EI)({1:Re});return n.createElement(er.Provider,{value:ze},$)};function pr(j,i){const g=new Set(i.values());g.delete(void 0);for(const I of i.keys()){if(g.has(I))continue;let w=I,$="";for(;w;){const ze=j.get(w);if(ze===void 0)throw new Error(`No path for ${w}`);$=_a(ze,$),w=i.get(w)}const Re=$.match(/:(\w+)/g);if(Re){for(let ze=0;ze<Re.length;ze++)for(let ht=ze+1;ht<Re.length;ht++)if(Re[ht]===Re[ze])throw new Error(`Parameter ${Re[ht]} is duplicated in path ${$}`)}}}function Ja(j,i){for(const g of i)if(g.externalRoutes){for(const[I,w]of Object.entries(g.externalRoutes))if(!w.optional&&!j.has(w))throw new Error(`External route '${I}' of the '${g.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const L=(0,u.CT)("app-context"),Z=({appContext:j,children:i})=>{const g=(0,u.EI)({1:j});return n.createElement(L.Provider,{value:g,children:i})};function q(j){return new Error(`Tried to access IdentityApi ${j} before app was loaded`)}function _e(j){console.warn(`WARNING: Call to ${j} is deprecated and will break in the future`)}class U{constructor(){this.resolveTarget=()=>{},this.signOutTargetUrl="/",this.waitForTarget=new Promise(i=>{this.resolveTarget=i})}setTarget(i,g){this.target=i,this.signOutTargetUrl=g.signOutTargetUrl,this.resolveTarget(i)}getUserId(){if(!this.target)throw q("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return _e("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw q("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return _e("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(i=>i.getProfileInfo())}async getBackstageIdentity(){const i=await this.waitForTarget.then(g=>g.getBackstageIdentity());return i.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${i.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),i}async getCredentials(){return this.waitForTarget.then(i=>i.getCredentials())}async getIdToken(){return this.waitForTarget.then(i=>{if(!i.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return _e("getIdToken"),i.getIdToken()})}async signOut(){await this.waitForTarget.then(i=>i.signOut()),window.location.href=this.signOutTargetUrl}}function se(j,i,g){if(j!==void 0){const w=g.find($=>$.id===j);if(w)return w}if(i){const w=g.find($=>$.variant==="dark");if(w)return w}const I=g.find(w=>w.variant==="light");return I||g[0]}const Ce=()=>{const j=(0,n.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[i,g]=(0,n.useState)(j.matches);return(0,n.useEffect)(()=>{const I=w=>{g(w.matches)};return j.addListener(I),()=>{j.removeListener(I)}},[j]),i};function Le({children:j}){const i=(0,C.h_)(C.hg),g=(0,b.Z)(i.activeThemeId$(),i.getActiveThemeId()),I=Boolean(window.matchMedia)?Ce():!1,w=se(g,I,i.getInstalledThemes());if(!w)throw new Error("App has no themes");return n.createElement(w.Provider,{children:j})}const wt=async(j="__APP_INJECTED_RUNTIME_CONFIG__")=>{const i=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!i)throw new Error("No static configuration provided");if(!Array.isArray(i))throw new Error("Static configuration has invalid format");const g=i.slice();if(j!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const w=JSON.parse(j);Array.isArray(w)?g.push(...w):g.push({data:w,context:"env"})}catch(w){throw new Error(`Failed to load runtime configuration, ${w}`)}const I=window.__APP_CONFIG__;return I&&g.push({context:"window",data:I}),g};class It{constructor(){this.apis=[]}add(i,g){return this.apis.push([i.id,g]),g}build(){return new kt(new Map(this.apis))}}class kt{constructor(i){this.apis=i}static builder(){return new It}static from(i){return new kt(new Map(i.map(([g,I])=>[g.id,I])))}static with(i,g){return new kt(new Map([[i.id,g]]))}with(i,g){return new kt(new Map([...this.apis,[i.id,g]]))}get(i){return this.apis.get(i.id)}}function En(j){const i=new Map;return j&&j({bind:(I,w)=>{for(const[$,Re]of Object.entries(w)){const ze=I[$];if(!ze)throw new Error(`Key ${$} is not an existing external route`);if(!Re&&!ze.optional)throw new Error(`External route ${$} is required but was undefined`);Re&&i.set(ze,Re)}}}),i}var Rn=(j,i,g)=>{if(!i.has(j))throw TypeError("Cannot "+g)},cn=(j,i,g)=>(Rn(j,i,"read from private field"),g?g.call(j):i.get(j)),na=(j,i,g)=>{if(i.has(j))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(j):i.set(j,g)},kn=(j,i,g,I)=>(Rn(j,i,"write to private field"),I?I.call(j,g):i.set(j,g),g),aa;function ha(j){const i=new URL(j);return i.protocol=document.location.protocol,i.hostname=document.location.hostname,i.port=document.location.port,i.toString().replace(/\/$/,"")}function oa(j,i,g){var I;const w=Boolean(j),$=(0,h.default)(j||(()=>Promise.resolve([])));let Re;if(w&&$.loading){const{Progress:Yt}=i;Re=n.createElement(Yt,null)}else if($.error){const{BootErrorPage:Yt}=i;Re=n.createElement(Yt,{step:"load-config",error:$.error})}const{ThemeProvider:ze=Le}=i;if(Re)return{node:n.createElement(K,{apis:kt.with(C.hg,g)},n.createElement(ze,null,Re))};let ht;if((I=$.value)!=null&&I.length){const Yt=D.fromConfigs($.value),un=Yt.getOptionalString("app.baseUrl"),Tn=Yt.getOptionalString("backend.baseUrl");let Mn=$.value;const Cn={data:{},context:"relative-resolver"};if(un&&Tn){const Yn=new URL(un).origin,ta=new URL(Tn).origin;if(Yn===ta){const ga=ha(Tn);Tn!==ga&&(Cn.data.backend={baseUrl:ga})}}if(un){const Yn=ha(un);un!==Yn&&(Cn.data.app={baseUrl:Yn})}Object.keys(Cn.data).length&&(Mn=Mn.concat([Cn])),ht=D.fromConfigs(Mn)}else ht=D.fromConfigs([]);return{api:ht}}class Qn{constructor(i){this.app=i}getPlugins(){return this.app.getPlugins()}getSystemIcon(i){return this.app.getSystemIcon(i)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class $a{constructor(i){this.appIdentityProxy=new U,na(this,aa,!1);var g,I,w,$,Re;this.apis=(g=i.apis)!=null?g:[],this.icons=i.icons,this.plugins=new Set((I=i.plugins)!=null?I:[]),this.featureFlags=(w=i.featureFlags)!=null?w:[],this.components=i.components,this.themes=i.themes,this.configLoader=($=i.configLoader)!=null?$:wt,this.defaultApis=(Re=i.defaultApis)!=null?Re:[],this.bindRoutes=i.bindRoutes,this.apiFactoryRegistry=new Fe}getPlugins(){return Array.from(this.plugins)}getSystemIcon(i){return this.icons[i]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(i){const g=this.getProvider();return()=>n.createElement(g,null,i)}getProvider(){if(cn(this,aa))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");kn(this,aa,!0);const i=new Qn(this);let g=!1;return({children:w})=>{const $=(0,n.useRef)(!0),Re=(0,n.useMemo)(()=>Ae.createWithStorage(this.themes),[]),{routing:ze,featureFlags:ht,routeBindings:Yt}=(0,n.useMemo)(()=>{const Cn=pn({root:w,discoverers:[bn,$n],collectors:{routing:ue()?yn:Pn,collectedPlugins:Jn,featureFlags:Kn}});return Cn.collectedPlugins.forEach(Yn=>this.plugins.add(Yn)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...Cn,routeBindings:En(this.bindRoutes)}},[w]);g||(g=!0,pr(ze.paths,ze.parents),Ja(Yt,this.plugins));const un=oa(this.configLoader,this.components,Re),Tn="api"in un;if(Tn){const{api:Cn}=un;this.configApi=Cn}if("node"in un)return un.node;if(Tn&&$.current){$.current=!1;const Cn=this.getApiHolder().get(C.W0);if(Cn){for(const ga of this.featureFlags)Cn.registerFlag({...ga,pluginId:""});for(const ga of this.plugins.values())if("getFeatureFlags"in ga)for(const In of ga.getFeatureFlags())Cn.registerFlag({name:In.name,pluginId:ga.getId()});else for(const In of ga.output())In.type==="feature-flag"&&Cn.registerFlag({name:In.name,pluginId:ga.getId()});const Yn=Cn.getRegisteredFlags(),ta=new Set(Yn.map(ga=>ga.name));for(const ga of ht)ta.has(ga)||Cn.registerFlag({name:ga,pluginId:""})}}const{ThemeProvider:Mn=Le}=this.components;return n.createElement(K,{apis:this.getApiHolder()},n.createElement(Z,{appContext:i},n.createElement(Mn,null,n.createElement(Qa,{routePaths:ze.paths,routeParents:ze.parents,routeObjects:ze.objects,routeBindings:Yt,basePath:rt(un.api)},n.createElement(Ft.Provider,{value:{routeObjects:ze.objects,appIdentityProxy:this.appIdentityProxy}},w)))))}}getRouter(){return jt}getApiHolder(){if(this.apiHolder){for(const i of this.plugins)for(const g of i.getApis())this.apiFactoryRegistry.get(g.api)||this.apiFactoryRegistry.register("default",g);return pe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:C.hg,deps:{},factory:()=>Ae.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:C.Ds,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:C.$4,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("default",{api:C.W0,deps:{},factory:()=>new Be});for(const i of this.defaultApis)this.apiFactoryRegistry.register("default",i);for(const i of this.plugins)for(const g of i.getApis())if(!this.apiFactoryRegistry.register("default",g))throw new Error(`Plugin ${i.getId()} tried to register duplicate or forbidden API factory for ${g.api}`);for(const i of this.apis)if(!this.apiFactoryRegistry.register("app",i))throw new Error(`Duplicate or forbidden API factory for ${i.api} in app`);return pe.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new pe(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(i){const g=new Set;for(const I of i){const w=I.getId();if(g.has(w))throw new Error(`Duplicate plugin found '${w}'`);g.add(w)}}}aa=new WeakMap;function Pa(j){return new $a(j)}let ya=!1;const Ra=j=>{const i=(0,C.qD)(),{NotFoundErrorPage:g}=i.getComponents(),I=(0,n.useMemo)(()=>ue(),[]),$=[...(0,C.vJ)(j.children,Re=>Re.getElements().flatMap(ze=>{var ht;let Yt=ze.props.path;if(Yt==="")return[];Yt=(ht=Yt==null?void 0:Yt.replace(/\/\*$/,""))!=null?ht:"/";let un=I?ze:ze.props.element;return!I&&!un&&(un=ze,ya||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),ya=!0)),[{path:Yt,element:un,children:ze.props.children?[{path:Yt==="/"?"/":"*",element:ze.props.children}]:void 0}]}).sort((ze,ht)=>ht.path.localeCompare(ze.path)).map(ze=>({...ze,path:ze.path==="/"?"/":`${ze.path}/*`}))),{path:"*",element:n.createElement(g,null)}];return(0,N.V$)($)}},49558:function(Kt,d,e){e.d(d,{in:function(){return En},qE:function(){return kn},Oo:function(){return Bs},hB:function(){return Xl},db:function(){return ei},Oi:function(){return Re},VY:function(){return ao},yW:function(){return xs},XF:function(){return ze},mn:function(){return Wn},NX:function(){return Mn},SX:function(){return Gn},zG:function(){return ti},ub:function(){return Aa},mf:function(){return El},yu:function(){return Xt},fy:function(){return ni},h4:function(){return ro},M6:function(){return Tr},i9:function(){return Rl},aR:function(){return Os},rJ:function(){return Br},Oh:function(){return Dl},hu:function(){return Us},Fw:function(){return mo},rU:function(){return i},Qj:function(){return I},nU:function(){return fo},SA:function(){return Yr},sk:function(){return or},J3:function(){return yo},Or:function(){return bo},T3:function(){return oo},g9:function(){return Ll},Ex:function(){return Nr},Gk:function(){return en},tn:function(){return Rs},Ph:function(){return Q},YE:function(){return Ci},v7:function(){return Ps},Hz:function(){return Mo},R6:function(){return Cs},tR:function(){return _i},oz:function(){return ki},BV:function(){return Bi},k2:function(){return ys},BT:function(){return Oi},dh:function(){return Na},vK:function(){return La},Kq:function(){return Vn},wA:function(){return ra},VC:function(){return pa},Pd:function(){return Fn},xT:function(){return Js},uw:function(){return Hi},qt:function(){return li},oZ:function(){return Jl},iA:function(){return Ms},tB:function(){return ai},GB:function(){return St},po:function(){return Sr},r0:function(){return Lo},mZ:function(){return jr},Pf:function(){return eo}});var n=e(30705),c=e(61837),m=e(37265),u=e(90436),r=e(87685),l=e(99688),C=e(19928),_=e.n(C),t=e(2784),y=e(43434),f=e(79692),F=e(60364),B=e(41128),k=e(15459),X=e(12420),A=e(76600),D=e(41547),N=e(77277),p=e(86689),h=e(72779),b=e.n(h),E=e(76635),S=e(73557),K=e(39857),pe=e(16060),he=e(95544),Fe=e(56553),ct=e(26639),Ut=e(39595),dt=e(80030),Wt=e(19353),Ct=e(95074),G=e(41156),fn=e(88188),Et=e(13725),je=e(11105),P=e(97963),Ue=e(46506),H=e.n(Ue),R=e(54073),W=e.n(R),ge=e(10368),Me=e(76985),et=e(39829),pt=e(19574),mt=e.n(pt),Dt=e(72164),ie=e(93657),o=e(60905),xe=e.p+"static/missingAnnotation.67f79e98..svg",be=e.p+"static/noInformation.4b426325..svg",Rt=e.p+"static/createComponent.975d1e1e..svg",vt=e.p+"static/noBuild.1715fa71..svg",Vt=e(11776),de=e(38402),Tt=e(49378),xt=e(27616),ln=e(8284),mn=e(70660),dn=e(91750),Ln=e(38016),it=e(85256),$e=e(1292),Zt=e(28316),Je=e(35292),Pe=e(48049),T=e(51209),M=e(92401),J=e(53019),ne=e(8629),re=e(49429),Ae=e(38724),Ie=e(79249),Ve=e(3806),at=e(32272),Se=e(15277),te=e.n(Se),ae=e(29862),Be=e(67358),tt=e(94339),ft=e(14503),bt=e(24579),rn=e(32552),Gt=e(27597),gn=e(39307),Ke=e(21324),nt=e(7089),oe=e(42494),Ee=e(74603),ke=e(56939),ot=e(12231),Ye=e(73698),ut=e(72379),At=e(74600),Ft=e.n(At),ue=e(37390),ye=e(97485),Oe=e(15584),He=e(89571),rt=e(86136),Pt=e(79784),Ot=e(19126),jt=e.n(Ot),pn=e(80079),_n=e(18671),bn=e(50023),$n=e(4190),Jn=e(44882),Dn=e(18473),Un=e(57998),hn=e(6487),Bn=e(99152),Pn=e(67222),yn=e(21070),Kn=e(90324),sa=e(98281),zn=e(33375),jn=e(44233),ua=e(27604),_a=e(36444),Ga=e(37971),Ha=e(59709),ur=e(17373),er=e(3702),Qa=e(93111),pr=e(44311),Ja=e(83543),L=e(59797),Z=e(26739),q=e(86619),_e=e(98989),U=e.p+"static/mic-drop.fe3ef4d0..svg",se=e(16173),Ce=e(30195),Le=e(63955),wt=e(74828),It=e(45455),kt=e.n(It);function En(a){const[s,v]=(0,t.useState)([]),O=(0,n.h_)(n.$v),{anchorOrigin:x={vertical:"top",horizontal:"center"},transientTimeoutMs:ee}=a,me=ee!=null?ee:5e3;(0,t.useEffect)(()=>{const Ge=O.alert$().subscribe($t=>v(_t=>_t.concat($t)));return()=>{Ge.unsubscribe()}},[O]);const[Ze]=s;if((0,t.useEffect)(()=>{if(Ze&&Ze.display==="transient"){const Ge=setTimeout(()=>{v($t=>{const _t=$t.filter(zt=>zt!==Ze);return _t.length===$t.length?$t:_t})},me);return()=>clearTimeout(Ge)}},[Ze,me]),s.length===0)return null;const qe=()=>{v(Ge=>Ge.filter($t=>$t!==Ze))};return t.createElement(m.Z,{open:!0,anchorOrigin:x},t.createElement(l.Z,{action:t.createElement(c.Z,{color:"inherit",size:"small",onClick:qe,"data-testid":"error-button-close"},t.createElement(r.Z,null)),severity:Ze.severity},t.createElement(u.Z,{component:"span"},String(Ze.message),s.length>1&&t.createElement("em",null,` (${s.length-1} older ${_()("message",s.length-1)})`))))}function Rn(a){let s=0;for(let O=0;O<a.length;O++)s=a.charCodeAt(O)+((s<<5)-s);let v="#";for(let O=0;O<3;O++){const x=s>>O*8&255;v+=`00${x.toString(16)}`.slice(-2)}return v}function cn(a){var s;return(s=a.match(/\b\w/g))==null?void 0:s.join("").slice(0,2)}const na=(0,f.Z)(a=>({avatar:{width:"4rem",height:"4rem",color:a.palette.common.white},avatarText:{fontWeight:a.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function kn(a){const{displayName:s,picture:v,customStyles:O}=a,x=na();let ee={...O};const me={fontFamily:ee.fontFamily,fontSize:ee.fontSize,fontWeight:ee.fontWeight};return v||(ee={backgroundColor:Rn(s||""),...O}),t.createElement(y.Z,{alt:s,src:v,className:x.avatar,style:ee},s&&t.createElement(u.Z,{variant:"h6",component:"span",className:x.avatarText,style:me},cn(s)))}function aa(){const[a]=(0,S.is)(t.createElement(S.AW,{index:!0,element:t.createElement("div",null)}));return!a.index}const ha=(0,f.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),oa=a=>/^([a-z+.-]+):/.test(a),Qn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,$a=window.open;if($a&&!$a.__backstage){const a=function(...v){const O=String(v[0]);if(Qn.test(O))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return $a.apply(this,v)};a.__backstage=!0,window.open=a}const Pa=()=>{try{return(0,n.h_)(n.Ds).getOptionalString("app.baseUrl")}catch{return}},ya=()=>{var a;const s="http://sample.dev",v=(a=Pa())!=null?a:"/",{pathname:O}=new URL(v,s);return(0,E.trimEnd)(O,"/")},Ra=a=>{let s=String(a);const v=ya(),O=oa(s),x=s.startsWith(v);return!O&&!x&&(s=v.concat(s)),s},j=a=>{var s;return a instanceof Array?a.map(j).join(" ").trim():typeof a=="object"&&a?j((s=a==null?void 0:a.props)==null?void 0:s.children):["string","number"].includes(typeof a)?String(a):""},i=t.forwardRef(({onClick:a,noTrack:s,...v},O)=>{const x=ha(),ee=(0,n.z$)(),me=aa()?Ra(v.to):v.to,Ze=j(v.children)||me,qe=oa(me),Ge=qe&&!!/^https?:/.exec(me);if(Qn.test(me))throw new Error("Link component rejected javascript: URL as a security precaution");const $t=_t=>{a==null||a(_t),s||ee.captureEvent("click",Ze,{attributes:{to:me}})};return qe?t.createElement(p.Z,{...Ge?{target:"_blank",rel:"noopener"}:{},...v,ref:O,href:me,onClick:$t,className:b()(x.externalLink,v.className)},v.children,t.createElement(u.Z,{component:"span",className:x.visuallyHidden},", Opens in a new window")):t.createElement(p.Z,{...v,ref:O,component:K.rU,to:me,onClick:$t})}),g=t.forwardRef((a,s)=>t.createElement(i,{ref:s,...a,color:"initial"})),I=t.forwardRef((a,s)=>t.createElement(N.Z,{ref:s,component:g,...a})),w=null;function $(a){const{text:s,tooltipDelay:v=1e3,tooltipText:O="Text copied to clipboard","aria-label":x="Copy text"}=a,ee=(0,n.h_)(n.VE),[me,Ze]=(0,t.useState)(!1),[{error:qe},Ge]=(0,Ct.Z)();(0,t.useEffect)(()=>{qe&&ee.post(qe)},[qe,ee]);const $t=_t=>{_t.stopPropagation(),Ze(!0),Ge(s)};return t.createElement(t.Fragment,null,t.createElement(dt.ZP,{id:"copy-test-tooltip",title:O,placement:"top",leaveDelay:v,onClose:()=>Ze(!1),open:me},t.createElement(c.Z,{onClick:$t,"aria-label":x},t.createElement(Wt.Z,null))))}function Re(a){const{text:s,language:v,showLineNumbers:O=!1,highlightedNumbers:x,customStyle:ee,showCopyCodeButton:me=!1}=a,Ze=(0,F.Z)(),qe=Ze.palette.type==="dark"?ct.Z:Ut.Z,Ge=Ze.palette.type==="dark"?"#256bf3":"#e6ffed";return t.createElement(he.Z,{position:"relative"},t.createElement(Fe.Z,{customStyle:ee,language:v,style:qe,showLineNumbers:O,wrapLines:!0,lineNumberStyle:{color:Ze.palette.textVerySubtle},lineProps:$t=>x!=null&&x.includes($t)?{style:{backgroundColor:Ge}}:{}},s),me&&t.createElement(he.Z,{position:"absolute",top:0,right:0},t.createElement($,{text:s})))}function ze(a){const{title:s,to:v}=a,O=(0,G.Z)(x=>x.breakpoints.down("xs"));return v?O?t.createElement(c.Z,{component:K.rU,color:"primary",title:s,size:"small",to:v},t.createElement(fn.Z,null)):t.createElement(N.Z,{component:K.rU,variant:"contained",color:"primary",to:v},s):null}var ht=(a=>(a.TOP_BOTTOM="TB",a.BOTTOM_TOP="BT",a.LEFT_RIGHT="LR",a.RIGHT_LEFT="RL",a))(ht||{}),Yt=(a=>(a.UP_LEFT="UL",a.UP_RIGHT="UR",a.DOWN_LEFT="DL",a.DOWN_RIGHT="DR",a))(Yt||{}),un=(a=>(a.NETWORK_SIMPLEX="network-simplex",a.TIGHT_TREE="tight-tree",a.LONGEST_PATH="longest-path",a))(un||{}),Tn=(a=>(a.LEFT="l",a.RIGHT="r",a.CENTER="c",a))(Tn||{}),Mn=Object.freeze({__proto__:null,Direction:ht,Alignment:Yt,Ranker:un,LabelPosition:Tn});const Cn=(0,f.Z)(a=>({node:{fill:a.palette.primary.light,stroke:a.palette.primary.light},text:{fill:a.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Yn({node:{id:a}}){const s=Cn(),[v,O]=t.useState(0),[x,ee]=t.useState(0),me=t.useRef(null);t.useLayoutEffect(()=>{if(me.current){let{height:$t,width:_t}=me.current.getBBox();$t=Math.round($t),_t=Math.round(_t),($t!==x||_t!==v)&&(O(_t),ee($t))}},[v,x]);const Ze=10,qe=v+Ze*2,Ge=x+Ze*2;return t.createElement("g",null,t.createElement("rect",{className:s.node,width:qe,height:Ge,rx:10}),t.createElement("text",{ref:me,className:s.text,y:Ge/2,x:qe/2,textAnchor:"middle",alignmentBaseline:"middle"},a))}const ta="arrow-marker",ga="node",In="edge",xa="label",V=(0,ge.Z)(a=>({node:{transition:`${a.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),ve=a=>t.createElement(Yn,{...a});function we({render:a=ve,setNode:s,node:v}){const{width:O,height:x,x:ee=0,y:me=0}=v,Ze=v,qe=V(),Ge=t.useRef(null);return t.useLayoutEffect(()=>{if(Ge.current){let{height:$t,width:_t}=Ge.current.getBBox();$t=Math.round($t),_t=Math.round(_t),($t!==x||_t!==O)&&s(v.id,{...v,height:$t,width:_t})}},[v,O,x,s]),t.createElement("g",{ref:Ge,"data-testid":ga,className:qe.node,transform:`translate(${ee-O/2},${me-x/2})`},a({node:Ze}))}const lt=(0,ge.Z)(a=>({text:{fill:a.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function Mt({edge:{label:a}}){const s=lt();return t.createElement("text",{className:s.text,textAnchor:"middle"},a)}const Ht=(0,ge.Z)(a=>({path:{strokeWidth:1,stroke:a.palette.textSubtle,fill:"none",transition:`${a.transitions.duration.shortest}ms`},label:{transition:`${a.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),tn=a=>t.createElement(Mt,{...a});function on({render:a=tn,setEdge:s,id:v,edge:O,curve:x}){const{x:ee=0,y:me=0,width:Ze,height:qe,points:Ge}=O,$t=O,_t=Ht(),zt=t.useRef(null);t.useLayoutEffect(()=>{if(zt.current){let{height:An,width:la}=zt.current.getBBox();An=Math.round(An),la=Math.round(la),(An!==qe||la!==Ze)&&s(v,{...O,height:An,width:la})}},[O,qe,Ze,s,v]);let Qt="";const Sn=t.useMemo(()=>Me.Z().x(An=>An.x).y(An=>An.y).curve(et[x]),[x]);if(Ge){const An=Ge.filter(la=>mt()(la.x)&&mt()(la.y));Qt=Sn(An)||""}return t.createElement(t.Fragment,null,Qt&&t.createElement("path",{"data-testid":In,className:_t.path,d:Qt}),$t.label?t.createElement("g",{ref:zt,"data-testid":xa,className:_t.label,transform:`translate(${ee},${me})`},a({edge:$t})):null)}const xn="workspace";function Wn(a){var s,v;const{edges:O,nodes:x,renderNode:ee,direction:me=ht.TOP_BOTTOM,align:Ze,nodeMargin:qe=50,edgeMargin:Ge=10,rankMargin:$t=50,paddingX:_t=0,paddingY:zt=0,acyclicer:Qt,ranker:Sn=un.NETWORK_SIMPLEX,labelPosition:An=Tn.RIGHT,labelOffset:la=10,edgeRanks:Ta=1,edgeWeight:Ua=1,renderLabel:ka,defs:ca,zoom:Za="enabled",curve:Ia="curveMonotoneX",fit:Ir="grow",...Dr}=a,Or=(0,P.Z)(),[Rr,No]=t.useState(100),[Mr,Wo]=t.useState(100),Da=t.useRef(new(H()).graphlib.Graph),[Fr,lo]=t.useState(((s=Da.current.graph())==null?void 0:s.width)||0),[Lr,Fo]=t.useState(((v=Da.current.graph())==null?void 0:v.height)||0),[lr,Ar]=t.useState([]),[Ur,kr]=t.useState([]),Fa=Math.max(Fr,Rr),Xa=Math.max(Lr,Mr),Kr=Math.min(Lr,Mr),Zr=Ir==="grow"?Xa:Kr,Vr=t.useMemo(()=>W()(Va=>{if(!Va)return;const cr=je.Z(Va),Ka=je.Z(Va.getElementById(xn));function Er(){cr.call(Et.sP().scaleExtent([1,10]).on("zoom",wr=>{wr.transform.x=Math.min(0,Math.max(wr.transform.x,Fa-Fa*wr.transform.k)),wr.transform.y=Math.min(0,Math.max(wr.transform.y,Xa-Xa*wr.transform.k)),Ka.attr("transform",wr.transform)}))}Za==="enabled"?Er():Za==="enable-on-click"&&cr.on("click",()=>Er());const{width:vr,height:co}=Va.getBoundingClientRect();Rr!==vr&&No(vr),Mr!==co&&Wo(co)},100),[Mr,Rr,Fa,Xa,Za]),Fs=t.useCallback(()=>{const Va=Da.current.nodes(),cr=Da.current.edges();Va.forEach(Ka=>{x.some(vr=>vr.id===Ka)||Da.current.removeNode(Ka)}),cr.forEach(Ka=>{O.some(vr=>vr.from===Ka.v&&vr.to===Ka.w)||Da.current.removeEdge(Ka.v,Ka.w)}),x.forEach(Ka=>{const Er=Da.current.nodes().find(vr=>Ka.id===vr);if(Er&&Da.current.node(Er)){const{width:vr,height:co,x:wr,y:ec}=Da.current.node(Er);Da.current.setNode(Er,{...Ka,width:vr,height:co,x:wr,y:ec})}else Da.current.setNode(Ka.id,{...Ka,width:0,height:0})}),O.forEach(Ka=>{Da.current.setEdge(Ka.from,Ka.to,{...Ka,label:Ka.label,width:0,height:0,labelpos:An,labeloffset:la,weight:Ua,minlen:Ta})})},[O,x,An,la,Ua,Ta]),Gr=t.useMemo(()=>W()(()=>{H().layout(Da.current);const{height:Va,width:cr}=Da.current.graph(),Ka=Math.max(0,Va||0),Er=Math.max(0,cr||0);lo(Er),Fo(Ka),Ar(Da.current.nodes()),kr(Da.current.edges())},250,{leading:!0}),[]);t.useEffect(()=>(Da.current.setGraph({rankdir:me,align:Ze,nodesep:qe,edgesep:Ge,ranksep:$t,marginx:_t,marginy:zt,acyclicer:Qt,ranker:Sn}),Fs(),Gr(),Gr.cancel),[Qt,Ze,me,Ge,_t,zt,qe,$t,Sn,Fs,Gr]);function Ql(Va,cr){return Da.current.setNode(Va,cr),Gr(),Da.current}function ql(Va,cr){return Da.current.setEdge(Va,cr),Gr(),Da.current}return t.createElement("svg",{ref:Vr,...Dr,width:"100%",height:Zr,viewBox:`0 0 ${Fa} ${Xa}`},t.createElement("defs",null,t.createElement("marker",{id:ta,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},t.createElement("path",{fill:Or.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),ca),t.createElement("g",{id:xn},t.createElement("svg",{width:Fr,height:Lr,y:Xa/2-Lr/2,x:Fa/2-Fr/2,viewBox:`0 0 ${Fr} ${Lr}`},Ur.map(Va=>{const cr=Da.current.edge(Va);return cr?t.createElement(on,{key:`${Va.v}-${Va.w}`,id:Va,setEdge:ql,render:ka,edge:cr,curve:Ia}):null}),lr.map(Va=>{const cr=Da.current.node(Va);return cr?t.createElement(we,{key:Va,setNode:Ql,render:ee,node:cr}):null}))))}const On=(0,f.Z)(a=>{var s;return{root:{padding:a.spacing(0),marginBottom:a.spacing(0),marginTop:a.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:a.spacing(6),marginTop:-a.spacing(3),zIndex:"unset"},icon:{fontSize:a.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap"},message:{display:"flex",alignItems:"center",color:a.palette.banner.text,"& a":{color:a.palette.banner.link}},info:{backgroundColor:a.palette.banner.info},error:{backgroundColor:a.palette.banner.error},warning:{backgroundColor:(s=a.palette.banner.warning)!=null?s:a.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Gn=a=>{var s;const{variant:v,message:O,id:x,fixed:ee=!1}=a,me=On(),qe=(0,n.h_)(n.E6).forBucket("notifications"),Ge=(s=qe.snapshot("dismissedBanners").value)!=null?s:[],[$t,_t]=(0,t.useState)(new Set(Ge)),zt=(0,Dt.Z)(qe.observe$("dismissedBanners"));(0,t.useEffect)(()=>{var Sn;if(zt!=null&&zt.value){const An=(Sn=zt==null?void 0:zt.value)!=null?Sn:[];_t(new Set(An))}},[zt==null?void 0:zt.value]);const Qt=()=>{qe.set("dismissedBanners",[...$t,x])};return t.createElement(m.Z,{anchorOrigin:ee?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!$t.has(x),classes:{root:b()(me.root,!ee&&me.topPosition)}},t.createElement(ie.Z,{classes:{root:b()(me.content,me[v]),message:me.message},message:O,action:[t.createElement(c.Z,{key:"dismiss",title:"Permanently dismiss this message",color:"inherit",onClick:Qt},t.createElement(r.Z,{className:me.icon}))]}))},Lt=(0,f.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),ia=({missing:a})=>{const s=Lt();switch(a){case"field":return t.createElement("img",{src:xe,className:s.generalImg,alt:"annotation is missing"});case"info":return t.createElement("img",{src:be,alt:"no Information",className:s.generalImg});case"content":return t.createElement("img",{src:Rt,alt:"create Component",className:s.generalImg});case"data":return t.createElement("img",{src:vt,alt:"no Build",className:s.generalImg});default:return null}},va=(0,f.Z)(a=>({root:{backgroundColor:a.palette.background.default,padding:a.spacing(2,0,0,0)},action:{marginTop:a.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Aa(a){const{title:s,description:v,missing:O,action:x}=a,ee=va();return t.createElement(o.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:ee.root,spacing:2},t.createElement(o.Z,{item:!0,xs:12,md:6},t.createElement(o.Z,{container:!0,direction:"column"},t.createElement(o.Z,{item:!0,xs:!0},t.createElement(u.Z,{variant:"h5"},s)),t.createElement(o.Z,{item:!0,xs:!0},t.createElement(u.Z,{variant:"body1"},v)),t.createElement(o.Z,{item:!0,xs:!0,className:ee.action},x))),t.createElement(o.Z,{item:!0,xs:12,md:6,className:ee.imageContainer},typeof O=="string"?t.createElement(ia,{missing:O}):O.customImage))}const Sa=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,da=/^.*ANNOTATION.*$/m,Ba=Sa.match(da)[0],Oa=Sa.split(`
`).findIndex(a=>da.test(a)),ba=(0,f.Z)(a=>({code:{borderRadius:6,margin:`${a.spacing(2)}px 0px`,background:a.palette.type==="dark"?"#444":a.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Ma(a){return Array.from(Array(a+1).keys(),s=>s+Oa)}function tr(a){const s=a.map(v=>Ba.replace("ANNOTATION",v)).join(`
`);return Sa.replace(Ba,s)}function rr(a){const s=a.length<=1;return t.createElement(t.Fragment,null,"The ",s?"annotation":"annotations"," ",a.map(v=>t.createElement("code",null,v)).reduce((v,O)=>t.createElement(t.Fragment,null,v,", ",O))," ",s?"is":"are"," missing. You need to add the"," ",s?"annotation":"annotations"," to your component if you want to enable this tool.")}function or(a){const{annotation:s,readMoreUrl:v}=a,O=Array.isArray(s)?s:[s],x=v||"https://backstage.io/docs/features/software-catalog/well-known-annotations",ee=ba();return t.createElement(Aa,{missing:"field",title:"Missing Annotation",description:rr(O),action:t.createElement(t.Fragment,null,t.createElement(u.Z,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),t.createElement(he.Z,{className:ee.code},t.createElement(Re,{text:tr(O),language:"yaml",showLineNumbers:!0,highlightedNumbers:Ma(O.length),customStyle:{background:"inherit",fontSize:"115%"}})),t.createElement(N.Z,{color:"primary",component:i,to:x},"Read more"))})}const sr=(a,s)=>(s.palette.type==="light"?B._j:B.$n)(s.palette[a].light,.6),Y=(a,s)=>(s.palette.type==="light"?B.$n:B._j)(s.palette[a].light,.9),le=(0,f.Z)(a=>({root:{marginRight:a.spacing(1),fill:({severity:s})=>sr(s,a)}})),De=({severity:a})=>{const s=le({severity:a});return t.createElement(dn.Z,{classes:s})},Te=({severity:a})=>{const s=le({severity:a});return t.createElement(Ln.Z,{classes:s})},Xe=(0,f.Z)(a=>({panel:{backgroundColor:({severity:s})=>Y(s,a),color:({severity:s})=>sr(s,a),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:s})=>sr(s,a),fontWeight:a.typography.fontWeightBold},message:{width:"100%",display:"block",color:({severity:s})=>sr(s,a),backgroundColor:({severity:s})=>Y(s,a)},details:{width:"100%",display:"block",color:a.palette.textContrast,backgroundColor:a.palette.background.default,border:`1px solid ${a.palette.border}`,padding:a.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),yt=a=>a.charAt(0).toLocaleUpperCase("en-US")+a.slice(1);function St(a){const{severity:s="warning",title:v,message:O,children:x,defaultExpanded:ee}=a,me=Xe({severity:s}),Ze=yt(s)+(v?`: ${v}`:"");return t.createElement(xt.Z,{defaultExpanded:ee!=null?ee:!1,className:me.panel,role:"alert"},t.createElement(ln.Z,{expandIcon:t.createElement(Te,{severity:s}),className:me.summary},t.createElement(De,{severity:s}),t.createElement(u.Z,{className:me.summaryText,variant:"subtitle1"},Ze)),(O||x)&&t.createElement(mn.Z,null,t.createElement(o.Z,{container:!0},O&&t.createElement(o.Z,{item:!0,xs:12},t.createElement(u.Z,{className:me.message,variant:"body1"},O)),x&&t.createElement(o.Z,{item:!0,xs:12,className:me.details},x))))}const gt=(0,f.Z)(a=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:a.spacing(2)},divider:{margin:a.spacing(2)}}),{name:"BackstageErrorPanel"}),nn=({error:a,message:s,stack:v,children:O})=>{const x=gt();return t.createElement(Vt.Z,{dense:!0},t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(Tt.Z,{classes:{secondary:x.text},primary:"Error",secondary:a}),t.createElement($,{text:a})),t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(Tt.Z,{classes:{secondary:x.text},primary:"Message",secondary:s}),t.createElement($,{text:s})),v&&t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(Tt.Z,{classes:{secondary:x.text},primary:"Stack Trace",secondary:v}),t.createElement($,{text:v})),O)};function Xt(a){const{title:s,error:v,defaultExpanded:O,children:x}=a;return t.createElement(St,{severity:"error",title:s!=null?s:v.message,defaultExpanded:O},t.createElement(nn,{error:v.name,message:v.message,stack:v.stack,children:x}))}const qt=(0,f.Z)(a=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:a.spacing(2)},divider:{margin:a.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function en(a){var s;const{title:v,error:O,defaultExpanded:x}=a,ee=qt();if(O.name!=="ResponseError")return t.createElement(Xt,{title:v!=null?v:O.message,defaultExpanded:x,error:O});const{body:me,cause:Ze}=O,{request:qe,response:Ge}=me,$t=`${Ge.statusCode}: ${Ze.name}`,_t=qe&&`${qe.method} ${qe.url}`,zt=Ze.message.replace(/\\n/g,`
`),Qt=(s=Ze.stack)==null?void 0:s.replace(/\\n/g,`
`),Sn=JSON.stringify(me,void 0,2);return t.createElement(Xt,{title:v!=null?v:O.message,defaultExpanded:x,error:{name:$t,message:zt,stack:Qt}},_t&&t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(Tt.Z,{classes:{secondary:ee.text},primary:"Request",secondary:qe?`${_t}`:void 0}),t.createElement($,{text:_t})),t.createElement(t.Fragment,null,t.createElement(it.Z,{component:"li",className:ee.divider}),t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(Tt.Z,{classes:{secondary:ee.text},primary:"Full Error as JSON"})),t.createElement(Re,{language:"json",text:Sn,showCopyCodeButton:!0})))}function Zn(a){const s=document.createElement("div");return s.setAttribute("id",a),s}function Hn(a){document.body.insertBefore(a,document.body.lastElementChild.nextElementSibling)}function wn(a){const s=useRef(null);useEffect(function(){const x=document.querySelector(`#${a}`),ee=x||Zn(a);return x||Hn(ee),ee.appendChild(s.current),function(){s.current.remove(),ee.childNodes.length===-1&&ee.remove()}},[a]);function v(){return s.current||(s.current=document.createElement("div")),s.current}return v()}const sn="core.calloutSeen";function qn(){const[a,s]=useState(()=>{const O=localStorage.getItem(sn);return O?JSON.parse(O):{}}),v=useCallback((O,x)=>{const ee=localStorage.getItem(sn),Ze={...ee?JSON.parse(ee):{},[O]:x};s(Ze),localStorage.setItem(sn,JSON.stringify(Ze))},[]);return{states:a,setState:v}}function ma(a){const{states:s,setState:v}=qn(),O=useCallback(()=>{v(a,!0)},[v,a]);return{seen:s[a]===!0,markSeen:O}}function za(a){const{seen:s,markSeen:v}=ma(a);return{show:s===!1,hide:v}}const wa=(0,f.Z)(a=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${a.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:a.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function ja(a){const{featureId:s,title:v,description:O,children:x}=a,{show:ee,hide:me}=za(s),Ze=wn("core.callout"),qe=useRef(null),[Ge,$t]=useState(),_t=wa(),zt=useCallback(()=>{if(qe.current){const Qt=qe.current.getBoundingClientRect(),Sn=Math.max(Qt.width,Qt.height),An=800,la=Qt.x-(Sn-Qt.width)/2-An,Ta=Qt.y-(Sn-Qt.height)/2-An,Ua=Sn+2*An,ka=450,ca=Qt.x+Qt.width/2-ka,Za=Qt.y-(Sn-Qt.height)/2+Sn+20;$t({dotLeft:la,dotTop:Ta,dotSize:Ua,borderWidth:An,textTop:Za,textLeft:ca,textWidth:ka})}},[]);return useEffect(()=>(window.addEventListener("resize",zt),window.addEventListener("scroll",zt),()=>{window.removeEventListener("resize",zt),window.removeEventListener("scroll",zt)}),[zt]),useLayoutEffect(zt,[qe.current,zt]),ee?React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.featureWrapper,ref:qe},x),createPortal(React.createElement(Box,{className:_t.backdrop},React.createElement(ClickAwayListener,{onClickAway:me},React.createElement(React.Fragment,null,React.createElement(Box,{className:_t.dot,"data-testid":"dot",style:{left:Ge==null?void 0:Ge.dotLeft,top:Ge==null?void 0:Ge.dotTop,width:Ge==null?void 0:Ge.dotSize,height:Ge==null?void 0:Ge.dotSize,borderWidth:Ge==null?void 0:Ge.borderWidth},onClick:me,onKeyDown:me,role:"button",tabIndex:0},React.createElement(Box,{className:_t.pulseCircle})),React.createElement(Box,{className:_t.text,"data-testid":"text",style:{left:Ge==null?void 0:Ge.textLeft,top:Ge==null?void 0:Ge.textTop,width:Ge==null?void 0:Ge.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},v),React.createElement(Typography,null,O))))),Ze)):React.createElement(React.Fragment,null,x)}const ir=(0,f.Z)(a=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:a.palette.text.secondary,cursor:"default"},primary:{color:a.palette.primary.main},secondary:{color:a.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:a.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function Ya({color:a="primary",disabled:s=!1,href:v="#",icon:O=t.createElement(Je.Z,null),label:x,onClick:ee,title:me}){const Ze=ir();return s?t.createElement(he.Z,{title:me,className:b()(Ze.link,Ze.disabled)},O,t.createElement(u.Z,{variant:"caption",component:"span",className:Ze.label},x)):t.createElement(i,{title:me,className:b()(Ze.link,Ze[a]),to:v,onClick:ee},O,t.createElement(u.Z,{variant:"caption",component:"span",className:Ze.label},x))}const hr=(0,f.Z)(a=>({links:{margin:a.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:a.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Tr(a){const{links:s}=a,v=hr();return t.createElement("nav",{className:v.links},s.map((O,x)=>t.createElement(Ya,{key:x+1,...O})))}const _r=a=>{const s=a==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${s}) 0%,
    hsla(0, 0%, ${s}, 0.987) 8.1%,
    hsla(0, 0%, ${s}, 0.951) 15.5%,
    hsla(0, 0%, ${s}, 0.896) 22.5%,
    hsla(0, 0%, ${s}, 0.825) 29%,
    hsla(0, 0%, ${s}, 0.741) 35.3%,
    hsla(0, 0%, ${s}, 0.648) 41.2%,
    hsla(0, 0%, ${s}, 0.55) 47.1%,
    hsla(0, 0%, ${s}, 0.45) 52.9%,
    hsla(0, 0%, ${s}, 0.352) 58.8%,
    hsla(0, 0%, ${s}, 0.259) 64.7%,
    hsla(0, 0%, ${s}, 0.175) 71%,
    hsla(0, 0%, ${s}, 0.104) 77.5%,
    hsla(0, 0%, ${s}, 0.049) 84.5%,
    hsla(0, 0%, ${s}, 0.013) 91.9%,
    hsla(0, 0%, ${s}, 0) 100%
  `},nr=100,qa=10,br=(0,f.Z)(a=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:nr,height:`calc(100% + ${qa}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-qa,background:`linear-gradient(90deg, ${_r(a.palette.type)})`},fadeRight:{right:-qa,background:`linear-gradient(270deg, ${_r(a.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-a.spacing(2)},buttonRight:{right:-a.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function $r(a){const[[s,v],O]=React.useState([0,0]);return React.useLayoutEffect(()=>{const x=a.current;if(!x){O([0,0]);return}const ee=()=>{const me=x.scrollLeft,Ze=x.scrollWidth-x.offsetWidth-x.scrollLeft;O([me,Ze])};return ee(),x.addEventListener("scroll",ee),window.addEventListener("resize",ee),()=>{x.removeEventListener("scroll",ee),window.removeEventListener("resize",ee)}},[a]),[s,v]}function uo(a,s,v){const[O,x]=React.useState(0);return React.useLayoutEffect(()=>{if(O===0)return;const ee=window.performance.now(),me=requestAnimationFrame(Ze=>{if(!a.current)return;const qe=Ze-ee,Ge=Math.abs(O)*qe/s,_t=Math.max(v,Ge)*Math.sign(O);a.current.scrollBy({left:_t});const zt=O-_t;Math.sign(O)!==Math.sign(zt)?x(0):x(zt)});return()=>cancelAnimationFrame(me)},[a,O,s,v]),x}function Hr(a){const{scrollStep:s=100,scrollSpeed:v=50,minScrollDistance:O=5,children:x,...ee}=a,me=br(a),Ze=React.useRef(),[qe,Ge]=$r(Ze),$t=uo(Ze,v,O),_t=zt=>{Ze.current&&$t(zt?s:-s)};return React.createElement(Box,{...ee,className:me.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:me.container,ref:Ze},x),React.createElement(Box,{className:classNames(me.fade,me.fadeLeft,{[me.fadeHidden]:qe===0})}),React.createElement(Box,{className:classNames(me.fade,me.fadeRight,{[me.fadeHidden]:Ge===0})}),qe>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>_t(!1),className:classNames(me.button,me.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ge>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>_t(!0),className:classNames(me.button,me.buttonRight,{})},React.createElement(ChevronRight,null)))}const zr=(0,f.Z)(a=>({alpha:{color:a.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function mo(a){const s=zr(a),{shorthand:v,alpha:O}=a;return v?t.createElement(u.Z,{component:"span",className:s[O?"alpha":"beta"],style:{fontSize:"120%"}},O?t.createElement(t.Fragment,null,"\u03B1"):t.createElement(t.Fragment,null,"\u03B2")):t.createElement(u.Z,{component:"span",className:s[O?"alpha":"beta"]},O?"Alpha":"Beta")}const po=(0,t.lazy)(()=>e.e(855).then(e.bind(e,60855)).then(a=>({default:a.RealLogViewer})));function fo(a){const{Progress:s}=(0,n.qD)().getComponents();return t.createElement(t.Suspense,{fallback:t.createElement(s,null)},t.createElement(po,{...a}))}const ho=(0,f.Z)(a=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${a.palette.border}`},"& th, & td":{border:`1px solid ${a.palette.border}`,padding:a.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:a.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:a.palette.background.paper},"& tr":{backgroundColor:a.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:a.palette.background.default},"& a":{color:a.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Jr=(a,s)=>s?typeof s=="string"?a+s:t.Children.toArray(s.props.children).reduce(Jr,a):a,Cr=({level:a,children:s})=>{const x=t.Children.toArray(s).reduce(Jr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return t.createElement(`h${a}`,{id:x},s)},go={code:({inline:a,className:s,children:v,...O})=>{const x=String(v).replace(/\n+$/,""),ee=/language-(\w+)/.exec(s||"");return!a&&ee?t.createElement(Re,{language:ee[1],text:x}):t.createElement("code",{className:s,...O},v)},h1:Cr,h2:Cr,h3:Cr,h4:Cr,h5:Cr,h6:Cr};function Yr(a){const{content:s,dialect:v="gfm",linkTarget:O,transformLinkUri:x,transformImageUri:ee,className:me}=a,Ze=ho();return t.createElement(M.D,{remarkPlugins:v==="gfm"?[J.Z]:[],className:`${Ze.markdown} ${me}`,children:s,components:go,linkTarget:O,transformLinkUri:x,transformImageUri:ee})}const Eo=(0,f.Z)(a=>({root:{paddingLeft:a.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),xr=({request:a,busy:s,setBusy:v})=>{const O=Eo(),[x,ee]=(0,t.useState)(),me=async()=>{v(!0);try{await a.trigger()}catch(qe){ee((0,at.VZ)(qe)?qe.message:"An unspecified error occurred")}finally{v(!1)}},Ze=a.provider.icon;return t.createElement(de.Z,{disabled:s,classes:{root:O.root}},t.createElement(Ve.Z,null,t.createElement(Ze,{fontSize:"large"})),t.createElement(Tt.Z,{primary:a.provider.title,secondary:x&&t.createElement(u.Z,{color:"error"},x)}),t.createElement(N.Z,{color:"primary",variant:"contained",onClick:me},"Log in"))},vo=(0,f.Z)(a=>({dialog:{paddingTop:a.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:a.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:a.spacing(2,0)}}),{name:"OAuthRequestDialog"});function yo(a){const s=vo(),[v,O]=(0,t.useState)(!1),x=(0,n.h_)(n.ZM),ee=(0,Dt.Z)((0,t.useMemo)(()=>x.authRequest$(),[x]),[]),me=()=>{ee.forEach(Ze=>Ze.reject())};return t.createElement(ne.Z,{open:Boolean(ee.length),fullWidth:!0,maxWidth:"xs",classes:{paper:s.dialog},"aria-labelledby":"oauth-req-dialog-title"},t.createElement("main",null,t.createElement(Ie.Z,{classes:{root:s.title},id:"oauth-req-dialog-title"},t.createElement(u.Z,{className:s.titleHeading,variant:"h1"},"Login Required")),t.createElement(Ae.Z,{dividers:!0,classes:{root:s.contentList}},t.createElement(Vt.Z,null,ee.map(Ze=>t.createElement(xr,{key:Ze.provider.title,request:Ze,busy:v,setBusy:O}))))),t.createElement(re.Z,{classes:{root:s.actionButtons}},t.createElement(N.Z,{onClick:me},"Reject All")))}const _o=(0,f.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function bo(a){var s;const[v,O]=(0,t.useState)(!1),x=(0,ae.t)(),ee=_o(),me=Ze=>{x()&&O(Ze)};return t.createElement(dt.ZP,{title:(s=a.title)!=null?s:a.text||"",placement:a.placement,disableHoverListener:!v},t.createElement(te(),{text:a.text,line:a.line,onToggled:me,containerClassName:ee.container}))}function Nr(a){const s=(0,F.Z)(),[v,O]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const x=setTimeout(()=>O(!0),s.transitions.duration.short);return()=>clearTimeout(x)},[s.transitions.duration.short]),v?t.createElement(Be.Z,{...a,"data-testid":"progress"}):t.createElement(he.Z,{display:"none"})}const Co=(0,f.Z)(a=>({root:{maxWidth:"fit-content",padding:a.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:a.palette.textSubtle},arrow:{color:a.palette.textSubtle}}),{name:"BackstageBottomLink"});function Xr(a){const{link:s,title:v,onClick:O}=a,x=Co();return t.createElement(he.Z,null,t.createElement(it.Z,null),t.createElement(i,{to:s,onClick:O,underline:"none"},t.createElement(he.Z,{display:"flex",alignItems:"center",className:x.root},t.createElement(he.Z,{className:x.boxTitle,fontWeight:"fontWeightBold",m:1},t.createElement(u.Z,null,t.createElement("strong",null,v))),t.createElement(Gt.Z,{className:x.arrow}))))}const Po=a=>{const{slackChannel:s}=a;if(s){if(typeof s=="string")return t.createElement(u.Z,null,"Please contact ",s," for help.");if(!s.href)return t.createElement(u.Z,null,"Please contact ",s.name," for help.")}else return null;return t.createElement(I,{to:s.href,variant:"contained"},s.name)},fr=class extends t.Component{constructor(s){super(s),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(s,v){console.error(`ErrorBoundary, error: ${s}, info: ${v}`),this.setState({error:s,errorInfo:v})}render(){const{slackChannel:s,children:v}=this.props,{error:O}=this.state;return O?t.createElement(Xt,{title:"Something Went Wrong",error:O},t.createElement(Po,{slackChannel:s})):v}},Ko=(0,f.Z)(a=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:a.spacing(2,2,2,2.5)},headerTitle:{fontWeight:a.typography.fontWeightBold},headerSubheader:{paddingTop:a.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),zo=(0,k.Z)(a=>({root:{display:"inline-block",padding:a.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(ft.Z),So={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Br(a){const{title:s,subheader:v,divider:O=!0,deepLink:x,slackChannel:ee,errorBoundaryProps:me,variant:Ze,children:qe,headerStyle:Ge,headerProps:$t,icon:_t,action:zt,actionsClassName:Qt,actions:Sn,cardClassName:An,actionsTopRight:la,className:Ta,noPadding:Ua,titleTypographyProps:ka}=a,ca=Ko();let Za={},Ia={};Ze&&Ze.split(/[\s]+/g).forEach(Rr=>{Za={...Za,...So.card[Rr]},Ia={...Ia,...So.cardContent[Rr]}});const Ir=()=>!v&&!_t?null:t.createElement("div",{className:ca.headerSubheader,"data-testid":"info-card-subheader"},v&&t.createElement("div",{className:ca.subheader},v),_t),Dr=me||(ee?{slackChannel:ee}:{});return t.createElement(tt.Z,{style:Za,className:Ta},t.createElement(fr,{...Dr},s&&t.createElement(rn.Z,{classes:{root:ca.header,title:ca.headerTitle,subheader:ca.headerSubheader,avatar:ca.headerAvatar,action:ca.headerAction,content:ca.headerContent},title:s,subheader:Ir(),action:zt,style:{...Ge},titleTypographyProps:ka,...$t}),la&&t.createElement(zo,null,la),O&&t.createElement(it.Z,null),t.createElement(bt.Z,{className:b()(An,{[ca.noPadding]:Ua}),style:Ia},qe),Sn&&t.createElement(ft.Z,{className:Qt},Sn),x&&t.createElement(Xr,{...x})))}const Oo=(0,f.Z)(a=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:a.typography.pxToRem(45),fontWeight:a.typography.fontWeightBold,color:a.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),Ro={fractional:!0,inverse:!1,unit:"%",max:100},Ao=({palette:a,value:s,inverse:v,max:O})=>{if(isNaN(s))return"#ddd";const x=O||Ro.max,ee=v?x-s:s;return ee<x/3?a.status.error:ee<x*(2/3)?a.status.warning:a.status.ok};function wo(a){const[s,v]=useState(null),{getColor:O=Ao}=a,x=Oo(a),{palette:ee}=useTheme(),{value:me,fractional:Ze,inverse:qe,unit:Ge,max:$t,description:_t}={...Ro,...a},zt=Ze?Math.round(me*$t):me,Qt=$t!==100?Math.round(me):zt,[Sn,An]=useState(!1);return useEffect(()=>{const la=s,Ta=()=>An(!0),Ua=()=>An(!1);return la&&_t?(la.addEventListener("mouseenter",Ta),la.addEventListener("mouseleave",Ua),()=>{la.removeEventListener("mouseenter",Ta),la.removeEventListener("mouseleave",Ua)}):()=>{An(!1)}},[_t,s]),React.createElement(Box,{ref:v,className:x.root},React.createElement(Circle,{strokeLinecap:"butt",percent:zt,strokeWidth:12,trailWidth:12,strokeColor:O({palette:ee,value:Qt,inverse:qe,max:$t}),className:x.circle}),_t&&Sn?React.createElement(Box,{className:x.description},_t):React.createElement(Box,{className:x.overlay},isNaN(me)?"N/A":`${Qt}${Ge}`))}const To=(0,f.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function jo(a){const s=To(a),{title:v,subheader:O,progress:x,inverse:ee,deepLink:me,description:Ze,icon:qe,variant:Ge,getColor:$t}=a,_t={inverse:ee,description:Ze,getColor:$t,value:x};return React.createElement(Box,{className:s.root},React.createElement(Br,{title:v,subheader:O,deepLink:me,variant:Ge,icon:qe},React.createElement(wo,{..._t})))}function Ks(a){const{value:s,getColor:v=Ao}=a,{palette:O}=useTheme();if(isNaN(s))return null;let x=Math.round(s*100*100)/100;x>100&&(x=100);const ee=v({palette:O,value:x,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${x}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:x,strokeWidth:4,trailWidth:4,strokeColor:ee})))}const Vo=(0,f.Z)(a=>(0,X.Z)({icon:{position:"absolute",right:a.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Go=()=>{const a=Vo();return t.createElement(ut.Z,{className:a.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},Ho=(0,f.Z)(a=>(0,X.Z)({icon:{position:"absolute",right:a.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),Jo=()=>{const a=Ho();return t.createElement(ut.Z,{className:a.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},Yo=(0,k.Z)(a=>(0,X.Z)({root:{"label + &":{marginTop:a.spacing(3)}},input:{borderRadius:a.shape.borderRadius,position:"relative",backgroundColor:a.palette.background.paper,border:"1px solid #ced4da",fontSize:a.typography.body1.fontSize,padding:a.spacing(1.25,3.25,1.25,1.5),transition:a.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:a.palette.background.paper,borderRadius:a.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(Ee.Z),Xo=(0,f.Z)(a=>(0,X.Z)({formControl:{margin:`${a.spacing(1)} 0px`,maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:a.typography.body2.fontSize,fontFamily:a.typography.fontFamily,color:a.palette.text.primary,"&.Mui-focused":{color:a.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:a.typography.body2.fontSize,fontFamily:a.typography.fontFamily,color:a.palette.text.primary,"&.Mui-focused":{color:a.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function Q(a){const{multiple:s,items:v,label:O,placeholder:x,selected:ee,onChange:me,triggerReset:Ze,native:qe=!1,disabled:Ge=!1,margin:$t}=a,_t=Xo(),[zt,Qt]=(0,t.useState)(ee||(s?[]:"")),[Sn,An]=(0,t.useState)(!1);(0,t.useEffect)(()=>{Qt(s?[]:"")},[Ze,s]),(0,t.useEffect)(()=>{ee!==void 0&&Qt(ee)},[ee]);const la=ca=>{Qt(ca.target.value),me(ca.target.value)},Ta=ca=>{if(Ge){ca.preventDefault();return}An(Za=>s&&!(ca.target instanceof HTMLElement)?!0:!Za)},Ua=()=>{An(!1)},ka=ca=>()=>{const Za=zt.filter(Ia=>Ia!==ca);Qt(Za),me(Za)};return t.createElement(he.Z,{className:_t.root},t.createElement($e.Z,{onClickAway:Ua},t.createElement(oe.Z,{className:_t.formControl},t.createElement(ke.Z,{className:_t.formLabel},O),t.createElement(Ye.Z,{"aria-label":O,value:zt,native:qe,disabled:Ge,"data-testid":"select",displayEmpty:!0,multiple:s,margin:$t,onChange:la,onClick:Ta,open:Sn,input:t.createElement(Yo,null),label:O,tabIndex:0,renderValue:ca=>{var Za;return s&&zt.length!==0?t.createElement(he.Z,{className:_t.chips},ca.map(Ia=>{var Ir,Dr;return t.createElement(nt.Z,{key:(Ir=v.find(Or=>Or.value===Ia))==null?void 0:Ir.value,label:(Dr=v.find(Or=>Or.value===Ia))==null?void 0:Dr.label,clickable:!0,onDelete:ka(Ia),className:_t.chip})})):t.createElement(u.Z,null,zt.length===0?x||"":(Za=v.find(Ia=>Ia.value===ca))==null?void 0:Za.label)},IconComponent:()=>Sn?t.createElement(Jo,null):t.createElement(Go,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},x&&!s&&t.createElement(ot.Z,{value:[]},x),qe?v&&v.map(ca=>t.createElement("option",{value:ca.value,key:ca.value},ca.label)):v&&v.map(ca=>t.createElement(ot.Z,{key:ca.value,value:ca.value},s&&t.createElement(Ke.Z,{color:"primary",checked:zt.includes(ca.value)||!1,className:_t.checkbox}),ca.label))))))}const z=()=>{},ce=t.createContext({stepperLength:0,stepIndex:0,setStepIndex:z,stepHistory:[],setStepHistory:z,onStepChange:z});function fe(a){const{children:s,elevated:v,onStepChange:O,activeStep:x=0}=a,[ee,me]=useState(x),[Ze,qe]=useState([0]);useEffect(()=>{me(x)},[x]);const Ge=[];let $t;return Children.forEach(s,_t=>{isValidElement(_t)&&(_t.props.end?$t=_t:Ge.push(_t))}),React.createElement(React.Fragment,null,React.createElement(ce.Provider,{value:{stepIndex:ee,setStepIndex:me,stepHistory:Ze,setStepHistory:qe,onStepChange:O,stepperLength:Children.count(s)}},React.createElement(MuiStepper,{activeStep:ee,orientation:"vertical",elevation:v?2:0},Ge)),ee>=Children.count(s)-1&&$t)}const Ne=(0,f.Z)(a=>({root:{marginTop:a.spacing(3),"& button":{marginRight:a.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Qe=({text:a,handleClick:s})=>React.createElement(Button$1,{onClick:s},a||"Reset"),We=({text:a,handleClick:s,disabled:v,last:O,stepIndex:x})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:v,"data-testid":`nextButton-${x}`,onClick:s},a||(O?"Finish":"Next")),st=({text:a,handleClick:s,disabled:v,stepIndex:O})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:v,"data-testid":`skipButton-${O}`,onClick:s},a||"Skip"),Nt=({text:a,handleClick:s,disabled:v,stepIndex:O})=>React.createElement(Button$1,{onClick:s,"data-testid":`backButton-${O}`,disabled:v},a||"Back"),Bt=({actions:a={},children:s})=>{const v=Ne(),{stepperLength:O,stepIndex:x,setStepIndex:ee,stepHistory:me,setStepHistory:Ze,onStepChange:qe}=useContext(ce),Ge=(Qt,Sn)=>{Sn&&Sn(),qe&&qe(x,Qt),ee(Qt)},$t=()=>{const Qt=a.nextStep?a.nextStep(x,O-1):x+1;Ge(Qt,a.onNext),Ze([...me,Qt])},_t=()=>{me.pop(),Ge(me[me.length-1],a.onBack),Ze([...me])},zt=()=>{Ge(0,a.onRestart),Ze([0])};return React.createElement(Box,{className:v.root},[void 0,!0].includes(a.showBack)&&x!==0&&React.createElement(Nt,{text:a.backText,handleClick:_t,disabled:x===0,stepIndex:x}),a.showSkip&&React.createElement(st,{text:a.skipText,handleClick:$t,disabled:!!O&&x>=O||!!a.canSkip&&!a.canSkip(),stepIndex:x}),[void 0,!0].includes(a.showNext)&&React.createElement(We,{text:a.nextText,handleClick:$t,disabled:!!O&&x>=O||!!a.canNext&&!a.canNext(),stepIndex:x}),a.showRestart&&x!==0&&React.createElement(Qe,{text:a.restartText,handleClick:zt,stepIndex:x}),s)},Jt=(0,f.Z)(a=>({end:{padding:a.spacing(3)}}),{name:"SimpleStepperStep"});function an(a){const{title:s,children:v,end:O,actions:x,...ee}=a,me=Jt();return O?React.createElement(Box,{className:me.end},React.createElement(Typography,{variant:"h6"},s),v,React.createElement(Bt,{actions:{...x||{},showNext:!1}})):React.createElement(MuiStep,{...ee},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},s)),React.createElement(StepContent,null,v,React.createElement(Bt,{actions:x})))}const vn=(0,f.Z)(a=>({status:{fontWeight:a.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:a.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:a.palette.status.ok}},warning:{"&::before":{backgroundColor:a.palette.status.warning}},error:{"&::before":{backgroundColor:a.palette.status.error}},pending:{"&::before":{backgroundColor:a.palette.status.pending}},running:{"&::before":{backgroundColor:a.palette.status.running}},aborted:{"&::before":{backgroundColor:a.palette.status.aborted}}}),{name:"BackstageStatus"});function Vn(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.ok),"aria-label":"Status ok","aria-hidden":"true",...a})}function Fn(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.warning),"aria-label":"Status warning","aria-hidden":"true",...a})}function La(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.error),"aria-label":"Status error","aria-hidden":"true",...a})}function ra(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.pending),"aria-label":"Status pending","aria-hidden":"true",...a})}function pa(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.running),"aria-label":"Status running","aria-hidden":"true",...a})}function Na(a){const s=vn(a);return t.createElement(u.Z,{component:"span",className:b()(s.status,s.aborted),"aria-label":"Status aborted","aria-hidden":"true",...a})}const Ea=a=>(0,X.Z)({root:{fontWeight:a.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:a.spacing(4),border:"0",verticalAlign:"top"}}),Wa={root:{border:"0",verticalAlign:"top"}},Xn=a=>(0,X.Z)({root:{margin:a.spacing(0,0,-1,0)}}),fa=a=>(0,X.Z)({root:{padding:a.spacing(0,0,1,0)},random:{}}),Nn=(0,k.Z)(Ea,{name:"BackstageMetadataTableTitleCell"})(Oe.Z),ea=(0,k.Z)(Wa,{name:"BackstageMetadataTableCell"})(Oe.Z),ar=({dense:a,children:s})=>t.createElement(ue.Z,{size:a?"small":"medium"},t.createElement(ye.Z,null,s)),Ca=({title:a,children:s,...v})=>t.createElement(He.Z,null,a&&t.createElement(Nn,null,a),t.createElement(ea,{colSpan:a?1:2,...v},s)),dr=(0,k.Z)(Xn,{name:"BackstageMetadataTableList"})(({classes:a,children:s})=>t.createElement(Vt.Z,{disablePadding:!0,className:a.root},s)),yr=(0,k.Z)(fa,{name:"BackstageMetadataTableListItem"})(({classes:a,children:s})=>t.createElement(de.Z,{className:a.root},s)),Pr=(0,X.Z)({root:{margin:"0 0",listStyleType:"none"}}),Qo=a=>(0,X.Z)({root:{...Pr.root,paddingLeft:a.spacing(1)}}),qo=(0,k.Z)(Pr,{name:"BackstageStructuredMetadataTableList"})(({classes:a,children:s})=>t.createElement(dr,{classes:a},s)),es=(0,k.Z)(Qo,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:a,children:s})=>t.createElement(dr,{classes:a},s));function zs(a,s){const v=a.map((O,x)=>t.createElement(yr,{key:x},Io(O)));return s?t.createElement(es,null,v):t.createElement(qo,null,v)}function js(a,s,v){const O=Object.keys(a).map(x=>{const ee=Io(a[x],!0),me=v&&v.titleFormat?v.titleFormat(x):Ft()(x);return t.createElement(yr,{key:x},t.createElement(u.Z,{variant:"body2",component:"span"},`${me}: `),ee)});return s?t.createElement(es,null,O):t.createElement(qo,null,O)}function Io(a,s,v){return t.isValidElement(a)?t.createElement(t.Fragment,null,a):typeof a=="object"&&!Array.isArray(a)?js(a,s,v):Array.isArray(a)?zs(a,v):typeof a=="boolean"?t.createElement(t.Fragment,null,a?"\u2705":"\u274C"):t.createElement(u.Z,{variant:"body2",component:"span"},a)}const Vs=({value:a,options:s})=>t.createElement(t.Fragment,null,Io(a,s)),Gs=({title:a,value:s,options:v})=>t.createElement(Ca,{title:v&&v.titleFormat?v.titleFormat(a):Ft()(a)},t.createElement(Vs,{value:s,options:v}));function Hs(a,s){return Object.keys(a).map(v=>t.createElement(Gs,{key:v,title:v,value:a[v],options:s}))}function Js(a){const{metadata:s,dense:v=!0,options:O}=a,x=Hs(s,O||{});return t.createElement(ar,{dense:v},x)}function Ys(a){return qs.stringify(a,{strictNullHandling:!0})}function ts(a){return qs.parse(a,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function ns(a,s){return ts(a)[s]}function Xs(a,s,v){const O={...ts(a),[s]:v};return Ys(O)}function tc(a,s=250){const[v,O]=useSearchParams(),x=v.toString(),[ee,me]=useState(ns(x,a));return useEffect(()=>{const Ze=ns(x,a);me(qe=>isEqual(Ze,qe)?qe:Ze)},[x,me,a]),useDebouncedEffect(()=>{const Ze=Xs(x,a,ee);x!==Ze&&O(Ze,{replace:!0})},[O,ee,x,a],s),[ee,me]}const Qs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function as(){const s=(0,n.I_)().get(n.Ds),v=s==null?void 0:s.getOptionalConfig("app.support");return v?{url:v.getString("url"),items:v.getConfigArray("items").flatMap(O=>{var x;return{title:O.getString("title"),icon:O.getOptionalString("icon"),links:((x=O.getOptionalConfigArray("links"))!=null?x:[]).flatMap(ee=>({url:ee.getString("url"),title:ee.getString("title")}))}})}:Qs}function gr(a,s){const O=(0,n.qD)().getSystemIcon(a);return O?t.createElement(O,{...s}):t.createElement(pn.Z,{...s})}function nc(a){return gr("brokenImage",a)}function ei(a){return gr("catalog",a)}function ac(a){return gr("chat",a)}function rc(a){return gr("dashboard",a)}function ti(a){return gr("docs",a)}function oc(a){return gr("email",a)}function ni(a){return gr("github",a)}function sc(a){return gr("group",a)}function Qr(a){return gr("help",a)}function ai(a){return gr("user",a)}function ic(a){return gr("warning",a)}const ri=(0,f.Z)({popoverList:{minWidth:260,maxWidth:400}},{name:"BackstageSupportButton"}),oi=({icon:a})=>{var s;const v=(0,n.qD)(),O=a&&(s=v.getSystemIcon(a))!=null?s:Qr;return t.createElement(O,null)},si=({link:a})=>{var s;return t.createElement(i,{to:a.url},(s=a.title)!=null?s:a.url)},ii=({item:a})=>{var s;return t.createElement(de.Z,null,t.createElement(rt.Z,null,t.createElement(oi,{icon:a.icon})),t.createElement(Tt.Z,{primary:a.title,secondary:(s=a.links)==null?void 0:s.reduce((v,O,x)=>[...v,x>0&&t.createElement("br",{key:x}),t.createElement(si,{link:O,key:O.url})],[])}))};function li(a){const{title:s,items:v,children:O}=a,{items:x}=as(),[ee,me]=(0,t.useState)(!1),[Ze,qe]=(0,t.useState)(null),Ge=ri(),$t=(0,G.Z)(Qt=>Qt.breakpoints.down("sm")),_t=Qt=>{qe(Qt.currentTarget),me(!0)},zt=()=>{me(!1)};return t.createElement(t.Fragment,null,t.createElement(he.Z,{display:"flex",ml:1},$t?t.createElement(c.Z,{color:"primary",size:"small",onClick:_t,"data-testid":"support-button","aria-label":"Support"},t.createElement(Qr,null)):t.createElement(N.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:_t,startIcon:t.createElement(Qr,null)},"Support")),t.createElement(Pt.ZP,{"data-testid":"support-button-popover",open:ee,anchorEl:Ze,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:zt},t.createElement(Vt.Z,{className:Ge.popoverList},s&&t.createElement(de.Z,{alignItems:"flex-start"},t.createElement(u.Z,{variant:"subtitle1"},s)),t.Children.map(O,(Qt,Sn)=>t.createElement(de.Z,{alignItems:"flex-start",key:`child-${Sn}`},Qt)),(v!=null?v:x).map((Qt,Sn)=>t.createElement(ii,{item:Qt,key:`item-${Sn}`}))),t.createElement(re.Z,null,t.createElement(N.Z,{color:"primary",onClick:zt,"aria-label":"Close"},"Close"))))}const qr=72,rs=24,os=18,Sr={drawerWidthClosed:qr,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:qr,iconSize:qr-rs*2,iconPadding:rs,selectedIndicatorWidth:3,userBadgePadding:os,userBadgeDiameter:qr-os*2,mobileSidebarHeight:56},ci=a=>({...Sr,...a,iconContainerWidth:Sr.drawerWidthClosed,iconSize:Sr.drawerWidthClosed-Sr.iconPadding*2,userBadgeDiameter:Sr.drawerWidthClosed-Sr.userBadgePadding*2}),ss={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Sr.defaultOpenDelayMs+200},ui=a=>({...ss,...a}),di="@backstage/core/sidebar-intro-dismissed",mr=(0,t.createContext)({sidebarConfig:Sr,submenuConfig:ss}),Do=(0,t.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),is={isOpen:!1,setOpen:()=>{}},ls=(0,t.createContext)(is),cs=(0,Dn.CT)("sidebar-open-state-context");function us(a){const{children:s,value:v}=a;return t.createElement(ls.Provider,{value:v},t.createElement(cs.Provider,{value:(0,Dn.EI)({1:v})},s))}const jr=()=>{const a=(0,t.useContext)(cs),s=(0,t.useContext)(ls);if(a===void 0)return s||is;const v=a.atVersion(1);if(v===void 0)throw new Error("No context found for version 1.");return v},ds={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},ms=(0,t.createContext)(ds),ps=(0,Dn.CT)("sidebar-pin-state-context");function mi(a){const{children:s,value:v}=a;return t.createElement(ms.Provider,{value:v},t.createElement(ps.Provider,{value:(0,Dn.EI)({1:v})},s))}const eo=()=>{const a=(0,t.useContext)(ps),s=(0,t.useContext)(ms);if(a===void 0)return s||ds;const v=a.atVersion(1);if(v===void 0)throw new Error("No context found for version 1.");return v},pi=(0,f.Z)(a=>({root:{flexGrow:0,margin:a.spacing(0,2),color:a.palette.navigation.color},selected:s=>({color:`${a.palette.navigation.selectedColor}!important`,borderTop:`solid ${s.sidebarConfig.selectedIndicatorWidth}px ${a.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),fi=a=>{const{to:s,label:v,icon:O,value:x}=a,{sidebarConfig:ee}=(0,t.useContext)(mr),me=pi({sidebarConfig:ee}),Ze=(0,S.TH)(),{selectedMenuItemIndex:qe,setSelectedMenuItemIndex:Ge}=(0,t.useContext)(hs),$t=(zt,Qt)=>{Ge(Qt===qe?-1:Qt)},_t=x===qe&&qe>=0||x!==qe&&!(qe>=0)&&s===Ze.pathname;return t.createElement(Un.Z,{"aria-label":v,label:v,icon:O,component:i,to:s||Ze.pathname,onChange:$t,value:x,selected:_t,classes:me})},Mo=a=>{const{children:s,to:v,label:O,icon:x,value:ee}=a,{isMobile:me}=eo();return me?t.createElement(fi,{to:v,label:O,icon:x,value:ee}):t.createElement(t.Fragment,null,s)},fs=(0,f.Z)(a=>({root:{position:"fixed",backgroundColor:a.palette.navigation.background,color:a.palette.navigation.color,bottom:0,left:0,right:0,zIndex:a.zIndex.snackbar,borderTop:"1px solid #383838"},overlay:s=>({background:a.palette.navigation.background,width:"100%",bottom:`${s.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${s.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:a.palette.text.primary,alignItems:"center",justifyContent:"space-between",padding:a.spacing(2,3)},overlayHeaderClose:{color:a.palette.text.primary},marginMobileSidebar:s=>({marginBottom:`${s.sidebarConfig.mobileSidebarHeight}px`})})),hi=a=>(0,E.orderBy)(a,({props:{priority:s}})=>Number.isInteger(s)?s:-1,"desc"),gi=t.createElement(Mo).type,Ei=({children:a,label:s="Menu",open:v,onClose:O})=>{const{sidebarConfig:x}=(0,t.useContext)(mr),ee=fs({sidebarConfig:x});return t.createElement($n.ZP,{anchor:"bottom",open:v,onClose:O,ModalProps:{BackdropProps:{classes:{root:ee.marginMobileSidebar}}},classes:{root:ee.marginMobileSidebar,paperAnchorBottom:ee.overlay}},t.createElement(he.Z,{className:ee.overlayHeader},t.createElement(u.Z,{variant:"h3"},s),t.createElement(c.Z,{onClick:O,classes:{root:ee.overlayHeaderClose}},t.createElement(r.Z,null))),t.createElement(he.Z,{component:"nav"},a))},hs=(0,t.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),vi=a=>{const{sidebarConfig:s}=(0,t.useContext)(mr),{children:v}=a,O=fs({sidebarConfig:s}),x=(0,S.TH)(),[ee,me]=(0,t.useState)(-1);(0,t.useEffect)(()=>{me(-1)},[x.pathname]);let Ze=(0,n.vJ)(v,Ge=>Ge.getElements().filter($t=>$t.type===gi));if(v)Ze.length?Ze=hi(Ze):Ze.push(t.createElement(Mo,{key:"default_menu",icon:t.createElement(Jn.Z,null)},v));else return null;const qe=ee>=0&&!Ze[ee].props.to;return t.createElement(us,{value:{isOpen:!0,setOpen:()=>{}}},t.createElement(hs.Provider,{value:{selectedMenuItemIndex:ee,setSelectedMenuItemIndex:me}},t.createElement(Ei,{label:Ze[ee]&&Ze[ee].props.label,open:qe,onClose:()=>me(-1)},Ze[ee]&&Ze[ee].props.children),t.createElement(bn.Z,{className:O.root,"data-testid":"mobile-sidebar-root",component:"nav"},Ze)))},gs={getSidebarPinState(){let a;try{a=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!a},setSidebarPinState(a){return window.localStorage.setItem("sidebarPinState",JSON.stringify(a))}},yi=(0,f.Z)(a=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[a.breakpoints.up("sm")]:{paddingLeft:s=>s.isPinned?s.sidebarConfig.drawerWidthOpen:s.sidebarConfig.drawerWidthClosed},[a.breakpoints.down("xs")]:{paddingBottom:s=>s.sidebarConfig.mobileSidebarHeight}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Es=(0,t.createContext)({content:{contentRef:void 0}});function _i(a){const[s,v]=(0,t.useState)(()=>gs.getSidebarPinState()),{sidebarConfig:O}=(0,t.useContext)(mr),x=(0,t.useRef)(null),ee=(0,t.useMemo)(()=>({content:{contentRef:x}}),[x]);(0,t.useEffect)(()=>{gs.setSidebarPinState(s)},[s]);const me=(0,G.Z)(Ge=>Ge.breakpoints.down("xs"),{noSsr:!0}),Ze=()=>v(!s),qe=yi({isPinned:s,sidebarConfig:O});return t.createElement(mi,{value:{isPinned:s,toggleSidebarPinState:Ze,isMobile:me}},t.createElement(Es.Provider,{value:ee},t.createElement(he.Z,{className:qe.root},a.children)))}function Lo(){const{content:a}=(0,t.useContext)(Es);return{focusContent:(0,t.useCallback)(()=>{var v,O;(O=(v=a==null?void 0:a.contentRef)==null?void 0:v.current)==null||O.focus()},[a]),contentRef:a==null?void 0:a.contentRef}}const vs=(0,f.Z)(a=>({drawer:s=>({display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:a.zIndex.appBar,background:a.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",width:s.sidebarConfig.drawerWidthClosed,transition:a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}),drawerOpen:s=>({width:s.sidebarConfig.drawerWidthOpen,transition:a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),bi=a=>{const{sidebarConfig:s}=(0,t.useContext)(mr),{openDelayMs:v=s.defaultOpenDelayMs,closeDelayMs:O=s.defaultCloseDelayMs,disableExpandOnHover:x,children:ee}=a,me=vs({sidebarConfig:s}),Ze=(0,G.Z)(Ta=>Ta.breakpoints.down("md"),{noSsr:!0}),[qe,Ge]=(0,t.useState)(0),$t=(0,t.useRef)(),{isPinned:_t,toggleSidebarPinState:zt}=eo(),Qt=()=>{_t||x||($t.current&&(clearTimeout($t.current),$t.current=void 0),qe!==2&&!Ze&&($t.current=window.setTimeout(()=>{$t.current=void 0,Ge(2)},v),Ge(1)))},Sn=()=>{_t||x||($t.current&&(clearTimeout($t.current),$t.current=void 0),qe===1?Ge(0):qe===2&&($t.current=window.setTimeout(()=>{$t.current=void 0,Ge(0)},O)))},An=qe===2&&!Ze||_t,la=Ta=>{Ta?(Ge(2),zt()):(Ge(0),zt())};return t.createElement("nav",{style:{},"aria-label":"sidebar nav"},t.createElement(Pi,null),t.createElement(us,{value:{isOpen:An,setOpen:la}},t.createElement(he.Z,{className:me.root,"data-testid":"sidebar-root",onMouseEnter:x?()=>{}:Qt,onFocus:x?()=>{}:Qt,onMouseLeave:x?()=>{}:Sn,onBlur:x?()=>{}:Sn},t.createElement(he.Z,{className:b()(me.drawer,{[me.drawerOpen]:An})},ee))))},Ci=a=>{var s,v;const O=ci((s=a.sidebarOptions)!=null?s:{}),x=ui((v=a.submenuOptions)!=null?v:{}),{children:ee,disableExpandOnHover:me,openDelayMs:Ze,closeDelayMs:qe}=a,{isMobile:Ge}=eo();return Ge?t.createElement(vi,null,ee):t.createElement(mr.Provider,{value:{sidebarConfig:O,submenuConfig:x}},t.createElement(bi,{openDelayMs:Ze,closeDelayMs:qe,disableExpandOnHover:me},ee))};function Pi(){const{sidebarConfig:a}=(0,t.useContext)(mr),{focusContent:s,contentRef:v}=Lo(),O=vs({sidebarConfig:a});return v!=null&&v.current?t.createElement(N.Z,{onClick:s,variant:"contained",className:b()(O.visuallyHidden)},"Skip to content"):null}function to(a,s){const v=new URLSearchParams(s.search).toString(),O=jt().parse(v),x=new URLSearchParams(a.search).toString(),ee=jt().parse(x);return(0,E.isEqual)(s.pathname,a.pathname)&&(0,E.isMatch)(ee,O)}const Si=(0,f.Z)(a=>{var s,v;return{item:{height:48,width:"100%","&:hover":{background:((s=a.palette.navigation.navItem)==null?void 0:s.hoverBackground)||"#6f6f6f",color:a.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:a.palette.navigation.color,padding:a.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:a.palette.common.white},label:{margin:a.spacing(1.75),marginLeft:a.spacing(1),fontSize:a.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((v=a.palette.navigation.navItem)==null?void 0:v.hoverBackground)||"#6f6f6f",color:a.palette.navigation.selectedColor}},textContent:{color:a.palette.navigation.color,paddingLeft:a.spacing(4),paddingRight:a.spacing(1),fontSize:a.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),Oi=a=>{const{title:s,subtitle:v,to:O,icon:x,dropdownItems:ee}=a,me=Si(),{setIsHoveredOn:Ze}=(0,t.useContext)(Do),qe=()=>{Ze(!1)},Ge=(0,S.WU)(O!=null?O:""),$t=(0,S.TH)();let _t=to($t,Ge);const[zt,Qt]=(0,t.useState)(!1),Sn=()=>{Qt(!zt)};return ee!==void 0?(ee.some(An=>{const la=(0,pe.i3)(An.to);return _t=to($t,la),_t}),t.createElement(he.Z,{className:me.itemContainer},t.createElement(dt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(N.Z,{role:"button",onClick:Sn,onTouchStart:An=>An.stopPropagation(),className:b()(me.item,_t?me.selected:void 0)},x&&t.createElement(x,{fontSize:"small"}),t.createElement(u.Z,{variant:"subtitle1",className:me.label},s,t.createElement("br",null),v&&t.createElement(u.Z,{variant:"caption",className:me.subtitle},v)),zt?t.createElement(L.Z,{className:me.dropdownArrow}):t.createElement(Ja.Z,{className:me.dropdownArrow}))),ee&&zt&&t.createElement(he.Z,{className:me.dropdown},ee.map((An,la)=>t.createElement(dt.ZP,{key:la,title:An.title,enterDelay:500,enterNextDelay:500},t.createElement(i,{to:An.to,underline:"none",className:me.dropdownItem,onClick:qe,onTouchStart:Ta=>Ta.stopPropagation()},t.createElement(u.Z,{className:me.textContent},An.title))))))):t.createElement(he.Z,{className:me.itemContainer},t.createElement(dt.ZP,{title:s,enterDelay:500,enterNextDelay:500},t.createElement(i,{to:O,underline:"none",className:b()(me.item,_t?me.selected:void 0),onClick:qe,onTouchStart:An=>An.stopPropagation()},x&&t.createElement(x,{fontSize:"small"}),t.createElement(u.Z,{variant:"subtitle1",className:me.label},s,t.createElement("br",null),v&&t.createElement(u.Z,{variant:"caption",className:me.subtitle},v)))))},Ri=(0,f.Z)(a=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:a.spacing(7)+1},drawer:s=>{var v,O;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[a.breakpoints.up("sm")]:{marginLeft:s.left,transition:a.transitions.create("margin-left",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(O=(v=a.palette.navigation.submenu)==null?void 0:v.background)!=null?O:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:s.submenuConfig.drawerWidthClosed,transitionDelay:`${s.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:s=>({width:s.submenuConfig.drawerWidthOpen,[a.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:a.spacing(3),left:0,top:0}}),title:{fontSize:a.typography.h5.fontSize,fontWeight:a.typography.fontWeightMedium,color:a.palette.common.white,padding:a.spacing(2.5),[a.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),ys=a=>{const{isOpen:s}=jr(),{sidebarConfig:v,submenuConfig:O}=(0,t.useContext)(mr),x=s?v.drawerWidthOpen:v.drawerWidthClosed,ee=Ri({left:x,submenuConfig:O}),{isHoveredOn:me}=(0,t.useContext)(Do),[Ze,qe]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{qe(me)},[me]),t.createElement(he.Z,{className:b()(ee.drawer,{[ee.drawerOpen]:Ze})},t.createElement(u.Z,{variant:"h5",className:ee.title},a.title),a.children)},Ai=(0,f.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),wi=()=>{const a=Ai();return React.createElement(Box,{className:a.iconContainer},React.createElement(Box,{className:a.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},Ti=(0,f.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),Ii=()=>{const a=Ti();return React.createElement(Box,{className:a.iconContainer},React.createElement(Box,{className:a.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},Di=a=>(0,f.Z)(s=>{var v,O,x,ee;return{root:{color:s.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:a.drawerWidthClosed,justifyContent:"center"},open:{[s.breakpoints.up("sm")]:{width:a.drawerWidthOpen}},highlightable:{"&:hover":{background:(O=(v=s.palette.navigation.navItem)==null?void 0:v.hoverBackground)!=null?O:"#404040"}},highlighted:{background:(ee=(x=s.palette.navigation.navItem)==null?void 0:x.hoverBackground)!=null?ee:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:a.iconContainerWidth,marginRight:-s.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:s.typography.fontWeightBold,fontSize:s.typography.fontSize},searchFieldHTMLInput:{padding:s.spacing(2,0,2)},searchContainer:{width:a.drawerWidthOpen-a.iconContainerWidth},secondaryAction:{width:s.spacing(6),textAlign:"center",marginRight:s.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:s.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${a.selectedIndicatorWidth}px ${s.palette.navigation.indicator}`,color:s.palette.navigation.selectedColor},"&$closed":{width:a.drawerWidthClosed},"& $closedItemIcon":{paddingRight:a.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-a.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function no(a){return(0,t.useMemo)(()=>Di(a),[a])()}const Mi=(a,s)=>(0,n.vJ)(a.props.children,v=>{let O=!1;return v.getElements().forEach(({props:{to:x,dropdownItems:ee}})=>{if(!O){if(ee!=null&&ee.length){ee.forEach(({to:me})=>O=O||to(s,(0,pe.i3)(me)));return}x&&(O=to(s,(0,pe.i3)(x)))}}),O},[s.pathname]);function _s(a){return a.to===void 0}const Li=t.createElement(ys).type,$i=t.forwardRef(function({to:s,end:v,style:O,className:x,activeStyle:ee,caseSensitive:me,activeClassName:Ze="active","aria-current":qe="page",...Ge},$t){let{pathname:_t}=(0,S.TH)(),{pathname:zt}=(0,S.WU)(s);me||(_t=_t.toLocaleLowerCase("en-US"),zt=zt.toLocaleLowerCase("en-US"));let Qt=_t===zt;!Qt&&!v&&(Qt=_t.startsWith(`${zt}/`));const Sn=Qt?qe:void 0;return t.createElement(K.rU,{...Ge,to:s,ref:$t,"aria-current":Sn,style:{...O,...Qt?ee:void 0},className:b()([x,Qt?Ze:void 0])})}),bs=(0,t.forwardRef)((a,s)=>{const{icon:v,text:O,hasNotifications:x=!1,hasSubmenu:ee=!1,disableHighlight:me=!1,onClick:Ze,children:qe,className:Ge,...$t}=a,{sidebarConfig:_t}=(0,t.useContext)(mr),zt=no(_t),{isOpen:Qt}=jr(),Sn=!Qt&&ee?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},An=t.createElement(he.Z,{style:Sn},t.createElement(v,{fontSize:"small"}),!Qt&&ee?t.createElement(_e.Z,{fontSize:"small"}):t.createElement(t.Fragment,null)),la=t.createElement(Z.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!x,className:b()({[zt.closedItemIcon]:!Qt})},An),Ta=t.createElement(t.Fragment,null,t.createElement(he.Z,{"data-testid":"login-button",className:zt.iconContainer},la),O&&t.createElement(u.Z,{variant:"subtitle2",className:zt.label},O),t.createElement("div",{className:zt.secondaryAction},qe)),Ua=Qt?Ta:la,ka={onClick:Ze,className:b()(Ge,zt.root,Qt?zt.open:zt.closed,_s(a)&&zt.buttonItem,{[zt.highlightable]:!me})};return _s(a)?t.createElement(N.Z,{role:"button","aria-label":O,...ka,ref:s},Ua):t.createElement($i,{...ka,activeClassName:zt.selected,to:a.to?a.to:"",ref:s,"aria-label":O||a.to,...$t},Ua)}),xi=({children:a,...s})=>{const{sidebarConfig:v}=(0,t.useContext)(mr),O=no(v),[x,ee]=(0,t.useState)(!1),me=(0,S.TH)(),Ze=Mi(a,me),qe=(0,G.Z)(zt=>zt.breakpoints.down("sm")),Ge=()=>{ee(!0)},$t=()=>{ee(!1)},_t=()=>qe?x?t.createElement(L.Z,{fontSize:"small",className:O.submenuArrow}):t.createElement(Ja.Z,{fontSize:"small",className:O.submenuArrow}):!x&&t.createElement(_e.Z,{fontSize:"small",className:O.submenuArrow});return t.createElement(Do.Provider,{value:{isHoveredOn:x,setIsHoveredOn:ee}},t.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:$t,onTouchStart:x?$t:Ge,onMouseEnter:Ge,className:b()(x&&O.highlighted)},t.createElement(bs,{hasSubmenu:!0,className:Ze?O.selected:"",...s},_t()),x&&a))},Cs=(0,t.forwardRef)((a,s)=>{const[v]=(0,n.vJ)(a.children,O=>O.getElements().filter(x=>x.type===Li));return v?t.createElement(xi,{...a},v):t.createElement(bs,{...a,ref:s})});function lc(a){const{sidebarConfig:s}=useContext(mr),[v,O]=useState(""),x=no(s),ee=a.icon?a.icon:SearchIcon,me=()=>{a.onSearch(v),O("")},Ze=_t=>{_t.key==="Enter"&&(_t.preventDefault(),me())},qe=_t=>{O(_t.target.value)},Ge=_t=>{_t.preventDefault(),_t.stopPropagation()},$t=_t=>{me(),_t.preventDefault()};return React.createElement(Box,{className:x.searchRoot},React.createElement(Cs,{icon:ee,to:a.to,onClick:$t,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:v,onClick:Ge,onChange:qe,onKeyDown:Ze,className:x.searchContainer,InputProps:{disableUnderline:!0,className:x.searchField},inputProps:{className:x.searchFieldHTMLInput}})))}const Bi=(0,A.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),cc=(0,A.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ps=(0,A.Z)("hr")(({theme:a})=>({height:1,width:"100%",background:"#383838",border:"none",margin:a.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),Ui=a=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:a.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:a.palette.text.hint,borderRadius:"5px"}}),ki=(0,A.Z)("div")(({theme:a})=>{const s=Ui(a);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":s,"&:hover":s}}),uc=()=>{const{sidebarConfig:a}=useContext(mr),s=no(a),{isOpen:v,setOpen:O}=jr();if(useMediaQuery(me=>me.breakpoints.down("md"),{noSsr:!0}))return null;const ee=()=>{O(!v)};return React.createElement(Button$1,{role:"button",onClick:ee,className:s.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:s.arrows},v?React.createElement(wi,null):React.createElement(Ii,null)))},Zi=(0,f.Z)(a=>({introCard:s=>({color:"#b5b5b5",fontSize:12,width:s.sidebarConfig.drawerWidthOpen,marginTop:a.spacing(2.25),marginBottom:a.spacing(1.5),paddingLeft:s.sidebarConfig.iconPadding,paddingRight:s.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:a.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:a.spacing(.5),"&:hover":{color:a.palette.linkHover,transition:a.transitions.create("color",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:a.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Ni(a){const{sidebarConfig:s}=useContext(mr),v=Zi({sidebarConfig:s}),{text:O,onClose:x}=a,ee=()=>x();return React.createElement(Box,{className:v.introCard},React.createElement(Typography,{variant:"subtitle2"},O),React.createElement(Box,{className:v.introDismiss},React.createElement(IconButton,{onClick:ee,className:v.introDismissLink},React.createElement(CloseIcon,{className:v.introDismissIcon}),React.createElement(Typography,{component:"span",className:v.introDismissText},"Dismiss"))))}const Ss=a=>{const{text:s,onDismiss:v}=a,[O,x]=useState(!1),ee=()=>{x(!0)};return React.createElement(Collapse,{in:!O,onExited:v},React.createElement(Ni,{text:s,onClose:ee}))},Wi=null,Fi="And your recently viewed plugins will pop up here!";function dc(a){const{isOpen:s}=jr(),v={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:O,set:x}=useLocalStorageValue(di),{starredItemsDismissed:ee,recentlyViewedItemsDismissed:me}=O!=null?O:{},Ze=()=>{x(Ge=>({...v,...Ge,starredItemsDismissed:!0}))},qe=()=>{x(Ge=>({...v,...Ge,recentlyViewedItemsDismissed:!0}))};return s?React.createElement(React.Fragment,null,!ee&&React.createElement(React.Fragment,null,React.createElement(Ss,{text:Wi,onDismiss:Ze}),React.createElement(Ps,null)),!me&&React.createElement(Ss,{text:Fi,onDismiss:qe})):null}const Ki=(0,f.Z)(a=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:a.spacing(3),paddingBottom:a.spacing(3),paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function ao(a){const{className:s,stretch:v,noPadding:O,children:x,...ee}=a,{contentRef:me}=Lo(),Ze=Ki();return t.createElement("article",{ref:me,tabIndex:-1,...ee,className:b()(Ze.root,s,{[Ze.stretch]:v,[Ze.noPadding]:O})},x)}const zi=(0,f.Z)(a=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:a.palette.background.paper,paddingLeft:a.spacing(3),minWidth:0},defaultTab:{...a.typography.caption,padding:a.spacing(3,3),textTransform:"uppercase",fontWeight:a.typography.fontWeightBold,color:a.palette.text.secondary},selected:{color:a.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:a.palette.background.default,color:a.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function Os(a){const{tabs:s,onChange:v,selectedIndex:O}=a,[x,ee]=(0,t.useState)(O!=null?O:0),me=zi(),Ze=(0,t.useCallback)((qe,Ge)=>{O===void 0&&ee(Ge),v&&O!==Ge&&v(Ge)},[O,v]);return(0,t.useEffect)(()=>{O!==void 0&&ee(O)},[O]),t.createElement(he.Z,{className:me.tabsWrapper},t.createElement(Bn.Z,{selectionFollowsFocus:!0,indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:Ze,value:x},s.map((qe,Ge)=>t.createElement(hn.Z,{...qe.tabProps,"data-testid":`header-tab-${Ge}`,label:qe.label,key:qe.id,value:Ge,className:me.defaultTab,classes:{selected:me.selected,root:me.tabRoot}}))))}function ji(a){var s,v,O,x;const ee=(0,S.UO)(),Ze=a.map(({path:zt,children:Qt})=>({caseSensitive:!1,path:`${zt}/*`,element:Qt})).sort((zt,Qt)=>Qt.path.replace(/\/\*$/,"").localeCompare(zt.path.replace(/\/\*$/,""))),qe=(s=(0,S.V$)(Ze))!=null?s:a[0].children;let Ge=(v=ee["*"])!=null?v:"";Ge.startsWith("/")||(Ge=`/${Ge}`);const[$t]=(O=(0,pe.fp)(Ze,Ge))!=null?O:[],_t=$t?a.findIndex(zt=>`${zt.path}/*`===$t.route.path):0;return{index:_t===-1?0:_t,element:qe,route:(x=a[_t])!=null?x:a[0]}}function Rs(a){const{routes:s}=a,v=(0,S.s0)(),{index:O,route:x,element:ee}=ji(s),me=(0,t.useMemo)(()=>s.map(qe=>({id:qe.path,label:qe.title,tabProps:qe.tabProps})),[s]),Ze=qe=>{let{path:Ge}=s[qe];Ge=Ge.replace(/\/\*$/,""),Ge=Ge.replace(/^\//,""),v(Ge)};return t.createElement(t.Fragment,null,t.createElement(Os,{tabs:me,selectedIndex:O,onChange:Ze}),t.createElement(ao,null,t.createElement(_n.q,{title:x.title}),ee))}const $o=()=>null;(0,n.R5)($o,"core.gatherMountPoints",!0);function As(a){const s=t.createElement($o,{path:"",title:""},t.createElement("div",null)).type;return t.Children.toArray(a).flatMap(v=>{if(!(0,t.isValidElement)(v))return[];if(v.type===t.Fragment)return As(v.props.children);if(v.type!==s)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:O,title:x,children:ee,tabProps:me}=v.props;return[{path:O,title:x,children:ee,tabProps:me}]})}function Vi(a){const s=As(a.children);return t.createElement(Rs,{routes:s})}Vi.Route=$o;const Gi=(0,f.Z)(a=>({value:{marginBottom:a.spacing(.75)},subvalue:{color:a.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Hi(a){const{value:s,subvalue:v}=a,O=Gi();return t.createElement(t.Fragment,null,t.createElement(he.Z,{className:O.value},s),t.createElement(he.Z,{className:O.subvalue},v))}const Ji=(0,f.Z)(a=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:a.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:a.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${a.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:a.spacing(2)}}}),{name:"BackstageTableFilters"}),Yi=a=>{var s;const v=Ji(),{onChangeFilters:O}=a,[x,ee]=(0,t.useState)({...a.selectedFilters}),[me,Ze]=(0,t.useState)(!1),qe=()=>{ee({}),Ze(Ge=>!Ge)};return(0,t.useEffect)(()=>{O(x)},[x,O]),t.createElement(he.Z,{className:v.root},t.createElement(he.Z,{className:v.header},t.createElement(he.Z,{className:v.value},"Filters"),t.createElement(N.Z,{color:"primary",onClick:qe},"Clear all")),t.createElement(he.Z,{className:v.filters},((s=a.filters)==null?void 0:s.length)&&a.filters.map(Ge=>t.createElement(Q,{triggerReset:me,key:Ge.element.label,...Ge.element,selected:x[Ge.element.label],onChange:$t=>ee({...x,[Ge.element.label]:$t})}))))},ws={Add:(0,t.forwardRef)((a,s)=>t.createElement(yn.Z,{...a,ref:s})),Check:(0,t.forwardRef)((a,s)=>t.createElement(sa.Z,{...a,ref:s})),Clear:(0,t.forwardRef)((a,s)=>t.createElement(zn.Z,{...a,ref:s})),Delete:(0,t.forwardRef)((a,s)=>t.createElement(jn.Z,{...a,ref:s})),DetailPanel:(0,t.forwardRef)((a,s)=>t.createElement(T.Z,{...a,ref:s})),Edit:(0,t.forwardRef)((a,s)=>t.createElement(ua.Z,{...a,ref:s})),Export:(0,t.forwardRef)((a,s)=>t.createElement(er.Z,{...a,ref:s})),Filter:(0,t.forwardRef)((a,s)=>t.createElement(_a.Z,{...a,ref:s})),FirstPage:(0,t.forwardRef)((a,s)=>t.createElement(Ga.Z,{...a,ref:s})),LastPage:(0,t.forwardRef)((a,s)=>t.createElement(Ha.Z,{...a,ref:s})),NextPage:(0,t.forwardRef)((a,s)=>t.createElement(T.Z,{...a,ref:s})),PreviousPage:(0,t.forwardRef)((a,s)=>t.createElement(Pe.Z,{...a,ref:s})),ResetSearch:(0,t.forwardRef)((a,s)=>t.createElement(zn.Z,{...a,ref:s})),Search:(0,t.forwardRef)((a,s)=>t.createElement(_a.Z,{...a,ref:s})),SortArrow:(0,t.forwardRef)((a,s)=>t.createElement(Kn.Z,{...a,ref:s})),ThirdStateCheck:(0,t.forwardRef)((a,s)=>t.createElement(ur.Z,{...a,ref:s})),ViewColumn:(0,t.forwardRef)((a,s)=>t.createElement(Qa.Z,{...a,ref:s}))};function Ts(a,s){const v=s.split(".");let O=a[v[0]];for(let x=1;x<v.length;++x){if(O===void 0)return O;const ee=v[x];O=O[ee]}return O}const Xi=(0,k.Z)(a=>({header:{padding:a.spacing(1,2,1,2.5),borderTop:`1px solid ${a.palette.grey.A100}`,borderBottom:`1px solid ${a.palette.grey.A100}`,color:a.palette.textSubtle,fontWeight:a.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Pn.W$),Is=(0,k.Z)(a=>({root:{padding:a.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:a.typography.fontWeightBold}},searchField:{paddingRight:a.spacing(2)}}),{name:"BackstageTableToolbar"})(Pn.UW),Qi=(0,f.Z)(a=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:a.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),qi=(0,f.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function el(a,s){return a.map(v=>{var O;const x=(O=v.headerStyle)!=null?O:{};let ee=v.cellStyle||{};if(v.highlight)if(x.color=s.palette.textContrast,typeof ee=="object")ee.fontWeight=s.typography.fontWeightBold;else{const me=ee;ee=(Ze,qe,Ge)=>({...me(Ze,qe,Ge),fontWeight:s.typography.fontWeightBold})}return{...v,headerStyle:x,cellStyle:ee}})}function tl(a,s){return(0,E.transform)(a,(v,O,x)=>{(0,E.isEqual)(O,s[x])||(v[x]=O)})}const Ds={search:"",filtersOpen:!1,filters:{}};function nl(a){const{toolbarRef:s,setSearch:v,hasFilters:O,selectedFiltersLength:x,toggleFilters:ee}=a,me=Qi(),Ze=(0,t.useCallback)(qe=>{a.onSearchChanged(qe),v(qe)},[a,v]);return O?t.createElement(he.Z,{className:me.root},t.createElement(he.Z,{className:me.root},t.createElement(c.Z,{onClick:ee,"aria-label":"filter list"},t.createElement(_a.Z,null)),t.createElement(u.Z,{className:me.title},"Filters (",x,")")),t.createElement(Is,{...a,ref:s,onSearchChanged:Ze})):t.createElement(Is,{...a,ref:s,onSearchChanged:Ze})}function Ms(a){const{data:s,columns:v,options:O,title:x,subtitle:ee,filters:me,initialState:Ze,emptyContent:qe,onStateChange:Ge,components:$t,..._t}=a,zt=qi(),Qt=(0,F.Z)(),Sn={...Ds,...Ze},[An,la]=(0,t.useState)(Sn.filtersOpen),Ta=(0,t.useCallback)(()=>la(lr=>!lr),[la]),[Ua,ka]=(0,t.useState)(0),[ca,Za]=(0,t.useState)(s),[Ia,Ir]=(0,t.useState)(Sn.filters),Dr=el(v,Qt),[Or,Rr]=(0,t.useState)(Sn.search);(0,t.useEffect)(()=>{if(Ge){const lr=tl({search:Or,filtersOpen:An,filters:Ia},Ds);Ge(lr)}},[Or,An,Ia,Ge]);const No={headerStyle:{textTransform:"uppercase"}},Mr=(0,t.useCallback)(lr=>{var Ar;return(Ar=v.find(Ur=>Ur.title===lr))==null?void 0:Ar.field},[v]);(0,t.useEffect)(()=>{if(typeof s=="function")return;if(!Ia){Za(s);return}const lr=Object.values(Ia);if(s&&lr.flat().length){const Ar=s.filter(Ur=>!!Object.entries(Ia).filter(([,kr])=>!!kr.length).every(([kr,Fa])=>{const Xa=Ts(Ur,Mr(kr));return Array.isArray(Xa)&&Array.isArray(Fa)?Xa.some(Kr=>Fa.includes(Kr)):Array.isArray(Xa)?Xa.includes(Fa):Array.isArray(Fa)?Fa.includes(Xa):Xa===Fa}));Za(Ar)}else Za(s);ka(lr.flat().length)},[s,Ia,Mr]);const Wo=(lr,Ar)=>{const Ur=Fa=>{const Xa=new Set,Kr=Zr=>{Zr!=null&&Xa.add(Zr)};return Ar&&Ar.forEach(Zr=>{const Vr=Ts(Zr,Mr(Fa));Array.isArray(Vr)?Vr.forEach(Kr):Kr(Vr)}),Xa},kr=Fa=>({placeholder:"All results",label:Fa.column,multiple:Fa.type==="multiple-select",items:[...Ur(Fa.column)].sort().map(Xa=>({label:Xa,value:Xa}))});return lr.map(Fa=>({type:Fa.type,element:kr(Fa)}))},Da=!!(me!=null&&me.length),Fr=(0,t.useCallback)(lr=>t.createElement(nl,{setSearch:Rr,hasFilters:Da,selectedFiltersLength:Ua,toggleFilters:Ta,...lr}),[Ta,Da,Ua,Rr]),lo=typeof s!="function"&&s.length===0,Lr=v.length,Fo=(0,t.useCallback)(lr=>qe&&lo?t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:Lr},qe))):t.createElement(Pn.os,{...lr}),[lo,qe,Lr]);return t.createElement(he.Z,{className:zt.root},An&&s&&typeof s!="function"&&(me==null?void 0:me.length)&&t.createElement(Yi,{filters:Wo(me,s),selectedFilters:Ia,onChangeFilters:Ir}),t.createElement(Pn.ZP,{components:{Header:Xi,Toolbar:Fr,Body:Fo,...$t},options:{...No,...O},columns:Dr,icons:ws,title:t.createElement(t.Fragment,null,t.createElement(u.Z,{variant:"h5",component:"h2"},x),ee&&t.createElement(u.Z,{color:"textSecondary",variant:"body1"},ee)),data:typeof s=="function"?s:ca,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"}},..._t}))}Ms.icons=Object.freeze(ws);function al(a,s){if(s<=0)return[a];const v=[];for(let O=0;O<a.length;O+=s)v.push(a.slice(O,O+s));return v}const Ls=a=>{const{children:s,value:v,index:O,...x}=a;return React.createElement(Box,{role:"tabpanel",hidden:v!==O,"aria-labelledby":`scrollable-auto-tab-${O}`,...x},v===O&&React.createElement(Box,{p:3},s))},rl=(0,f.Z)(a=>({root:{color:"#6E6E6E",overflow:"visible",fontSize:a.typography.h5.fontSize,textAlign:"center",borderRadius:"50%",backgroundColor:"#E6E6E6",marginLeft:s=>s.isNext?"auto":"0",marginRight:s=>s.isNext?"0":a.spacing(1.25),"&:hover":{backgroundColor:"#E6E6E6",opacity:"1"}}}),{name:"BackstageTabIcon"}),$s=a=>{const s=rl(a),{ariaLabel:v,onClick:O}=a;return React.createElement(IconButton,{onClick:O,className:s.root,size:"small",disableRipple:!0,disableFocusRipple:!0,"aria-label":v},a.children)},ol=(a,s)=>s?a?"20px":"0":"40px",sl=(0,f.Z)(a=>({root:{textTransform:"none",height:"64px",fontWeight:a.typography.fontWeightBold,fontSize:a.typography.pxToRem(13),color:a.palette.textSubtle,marginLeft:s=>ol(s.isFirstNav,s.isFirstIndex),width:"130px",minWidth:"130px","&:hover":{outline:"none",backgroundColor:"transparent",color:a.palette.textSubtle}}}),{name:"BackstageTab"}),il=a=>{const s=sl(a),{isFirstNav:v,isFirstIndex:O,...x}=a;return React.createElement(Tab,{classes:s,disableRipple:!0,...x})},ll=(0,f.Z)(a=>({indicator:{display:"flex",justifyContent:"center",backgroundColor:a.palette.tabbar.indicator,height:a.spacing(.5)},flexContainer:{alignItems:"center"},root:{"&:last-child":{marginLeft:"auto"}}}),{name:"BackstageTabBar"}),cl=a=>{const s=ll(a);return React.createElement(Tabs$1,{classes:s,...a,TabIndicatorProps:{children:React.createElement(Typography,{component:"span"})}})},ul=(0,f.Z)(a=>({root:{flexGrow:1,width:"100%"},styledTabs:{backgroundColor:a.palette.background.paper},appbar:{boxShadow:"none",backgroundColor:a.palette.background.paper,paddingLeft:a.spacing(1.25),paddingRight:a.spacing(1.25)}}),{name:"BackstageTabs"});function mc(a){const{tabs:s}=a,v=ul(),[O,x]=useState([0,0]),[ee,me]=useState(0),[Ze,qe]=useState(0),[Ge,$t]=useState([[]]),_t=useRef(),{width:zt}=useWindowSize(),Qt=(Ua,ka)=>{x([ee,ka])},Sn=()=>{me(ee-1)},An=()=>{me(ee+1)},la=()=>ee+1<Ge.length;useEffect(()=>{const ka=ee===0?1:2,ca=_t.current.offsetWidth-20-ka*30,Za=O[0]*Ze+O[1],Ia=Math.floor(ca/170);qe(Ia),$t(al(s,Ia)),x([Math.floor(Za/Ia),Za%Ia])},[zt,s]);const Ta=ee===O[0]?O[1]:!1;return React.createElement(Box,{className:v.root},React.createElement(AppBar,{ref:_t,className:v.appbar,position:"static"},React.createElement(Box,null,React.createElement(cl,{value:Ta,onChange:Qt,selectionFollowsFocus:!0},ee!==0&&React.createElement($s,{onClick:Sn,ariaLabel:"navigate-before"},React.createElement(NavigateBeforeIcon,null)),Ge[ee].map((Ua,ka)=>React.createElement(il,{value:ka,isFirstIndex:ka===0,isFirstNav:ee===0,key:ka,icon:Ua.icon||void 0,label:Ua.label||void 0})),la()&&React.createElement($s,{isNext:!0,onClick:An,ariaLabel:"navigate-next"},React.createElement(NavigateNextIcon,null))))),Ta!==!1?Ge[ee].map((Ua,ka)=>React.createElement(Ls,{key:ka,value:ka,index:Ta},Ua.content)):React.createElement(Ls,{key:"panel_outside_chunked_array",value:O[1],index:O[1]},Ge[O[0]][O[1]].content))}function dl(a,s){const v=a[a.length-1];if(v)return v>=.9?s.palette.status.ok:v>=.5?s.palette.status.warning:s.palette.status.error}function pc(a){var s;const v=useTheme();return a.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...a},a.title&&React.createElement("title",null,a.title),React.createElement(SparklinesLine,{color:(s=a.color)!=null?s:dl(a.data,v)})):null}const ml=a=>(0,f.Z)(s=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:s.spacing(2),textAlign:a.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:s.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),pl=({title:a="Unknown page",className:s})=>t.createElement(u.Z,{variant:"h4",component:"h2",className:s,"data-testid":"header-title"},a);function xs(a){const{description:s,title:v,titleComponent:O=void 0,children:x,textAlign:ee="left"}=a,me=ml({textAlign:ee})(),Ze=O||t.createElement(pl,{title:v,className:me.title});return t.createElement(t.Fragment,null,t.createElement(_n.q,{title:v}),t.createElement(he.Z,{className:me.container},t.createElement(he.Z,{className:me.leftItemsBox},Ze,s&&t.createElement(u.Z,{className:me.description,variant:"body2"},s)),t.createElement(he.Z,{className:me.rightItemsBox},x)))}const fl=(0,f.Z)(a=>({micDrop:{maxWidth:"60%",bottom:a.spacing(2),right:a.spacing(2),[a.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:`${a.spacing(10)}px auto ${a.spacing(4)}px`}}}),{name:"BackstageErrorPageMicDrop"}),hl=()=>{const a=fl();return t.createElement("img",{src:U,className:a.micDrop,alt:"Girl dropping mic from her hands"})},gl=(0,f.Z)(a=>({container:{padding:a.spacing(8),[a.breakpoints.down("xs")]:{padding:a.spacing(2)}},title:{paddingBottom:a.spacing(5),[a.breakpoints.down("xs")]:{paddingBottom:a.spacing(4),fontSize:a.typography.h3.fontSize}},subtitle:{color:a.palette.textSubtle}}),{name:"BackstageErrorPage"});function El(a){const{status:s,statusMessage:v,additionalInfo:O,supportUrl:x}=a,ee=gl(),me=(0,S.s0)(),Ze=as();return t.createElement(o.Z,{container:!0,spacing:0,className:ee.container},t.createElement(o.Z,{item:!0,xs:12,sm:8,md:4},t.createElement(u.Z,{"data-testid":"error",variant:"body1",className:ee.subtitle},"ERROR ",s,": ",v),t.createElement(u.Z,{variant:"body1",className:ee.subtitle},O),t.createElement(u.Z,{variant:"h2",className:ee.title},"Looks like someone dropped the mic!"),t.createElement(u.Z,{variant:"h6"},t.createElement(i,{to:"#","data-testid":"go-back-link",onClick:()=>me(-1)},"Go back"),"... or please"," ",t.createElement(i,{to:x||Ze.url},"contact support")," if you think this is a bug.")),t.createElement(hl,null))}const vl=(0,k.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(u.Z),xo=(0,k.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(he.Z);function Bs(a){const{children:s,...v}=a,[O,x]=t.useState(null),ee=t.Children.toArray(s),[me,Ze,...qe]=ee,Ge=qe.length?qe.pop():ee[ee.length-1],$t=ee.length>3,_t=Sn=>{x(Sn.currentTarget)},zt=()=>{x(null)},Qt=Boolean(O);return t.createElement(t.Fragment,null,t.createElement(se.Z,{"aria-label":"breadcrumb",...v},ee.length>1&&t.createElement(xo,{clone:!0},me),ee.length>2&&t.createElement(xo,{clone:!0},Ze),$t&&t.createElement(vl,{onClick:_t},"..."),t.createElement(he.Z,{style:{fontStyle:"italic"}},Ge)),t.createElement(Pt.ZP,{open:Qt,anchorEl:O,onClose:zt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},t.createElement(Vt.Z,null,qe.map((Sn,An)=>t.createElement(de.Z,{key:An,button:!0},t.createElement(xo,{clone:!0},Sn))))))}const yl=(0,f.Z)(a=>({header:{gridArea:"pageHeader",padding:a.spacing(3),width:"100%",boxShadow:a.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:a.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[a.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:a.page.fontColor,wordBreak:"break-word",fontSize:a.typography.h3.fontSize,marginBottom:0},subtitle:{color:a.page.fontColor,opacity:.8,display:"inline-block",marginTop:a.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:a.spacing(1),color:a.page.fontColor},breadcrumb:{color:a.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-a.spacing(.3),marginBottom:a.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-a.spacing(.3),marginBottom:a.spacing(.3)}}),{name:"BackstageHeader"}),_l=({type:a,typeLink:s,classes:v,pageTitle:O})=>a?s?t.createElement(Bs,{className:v.breadcrumb},t.createElement(i,{to:s},a),t.createElement(u.Z,null,O)):t.createElement(u.Z,{className:v.type},a):null,bl=({pageTitle:a,classes:s,tooltip:v})=>{const O=t.createElement(u.Z,{className:s.title,variant:"h1"},a);return v?t.createElement(dt.ZP,{title:v,placement:"top-start"},O):O},Cl=({classes:a,subtitle:s})=>s?typeof s!="string"?t.createElement(t.Fragment,null,s):t.createElement(u.Z,{className:a.subtitle,variant:"subtitle2",component:"span"},s):null;function ro(a){const{children:s,pageTitleOverride:v,style:O,subtitle:x,title:ee,tooltip:me,type:Ze,typeLink:qe}=a,Ge=yl(),_t=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage",zt=v||ee,Qt=ee||v,Sn=`${zt} | %s | ${_t}`,An=`${zt} | ${_t}`;return t.createElement(t.Fragment,null,t.createElement(_n.q,{titleTemplate:Sn,defaultTitle:An}),t.createElement("header",{style:O,className:Ge.header},t.createElement(he.Z,{className:Ge.leftItemsBox},t.createElement(_l,{classes:Ge,type:Ze,typeLink:qe,pageTitle:Qt}),t.createElement(bl,{classes:Ge,pageTitle:Qt,tooltip:me}),t.createElement(Cl,{classes:Ge,subtitle:x})),t.createElement(o.Z,{container:!0,className:Ge.rightItemsBox,spacing:4},s)))}const Pl=({label:a,secondaryLabel:s,icon:v,disabled:O=!1,onClick:x})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:O,button:!0,onClick:ee=>{x&&x(ee)}},v&&React.createElement(ListItemIcon,null,v),React.createElement(ListItemText,{primary:a,secondary:s})));function fc(a){const{palette:{common:{white:s}}}=useTheme(),{actionItems:v}=a,[O,x]=React.useState(!1),ee=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>x(!0),"data-testid":"header-action-menu",ref:ee,style:{color:s,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:O,anchorEl:ee.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>x(!1)},React.createElement(List,null,v.map((me,Ze)=>React.createElement(Pl,{key:`header-action-menu-${Ze}`,...me})))))}const Sl=(0,f.Z)(a=>({root:{textAlign:"left"},label:{color:a.palette.common.white,fontWeight:a.typography.fontWeightBold,letterSpacing:0,fontSize:a.typography.fontSize,marginBottom:a.spacing(1)/2,lineHeight:1},value:{color:"rgba(255, 255, 255, 0.8)",fontSize:a.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Ol=({value:a,className:s})=>t.createElement(u.Z,{className:s},a);function Rl(a){const{label:s,value:v,url:O}=a,x=Sl(),ee=t.createElement(Ol,{className:x.value,value:v||"<Unknown>"});return t.createElement(o.Z,{item:!0},t.createElement(u.Z,{component:"span",className:x.root},t.createElement(u.Z,{className:x.label},s),O?t.createElement(i,{to:O},ee):ee))}const Al=a=>(0,X.Z)({root:{color:a.palette.common.white,padding:a.spacing(2,2,3),backgroundImage:a.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),wl=(0,f.Z)(Al,{name:"BackstageItemCardHeader"});function Us(a){const{title:s,subtitle:v,children:O}=a,x=wl(a);return t.createElement(he.Z,{className:x.root},v&&t.createElement(u.Z,{variant:"subtitle2",component:"h3"},v),s&&t.createElement(u.Z,{variant:"h6",component:"h4"},s),O)}function hc(a){const{description:s,tags:v,title:O,type:x,subtitle:ee,label:me,onClick:Ze,href:qe}=a;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Us,{title:O,subtitle:ee||x})),React.createElement(CardContent,null,v!=null&&v.length?React.createElement(Box,null,v.map((Ge,$t)=>React.createElement(Chip,{size:"small",label:Ge,key:$t}))):null,s),React.createElement(CardActions,null,!qe&&React.createElement(I,{to:"#",onClick:Ze,color:"primary"},me),qe&&React.createElement(I,{to:qe,color:"primary"},me)))}const Tl=a=>(0,X.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:a.spacing(2)}}),Il=(0,f.Z)(Tl,{name:"BackstageItemCardGrid"});function Dl(a){const{children:s,...v}=a,O=Il(v);return t.createElement(he.Z,{className:O.root,...v},s)}const Ml=(0,f.Z)(a=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[a.breakpoints.down("xs")]:{height:"100%"}}}),{name:"BackstagePage"});function oo(a){const{themeId:s,children:v}=a,O=Ml();return t.createElement(D.Z,{theme:x=>({...x,page:x.getPageTheme({themeId:s})})},t.createElement("main",{className:O.root},v))}function Ll(a){const{themeId:s,children:v,...O}=a;return t.createElement(oo,{themeId:s},t.createElement(ro,{...O}),v)}const $l=Ce.z.object({providerInfo:Ce.z.object({}).catchall(Ce.z.unknown()).optional(),profile:Ce.z.object({email:Ce.z.string().optional(),displayName:Ce.z.string().optional(),picture:Ce.z.string().optional()}),backstageIdentity:Ce.z.object({token:Ce.z.string(),identity:Ce.z.object({type:Ce.z.literal("user"),userEntityRef:Ce.z.string(),ownershipEntityRefs:Ce.z.array(Ce.z.string())})})}),ks={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function xl(a){const s=new Date(Date.now()+ks.defaultTokenExpiryMillis);if(!a)return s;const[v,O,x]=a.split("."),ee=JSON.parse(window.atob(O));return typeof ee.exp!="number"?s:new Date(ee.exp*1e3-ks.tokenExpiryMarginMillis)}class Bl{constructor(s){this.options=s,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:s}=this.getSessionSync(),v=s.identity.userEntityRef,O=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(v);if(!O)throw new TypeError(`Invalid user entity reference "${v}"`);return O[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const s=this.state.type==="active"?this.state.session:void 0,v=this.fetchSession().then(O=>(this.state={type:"active",session:O,expiresAt:xl(O.backstageIdentity.token)},O),O=>{throw this.state={type:"failed",error:O},O});return this.state={type:"fetching",promise:v,previous:s},v}async fetchSession(){const s=await this.options.discoveryApi.getBaseUrl("auth"),v=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,O=new Headers(v);O.set("X-Requested-With","XMLHttpRequest");const x=await fetch(`${s}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:O,credentials:"include"});if(!x.ok)throw await ResponseError.fromResponse(x);return $l.parse(await x.json())}}const gc=a=>{const s=useApi(discoveryApiRef),[{status:v,error:O},{execute:x}]=useAsync(async()=>{const ee=new Bl({provider:a.provider,discoveryApi:s,headers:a.headers});await ee.start(),a.onSignInSuccess(ee)});return useMountEffect(x),v==="loading"?React.createElement(Nr,null):O?React.createElement(Xt,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:O}):null};class Bo{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const s="user:default/guest";return{type:"user",userEntityRef:s,ownershipEntityRefs:[s]}}async getCredentials(){return{}}async signOut(){}}function Ul(a){const[s,v,O]=a.split(".");return JSON.parse(window.atob(v))}class Uo{constructor(s){this.result=s}getUserId(){return this.result.userId}static fromResult(s){return new Uo(s)}async getIdToken(){var s,v;return(v=(s=this.result).getIdToken)==null?void 0:v.call(s)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const s=await this.getIdToken();if(!s){const x=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:x,ownershipEntityRefs:[x]}}const{sub:v,ent:O}=Ul(s);return{type:"user",userEntityRef:v,ownershipEntityRefs:O!=null?O:[]}}async getCredentials(){var s,v;return{token:await((v=(s=this.result).getIdToken)==null?void 0:v.call(s))}}async signOut(){var s,v;return(v=(s=this.result).signOut)==null?void 0:v.call(s)}}class Wr{constructor(s,v,O){this.identity=s,this.authApi=v,this.profile=O}static createGuest(){return new Bo}static fromLegacy(s){return Uo.fromResult(s)}static create(s){return new Wr(s.identity,s.authApi,s.profile)}getUserId(){const s=this.identity.userEntityRef,v=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(s);if(!v)throw new TypeError(`Invalid user entity reference "${s}"`);return v[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(s){throw this.profilePromise=void 0,s}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const ko=(0,f.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),so=({children:a})=>{const s=ko();return t.createElement(o.Z,{component:"li",item:!0,classes:s},a)},kl={Component:({config:a,onSignInSuccess:s})=>{const{apiRef:v,title:O,message:x}=a,ee=(0,n.h_)(v),me=(0,n.h_)(n.VE),Ze=async()=>{try{const qe=await ee.getBackstageIdentity({instantPopup:!0});if(!qe)throw new Error(`The ${O} provider is not configured to support sign-in`);const Ge=await ee.getProfile();s(Wr.create({identity:qe.identity,profile:Ge,authApi:ee}))}catch(qe){me.post(new at.SP("Login failed",qe))}};return t.createElement(so,null,t.createElement(Br,{variant:"fullHeight",title:O,actions:t.createElement(N.Z,{color:"primary",variant:"outlined",onClick:Ze},"Sign In")},t.createElement(u.Z,{variant:"body1"},x)))},loader:async(a,s)=>{const v=a.get(s),O=await v.getBackstageIdentity({optional:!0});if(!O)return;const x=await v.getProfile();return Wr.create({identity:O.identity,profile:x,authApi:v})}},Zl={Component:({onSignInSuccess:a})=>t.createElement(so,null,t.createElement(Br,{title:"Guest",variant:"fullHeight",actions:t.createElement(N.Z,{color:"primary",variant:"outlined",onClick:()=>a(new Bo)},"Enter")},t.createElement(u.Z,{variant:"body1"},"Enter as a Guest User.",t.createElement("br",null),"You will not have a verified identity,",t.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Bo},Nl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Wl=(0,f.Z)(a=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:a.spacing(2)}}),{name:"BackstageCustomProvider"}),Zs=a=>{const{ref:s,...v}=a;return{inputRef:s,...v}},Fl={Component:({onSignInSuccess:a})=>{const s=Wl(),{register:v,handleSubmit:O,formState:x}=(0,Le.cI)({mode:"onChange"}),{errors:ee}=x,me=({userId:Ze,idToken:qe})=>{a(Wr.fromLegacy({userId:Ze,getIdToken:qe!==void 0?async()=>qe:void 0,profile:{email:`${Ze}@example.com`}}))};return t.createElement(so,null,t.createElement(Br,{title:"Custom User",variant:"fullHeight"},t.createElement(u.Z,{variant:"body1"},"Enter your own User ID and credentials.",t.createElement("br",null),"This selection will not be stored."),t.createElement("form",{className:s.form,onSubmit:O(me)},t.createElement(oe.Z,null,t.createElement(q.Z,{...Zs(v("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(ee.userId)}),ee.userId&&t.createElement(wt.Z,{error:!0},ee.userId.message)),t.createElement(oe.Z,null,t.createElement(q.Z,{...Zs(v("idToken",{required:!1,validate:Ze=>!Ze||Nl.test(Ze)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(ee.idToken)}),ee.idToken&&t.createElement(wt.Z,{error:!0},ee.idToken.message)),t.createElement(N.Z,{type:"submit",color:"primary",variant:"outlined",className:s.button,disabled:!(x!=null&&x.isDirty)||!kt()(ee)},"Continue"))))},loader:async()=>{}};class Zo{constructor(s){this.config=s}static from(s){return new Zo(s)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const io="@backstage/core:SignInPage:provider",Ns={guest:Zl,custom:Fl,common:kl};function Ws(a,s){if(a in s)throw new Error(`"${a}" ID is duplicated. IDs of identity providers have to be unique.`)}function Kl(a){return a.reduce((v,O)=>{if(typeof O=="string")return Ws(O,v),v[O]={components:Ns[O],id:O},v;const{id:x}=O;return Ws(x,v),v[x]={components:Ns.common,id:x,config:O},v},{})}const zl=(a,s)=>{const v=useApi(errorApiRef),O=useApiHolder(),[x,ee]=useState(!0),me=useCallback(qe=>{s(Zo.from({identityApi:qe,signOut:async()=>{var Ge;localStorage.removeItem(io),await((Ge=qe.signOut)==null?void 0:Ge.call(qe))}}))},[s]);useLayoutEffect(()=>{var qe;if(!x)return;const Ge=localStorage.getItem(io);if(Ge===null){ee(!1);return}const $t=a[Ge];if(!$t){ee(!1);return}let _t=!1;return $t.components.loader(O,(qe=$t.config)==null?void 0:qe.apiRef).then(zt=>{_t||(zt?me(zt):ee(!1))}).catch(zt=>{_t||(localStorage.removeItem(io),v.post(zt),ee(!1))}),()=>{_t=!0}},[x,v,s,O,a,me]);const Ze=useMemo(()=>Object.keys(a).map(qe=>{const Ge=a[qe],{Component:$t}=Ge.components,_t=zt=>{localStorage.setItem(io,Ge.id),me(zt)};return React.createElement($t,{key:Ge.id,config:Ge.config,onSignInSuccess:_t})}),[a,me]);return[x,Ze]},jl=({onSignInSuccess:a,providers:s=[],title:v,align:O="left"})=>{const x=useApi(configApiRef),ee=ko(),me=Kl(s),[Ze,qe]=zl(me,a);return Ze?React.createElement(Nr,null):React.createElement(oo,{themeId:"home"},React.createElement(ro,{title:x.getString("app.title")}),React.createElement(ao,null,v&&React.createElement(xs,{title:v,textAlign:O}),React.createElement(Grid,{container:!0,justifyContent:O==="center"?O:"flex-start",spacing:2,component:"ul",classes:ee},qe)))},Vl=({provider:a,auto:s,onSignInSuccess:v})=>{const O=ko(),x=useApi(a.apiRef),ee=useApi(configApiRef),[me,Ze]=useState(),[qe,Ge]=useState(!1),$t=async({checkExisting:_t,showPopup:zt})=>{try{let Qt;if(_t&&(Qt=await x.getBackstageIdentity({optional:!0})),!Qt&&(zt||s)&&(Ge(!0),Qt=await x.getBackstageIdentity({instantPopup:!0}),!Qt))throw new Error(`The ${a.title} provider is not configured to support sign-in`);if(!Qt){Ge(!0);return}const Sn=await x.getProfile();v(Wr.create({identity:Qt.identity,authApi:x,profile:Sn}))}catch(Qt){Ze(Qt),Ge(!0)}};return useMountEffect(()=>$t({checkExisting:!0})),qe?React.createElement(oo,{themeId:"home"},React.createElement(ro,{title:ee.getString("app.title")}),React.createElement(ao,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:O},React.createElement(so,null,React.createElement(Br,{variant:"fullHeight",title:a.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{$t({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},a.message),me&&me.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},me.message)))))):React.createElement(Nr,null)};function Pc(a){return"provider"in a?React.createElement(Vl,{...a}):React.createElement(jl,{...a})}const Gl=(0,f.Z)(a=>({root:{padding:a.spacing(0,2,0,2.5),minHeight:a.spacing(3)},indicator:{backgroundColor:a.palette.info.main,height:a.spacing(.3)}}),{name:"BackstageTabbedCard"}),Hl=(0,k.Z)(a=>({root:{padding:a.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:a.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(rn.Z);function Jl(a){const{slackChannel:s,errorBoundaryProps:v,children:O,title:x,deepLink:ee,value:me,onChange:Ze}=a,qe=Gl(),[Ge,$t]=(0,t.useState)(0),_t=Ze||((Sn,An)=>$t(An));let zt;me?t.Children.map(O,Sn=>{var An;t.isValidElement(Sn)&&(Sn==null?void 0:Sn.props.value)===me&&(zt=(An=Sn==null?void 0:Sn.props)==null?void 0:An.children)}):t.Children.map(O,(Sn,An)=>{t.isValidElement(Sn)&&An===Ge&&(zt=Sn==null?void 0:Sn.props.children)});const Qt=v||(s?{slackChannel:s}:{});return t.createElement(tt.Z,null,t.createElement(fr,{...Qt},x&&t.createElement(Hl,{title:x}),t.createElement(Bn.Z,{selectionFollowsFocus:!0,classes:qe,value:me||Ge,onChange:_t},O),t.createElement(it.Z,null),t.createElement(bt.Z,null,zt),ee&&t.createElement(Xr,{...ee})))}const Yl=(0,f.Z)(a=>({root:{minWidth:a.spacing(6),minHeight:a.spacing(3),margin:a.spacing(0,2,0,0),padding:a.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:a.palette.text.primary}},selected:{fontWeight:a.typography.fontWeightBold}}),{name:"BackstageCardTab"});function Xl(a){const{children:s,...v}=a,O=Yl();return t.createElement(hn.Z,{disableRipple:!0,classes:O,...v})}},30705:function(Kt,d,e){e.d(d,{$4:function(){return Ct},$v:function(){return S},CL:function(){return Ut},CO:function(){return dn},D:function(){return A},Ds:function(){return he},E6:function(){return fn},F4:function(){return X},IY:function(){return ge},I_:function(){return C},Km:function(){return b},Kp:function(){return k},NT:function(){return mt},NW:function(){return Fe},Oi:function(){return de},P4:function(){return mn},R5:function(){return W},Rz:function(){return xe},T0:function(){return f},VE:function(){return ct},W0:function(){return dt},YO:function(){return Ln},ZM:function(){return G},bq:function(){return h},fC:function(){return l},gP:function(){return Wt},gW:function(){return p},h_:function(){return _},hg:function(){return pe},ni:function(){return F},p_:function(){return N},qD:function(){return Ue},rx:function(){return Pe},sM:function(){return B},tg:function(){return Vt},uB:function(){return E},ux:function(){return D},vJ:function(){return Zt},v_:function(){return K},x8:function(){return vt},z$:function(){return P}});var n=e(18473),c=e(2784),m=e(73557);const u=(0,n.CT)("analytics-context"),r=()=>{const T=(0,c.useContext)(u);if(T===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const M=T.atVersion(1);if(M===void 0)throw new Error("No context found for version 1.");return M},l=T=>{const{attributes:M,children:J}=T,re={...r(),...M},Ae=(0,n.EI)({1:re});return c.createElement(u.Provider,{value:Ae},J)};function C(){const T=(0,n.Vt)("api-context");if(!T)throw new Error("API context is not available");const M=T.atVersion(1);if(!M)throw new Error("ApiContext v1 not available");return M}function _(T){const J=C().get(T);if(!J)throw new Error(`No implementation available for ${T}`);return J}function t(T){return function(J){const ne=Ae=>{const Ie=C(),Ve={};for(const at in T)if(T.hasOwnProperty(at)){const Se=T[at],te=Ie.get(Se);if(!te)throw new Error(`No implementation available for ${Se}`);Ve[at]=te}return React.createElement(J,{...Ae,...Ve})},re=J.displayName||J.name||"Component";return ne.displayName=`withApis(${re})`,ne}}class y{constructor(M){if(this.config=M,!M.id.split(".").flatMap(ne=>ne.split("-")).every(ne=>ne.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${M.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function f(T){return new y(T)}function F(T,M){return"id"in T?{api:T,deps:{},factory:()=>M}:T}var B=(T=>(T.SignedIn="SignedIn",T.SignedOut="SignedOut",T))(B||{});const k=f({id:"core.auth.google"}),X=f({id:"core.auth.github"}),A=f({id:"core.auth.okta"}),D=f({id:"core.auth.gitlab"}),N=f({id:"core.auth.microsoft"}),p=f({id:"core.auth.onelogin"}),h=f({id:"core.auth.bitbucket"}),b=f({id:"core.auth.bitbucket-server"}),E=f({id:"core.auth.atlassian"}),S=f({id:"core.alert"}),K=f({id:"core.analytics"}),pe=f({id:"core.apptheme"}),he=f({id:"core.config"}),Fe=f({id:"core.discovery"}),ct=f({id:"core.error"});var Ut=(T=>(T[T.None=0]="None",T[T.Active=1]="Active",T))(Ut||{});const dt=f({id:"core.featureflags"}),Wt=f({id:"core.fetch"}),Ct=f({id:"core.identity"}),G=f({id:"core.oauthrequest"}),fn=f({id:"core.storage"});class Et{constructor(M,J={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=M,this.context=J}setContext(M){this.context=M}captureEvent(M,J,{value:ne,attributes:re}={}){try{this.analyticsApi.captureEvent({action:M,subject:J,value:ne,attributes:re,context:this.context})}catch(Ae){console.warn("Error during analytics event capture. %o",Ae)}}}function je(){try{return _(K)}catch{return{captureEvent:()=>{}}}}function P(){const T=(0,c.useRef)(null),M=r(),J=je();function ne(){return T.current===null&&(T.current=new Et(J)),T.current}const re=ne();return re.setContext(M),re}const Ue=()=>{const T=(0,n.Vt)("app-context");if(!T)throw new Error("App context is not available");const M=T.atVersion(1);if(!M)throw new Error("AppContext v1 not available");return M},H=(0,n.uW)("component-data-store",()=>new WeakMap),R="__backstage_data";function W(T,M,J){var ne;const re=T;let Ae=(ne=re[R])!=null?ne:H.get(T);if(Ae||(Ae={map:new Map},Object.defineProperty(re,R,{enumerable:!1,configurable:!0,writable:!1,value:Ae}),H.set(T,Ae)),Ae.map.has(M)){const Ie=T.displayName||T.name;throw new Error(`Attempted to attach duplicate data "${M}" to component "${Ie}"`)}Ae.map.set(M,J)}function ge(T,M){var J;if(!T)return;const ne=T.type;if(!ne)return;const re=(J=ne[R])!=null?J:H.get(ne);if(re)return re.map.get(M)}const Me=(0,n.uW)("route-ref-type",()=>Symbol("route-ref-type"));var et;class pt{constructor(M,J){this.id=M,this.params=J,this[et]="absolute"}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}et=Me;function mt(T){var M;return new pt(T.id,(M=T.params)!=null?M:[])}var Dt;const ie=/^\w+$/;class o{constructor(M,J,ne,re){this.id=M,this.path=J,this.parent=ne,this.params=re,this[Dt]="sub"}toString(){return`routeRef{type=sub,id=${this.id}}`}}Dt=Me;function xe(T){const{id:M,path:J,parent:ne}=T,re=J.split("/").filter(Ve=>Ve.startsWith(":")).map(Ve=>Ve.substring(1)),Ae=[...ne.params,...re];if(ne.params.some(Ve=>re.includes(Ve)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!J.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${J}'`);if(J.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${J}'`);for(const Ve of re)if(!ie.test(Ve))throw new Error(`SubRouteRef path has invalid param, got '${Ve}'`);return new o(M,J,ne,Ae)}var be;class Rt{constructor(M,J,ne){this.id=M,this.params=J,this.optional=ne,this[be]="external"}toString(){return`routeRef{type=external,id=${this.id}}`}}be=Me;function vt(T){var M;return new Rt(T.id,(M=T.params)!=null?M:[],Boolean(T.optional))}function Vt(T){const{pathname:M}=(0,m.TH)(),J=(0,n.Vt)("routing-context");if(!J)throw new Error("Routing context is not available");const ne=J.atVersion(1),re=(0,c.useMemo)(()=>ne&&ne.resolve(T,{pathname:M}),[ne,T,M]);if(!J)throw new Error("useRouteRef used outside of routing context");if(!ne)throw new Error("RoutingContext v1 not available");const Ae="optional"in T&&T.optional;if(!re&&!Ae)throw new Error(`No path for ${T}`);return re}function de(T){return(0,m.UO)()}class Tt extends c.Component{constructor(){super(...arguments),this.state={error:void 0},this.handleErrorReset=()=>{this.setState({error:void 0})}}static getDerivedStateFromError(M){return{error:M}}render(){const{error:M}=this.state,{app:J,plugin:ne}=this.props,{ErrorBoundaryFallback:re}=J.getComponents();return M?c.createElement(re,{error:M,resetError:this.handleErrorReset,plugin:ne}):this.props.children}}const xt="plugin-context",ln=T=>{const{children:M,plugin:J}=T,{Provider:ne}=(0,n.CT)(xt);return c.createElement(ne,{value:(0,n.EI)({1:{plugin:J}})},M)};function mn(T){const{component:M,mountPoint:J,name:ne}=T;return Ln({component:{lazy:()=>M().then(re=>{const Ae=Ve=>{try{Vt(J)}catch(at){if(typeof at=="object"&&at!==null){const{message:Se}=at;if(typeof Se=="string"&&Se.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${J} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw at}return c.createElement(re,{...Ve})},Ie=ne||re.displayName||re.name||"LazyComponent";return Ae.displayName=`RoutableExtension(${Ie})`,Ae},re=>Ie=>{const Ve=Ue(),{BootErrorPage:at}=Ve.getComponents();return c.createElement(at,{step:"load-chunk",error:re})})},data:{"core.mountPoint":J},name:ne})}function dn(T){const{component:M,name:J}=T;return Ln({component:M,name:J})}function Ln(T){const{data:M={},name:J}=T;J||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let ne;if("lazy"in T.component){const Ae=T.component.lazy;ne=(0,c.lazy)(()=>Ae().then(Ie=>({default:Ie})))}else ne=T.component.sync;const re=J||ne.displayName||ne.name||"Component";return{expose(Ae){const Ie=Ve=>{const at=Ue(),{Progress:Se}=at.getComponents(),te=M==null?void 0:M["core.mountPoint"];return c.createElement(c.Suspense,{fallback:c.createElement(Se,null)},c.createElement(Tt,{app:at,plugin:Ae},c.createElement(l,{attributes:{pluginId:Ae.getId(),...J&&{extension:J},...te&&{routeRef:te.id}}},c.createElement(ln,{plugin:Ae},c.createElement(ne,{...Ve})))))};W(Ie,"core.plugin",Ae);for(const[Ve,at]of Object.entries(M))W(Ie,Ve,at);return Ie.displayName=`Extension(${re})`,Ie}}}function it(T,M,J,ne){return c.Children.toArray(T).flatMap(re=>{if(!(0,c.isValidElement)(re))return[];if(re.type===c.Fragment)return it(re.props.children,M,J,ne);if(ge(re,"core.featureFlagged")){const Ae=re.props;return("with"in Ae?M.isActive(Ae.with):!M.isActive(Ae.without))?it(re.props.children,M,J,ne):[]}if(J===void 0||J(re))return[re];if(ne)throw new Error(ne);return it(re.props.children,M,J,ne)})}class $e{constructor(M,J){this.node=M,this.featureFlagsApi=J}selectByComponentData(M){const J=it(this.node,this.featureFlagsApi,ne=>ge(ne,M.key)!==void 0,M.withStrictError);return new $e(J,this.featureFlagsApi)}findComponentData(M){return it(this.node,this.featureFlagsApi,ne=>ge(ne,M.key)!==void 0).map(ne=>ge(ne,M.key)).filter(ne=>ne!==void 0)}getElements(){return it(this.node,this.featureFlagsApi)}}function Zt(T,M,J=[]){const ne=_(dt),re=new $e(T,ne);return(0,c.useMemo)(()=>M(re),[T,...J])}class Je{constructor(M){this.config=M,this.options=void 0}getId(){return this.config.id}getApis(){var M;return(M=this.config.apis)!=null?M:[]}getFeatureFlags(){var M,J;return(J=(M=this.config.featureFlags)==null?void 0:M.slice())!=null?J:[]}get routes(){var M;return(M=this.config.routes)!=null?M:{}}get externalRoutes(){var M;return(M=this.config.externalRoutes)!=null?M:{}}provide(M){return M.expose(this)}__experimentalReconfigure(M){this.config.__experimentalConfigure&&(this.options=this.config.__experimentalConfigure(M))}getPluginOptions(){var M;return this.config.__experimentalConfigure&&!this.options&&(this.options=this.config.__experimentalConfigure()),(M=this.options)!=null?M:{}}toString(){return`plugin{${this.config.id}}`}}function Pe(T){return new Je(T)}},32272:function(Kt,d,e){e.d(d,{BD:function(){return u},SP:function(){return A},VL:function(){return N},VZ:function(){return m},dR:function(){return F}});var n=e(24852),c=e.n(n);function m(p){if(typeof p!="object"||p===null||Array.isArray(p))return!1;const h=p;return!(typeof h.name!="string"||h.name===""||typeof h.message!="string")}function u(p){if(typeof p!="object"||p===null||Array.isArray(p))throw new Error(`Encountered invalid error, not an object, got '${p}'`);const h=p;if(typeof h.name!="string"||h.name==="")throw new Error(`Encountered error object without a name, got '${p}'`);if(typeof h.message!="string")throw new Error(`Encountered error object without a message, got '${p}'`)}function r(p,h){const E={name:"Unknown",message:"<no reason given>",...serializeError$1(p)};return h!=null&&h.includeStack||delete E.stack,E}function l(p){const h=(0,n.deserializeError)(p);return p.stack||(h.stack=void 0),h}function C(p){if(m(p)){const h=String(p);return h!=="[object Object]"?h:`${p.name}: ${p.message}`}return`unknown error '${p}'`}class _ extends Error{constructor(h,b){var E;let S=h;if(b!==void 0){const K=C(b);S?S+=`; caused by ${K}`:S=`caused by ${K}`}super(S),(E=Error.captureStackTrace)==null||E.call(Error,this,this.constructor),this.name=this.constructor.name,this.cause=m(b)?b:void 0}}class t extends null{}class y extends null{}class f extends null{}class F extends _{}class B extends null{}class k extends null{}class X extends null{}class A extends _{constructor(h,b){super(h,b),this.name=m(b)?b.name:"Error"}}async function D(p){var h;try{const b=await p.text();if(b){if((h=p.headers.get("content-type"))!=null&&h.startsWith("application/json"))try{const E=JSON.parse(b);if(E.error&&E.response)return E}catch{}return{error:{name:"Error",message:`Request failed with status ${p.status} ${p.statusText}, ${b}`},response:{statusCode:p.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${p.status} ${p.statusText}`},response:{statusCode:p.status}}}class N extends Error{constructor(h){super(h.message),this.name="ResponseError",this.response=h.response,this.body=h.data,this.cause=h.cause}static async fromResponse(h){const b=await D(h),E=b.response.statusCode||h.status,S=b.error.name||h.statusText,K=`Request failed with ${E} ${S}`,pe=l(b.error);return new N({message:K,response:h,data:b,cause:pe})}}},49462:function(Kt,d,e){e.d(d,{Om:function(){return r},ae:function(){return N},nW:function(){return h},q3:function(){return p},zN:function(){return D}});var n=e(30705),c=e(1854),m=e(73250),u=e(2784);const r=(0,n.T0)({id:"core.scmauth"});var l=(b,E,S)=>{if(!E.has(b))throw TypeError("Cannot "+S)},C=(b,E,S)=>(l(b,E,"read from private field"),S?S.call(b):E.get(b)),_=(b,E,S)=>{if(E.has(b))throw TypeError("Cannot add the same private member more than once");E instanceof WeakSet?E.add(b):E.set(b,S)},t=(b,E,S,K)=>(l(b,E,"write to private field"),K?K.call(b,S):E.set(b,S),S),y,f,F,B,k;class X{constructor(E){_(this,y,void 0),t(this,y,E)}async getCredentials(E){const S=new URL(E.url),K=C(this,y).find(pe=>pe.isUrlSupported(S));if(!K)throw new Error(`No auth provider available for '${E.url}', see https://backstage.io/link?scm-auth`);return K.getCredentials(E)}}y=new WeakMap;const A=class{constructor(b,E,S,K){_(this,f,void 0),_(this,F,void 0),_(this,B,void 0),_(this,k,void 0),t(this,f,E),t(this,F,S),t(this,B,K),t(this,k,b)}static createDefaultApiFactory(){return(0,n.ni)({api:r,deps:{github:n.F4,gitlab:n.ux,azure:n.p_,bitbucket:n.bq},factory:({github:b,gitlab:E,azure:S,bitbucket:K})=>A.merge(A.forGithub(b),A.forGitlab(E),A.forAzure(S),A.forBitbucket(K))})}static forAuthApi(b,E){return new A("generic",b,E.host,E.scopeMapping)}static forGithub(b,E){var S;const K=(S=E==null?void 0:E.host)!=null?S:"github.com";return new A("github",b,K,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(b,E){var S;const K=(S=E==null?void 0:E.host)!=null?S:"gitlab.com";return new A("gitlab",b,K,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(b,E){var S;const K=(S=E==null?void 0:E.host)!=null?S:"dev.azure.com";return new A("azure",b,K,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(b,E){var S;const K=(S=E==null?void 0:E.host)!=null?S:"bitbucket.org";return new A("bitbucket",b,K,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(...b){return new X(b)}isUrlSupported(b){return b.host===C(this,F)}getAdditionalScopesForProvider(b){var E,S;return!(b!=null&&b.customScopes)||C(this,k)==="generic"?[]:(S=(E=b.customScopes)==null?void 0:E[C(this,k)])!=null?S:[]}async getCredentials(b){const{url:E,additionalScope:S,...K}=b,pe=C(this,B).default.slice();S!=null&&S.repoWrite&&pe.push(...C(this,B).repoWrite);const he=this.getAdditionalScopesForProvider(S);he.length&&pe.push(...he);const Fe=[...new Set(pe)],ct=await C(this,f).getAccessToken(Fe,K);return{token:ct,headers:{Authorization:`Bearer ${ct}`}}}};let D=A;f=new WeakMap,F=new WeakMap,B=new WeakMap,k=new WeakMap;class N{static fromConfig(E){return c.Lx.fromConfig(E)}}const p=(0,n.T0)({id:"integration.scmintegrations"}),h=b=>{var E;const{type:S}=b,K=(0,n.qD)(),pe=m.Z,he=S&&(E=K.getSystemIcon(S))!=null?E:pe;return u.createElement(he,null)}},1854:function(Kt,d,e){e.d(d,{BT:function(){return Jn},Lx:function(){return Ja},MY:function(){return Ft},ah:function(){return Qa}});var n=e(82717),c=e.n(n),m=e(76635),u=e.n(m),r=e(96279),l=e.n(r),C=e(54733),_=e(89393),t=e(26228),y=e(48834).Buffer;function f(L){const Z=new URL("http://example.com");return Z.host=L,Z.host===L}function F(L){try{return new URL(L),!0}catch{return!1}}function B(L,Z){return{list(){return L},byUrl(q){try{const _e=typeof q=="string"?new URL(q):q;return L.find(U=>Z(U)===_e.host)}catch{return}},byHost(q){return L.find(_e=>Z(_e)===q)}}}function k(L){const{url:Z,base:q,lineNumber:_e}=L;try{return new URL(Z),Z}catch{}let U;if(Z.startsWith("/")){const{filepath:se}=c()(q);U=new URL(q);const Ce=(0,m.trimEnd)(U.pathname.substring(0,U.pathname.length-se.length),"/");U.pathname=`${Ce}${Z}`}else U=new URL(Z,q);return U.search=new URL(q).search,_e&&(U.hash=`L${_e}`),U.toString()}const X="amazonaws.com";function A(L){var Z;const q=L.getOptionalString("endpoint"),_e=(Z=L.getOptionalBoolean("s3ForcePathStyle"))!=null?Z:!1;let U,se;if(q){try{const kt=new URL(q);U=kt.host,se=kt.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${q}' is not a valid URL`)}if(se!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${q}'`)}else U=X;const Ce=L.getOptionalString("accessKeyId"),Le=L.getOptionalString("secretAccessKey"),wt=L.getOptionalString("roleArn"),It=L.getOptionalString("externalId");return{host:U,endpoint:q,s3ForcePathStyle:_e,accessKeyId:Ce,secretAccessKey:Le,roleArn:wt,externalId:It}}function D(L){const Z=L.map(A);return Z.some(q=>q.host===X)||Z.push({host:X}),Z}const N=class{constructor(L){this.integrationConfig=L}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){return k(L)}resolveEditUrl(L){return L}};let p=N;p.factory=({config:L})=>{var Z;const q=D((Z=L.getOptionalConfigArray("integrations.awsS3"))!=null?Z:[]);return B(q.map(_e=>new N(_e)),_e=>_e.config.host)};var h=(L,Z,q)=>{if(!Z.has(L))throw TypeError("Cannot "+q)},b=(L,Z,q)=>(h(L,Z,"read from private field"),q?q.call(L):Z.get(L)),E=(L,Z,q)=>{if(Z.has(L))throw TypeError("Cannot add the same private member more than once");Z instanceof WeakSet?Z.add(L):Z.set(L,q)},S=(L,Z,q,_e)=>(h(L,Z,"write to private field"),_e?_e.call(L,q):Z.set(L,q),q),K,pe,he,Fe,ct,Ut,dt;const Wt="GB",Ct=class{constructor(L,Z,q,_e,U,se){E(this,K,void 0),E(this,pe,void 0),E(this,he,void 0),E(this,Fe,void 0),E(this,ct,void 0),E(this,Ut,void 0),E(this,dt,(...Ce)=>{const Le=new URL(b(this,K));return Le.pathname=Ce.map(wt=>encodeURIComponent(wt)).join("/"),Le}),S(this,K,L),S(this,pe,Z),S(this,he,q),S(this,Fe,_e),S(this,ct,U),S(this,Ut,se)}static fromRepoUrl(L){var Z;const q=new URL(L);let _e,U,se;const Ce=q.pathname.split("/").map(kt=>decodeURIComponent(kt));if(Ce[2]==="_git"?(_e=Ce[1],U=se=Ce[3]):Ce[3]==="_git"?(_e=Ce[1],U=Ce[2],se=Ce[4]):Ce[4]==="_git"&&(_e=`${Ce[1]}/${Ce[2]}`,U=Ce[3],se=Ce[5]),!_e||!U||!se)throw new Error("Azure URL must point to a git repository");const Le=(Z=q.searchParams.get("path"))!=null?Z:void 0;let wt;const It=q.searchParams.get("version");if(It){if(It.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");wt=It.slice(2)}return new Ct(q.origin,_e,U,se,Le,wt)}toRepoUrl(){let L;return b(this,he)===b(this,Fe)?L=b(this,dt).call(this,b(this,pe),"_git",b(this,Fe)):L=b(this,dt).call(this,b(this,pe),b(this,he),"_git",b(this,Fe)),b(this,ct)&&L.searchParams.set("path",b(this,ct)),b(this,Ut)&&L.searchParams.set("version",Wt+b(this,Ut)),L.toString()}toFileUrl(){if(!b(this,ct))throw new Error("Azure URL must point to a specific path to be able to download a file");const L=b(this,dt).call(this,b(this,pe),b(this,he),"_apis","git","repositories",b(this,Fe),"items");return L.searchParams.set("api-version","6.0"),L.searchParams.set("path",b(this,ct)),b(this,Ut)&&L.searchParams.set("version",b(this,Ut)),L.toString()}toArchiveUrl(){const L=b(this,dt).call(this,b(this,pe),b(this,he),"_apis","git","repositories",b(this,Fe),"items");return L.searchParams.set("recursionLevel","full"),L.searchParams.set("download","true"),L.searchParams.set("api-version","6.0"),b(this,ct)&&L.searchParams.set("scopePath",b(this,ct)),b(this,Ut)&&L.searchParams.set("version",b(this,Ut)),L.toString()}toCommitsUrl(){const L=b(this,dt).call(this,b(this,pe),b(this,he),"_apis","git","repositories",b(this,Fe),"commits");return L.searchParams.set("api-version","6.0"),b(this,Ut)&&L.searchParams.set("searchCriteria.itemVersion.version",b(this,Ut)),L.toString()}getOwner(){return b(this,pe)}getProject(){return b(this,he)}getRepo(){return b(this,Fe)}getPath(){return b(this,ct)}getRef(){return b(this,Ut)}};let G=Ct;K=new WeakMap,pe=new WeakMap,he=new WeakMap,Fe=new WeakMap,ct=new WeakMap,Ut=new WeakMap,dt=new WeakMap;const fn="dev.azure.com";function Et(L){var Z;const q=(Z=L.getOptionalString("host"))!=null?Z:fn,_e=L.getOptionalString("token");if(!f(q))throw new Error(`Invalid Azure integration config, '${q}' is not a valid host`);return{host:q,token:_e}}function je(L){const Z=L.map(Et);return Z.some(q=>q.host===fn)||Z.push({host:fn}),Z}const P=class{constructor(L){this.integrationConfig=L}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){var Z;const{url:q,base:_e}=L;if(F(q))return q;try{const U=G.fromRepoUrl(_e),se=new URL(_e),Ce=new URL(`https://a.com${(Z=U.getPath())!=null?Z:""}`),Le=new URL(q,Ce).pathname;return se.searchParams.set("path",Le),L.lineNumber&&(se.searchParams.set("line",String(L.lineNumber)),se.searchParams.set("lineEnd",String(L.lineNumber+1)),se.searchParams.set("lineStartColumn","1"),se.searchParams.set("lineEndColumn","1")),se.toString()}catch{return new URL(q,_e).toString()}}resolveEditUrl(L){return L}};let Ue=P;Ue.factory=({config:L})=>{var Z;const q=je((Z=L.getOptionalConfigArray("integrations.azure"))!=null?Z:[]);return B(q.map(_e=>new P(_e)),_e=>_e.config.host)};function H(L){return G.fromRepoUrl(L).toFileUrl()}function R(L){return G.fromRepoUrl(L).toArchiveUrl()}function W(L){return G.fromRepoUrl(L).toCommitsUrl()}function ge(L,Z){const q=Z?{...Z}:{};if(L.token){const _e=y.from(`:${L.token}`,"utf8");q.Authorization=`Basic ${_e.toString("base64")}`}return{headers:q}}const Me="bitbucket.org",et="https://api.bitbucket.org/2.0";function pt(L){var Z;const q=(Z=L.getOptionalString("host"))!=null?Z:Me;let _e=L.getOptionalString("apiBaseUrl");const U=L.getOptionalString("token"),se=L.getOptionalString("username"),Ce=L.getOptionalString("appPassword");if(!f(q))throw new Error(`Invalid Bitbucket integration config, '${q}' is not a valid host`);return _e?_e=(0,m.trimEnd)(_e,"/"):q===Me?_e=et:_e=`https://${q}/rest/api/1.0`,{host:q,apiBaseUrl:_e,token:U,username:se,appPassword:Ce}}function mt(L){const Z=L.map(pt);return Z.some(q=>q.host===Me)||Z.push({host:Me,apiBaseUrl:et}),Z}const Dt=class{constructor(L){this.integrationConfig=L}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){const Z=k(L);if(!L.lineNumber)return Z;const q=new URL(Z);return this.integrationConfig.host==="bitbucket.org"?q.hash=`lines-${L.lineNumber}`:q.hash=`${L.lineNumber}`,q.toString()}resolveEditUrl(L){const Z=c()(L),q=new URL(L);return q.searchParams.set("mode","edit"),q.searchParams.set("spa","0"),q.searchParams.set("at",Z.ref),q.toString()}};let ie=Dt;ie.factory=({config:L})=>{var Z,q,_e;const U=mt((_e=L.getOptionalConfigArray("integrations.bitbucket"))!=null?_e:[...(Z=L.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?Z:[],...(q=L.getOptionalConfigArray("integrations.bitbucketServer"))!=null?q:[]]);return B(U.map(se=>new Dt(se)),se=>se.config.host)};async function o(L,Z){const{name:q,owner:_e,resource:U}=parseGitUrl(L),se=U==="bitbucket.org";let Ce=se?`${Z.apiBaseUrl}/repositories/${_e}/${q}`:`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/default-branch`,Le=await fetch(Ce,Rt(Z));if(Le.status===404&&!se&&(Ce=`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/branches/default`,Le=await fetch(Ce,Rt(Z))),!Le.ok){const It=`Failed to retrieve default branch from ${Ce}, ${Le.status} ${Le.statusText}`;throw new Error(It)}let wt;if(se)wt=(await Le.json()).mainbranch.name;else{const{displayId:It}=await Le.json();wt=It}if(!wt)throw new Error(`Failed to read default branch from ${Ce}. Response ${Le.status} ${Le.json()}`);return wt}async function xe(L,Z){const{name:q,owner:_e,ref:U,protocol:se,resource:Ce,filepath:Le}=parseGitUrl(L),wt=Ce==="bitbucket.org";let It=U;It||(It=await o(L,Z));const kt=Le?`&path=${encodeURIComponent(decodeURIComponent(Le))}`:"";return wt?`${se}://${Ce}/${_e}/${q}/get/${It}.tar.gz`:`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/archive?format=tgz&at=${It}&prefix=${_e}-${q}${kt}`}function be(L,Z){try{const{owner:q,name:_e,ref:U,filepathtype:se,filepath:Ce}=parseGitUrl(L);if(!q||!_e||se!=="browse"&&se!=="raw"&&se!=="src")throw new Error("Invalid Bitbucket URL or file path");const Le=Ce.replace(/^\//,"");if(Z.host==="bitbucket.org"){if(!U)throw new Error("Invalid Bitbucket URL or file path");return`${Z.apiBaseUrl}/repositories/${q}/${_e}/src/${U}/${Le}`}return`${Z.apiBaseUrl}/projects/${q}/repos/${_e}/raw/${Le}?at=${U}`}catch(q){throw new Error(`Incorrect URL: ${L}, ${q}`)}}function Rt(L){const Z={};if(L.token)Z.Authorization=`Bearer ${L.token}`;else if(L.username&&L.appPassword){const q=y.from(`${L.username}:${L.appPassword}`,"utf8");Z.Authorization=`Basic ${q.toString("base64")}`}return{headers:Z}}const vt="bitbucket.org",Vt="https://api.bitbucket.org/2.0";function de(L){const Z=vt,q=Vt,_e=L.getString("username"),U=L.getString("appPassword");return{host:Z,apiBaseUrl:q,username:_e,appPassword:U}}function Tt(L){const Z=L.map(de);return Z.length===0&&Z.push({host:vt,apiBaseUrl:Vt}),Z}const xt=class{constructor(L){this.integrationConfig=L}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){const Z=k(L);if(L.lineNumber){const q=new URL(Z);return q.hash=`lines-${L.lineNumber}`,q.toString()}return Z}resolveEditUrl(L){const Z=c()(L),q=new URL(L);return q.searchParams.set("mode","edit"),q.searchParams.set("at",Z.ref),q.toString()}};let ln=xt;ln.factory=({config:L})=>{var Z;const q=Tt((Z=L.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?Z:[]);return B(q.map(_e=>new xt(_e)),_e=>_e.config.host)};async function mn(L,Z){const{name:q,owner:_e}=parseGitUrl(L),U=`${Z.apiBaseUrl}/repositories/${_e}/${q}`,se=await fetch(U,it(Z));if(!se.ok){const wt=`Failed to retrieve default branch from ${U}, ${se.status} ${se.statusText}`;throw new Error(wt)}const Le=(await se.json()).mainbranch.name;if(!Le)throw new Error(`Failed to read default branch from ${U}. Response ${se.status} ${se.json()}`);return Le}async function dn(L,Z){const{name:q,owner:_e,ref:U,protocol:se,resource:Ce}=parseGitUrl(L);let Le=U;return Le||(Le=await mn(L,Z)),`${se}://${Ce}/${_e}/${q}/get/${Le}.tar.gz`}function Ln(L,Z){try{const{owner:q,name:_e,ref:U,filepathtype:se,filepath:Ce}=parseGitUrl(L);if(!q||!_e||se!=="src"&&se!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Le=Ce.replace(/^\//,"");if(!U)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${Z.apiBaseUrl}/repositories/${q}/${_e}/src/${U}/${Le}`}catch(q){throw new Error(`Incorrect URL: ${L}, ${q}`)}}function it(L){const Z={};if(L.username&&L.appPassword){const q=y.from(`${L.username}:${L.appPassword}`,"utf8");Z.Authorization=`Basic ${q.toString("base64")}`}return{headers:Z}}function $e(L){const Z=L.getString("host");let q=L.getOptionalString("apiBaseUrl");const _e=L.getOptionalString("token"),U=L.getOptionalString("username"),se=L.getOptionalString("password");if(!f(Z))throw new Error(`Invalid Bitbucket Server integration config, '${Z}' is not a valid host`);return q?q=(0,m.trimEnd)(q,"/"):q=`https://${Z}/rest/api/1.0`,{host:Z,apiBaseUrl:q,token:_e,username:U,password:se}}function Zt(L){return L.map($e)}const Je=class{constructor(L){this.integrationConfig=L}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){const Z=k(L);if(L.lineNumber){const q=new URL(Z);return q.hash=L.lineNumber.toString(),q.toString()}return Z}resolveEditUrl(L){return L.includes("?")?L.substring(0,L.indexOf("?")):L}};let Pe=Je;Pe.factory=({config:L})=>{var Z;const q=Zt((Z=L.getOptionalConfigArray("integrations.bitbucketServer"))!=null?Z:[]);return B(q.map(_e=>new Je(_e)),_e=>_e.config.host)};async function T(L,Z){const{name:q,owner:_e}=parseGitUrl(L);let U=`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/default-branch`,se=await fetch(U,ne(Z));if(se.status===404&&(U=`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/branches/default`,se=await fetch(U,ne(Z))),!se.ok){const wt=`Failed to retrieve default branch from ${U}, ${se.status} ${se.statusText}`;throw new Error(wt)}const{displayId:Ce}=await se.json(),Le=Ce;if(!Le)throw new Error(`Failed to read default branch from ${U}. Response ${se.status} ${se.json()}`);return Le}async function M(L,Z){const{name:q,owner:_e,ref:U,filepath:se}=parseGitUrl(L);let Ce=U;Ce||(Ce=await T(L,Z));const Le=se?`&path=${encodeURIComponent(decodeURIComponent(se))}`:"";return`${Z.apiBaseUrl}/projects/${_e}/repos/${q}/archive?format=tgz&at=${Ce}&prefix=${_e}-${q}${Le}`}function J(L,Z){try{const{owner:q,name:_e,ref:U,filepathtype:se,filepath:Ce}=parseGitUrl(L);if(!q||!_e||se!=="browse"&&se!=="raw"&&se!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Le=Ce.replace(/^\//,"");return`${Z.apiBaseUrl}/projects/${q}/repos/${_e}/raw/${Le}?at=${U}`}catch(q){throw new Error(`Incorrect URL: ${L}, ${q}`)}}function ne(L){const Z={};if(L.token)Z.Authorization=`Bearer ${L.token}`;else if(L.username&&L.password){const q=y.from(`${L.username}:${L.password}`,"utf8");Z.Authorization=`Basic ${q.toString("base64")}`}return{headers:Z}}function re(L){const Z=L.getString("host");let q=L.getOptionalString("baseUrl"),_e=L.getOptionalString("cloneUrl"),U=L.getOptionalString("gitilesBaseUrl");const se=L.getOptionalString("username"),Ce=L.getOptionalString("password");if(f(Z)){if(q&&!F(q))throw new Error(`Invalid Gerrit integration config, '${q}' is not a valid baseUrl`);if(_e&&!F(_e))throw new Error(`Invalid Gerrit integration config, '${_e}' is not a valid cloneUrl`);if(U&&!F(U))throw new Error(`Invalid Gerrit integration config, '${U}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${Z}' is not a valid host`);return q?q=(0,m.trimEnd)(q,"/"):q=`https://${Z}`,U?U=(0,m.trimEnd)(U,"/"):U=`https://${Z}`,_e?_e=(0,m.trimEnd)(_e,"/"):_e=q,{host:Z,baseUrl:q,cloneUrl:_e,gitilesBaseUrl:U,username:se,password:Ce}}function Ae(L){return L.map(re)}const Ie=")]}'";function Ve(L,Z){const _e=Z.replace(L.gitilesBaseUrl,"").split("/").filter(It=>!!It),U=_e.indexOf("+");if(U<=0)throw new Error(`Unable to parse project from url: ${Z}`);const se=(0,m.trimStart)(_e.slice(0,U).join("/"),"/"),Ce=_e.indexOf("heads");if(Ce<=0)throw new Error(`Unable to parse branch from url: ${Z}`);const Le=_e[Ce+1],wt=_e.slice(Ce+2).join("/");return{branch:Le,filePath:wt===""?"/":wt,project:se}}function at(L,Z,q,_e){return`${L.gitilesBaseUrl}/${Z}/+/refs/heads/${q}/${(0,m.trimStart)(_e,"/")}`}function Se(L){return L.password?"/a/":"/"}function te(L,Z){const{branch:q,project:_e}=Ve(L,Z);return`${L.baseUrl}${Se(L)}projects/${encodeURIComponent(_e)}/branches/${q}`}function ae(L,Z){const{project:q}=Ve(L,Z);return`${L.cloneUrl}${Se(L)}${q}`}function Be(L,Z){const{branch:q,filePath:_e,project:U}=Ve(L,Z);return`${L.baseUrl}${Se(L)}projects/${encodeURIComponent(U)}/branches/${q}/files/${encodeURIComponent(_e)}/content`}function tt(L){return`${L.baseUrl}${Se(L)}projects/`}function ft(L){const Z={};if(!L.password)return Z;const q=y.from(`${L.username}:${L.password}`,"utf8");return Z.Authorization=`Basic ${q.toString("base64")}`,{headers:Z}}async function bt(L){const Z=await L.text();if(Z.startsWith(Ie))try{return JSON.parse(Z.slice(Ie.length))}catch(q){throw new Error(`Invalid response from Gerrit: ${Z.slice(0,10)} - ${q}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${Z.slice(0,10)}`)}const rn=class{constructor(L){this.integrationConfig=L}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){const{url:Z,base:q,lineNumber:_e}=L;let U;if(Z.startsWith("/")){const{branch:se,project:Ce}=Ve(this.config,q);return at(this.config,Ce,se,Z)}return Z?U=new URL(Z,q):U=new URL(q),_e&&(U.hash=_e.toString()),U.toString()}resolveEditUrl(L){return L}};let Gt=rn;Gt.factory=({config:L})=>{var Z;const q=Ae((Z=L.getOptionalConfigArray("integrations.gerrit"))!=null?Z:[]);return B(q.map(_e=>new rn(_e)),_e=>_e.config.host)};function gn(L){const Z=L.getString("host");let q=L.getOptionalString("baseUrl");const _e=L.getOptionalString("username"),U=L.getOptionalString("password");if(!f(Z))throw new Error(`Invalid Gitea integration config, '${Z}' is not a valid host`);return q?q=(0,m.trimEnd)(q,"/"):q=`https://${Z}`,{host:Z,baseUrl:q,username:_e,password:U}}function Ke(L,Z){var q;try{const _e=(q=L.baseUrl)!=null?q:`https://${L.host}`,[U,se,Ce,Le,wt,It,...kt]=Z.replace(_e,"").split("/"),En=kt.join("/").replace(/^\//,"");return`${_e}/${se}/${Ce}/_edit/${It}/${En}`}catch(_e){throw new Error(`Incorrect URL: ${Z}, ${_e}`)}}function nt(L,Z){var q;try{const _e=(q=L.baseUrl)!=null?q:`https://${L.host}`,[U,se,Ce,Le,wt,It,...kt]=Z.replace(_e,"").split("/"),En=kt.join("/").replace(/^\//,"");return`${_e}/api/v1/repos/${se}/${Ce}/contents/${En}?ref=${It}`}catch(_e){throw new Error(`Incorrect URL: ${Z}, ${_e}`)}}function oe(L){const Z={},{username:q,password:_e}=L;return _e?(q?Z.Authorization=`basic ${y.from(`${q}:${_e}`).toString("base64")}`:Z.Authorization=`token ${_e}`,{headers:Z}):Z}const Ee=class{constructor(L){this.config=L}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(L){return k(L)}resolveEditUrl(L){return Ke(this.config,L)}};let ke=Ee;ke.factory=({config:L})=>{var Z;const _e=((Z=L.getOptionalConfigArray("integrations.gitea"))!=null?Z:[]).map(U=>gn(U));return B(_e.map(U=>new Ee(U)),U=>U.config.host)};const ot="github.com",Ye="https://api.github.com",ut="https://raw.githubusercontent.com";function At(L){var Z,q;const _e=(Z=L.getOptionalString("host"))!=null?Z:ot;let U=L.getOptionalString("apiBaseUrl"),se=L.getOptionalString("rawBaseUrl");const Ce=L.getOptionalString("token"),Le=(q=L.getOptionalConfigArray("apps"))==null?void 0:q.map(wt=>({appId:wt.getNumber("appId"),clientId:wt.getString("clientId"),clientSecret:wt.getString("clientSecret"),webhookSecret:wt.getString("webhookSecret"),privateKey:wt.getString("privateKey"),allowedInstallationOwners:wt.getOptionalStringArray("allowedInstallationOwners")}));if(!f(_e))throw new Error(`Invalid GitHub integration config, '${_e}' is not a valid host`);return U?U=(0,m.trimEnd)(U,"/"):_e===ot&&(U=Ye),se?se=(0,m.trimEnd)(se,"/"):_e===ot&&(se=ut),{host:_e,apiBaseUrl:U,rawBaseUrl:se,token:Ce,apps:Le}}function Ft(L){const Z=L.map(At);return Z.some(q=>q.host===ot)||Z.push({host:ot,apiBaseUrl:Ye,rawBaseUrl:ut}),Z}function ue(L,Z,q){try{const{owner:_e,name:U,ref:se,filepathtype:Ce,filepath:Le}=parseGitUrl(L);if(!_e||!U||!se||Ce!=="blob"&&Ce!=="raw"&&Ce!=="tree")throw new Error("Invalid GitHub URL or file path");const wt=Le.replace(/^\//,"");return Oe(Z,q)==="api"?`${Z.apiBaseUrl}/repos/${_e}/${U}/contents/${wt}?ref=${se}`:`${Z.rawBaseUrl}/${_e}/${U}/${se}/${wt}`}catch(_e){throw new Error(`Incorrect URL: ${L}, ${_e}`)}}function ye(L,Z){const q={};return Oe(L,Z)==="api"&&(q.Accept="application/vnd.github.v3.raw"),Z.token&&(q.Authorization=`token ${Z.token}`),{headers:q}}function Oe(L,Z){return L.apiBaseUrl&&(Z.token||!L.rawBaseUrl)?"api":"raw"}class He{constructor(){this.tokenCache=new Map,this.isExpired=Z=>t.ou.local()>Z}async getOrCreateToken(Z,q,_e){let U=this.tokenCache.get(Z);if((!U||this.isExpired(U.expiresAt))&&(U=await _e(),U.expiresAt=U.expiresAt.minus({minutes:10}),this.tokenCache.set(Z,U)),!this.appliesToRepo(U,q))throw new Error(`The Backstage GitHub application used in the ${Z} organization does not have access to a repository with the name ${q}`);return{accessToken:U.token}}appliesToRepo(Z,q){return q===void 0?!0:Z.repositories!==void 0?Z.repositories.includes(q):!0}}const rt={Accept:"application/vnd.github.machine-man-preview+json"};class Pt{constructor(Z,q){this.cache=new He,this.allowedInstallationOwners=Z.allowedInstallationOwners,this.baseUrl=q,this.baseAuthConfig={appId:Z.appId,privateKey:Z.privateKey.replace(/\\n/gm,`
`)},this.appClient=new _.v({baseUrl:q,headers:rt,authStrategy:C.i,auth:this.baseAuthConfig})}async getInstallationCredentials(Z,q){var _e;return this.allowedInstallationOwners&&!((_e=this.allowedInstallationOwners)!=null&&_e.includes(Z))?{accessToken:void 0}:this.cache.getOrCreateToken(Z,q,async()=>{var U;const{installationId:se,suspended:Ce}=await this.getInstallationData(Z);if(Ce)throw new Error(`The GitHub application for ${Z} is suspended`);const Le=await this.appClient.apps.createInstallationAccessToken({installation_id:se,headers:rt});let wt;if(Le.data.repository_selection==="selected"){const It=new _.v({baseUrl:this.baseUrl,auth:Le.data.token}),kt=await It.paginate(It.apps.listReposAccessibleToInstallation);wt=((U=kt.repositories)!=null?U:kt).map(Rn=>Rn.name)}return{token:Le.data.token,expiresAt:t.ou.fromISO(Le.data.expires_at),repositories:wt}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(Z){const _e=(await this.getInstallations()).find(se=>{var Ce,Le;return((Le=(Ce=se.account)==null?void 0:Ce.login)==null?void 0:Le.toLocaleLowerCase("en-US"))===Z.toLocaleLowerCase("en-US")});if(_e)return{installationId:_e.id,suspended:Boolean(_e.suspended_by)};const U=new Error(`No app installation found for ${Z} in ${this.baseAuthConfig.appId}`);throw U.name="NotFoundError",U}}class Ot{constructor(Z){var q,_e;this.apps=(_e=(q=Z.apps)==null?void 0:q.map(U=>new Pt(U,Z.apiBaseUrl)))!=null?_e:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(q=>q.getInstallations()))).flat():[]}async getAppToken(Z,q){if(this.apps.length===0)return;const _e=await Promise.all(this.apps.map(Le=>Le.getInstallationCredentials(Z,q).then(wt=>({credentials:wt,error:void 0}),wt=>({credentials:void 0,error:wt})))),U=_e.find(Le=>Le.credentials);if(U)return U.credentials.accessToken;const Ce=_e.map(Le=>Le.error).find(Le=>Le.name!=="NotFoundError");if(Ce)throw Ce}}const jt=class{constructor(L,Z){this.githubAppCredentialsMux=L,this.token=Z}async getCredentials(L){const Z=c()(L.url),q=Z.owner||Z.name,_e=Z.owner?Z.name:void 0;let U="app",se=await this.githubAppCredentialsMux.getAppToken(q,_e);return se||(U="token",se=this.token),{headers:se?{Authorization:`Bearer ${se}`}:void 0,token:se,type:U}}};let pn=jt;pn.create=L=>new jt(new Ot(L),L.token);class _n{constructor(Z){this.providers=Z}static fromIntegrations(Z){const q=new Map;return Z.github.list().forEach(_e=>{const U=pn.create(_e.config);q.set(_e.config.host,U)}),new _n(q)}async getCredentials(Z){const q=new URL(Z.url),_e=this.providers.get(q.host);if(!_e)throw new Error(`There is no GitHub integration that matches ${Z.url}. Please add a configuration for an integration.`);return _e.getCredentials(Z)}}const bn=class{constructor(L){this.integrationConfig=L}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){return Jn(k(L),"tree")}resolveEditUrl(L){return Jn(L,"edit")}};let $n=bn;$n.factory=({config:L})=>{var Z;const q=Ft((Z=L.getOptionalConfigArray("integrations.github"))!=null?Z:[]);return B(q.map(_e=>new bn(_e)),_e=>_e.config.host)};function Jn(L,Z){return L.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(q,_e,U,se)=>`//${_e}/${U}/${se}/${Z}/`)}const Dn=null;class Un extends $n{constructor(Z){super(Z)}get config(){return super.config}}Un.factory=$n.factory;const hn=null,Bn=null,Pn=null,yn="gitlab.com",Kn="https://gitlab.com/api/v4";function sa(L){const Z=L.getString("host");let q=L.getOptionalString("apiBaseUrl");const _e=L.getOptionalString("token");let U=L.getOptionalString("baseUrl");if(q?q=(0,m.trimEnd)(q,"/"):Z===yn&&(q=Kn),U?U=(0,m.trimEnd)(U,"/"):U=`https://${Z}`,f(Z)){if(!q||!F(q))throw new Error(`Invalid GitLab integration config, '${q}' is not a valid apiBaseUrl`);if(!F(U))throw new Error(`Invalid GitLab integration config, '${U}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${Z}' is not a valid host`);return{host:Z,token:_e,apiBaseUrl:q,baseUrl:U}}function zn(L){const Z=L.map(sa);return Z.some(q=>q.host===yn)||Z.push({host:yn,apiBaseUrl:Kn,baseUrl:`https://${yn}`}),Z}function jn(L){let Z="";return L.host!==yn&&(Z=new URL(L.baseUrl).pathname),trimEnd(Z,"/")}async function ua(L,Z){const q=await Ha(L,Z);return Ga(L,q,Z).toString()}function _a(L){const{token:Z=""}=L;return{headers:{"PRIVATE-TOKEN":Z}}}function Ga(L,Z,q){try{const _e=new URL(L),U=_e.pathname.split("/blob/").slice(1).join("/blob/"),[se,...Ce]=U.split("/"),Le=jn(q);return _e.pathname=[...Le?[Le]:[],"api/v4/projects",Z,"repository/files",encodeURIComponent(decodeURIComponent(Ce.join("/"))),"raw"].join("/"),_e.search=`?ref=${se}`,_e}catch(_e){throw new Error(`Incorrect url: ${L}, ${_e}`)}}async function Ha(L,Z){const q=new URL(L);if(!q.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let _e=q.pathname.split("/-/blob/")[0].split("/blob/")[0];const U=jn(Z);U&&(_e=_e.replace(U,""));const se=new URL(`${q.origin}${U}/api/v4/projects/${encodeURIComponent(_e.replace(/^\//,""))}`),Ce=await fetch(se.toString(),_a(Z)),Le=await Ce.json();if(!Ce.ok)throw new Error(`GitLab Error '${Le.error}', ${Le.error_description}`);return Number(Le.id)}catch(_e){throw new Error(`Could not get GitLab project ID for: ${L}, ${_e}`)}}const ur=class{constructor(L){this.integrationConfig=L}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(L){return k(L)}resolveEditUrl(L){return Qa(L,"edit")}};let er=ur;er.factory=({config:L})=>{var Z;const q=zn((Z=L.getOptionalConfigArray("integrations.gitlab"))!=null?Z:[]);return B(q.map(_e=>new ur(_e)),_e=>_e.config.host)};function Qa(L,Z){return L.replace(/\/\-\/(blob|tree|edit)\//,`/-/${Z}/`)}function pr(L){if(!L)return{};if(!L.has("clientEmail")&&!L.has("privateKey"))return{};const Z=L.getString("privateKey").split("\\n").join(`
`);return{clientEmail:L.getString("clientEmail"),privateKey:Z}}class Ja{static fromConfig(Z){return new Ja({awsS3:p.factory({config:Z}),azure:Ue.factory({config:Z}),bitbucket:ie.factory({config:Z}),bitbucketCloud:ln.factory({config:Z}),bitbucketServer:Pe.factory({config:Z}),gerrit:Gt.factory({config:Z}),github:$n.factory({config:Z}),gitlab:er.factory({config:Z}),gitea:ke.factory({config:Z})})}constructor(Z){this.byType=Z}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(Z=>Z.list())}byUrl(Z){let q=Object.values(this.byType).map(_e=>_e.byUrl(Z)).filter(Boolean);if(q.length>1){const _e=q.filter(U=>!(U instanceof ie));_e.length!==0&&(q=_e)}return q[0]}byHost(Z){return Object.values(this.byType).map(q=>q.byHost(Z)).find(Boolean)}resolveUrl(Z){const q=this.byUrl(Z.base);return q?q.resolveUrl(Z):k(Z)}resolveEditUrl(Z){const q=this.byUrl(Z);return q?q.resolveEditUrl(Z):Z}}},63115:function(Kt,d,e){e.d(d,{Cy:function(){return Ut},DC:function(){return Tt},OO:function(){return mn},RE:function(){return he},XQ:function(){return ln},Yq:function(){return Ue},ap:function(){return Ln},bM:function(){return ie},cm:function(){return xe},d1:function(){return Vt},fP:function(){return pe},fe:function(){return be},gC:function(){return dn},hK:function(){return de},hs:function(){return Rt},nE:function(){return H},x1:function(){return xt},zJ:function(){return vt}});var n=e(2784),c=e(73557),m=e(49558),u=e(30705),r=e(16673),l=e(73495),C=e(99688),_=e(13737),t=e(60364),y=e(90436),f=e(79692),F=e(95544),B=e(8629),k=e(79249),X=e(38724),A=e(99152),D=e(6487),N=e(49429),p=e(77277),h=e(34520),b=e(15933);const E=(0,u.NT)({id:"api-docs"}),S=(0,u.x8)({id:"register-component",optional:!0}),K=[r.Es.columns.createTitleColumn({hidden:!0}),r.Es.columns.createNameColumn({defaultKind:"API"}),r.Es.columns.createSystemColumn(),r.Es.columns.createOwnerColumn(),r.Es.columns.createSpecTypeColumn(),r.Es.columns.createSpecLifecycleColumn(),r.Es.columns.createMetadataDescriptionColumn(),r.Es.columns.createTagsColumn()],pe=it=>{var $e;const{initiallySelectedFilter:Zt="all",columns:Je,actions:Pe}=it,M=`${($e=(0,u.h_)(u.Ds).getOptionalString("organization.name"))!=null?$e:"Backstage"} API Explorer`,J=(0,u.tg)(S);return n.createElement(m.g9,{themeId:"apis",title:"APIs",subtitle:M,pageTitleOverride:"APIs"},n.createElement(m.VY,null,n.createElement(m.yW,{title:""},n.createElement(m.XF,{title:"Register Existing API",to:J==null?void 0:J()}),n.createElement(m.qt,null,"All your APIs")),n.createElement(l.UO,null,n.createElement(l._i,null,n.createElement(l._i.Filters,null,n.createElement(l.tW,{initialFilter:"api",hidden:!0}),n.createElement(l.sL,null),n.createElement(l.EW,{initialFilter:Zt}),n.createElement(l.dq,null),n.createElement(l.df,null),n.createElement(l.xE,null)),n.createElement(l._i.Content,null,n.createElement(r.Es,{columns:Je||K,actions:Pe}))))))},he=it=>(0,c.pC)()||n.createElement(pe,{...it}),Fe=(0,u.T0)({id:"plugin.api-docs.config"}),ct=it=>n.createElement(m.Oi,{text:it.definition,language:it.language,showCopyCodeButton:!0}),Ut=()=>{var it;const{entity:$e}=(0,l.X2)(),Zt=(0,u.h_)(Fe),{getApiDefinitionWidget:Je}=Zt;if(!$e)return n.createElement(C.Z,{severity:"error"},"Could not fetch the API");const Pe=Je($e),T=(it=$e.metadata.title)!=null?it:$e.metadata.name;return Pe?n.createElement(m.oZ,{title:T},n.createElement(m.hB,{label:Pe.title,key:"widget"},Pe.component($e.spec.definition)),n.createElement(m.hB,{label:"Raw",key:"raw"},n.createElement(ct,{definition:$e.spec.definition,language:Pe.rawLanguage||$e.spec.type}))):n.createElement(m.oZ,{title:T,children:[n.createElement(m.hB,{label:$e.spec.type,key:"raw"},n.createElement(ct,{definition:$e.spec.definition,language:$e.spec.type}))]})},dt=n.lazy(()=>Promise.all([e.e(1978),e.e(7700),e.e(8847),e.e(377)]).then(e.bind(e,30377)).then(it=>({default:it.AsyncApiDefinition}))),Wt=it=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(dt,{...it})),Ct=n.lazy(()=>e.e(3618).then(e.bind(e,53618)).then(it=>({default:it.GraphQlDefinition}))),G=it=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(Ct,{...it})),fn=n.lazy(()=>Promise.all([e.e(1978),e.e(7700),e.e(4274)]).then(e.bind(e,14274)).then(it=>({default:it.OpenApiDefinition}))),Et=it=>n.createElement(n.Suspense,{fallback:n.createElement(m.Ex,null)},n.createElement(fn,{...it})),je=it=>{const $e=(0,t.Z)();return n.createElement(m.Oi,{customStyle:{backgroundColor:$e.palette.background.default},text:it.definition,language:"protobuf",showCopyCodeButton:!0})},P=it=>{const{definition:$e}=it,Zt=(0,t.Z)();return n.createElement(m.Oi,{customStyle:{backgroundColor:Zt.palette.background.default},text:$e,language:"typescript",showCopyCodeButton:!0})};function Ue(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:it=>n.createElement(Et,{definition:it})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:it=>n.createElement(Wt,{definition:it})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:it=>n.createElement(G,{definition:it})},{type:"grpc",title:"gRPC",component:it=>n.createElement(je,{definition:it})},{type:"trpc",title:"tRPC",component:it=>n.createElement(P,{definition:it})}]}const H=it=>{const{apiEntity:$e}=it,Je=(0,u.h_)(Fe).getApiDefinitionWidget($e),Pe=Je?Je.title:$e.spec.type;return n.createElement(y.Z,{component:"span"},Pe)},R=(0,f.Z)(it=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${it.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:it.palette.text.primary,wordBreak:"break-word",fontSize:it.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:it.spacing(1),color:it.palette.text.primary}}));function W(it){const{children:$e,value:Zt,index:Je,...Pe}=it,T=R();return n.createElement("div",{role:"tabpanel",hidden:Zt!==Je,id:`vertical-tabpanel-${Je}`,"aria-labelledby":`vertical-tab-${Je}`,className:T.tabContents,...Pe},Zt===Je&&n.createElement(F.Z,{pl:3,pr:3},$e))}function ge(it){return{id:`vertical-tab-${it}`,"aria-controls":`vertical-tabpanel-${it}`}}function Me(it){var $e,Zt,Je;const{open:Pe,entity:T,onClose:M}=it,[J,ne]=n.useState(0),re=R();(0,n.useEffect)(()=>{ne(0)},[Pe]);const Ie=(0,u.h_)(Fe).getApiDefinitionWidget(T);let Ve=0,at=0;return n.createElement(B.Z,{fullWidth:!0,maxWidth:"xl",open:Pe,onClose:M,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:re.fullHeightDialog}},n.createElement(k.Z,{id:"api-definition-dialog-title",disableTypography:!0},n.createElement(y.Z,{className:re.type},"API - ",($e=Ie==null?void 0:Ie.title)!=null?$e:"Raw"),n.createElement(y.Z,{className:re.title,variant:"h1"},(Zt=T.metadata.title)!=null?Zt:T.metadata.name)),n.createElement(X.Z,{dividers:!0,className:re.root},n.createElement(A.Z,{orientation:"vertical",variant:"scrollable",value:J,onChange:(Se,te)=>ne(te),"aria-label":"API definition options",className:re.tabs},Ie?n.createElement(D.Z,{label:Ie.title,...ge(Ve++)}):null,n.createElement(D.Z,{label:"Raw",...ge(Ve++)})),Ie?n.createElement(W,{value:J,index:at++},Ie.component(T.spec.definition)):null,n.createElement(W,{value:J,index:at++},n.createElement(ct,{definition:T.spec.definition,language:(Je=Ie==null?void 0:Ie.rawLanguage)!=null?Je:T.spec.type}))),n.createElement(N.Z,null,n.createElement(p.Z,{onClick:M,color:"primary"},"Close")))}function et(){return{title:"Type",field:"spec.type",render:it=>n.createElement(H,{apiEntity:it})}}const pt=({apiEntity:it})=>{const[$e,Zt]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,n.createElement(_.Z,{onClick:()=>Zt(!$e)},n.createElement(b.Z,null)),n.createElement(Me,{entity:it,open:$e,onClose:()=>Zt(!1)}))};function mt(){return{title:"API Definition",render:it=>n.createElement(pt,{apiEntity:it})}}const Dt=[l.u3.columns.createEntityRefColumn({defaultKind:"API"}),l.u3.columns.createSystemColumn(),l.u3.columns.createOwnerColumn(),et(),l.u3.columns.createSpecLifecycleColumn(),l.u3.columns.createMetadataDescriptionColumn(),mt()],ie=it=>{const{variant:$e="gridItem",columns:Zt=Dt}=it,{entity:Je}=(0,l.X2)(),{entities:Pe,loading:T,error:M}=(0,l.eK)(Je,{type:h.Dg});return T?n.createElement(m.rJ,{variant:$e,title:"Consumed APIs"},n.createElement(m.Ex,null)):M||!Pe?n.createElement(m.rJ,{variant:$e,title:"Consumed APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${M}`,language:"text"})})):n.createElement(l.u3,{title:"Consumed APIs",variant:$e,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(y.Z,{variant:"body1"},"This ",Je.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),n.createElement(y.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:Zt,entities:Pe})},o=[l.u3.columns.createEntityRefColumn({defaultKind:"API"}),l.u3.columns.createOwnerColumn(),et(),l.u3.columns.createSpecLifecycleColumn(),l.u3.columns.createMetadataDescriptionColumn()],xe=it=>{const{variant:$e="gridItem",columns:Zt=o}=it,{entity:Je}=(0,l.X2)(),{entities:Pe,loading:T,error:M}=(0,l.eK)(Je,{type:h.aS,kind:"API"});return T?n.createElement(m.rJ,{variant:$e,title:"APIs"},n.createElement(m.Ex,null)):M||!Pe?n.createElement(m.rJ,{variant:$e,title:"APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${M}`,language:"text"})})):n.createElement(l.u3,{title:"APIs",variant:$e,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(y.Z,{variant:"body1"},"This ",Je.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),n.createElement(y.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:Zt,entities:Pe})},be=it=>{const{variant:$e="gridItem",columns:Zt=Dt}=it,{entity:Je}=(0,l.X2)(),{entities:Pe,loading:T,error:M}=(0,l.eK)(Je,{type:h.M_});return T?n.createElement(m.rJ,{variant:$e,title:"Provided APIs"},n.createElement(m.Ex,null)):M||!Pe?n.createElement(m.rJ,{variant:$e,title:"Provided APIs"},n.createElement(m.GB,{severity:"error",title:"Could not load APIs",message:n.createElement(m.Oi,{text:`${M}`,language:"text"})})):n.createElement(l.u3,{title:"Provided APIs",variant:$e,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(y.Z,{variant:"body1"},"This ",Je.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),n.createElement(y.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:Zt,entities:Pe})},Rt=it=>{const{variant:$e="gridItem"}=it,{entity:Zt}=(0,l.X2)(),{entities:Je,loading:Pe,error:T}=(0,l.eK)(Zt,{type:h.X9});return Pe?n.createElement(m.rJ,{variant:$e,title:"Consumers"},n.createElement(m.Ex,null)):T||!Je?n.createElement(m.rJ,{variant:$e,title:"Consumers"},n.createElement(m.GB,{severity:"error",title:"Could not load components",message:n.createElement(m.Oi,{text:`${T}`,language:"text"})})):n.createElement(l.u3,{title:"Consumers",variant:$e,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(y.Z,{variant:"body1"},"No component consumes this API."),n.createElement(y.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:l.u3.componentEntityColumns,entities:Je})},vt=it=>{const{variant:$e="gridItem"}=it,{entity:Zt}=(0,l.X2)(),{entities:Je,loading:Pe,error:T}=(0,l.eK)(Zt,{type:h.Zj});return Pe?n.createElement(m.rJ,{variant:$e,title:"Providers"},n.createElement(m.Ex,null)):T||!Je?n.createElement(m.rJ,{variant:$e,title:"Providers"},n.createElement(m.GB,{severity:"error",title:"Could not load components",message:n.createElement(m.Oi,{text:`${T}`,language:"text"})})):n.createElement(l.u3,{title:"Providers",variant:$e,emptyContent:n.createElement("div",{style:{textAlign:"center"}},n.createElement(y.Z,{variant:"body1"},"No component provides this API."),n.createElement(y.Z,{variant:"body2"},n.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:l.u3.componentEntityColumns,entities:Je})},Vt=(0,u.rx)({id:"api-docs",routes:{root:E},apis:[(0,u.ni)({api:Fe,deps:{},factory:()=>{const it=Ue();return{getApiDefinitionWidget:$e=>it.find(Zt=>Zt.type===$e.spec.type)}}})],externalRoutes:{registerApi:S}}),de=Vt.provide((0,u.P4)({name:"ApiExplorerPage",component:()=>e.e(5867).then(e.bind(e,55867)).then(it=>it.ApiExplorerIndexPage),mountPoint:E})),Tt=Vt.provide((0,u.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(9678).then(e.bind(e,79678)).then(it=>it.ApiDefinitionCard)}})),xt=Vt.provide((0,u.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(7128).then(e.bind(e,87128)).then(it=>it.ConsumedApisCard)}})),ln=Vt.provide((0,u.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(7997).then(e.bind(e,27997)).then(it=>it.ConsumingComponentsCard)}})),mn=Vt.provide((0,u.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(7128).then(e.bind(e,87128)).then(it=>it.ProvidedApisCard)}})),dn=Vt.provide((0,u.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(7997).then(e.bind(e,27997)).then(it=>it.ProvidingComponentsCard)}})),Ln=Vt.provide((0,u.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(7128).then(e.bind(e,87128)).then(it=>it.HasApisCard)}}))},75650:function(Kt,d,e){e.d(d,{j8:function(){return r},x7:function(){return u}});var n=e(5083);const c="catalog-entity",m=(0,n.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:c}),u=(0,n.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),r=(0,n.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:c}),l=(0,n.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:c}),C=(0,n.J$)({name:"catalog.location.read",attributes:{action:"read"}}),_=(0,n.J$)({name:"catalog.location.create",attributes:{action:"create"}}),t=(0,n.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),y=[m,u,r,l,C,_,t]},98487:function(Kt,d,e){e.d(d,{Az:function(){return G},Ho:function(){return dt},Nm:function(){return S},_U:function(){return Ut},t0:function(){return fn},vw:function(){return E}});var n=e(34520),c=e(49558),m=e(30705),u=e(79692),r=e(60364),l=e(4614),C=e(72779),_=e.n(C),t=e(2784),y=e(10368),f=e(73495),F=e(39412),B=e(48760),k=e(14162),X=e.n(k),A=e(69294);const D=(0,y.Z)(Et=>({text:{fill:Et.palette.textContrast},secondary:{fill:Et.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function N({edge:{relations:Et}}){const je=D();return t.createElement("text",{className:je.text,textAnchor:"middle"},Et.map((P,Ue)=>t.createElement("tspan",{key:P,className:_()(Ue>0&&je.secondary)},Ue>0&&t.createElement("tspan",null," / "),P)))}function p({kind:Et,...je}){var P;const H=(P=(0,m.qD)().getSystemIcon(`kind:${Et.toLocaleLowerCase("en-US")}`))!=null?P:F.Z;return t.createElement(H,{...je})}const h=(0,u.Z)(Et=>({node:{fill:Et.palette.grey[300],stroke:Et.palette.grey[300],"&.primary":{fill:Et.palette.primary.light,stroke:Et.palette.primary.light},"&.secondary":{fill:Et.palette.secondary.light,stroke:Et.palette.secondary.light}},text:{fill:Et.palette.getContrastText(Et.palette.grey[300]),"&.primary":{fill:Et.palette.primary.contrastText},"&.secondary":{fill:Et.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function b({node:{id:Et,kind:je,namespace:P,name:Ue,color:H="default",focused:R,title:W,onClick:ge}}){const Me=h(),[et,pt]=(0,t.useState)(0),[mt,Dt]=(0,t.useState)(0),ie=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{if(ie.current){let{height:de,width:Tt}=ie.current.getBBox();de=Math.round(de),Tt=Math.round(Tt),(de!==mt||Tt!==et)&&(pt(Tt),Dt(de))}},[et,mt]);const o=10,xe=mt,be=je?xe+o:0,Rt=be+et+o*2,vt=mt+o*2,Vt=W!=null?W:je&&Ue&&P?(0,f.$3)({kind:je,name:Ue,namespace:P}):Et;return t.createElement("g",{onClick:ge,className:_()(ge&&Me.clickable)},t.createElement("rect",{className:_()(Me.node,H==="primary"&&"primary",H==="secondary"&&"secondary"),width:Rt,height:vt,rx:10}),je&&t.createElement(p,{kind:je,y:o,x:o,width:xe,height:xe,className:_()(Me.text,R&&"focused",H==="primary"&&"primary",H==="secondary"&&"secondary")}),t.createElement("text",{ref:ie,className:_()(Me.text,R&&"focused",H==="primary"&&"primary",H==="secondary"&&"secondary"),y:vt/2,x:be+(et+o*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Vt))}const E=[[n.$1,n.S4],[n.Dg,n.X9],[n.Zj,n.M_],[n.aS,n.cz],[n._b,n.wP],[n.KS,n.hr],[n.nP,n.w$]];var S=(Et=>(Et.TOP_BOTTOM="TB",Et.BOTTOM_TOP="BT",Et.LEFT_RIGHT="LR",Et.RIGHT_LEFT="RL",Et))(S||{});const K=X()(10);function pe(){const Et=(0,m.h_)(f.Ah),je=(0,t.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[P,Ue]=(0,t.useState)({}),H=(0,t.useCallback)(()=>{const{cachedEntities:pt,requestedEntities:mt}=je.current,Dt={};mt.forEach(ie=>{const o=pt.get(ie);o&&(Dt[ie]=o)}),Ue(Dt)},[je,Ue]),[R,W]=(0,A.default)(async()=>{const{requestedEntities:pt,outstandingEntities:mt,cachedEntities:Dt}=je.current;await Promise.all(Array.from(pt).map(ie=>K(async()=>{if(Dt.has(ie))return;if(mt.has(ie)){await mt.get(ie);return}const o=Et.getEntityByRef(ie);mt.set(ie,o);try{const xe=await o;xe&&(Dt.set(ie,xe),H())}finally{mt.delete(ie)}})))},[je,H]),{loading:ge,error:Me}=R,et=(0,t.useCallback)(pt=>{const mt=new Set(pt),{requestedEntities:Dt}=je.current;(mt.size!==Dt.size||Array.from(mt).some(ie=>!Dt.has(ie)))&&(je.current.requestedEntities=mt,W(),H())},[je,W,H]);return{entities:P,loading:ge,error:Me,requestEntities:et}}function he({rootEntityRefs:Et,filter:{maxDepth:je=Number.POSITIVE_INFINITY,relations:P,kinds:Ue}={}}){const{entities:H,loading:R,error:W,requestEntities:ge}=pe();return(0,t.useEffect)(()=>{const Me=new Set([...Et]),et=new Set;let pt=[...Et],mt=0;for(;pt.length>0&&(!isFinite(je)||mt<je);){const Dt=pt;for(pt=[];Dt.length>0;){const ie=Dt.shift(),o=H[ie];if(et.add(ie),o&&o.relations)for(const xe of o.relations)(!P||P.includes(xe.type))&&(!Ue||Ue.some(be=>xe.targetRef.startsWith(`${be.toLocaleLowerCase("en-US")}:`)))&&(et.has(xe.targetRef)||(pt.push(xe.targetRef),Me.add(xe.targetRef)))}++mt}ge([...Me])},[H,Et,je,P,Ue,ge]),{entities:H,loading:R,error:W}}function Fe({rootEntityRefs:Et,maxDepth:je=Number.POSITIVE_INFINITY,unidirectional:P=!0,mergeRelations:Ue=!0,kinds:H,relations:R,onNodeClick:W,relationPairs:ge=E}){const[Me,et]=(0,t.useState)({}),{entities:pt,loading:mt,error:Dt}=he({rootEntityRefs:Et,filter:{maxDepth:je,kinds:H,relations:R}});return(0,B.Z)(()=>{var ie;if(!pt||Object.keys(pt).length===0){et({});return}const o=Object.entries(pt).map(([vt,Vt])=>{var de,Tt,xt;const ln=Et.includes(vt),mn={id:vt,title:(Tt=(de=Vt.metadata)==null?void 0:de.title)!=null?Tt:void 0,kind:Vt.kind,name:Vt.metadata.name,namespace:(xt=Vt.metadata.namespace)!=null?xt:n.zG,focused:ln,color:ln?"secondary":"primary"};return W&&(mn.onClick=dn=>W(mn,dn)),mn}),xe=[],be=new Set,Rt=[...Et];for(;Rt.length>0;){const vt=Rt.pop(),Vt=pt[vt];be.add(vt),Vt&&((ie=Vt==null?void 0:Vt.relations)==null||ie.forEach(de=>{var Tt;if(pt[de.targetRef]&&!(R&&!R.includes(de.type))&&!(H&&!H.some(xt=>de.targetRef.startsWith(`${xt.toLocaleLowerCase("en-US")}:`)))){if(!P||!be.has(de.targetRef))if(Ue){const xt=(Tt=ge.find(([mn,dn])=>mn===de.type||dn===de.type))!=null?Tt:[de.type],[ln]=xt;xe.push({from:ln===de.type?vt:de.targetRef,to:ln===de.type?de.targetRef:vt,relations:xt,label:"visible"})}else xe.push({from:vt,to:de.targetRef,relations:[de.type],label:"visible"});be.has(de.targetRef)||(Rt.push(de.targetRef),be.add(de.targetRef))}}))}et({nodes:o,edges:xe})},100,[pt,Et,H,R,P,Ue,W,ge]),{loading:mt,error:Dt,...Me}}const ct=(0,u.Z)(Et=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${Et.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),Ut=Et=>{const{rootEntityNames:je,maxDepth:P=2,unidirectional:Ue=!0,mergeRelations:H=!0,kinds:R,relations:W,direction:ge=S.LEFT_RIGHT,onNodeClick:Me,relationPairs:et=E,className:pt,zoom:mt="enabled",renderNode:Dt,renderLabel:ie,curve:o}=Et,xe=(0,r.Z)(),be=ct(),Rt=(0,t.useMemo)(()=>(Array.isArray(je)?je:[je]).map(ln=>(0,n.eE)(ln)),[je]),vt=(0,m.h_)(m.VE),{loading:Vt,error:de,nodes:Tt,edges:xt}=Fe({rootEntityRefs:Rt,maxDepth:P,unidirectional:Ue,mergeRelations:H,kinds:R,relations:W,onNodeClick:Me,relationPairs:et});return(0,t.useEffect)(()=>{de&&vt.post(de)},[vt,de]),t.createElement("div",{className:_()(be.container,pt)},Vt&&t.createElement(l.Z,{className:be.progress}),Tt&&xt&&t.createElement(c.mn,{nodes:Tt,edges:xt,renderNode:Dt||b,renderLabel:ie||N,direction:ge,className:be.graph,paddingX:xe.spacing(4),paddingY:xe.spacing(4),labelPosition:c.NX.LabelPosition.RIGHT,labelOffset:xe.spacing(1),zoom:mt,curve:o}))},dt=(0,m.NT)({id:"catalog-graph"}),Wt=(0,m.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Ct=(0,m.rx)({id:"catalog-graph",routes:{catalogGraph:dt},externalRoutes:{catalogEntity:Wt}}),G=Ct.provide((0,m.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(5301).then(e.bind(e,15301)).then(Et=>Et.CatalogGraphCard)}})),fn=Ct.provide((0,m.P4)({name:"CatalogGraphPage",component:()=>e.e(8830).then(e.bind(e,68830)).then(Et=>Et.CatalogGraphPage),mountPoint:dt}))},93316:function(Kt,d,e){e.d(d,{gA:function(){return gn},vr:function(){return ln},wS:function(){return xt}});var n=e(30705),c=e(49462),m=e(73495),u=e(89393),r=e(49431),l=e(82717),C=e.n(l),_=e(49558),t=e(90436),y=e(7089),f=e(77277),F=e(4614),B=e(11776),k=e(38402),X=e(86136),A=e(49378),D=e(9520),N=e(61837),p=e(82113),h=e(60905),b=e(86619),E=e(74828),S=e(94339),K=e(32552),pe=e(24579),he=e(95544),Fe=e(21324),ct=e(34546),Ut=e(5806),dt=e(31377),Wt=e(67471),Ct=e(31625),G=e(2784),fn=e(79692),Et=e(4989),je=e(84905),P=e(38016),Ue=e(39412),H=e(96795),R=e.n(H),W=e(63955),ge=e(88013),Me=e(72847),et=e(76635),pt=e.n(et),mt=e(32272),Dt=e(64279),ie=e(34520);const o=(0,n.T0)({id:"plugin.catalog-import.service"}),xe=(Ke,nt)=>{const oe=Ke.github.byUrl(nt);if(!oe)return;const{name:Ee,owner:ke}=C()(nt);return{repo:Ee,owner:ke,githubIntegrationConfig:oe.config}};function be(Ke){const{ref:nt,...oe}=Ke;return{inputRef:nt,...oe}}function Rt(Ke){var nt;return(nt=Ke.getOptionalString("catalog.import.entityFilename"))!=null?nt:"catalog-info.yaml"}function vt(Ke){var nt;return(nt=Ke.getOptionalString("catalog.import.pullRequestBranchName"))!=null?nt:"backstage-integration"}class Vt{constructor(nt){this.discoveryApi=nt.discoveryApi,this.scmAuthApi=nt.scmAuthApi,this.identityApi=nt.identityApi,this.scmIntegrationsApi=nt.scmIntegrationsApi,this.catalogApi=nt.catalogApi,this.configApi=nt.configApi}async analyzeUrl(nt){var oe;if(new URL(nt).pathname.match(/\.ya?ml$/)||(oe=new URL(nt).searchParams.get("path"))!=null&&oe.match(/.ya?ml$/)){const ot=await this.catalogApi.addLocation({type:"url",target:nt,dryRun:!0});return{type:"locations",locations:[{exists:ot.exists,target:ot.location.target,entities:ot.entities.map(Ye=>{var ut;return{kind:Ye.kind,namespace:(ut=Ye.metadata.namespace)!=null?ut:"default",name:Ye.metadata.name}})}]}}if(!xe(this.scmIntegrationsApi,nt)){const ot=this.scmIntegrationsApi.byUrl(nt),Ye=Rt(this.configApi);throw ot?new Error(`The ${ot.title} integration only supports full URLs to ${Ye} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${Ye} file instead.`)}const ke=await this.analyzeLocation({repo:nt});if(ke.existingEntityFiles.length>0){const ot=ke.existingEntityFiles.reduce((Ye,ut)=>{var At;return Ye[ut.location.target]={target:ut.location.target,exists:ut.isRegistered,entities:[...ut.location.target in Ye?Ye[ut.location.target].entities:[],{name:ut.entity.metadata.name,namespace:(At=ut.entity.metadata.namespace)!=null?At:"default",kind:ut.entity.kind}]},Ye},{});return{type:"locations",locations:Object.values(ot)}}return{type:"repository",integrationType:"github",url:nt,generatedEntities:ke.generateEntities.map(ot=>ot.entity)}}async preparePullRequest(){var nt;const oe=(nt=this.configApi.getOptionalString("app.title"))!=null?nt:"Backstage",Ee=this.configApi.getString("app.baseUrl");return{title:`Add ${Rt(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${oe} software catalog](${Ee}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(nt){const{repositoryUrl:oe,fileContent:Ee,title:ke,body:ot}=nt,Ye=xe(this.scmIntegrationsApi,oe);if(Ye)return await this.submitGitHubPrToRepo({...Ye,repositoryUrl:oe,fileContent:Ee,title:ke,body:ot});throw new Error("unimplemented!")}async analyzeLocation(nt){const{token:oe}=await this.identityApi.getCredentials(),Ee=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...oe&&{Authorization:`Bearer ${oe}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:nt.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(ot=>{throw new Error(`Failed to generate entity definitions, ${ot.message}`)});if(!Ee.ok)throw new Error(`Failed to generate entity definitions. Received http response ${Ee.status}: ${Ee.statusText}`);return await Ee.json()}async submitGitHubPrToRepo(nt){const{owner:oe,repo:Ee,title:ke,body:ot,fileContent:Ye,repositoryUrl:ut,githubIntegrationConfig:At}=nt,{token:Ft}=await this.scmAuthApi.getCredentials({url:ut,additionalScope:{repoWrite:!0}}),ue=new u.v({auth:Ft,baseUrl:At.apiBaseUrl}),ye=vt(this.configApi),Oe=Rt(this.configApi),He=await ue.repos.get({owner:oe,repo:Ee}).catch(Ot=>{throw new Error(de("Couldn't fetch repo data",Ot))}),rt=await ue.git.getRef({owner:oe,repo:Ee,ref:`heads/${He.data.default_branch}`}).catch(Ot=>{throw new Error(de("Couldn't fetch default branch data",Ot))});return await ue.git.createRef({owner:oe,repo:Ee,ref:`refs/heads/${ye}`,sha:rt.data.object.sha}).catch(Ot=>{throw new Error(de(`Couldn't create a new branch with name '${ye}'`,Ot))}),await ue.repos.createOrUpdateFileContents({owner:oe,repo:Ee,path:Oe,message:ke,content:r.DS.encode(Ye),branch:ye}).catch(Ot=>{throw new Error(de(`Couldn't create a commit with ${Oe} file added`,Ot))}),{link:(await ue.pulls.create({owner:oe,repo:Ee,title:ke,head:ye,body:ot,base:He.data.default_branch}).catch(Ot=>{throw new Error(de(`Couldn't create a pull request for ${ye} branch`,Ot))})).data.html_url,location:`https://${At.host}/${oe}/${Ee}/blob/${He.data.default_branch}/${Oe}`}}}function de(Ke,nt){return`${Ke}, received http response status code ${nt.status}: ${nt.message}`}const Tt=(0,n.NT)({id:"catalog-import"}),xt=(0,n.rx)({id:"catalog-import",apis:[(0,n.ni)({api:o,deps:{discoveryApi:n.NW,scmAuthApi:c.Om,identityApi:n.$4,scmIntegrationsApi:c.q3,catalogApi:m.Ah,configApi:n.Ds},factory:({discoveryApi:Ke,scmAuthApi:nt,identityApi:oe,scmIntegrationsApi:Ee,catalogApi:ke,configApi:ot})=>new Vt({discoveryApi:Ke,scmAuthApi:nt,scmIntegrationsApi:Ee,identityApi:oe,catalogApi:ke,configApi:ot})})],routes:{importPage:Tt}}),ln=xt.provide((0,n.P4)({name:"CatalogImportPage",component:()=>e.e(8879).then(e.bind(e,62737)).then(Ke=>Ke.ImportPage),mountPoint:Tt}));function mn(){const Ke=(0,n.h_)(n.Ds);return Rt(Ke)}const dn=Ke=>{const{exampleLocationUrl:nt="https://github.com/backstage/backstage/blob/master/catalog-info.yaml",exampleRepositoryUrl:oe="https://github.com/backstage/backstage"}=Ke,Ee=(0,n.h_)(n.Ds),ke=Ee.getOptional("app.title")||"Backstage",ot=(0,n.h_)(o),Ye=Ee.has("integrations.github"),ut=mn();return G.createElement(_.rJ,{title:"Register an existing component",titleTypographyProps:{component:"h3"},deepLink:{title:"Learn more about the Software Catalog",link:"https://backstage.io/docs/features/software-catalog/"}},G.createElement(t.Z,{variant:"body2",paragraph:!0},"Enter the URL to your source code repository to add it to ",ke,"."),G.createElement(t.Z,{component:"h4",variant:"h6"},"Link to an existing entity file"),G.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",G.createElement("code",null,nt)),G.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard analyzes the file, previews the entities, and adds them to the ",ke," catalog."),Ye&&G.createElement(G.Fragment,null,G.createElement(t.Z,{component:"h4",variant:"h6"},"Link to a repository"," ",G.createElement(y.Z,{label:"GitHub only",variant:"outlined",size:"small"})),G.createElement(t.Z,{variant:"subtitle2",color:"textSecondary",paragraph:!0},"Example: ",G.createElement("code",null,oe)),G.createElement(t.Z,{variant:"body2",paragraph:!0},"The wizard discovers all ",G.createElement("code",null,ut)," files in the repository, previews the entities, and adds them to the ",ke," ","catalog."),ot.preparePullRequest&&G.createElement(t.Z,{variant:"body2",paragraph:!0},"If no entities are found, the wizard will prepare a Pull Request that adds an example ",G.createElement("code",null,ut)," and prepares the ",ke," catalog to load all entities as soon as the Pull Request is merged.")))};function Ln(Ke){return{activeFlow:"unknown",activeState:"analyze",analysisUrl:Ke,previousStates:[]}}function it(Ke,nt){switch(nt.type){case"onAnalysis":{if(Ke.activeState!=="analyze")return Ke;const{activeState:oe,previousStates:Ee}=Ke,[ke,ot,Ye,ut]=nt.args;return{...Ke,analysisUrl:ot,activeFlow:ke,analyzeResult:Ye,prepareResult:ut==null?void 0:ut.prepareResult,activeState:(ut==null?void 0:ut.prepareResult)===void 0?"prepare":"review",previousStates:Ee.concat(oe)}}case"onPrepare":{if(Ke.activeState!=="prepare")return Ke;const{activeState:oe,previousStates:Ee}=Ke,[ke,ot]=nt.args;return{...Ke,prepareResult:ke,activeState:"review",previousStates:ot!=null&&ot.notRepeatable?[]:Ee.concat(oe)}}case"onReview":{if(Ke.activeState!=="review")return Ke;const{activeState:oe,previousStates:Ee}=Ke,[ke]=nt.args;return{...Ke,reviewResult:ke,activeState:"finish",previousStates:Ee.concat(oe)}}case"onGoBack":{const{activeState:oe,previousStates:Ee}=Ke;return{...Ke,activeState:Ee.length>0?Ee[Ee.length-1]:oe,previousStates:Ee.slice(0,Ee.length-1)}}case"onReset":return{...Ln(nt.initialUrl),prepareResult:Ke.prepareResult};default:throw new Error}}const $e=Ke=>{const[nt,oe]=(0,G.useReducer)(it,Ke==null?void 0:Ke.initialUrl,Ln),{activeFlow:Ee,activeState:ke,analysisUrl:ot,previousStates:Ye}=nt;return{activeFlow:Ee,activeState:ke,activeStepNumber:["analyze","prepare","review","finish"].indexOf(ke),analysisUrl:ot,analyzeResult:nt.analyzeResult,prepareResult:nt.prepareResult,reviewResult:nt.reviewResult,onAnalysis:(ut,At,Ft,ue)=>oe({type:"onAnalysis",args:[ut,At,Ft,ue]}),onPrepare:(ut,At)=>oe({type:"onPrepare",args:[ut,At]}),onReview:ut=>oe({type:"onReview",args:[ut]}),onGoBack:Ye.length>0?()=>oe({type:"onGoBack"}):void 0,onReset:()=>oe({type:"onReset",initialUrl:Ke==null?void 0:Ke.initialUrl})}},Zt=(0,fn.Z)(Ke=>({wrapper:{marginTop:Ke.spacing(1),marginRight:Ke.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},button:{marginTop:Ke.spacing(1),marginRight:Ke.spacing(1)}})),Je=Ke=>{const{loading:nt,...oe}=Ke,Ee=Zt();return G.createElement("div",{className:Ee.wrapper},G.createElement(f.Z,{color:"primary",variant:"contained",...oe,disabled:Ke.disabled||Ke.loading}),Ke.loading&&G.createElement(F.Z,{size:"1.5rem",className:Ee.buttonProgress}),Ke.loading)},Pe=Ke=>{const nt=Zt();return G.createElement(f.Z,{variant:"outlined",className:nt.button,...Ke},Ke.children||"Back")},T=(0,fn.Z)(Ke=>({nested:{paddingLeft:Ke.spacing(4)}}));function M(Ke){return Ke.sort((nt,oe)=>(0,m.$3)(nt).localeCompare((0,m.$3)(oe)))}const J=Ke=>{const{locations:nt,collapsed:oe=!1,locationListItemIcon:Ee,onItemClick:ke,firstListItem:ot,withLinks:Ye=!1}=Ke,ut=(0,n.qD)(),At=T(),[Ft,ue]=(0,G.useState)([]),ye=Oe=>{ue(He=>He.includes(Oe)?He.filter(rt=>rt!==Oe):He.concat(Oe))};return G.createElement(B.Z,null,ot,nt.map(Oe=>G.createElement(G.Fragment,{key:Oe.target},G.createElement(k.Z,{dense:!0,button:Boolean(ke),onClick:()=>ke==null?void 0:ke(Oe.target)},G.createElement(X.Z,null,Ee(Oe.target)),G.createElement(A.Z,{primary:Oe.target,secondary:`Entities: ${Oe.entities.length}`}),oe&&G.createElement(D.Z,null,G.createElement(N.Z,{edge:"end",onClick:()=>ye(Oe.target)},Ft.includes(Oe.target)?G.createElement(je.Z,null):G.createElement(P.Z,null)))),G.createElement(p.Z,{in:!oe||Ft.includes(Oe.target),timeout:"auto",unmountOnExit:!0},G.createElement(B.Z,{component:"div",disablePadding:!0,dense:!0},M(Oe.entities).map(He=>{var rt;const Pt=(rt=ut.getSystemIcon(`kind:${He.kind.toLocaleLowerCase("en-US")}`))!=null?rt:Ue.Z;return G.createElement(k.Z,{key:(0,m.$3)(He),className:At.nested,...Ye?{component:m.dx,entityRef:He,button:Ye}:{}},G.createElement(X.Z,null,G.createElement(Pt,null)),G.createElement(A.Z,{primary:(0,m.$3)(He)}))}))))))},ne=({prepareResult:Ke,onReset:nt})=>{const oe=G.createElement(h.Z,{container:!0,spacing:0},G.createElement(Pe,{onClick:nt},"Register another"));if(Ke.type==="repository")return G.createElement(G.Fragment,null,G.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",G.createElement(_.rU,{to:Ke.pullRequest.url,target:"_blank",rel:"noreferrer"},Ke.pullRequest.url)),G.createElement(t.Z,{paragraph:!0},"Your entities will be imported as soon as the Pull Request is merged."),oe);const[Ee,ke]=R()(Ke.locations,ot=>ot.exists);return G.createElement(G.Fragment,null,ke.length>0&&G.createElement(G.Fragment,null,G.createElement(t.Z,null,"The following entities have been added to the catalog:"),G.createElement(J,{locations:ke,locationListItemIcon:()=>G.createElement(Et.Z,null),withLinks:!0})),Ee.length>0&&G.createElement(G.Fragment,null,G.createElement(t.Z,null,"A refresh was triggered for the following locations:"),G.createElement(J,{locations:Ee,locationListItemIcon:()=>G.createElement(Et.Z,null),withLinks:!0})),oe)},re=Ke=>{const{onAnalysis:nt,analysisUrl:oe="",disablePullRequest:Ee=!1,exampleLocationUrl:ke="https://github.com/backstage/backstage/blob/master/catalog-info.yaml"}=Ke,ot=(0,n.h_)(n.VE),Ye=(0,n.h_)(o),{register:ut,handleSubmit:At,formState:{errors:Ft},watch:ue}=(0,W.cI)({mode:"onTouched",defaultValues:{url:oe}}),[ye,Oe]=(0,G.useState)(!1),[He,rt]=(0,G.useState)(void 0),Pt=(0,G.useCallback)(async({url:Ot})=>{var jt,pn,_n;Oe(!0);try{const bn=await Ye.analyzeUrl(Ot);switch(bn.type){case"repository":!Ee&&bn.generatedEntities.length>0?nt("no-location",Ot,bn):(rt("Couldn't generate entities for your repository"),Oe(!1));break;case"locations":{bn.locations.length===1?nt("single-location",Ot,bn,{prepareResult:bn}):bn.locations.length>1?nt("multiple-locations",Ot,bn):(rt("There are no entities at this location"),Oe(!1));break}default:{const $n=`Received unknown analysis result of type ${bn.type}. Please contact the support team.`;rt($n),Oe(!1),ot.post(new Error($n));break}}}catch(bn){rt((_n=(pn=(jt=bn==null?void 0:bn.data)==null?void 0:jt.error)==null?void 0:pn.message)!=null?_n:bn.message),Oe(!1)}},[Ye,Ee,ot,nt]);return G.createElement("form",{onSubmit:At(Pt)},G.createElement(b.Z,{...be(ut("url",{required:!0,validate:{httpsValidator:Ot=>typeof Ot=="string"&&Ot.match(/^http[s]?:\/\//)!==null||"Must start with http:// or https://."}})),fullWidth:!0,id:"url",label:"Repository URL",placeholder:ke,helperText:"Enter the full path to your entity file to start tracking your component",margin:"normal",variant:"outlined",error:Boolean(Ft.url),required:!0}),Ft.url&&G.createElement(E.Z,{error:!0},Ft.url.message),He&&G.createElement(E.Z,{error:!0},He),G.createElement(h.Z,{container:!0,spacing:0},G.createElement(Je,{disabled:Boolean(Ft.url)||!ue("url"),loading:ye,type:"submit"},"Analyze")))},Ae=Ke=>{const{name:nt,options:oe,required:Ee,errors:ke,rules:ot,loading:Ye=!1,loadingText:ut,helperText:At,errorHelperText:Ft,textFieldProps:ue={}}=Ke;return G.createElement(W.Qr,{name:nt,rules:ot,render:({field:{onChange:ye}})=>G.createElement(ge.ZP,{loading:Ye,loadingText:ut,options:oe||[],autoSelect:!0,freeSolo:!0,onChange:(Oe,He)=>ye(He),renderInput:Oe=>G.createElement(b.Z,{...Oe,helperText:(ke==null?void 0:ke[nt])&&Ft||At,error:Boolean(ke==null?void 0:ke[nt]),margin:"normal",variant:"outlined",required:Ee,InputProps:{...Oe.InputProps,endAdornment:G.createElement(G.Fragment,null,Ye?G.createElement(F.Z,{color:"inherit",size:"1em"}):null,Oe.InputProps.endAdornment)},...ue})})})},Ie=Ke=>{const{defaultValues:nt,onSubmit:oe,render:Ee}=Ke,ke=(0,W.cI)({mode:"onTouched",defaultValues:nt}),{handleSubmit:ot,watch:Ye,control:ut,register:At,formState:Ft,setValue:ue}=ke;return G.createElement(W.RV,{...ke},G.createElement("form",{onSubmit:ot(oe)},Ee({values:Ye(),formState:Ft,register:At,control:ut,setValue:ue})))},Ve=Ke=>{const{repositoryUrl:nt,entities:oe,classes:Ee}=Ke,ke=mn();return G.createElement(S.Z,{variant:"outlined",className:Ee==null?void 0:Ee.card},G.createElement(K.Z,{title:G.createElement("code",null,`${(0,et.trimEnd)(nt,"/")}/${ke}`)}),G.createElement(pe.Z,{className:Ee==null?void 0:Ee.cardContent},G.createElement(_.Oi,{text:oe.map(ot=>Me.ZP.stringify(ot)).join(`---
`).trim(),language:"yaml"})))},at=Ke=>{const{title:nt,description:oe,classes:Ee}=Ke;return G.createElement(S.Z,{variant:"outlined",className:Ee==null?void 0:Ee.card},G.createElement(K.Z,{title:nt,subheader:"Create a new Pull Request"}),G.createElement(pe.Z,{className:Ee==null?void 0:Ee.cardContent},G.createElement(_.SA,{content:oe})))},Se=(0,fn.Z)(Ke=>({previewCard:{marginTop:Ke.spacing(1)},previewCardContent:{paddingTop:0}}));function te(Ke,nt,oe){return Ke.map(Ee=>({...Ee,apiVersion:Ee.apiVersion,kind:Ee.kind,metadata:{...Ee.metadata,name:nt},spec:{...Ee.spec,...oe?{owner:oe}:{}}}))}const ae=Ke=>{var nt,oe,Ee,ke,ot,Ye;const{analyzeResult:ut,onPrepare:At,onGoBack:Ft,renderFormFields:ue}=Ke,ye=Se(),Oe=(0,n.h_)(m.Ah),He=(0,n.h_)(o),rt=(0,n.h_)(n.VE),[Pt,Ot]=(0,G.useState)(!1),[jt,pn]=(0,G.useState)(),_n=mn(),{loading:bn,value:$n,error:Jn}=(0,Dt.default)(()=>He.preparePullRequest(),[He.preparePullRequest]);(0,G.useEffect)(()=>{Jn&&rt.post(Jn)},[Jn,rt]);const{loading:Dn,value:Un}=(0,Dt.default)(async()=>(await Oe.getEntities({filter:{kind:"group"}})).items.map(Pn=>(0,m.$3)(Pn,{defaultKind:"group"})).sort()),hn=(0,G.useCallback)(async Bn=>{Ot(!0);try{const Pn=await He.submitPullRequest({repositoryUrl:ut.url,title:Bn.title,body:Bn.body,fileContent:te(ut.generatedEntities,Bn.componentName,Bn.owner).map(yn=>Me.ZP.stringify(yn)).join(`---
`)});At({type:"repository",url:ut.url,integrationType:ut.integrationType,pullRequest:{url:Pn.link},locations:[{target:Pn.location,entities:te(ut.generatedEntities,Bn.componentName,Bn.owner).map(yn=>({kind:yn.kind,namespace:yn.metadata.namespace,name:yn.metadata.name}))}]},{notRepeatable:!0})}catch(Pn){(0,mt.BD)(Pn),pn(Pn.message),Ot(!1)}},[ut.generatedEntities,ut.integrationType,ut.url,He,At]);return G.createElement(G.Fragment,null,G.createElement(t.Z,null,"You entered a link to a ",ut.integrationType," repository but a"," ",G.createElement("code",null,_n)," could not be found. Use this form to open a Pull Request that creates one."),!bn&&G.createElement(Ie,{onSubmit:hn,defaultValues:{title:(nt=$n==null?void 0:$n.title)!=null?nt:"",body:(oe=$n==null?void 0:$n.body)!=null?oe:"",owner:((ke=(Ee=ut.generatedEntities[0])==null?void 0:Ee.spec)==null?void 0:ke.owner)||"",componentName:((Ye=(ot=ut.generatedEntities[0])==null?void 0:ot.metadata)==null?void 0:Ye.name)||"",useCodeowners:!1},render:({values:Bn,formState:Pn,register:yn,setValue:Kn})=>G.createElement(G.Fragment,null,ue({values:Bn,formState:Pn,register:yn,setValue:Kn,groups:Un!=null?Un:[],groupsLoading:Dn}),G.createElement(he.Z,{marginTop:2},G.createElement(t.Z,{variant:"h6"},"Preview Pull Request")),G.createElement(at,{title:Bn.title,description:Bn.body,classes:{card:ye.previewCard,cardContent:ye.previewCardContent}}),G.createElement(he.Z,{marginTop:2,marginBottom:1},G.createElement(t.Z,{variant:"h6"},"Preview Entities")),G.createElement(Ve,{entities:te(ut.generatedEntities,Bn.componentName,Bn.owner),repositoryUrl:ut.url,classes:{card:ye.previewCard,cardContent:ye.previewCardContent}}),jt&&G.createElement(E.Z,{error:!0},jt),G.createElement(h.Z,{container:!0,spacing:0},Ft&&G.createElement(Pe,{onClick:Ft,disabled:Pt}),G.createElement(Je,{type:"submit",disabled:Boolean(Pn.errors.title||Pn.errors.body||Pn.errors.owner),loading:Pt},"Create PR")))}))},Be=({analyzeResult:Ke,prepareResult:nt,onPrepare:oe,onGoBack:Ee})=>{const[ke,ot]=(0,G.useState)((nt==null?void 0:nt.locations.map(ye=>ye.target))||[]),[Ye,ut]=R()(Ke==null?void 0:Ke.locations,ye=>ye.exists),At=(0,G.useCallback)(async()=>{oe({type:"locations",locations:ut.filter(ye=>ke.includes(ye.target))})},[ut,oe,ke]),Ft=ye=>{ot(Oe=>Oe.includes(ye)?Oe.filter(He=>He!==ye):Oe.concat(ye))},ue=()=>{ot(ye=>ye.length<ut.length?ut.map(Oe=>Oe.target):[])};return G.createElement(G.Fragment,null,ut.length>0&&G.createElement(G.Fragment,null,G.createElement(t.Z,null,"Select one or more locations that are present in your git repository:"),G.createElement(J,{firstListItem:G.createElement(k.Z,{dense:!0,button:!0,onClick:ue},G.createElement(X.Z,null,G.createElement(Fe.Z,{edge:"start",checked:ke.length===ut.length,indeterminate:ke.length>0&&ke.length<ut.length,tabIndex:-1,disableRipple:!0})),G.createElement(A.Z,{primary:"Select All"})),onItemClick:Ft,locations:ut,locationListItemIcon:ye=>G.createElement(Fe.Z,{edge:"start",checked:ke.includes(ye),tabIndex:-1,disableRipple:!0}),collapsed:!0})),Ye.length>0&&G.createElement(G.Fragment,null,G.createElement(t.Z,null,"These locations already exist in the catalog:"),G.createElement(J,{locations:Ye,locationListItemIcon:()=>G.createElement(Et.Z,null),withLinks:!0,collapsed:!0})),G.createElement(h.Z,{container:!0,spacing:0},Ee&&G.createElement(Pe,{onClick:Ee}),G.createElement(Je,{disabled:ke.length===0,onClick:At},"Review")))},tt=({prepareResult:Ke,onReview:nt,onGoBack:oe})=>{const Ee=(0,n.h_)(m.Ah),ot=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage",[Ye,ut]=(0,G.useState)(!1),[At,Ft]=(0,G.useState)(),ue=!!(Ke.type==="locations"&&Ke.locations.some(Oe=>Oe.exists)),ye=(0,G.useCallback)(async()=>{ut(!0);try{let Oe=new Array;Ke.type==="locations"&&(Oe=await Promise.all(Ke.locations.filter(rt=>rt.exists).map(async rt=>{var Pt;const Ot=(0,ie.eE)((Pt=rt.entities[0])!=null?Pt:rt);return await Ee.refreshEntity(Ot),{target:rt.target}})));const He=await Promise.all(Ke.locations.filter(rt=>!rt.exists).map(async rt=>{const Pt=await Ee.addLocation({type:"url",target:rt.target});return{target:Pt.location.target,entities:Pt.entities}}));nt({...Ke,refreshed:Oe,locations:He})}catch(Oe){(0,mt.BD)(Oe),Ke.type==="repository"&&Oe.message.startsWith("Location was added but has no entities specified yet")?nt({...Ke,locations:Ke.locations.map(He=>({target:He.target,entities:[]}))}):(Ft(Oe.message),ut(!1))}},[Ke,nt,Ee]);return G.createElement(G.Fragment,null,Ke.type==="repository"&&G.createElement(G.Fragment,null,G.createElement(t.Z,{paragraph:!0},"The following Pull Request has been opened:"," ",G.createElement(_.rU,{to:Ke.pullRequest.url,target:"_blank",rel:"noopener noreferrer"},Ke.pullRequest.url)),G.createElement(t.Z,{paragraph:!0},"You can already import the location and ",ot," will fetch the entities as soon as the Pull Request is merged.")),G.createElement(t.Z,null,ue?"The following locations already exist in the catalog:":"The following entities will be added to the catalog:"),G.createElement(J,{locations:Ke.locations,locationListItemIcon:()=>G.createElement(Et.Z,null)}),At&&G.createElement(E.Z,{error:!0},At),G.createElement(h.Z,{container:!0,spacing:0},oe&&G.createElement(Pe,{onClick:oe,disabled:Ye}),G.createElement(Je,{disabled:Ye,loading:Ye,onClick:()=>ye()},ue?"Refresh":"Import")))};function ft(Ke,nt){switch(Ke){case"single-location":return{...nt,prepare:()=>({stepLabel:G.createElement(ct.Z,{optional:G.createElement(t.Z,{variant:"caption"},"Discovered Locations: 1")},"Select Locations"),content:G.createElement(G.Fragment,null)})};case"multiple-locations":return{...nt,prepare:(oe,Ee)=>oe.analyzeResult.type!=="locations"?nt.prepare(oe,Ee):{stepLabel:G.createElement(ct.Z,{optional:G.createElement(t.Z,{variant:"caption"},"Discovered Locations: ",oe.analyzeResult.locations.length)},"Select Locations"),content:G.createElement(Be,{analyzeResult:oe.analyzeResult,prepareResult:oe.prepareResult,onPrepare:oe.onPrepare,onGoBack:oe.onGoBack})}};case"no-location":return{...nt,prepare:(oe,Ee)=>oe.analyzeResult.type!=="repository"?nt.prepare(oe,Ee):{stepLabel:G.createElement(ct.Z,null,"Create Pull Request"),content:G.createElement(ae,{analyzeResult:oe.analyzeResult,onPrepare:oe.onPrepare,onGoBack:oe.onGoBack,renderFormFields:({values:ke,setValue:ot,formState:Ye,groupsLoading:ut,groups:At,register:Ft})=>G.createElement(G.Fragment,null,G.createElement(he.Z,{marginTop:2},G.createElement(t.Z,{variant:"h6"},"Pull Request Details")),G.createElement(b.Z,{...be(Ft("title",{required:!0})),label:"Pull Request Title",placeholder:"Add Backstage catalog entity descriptor files",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ye.errors.title),required:!0}),G.createElement(b.Z,{...be(Ft("body",{required:!0})),label:"Pull Request Body",placeholder:"A describing text with Markdown support",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ye.errors.body),multiline:!0,required:!0}),G.createElement(he.Z,{marginTop:2},G.createElement(t.Z,{variant:"h6"},"Entity Configuration")),G.createElement(b.Z,{...be(Ft("componentName",{required:!0})),label:"Name of the created component",placeholder:"my-component",margin:"normal",variant:"outlined",fullWidth:!0,error:Boolean(Ye.errors.componentName),required:!0}),!ke.useCodeowners&&G.createElement(Ae,{name:"owner",errors:Ye.errors,options:At||[],loading:ut,loadingText:"Loading groups\u2026",helperText:"Select an owner from the list or enter a reference to a Group or a User",errorHelperText:"required value",textFieldProps:{label:"Entity Owner",placeholder:"my-group"},rules:{required:!0},required:!0}),G.createElement(Ut.Z,{control:G.createElement(Fe.Z,{...be(Ft("useCodeowners")),onChange:(ue,ye)=>{ye&&ot("owner","")}}),label:G.createElement(G.Fragment,null,"Use ",G.createElement("em",null,"CODEOWNERS")," file as Entity Owner")}),G.createElement(E.Z,null,"WARNING: This may fail if no CODEOWNERS file is found at the target location."))})}};default:return nt}}const bt={analyze:(Ke,{apis:nt})=>({stepLabel:G.createElement(ct.Z,null,"Select URL"),content:G.createElement(re,{key:"analyze",analysisUrl:Ke.analysisUrl,onAnalysis:Ke.onAnalysis,disablePullRequest:!nt.catalogImportApi.preparePullRequest})}),prepare:Ke=>({stepLabel:G.createElement(ct.Z,{optional:G.createElement(t.Z,{variant:"caption"},"Optional")},"Import Actions"),content:G.createElement(Pe,{onClick:Ke.onGoBack})}),review:Ke=>({stepLabel:G.createElement(ct.Z,null,"Review"),content:G.createElement(tt,{prepareResult:Ke.prepareResult,onReview:Ke.onReview,onGoBack:Ke.onGoBack})}),finish:Ke=>({stepLabel:G.createElement(ct.Z,null,"Finish"),content:G.createElement(ne,{prepareResult:Ke.prepareResult,onReset:Ke.onReset})})},rn=(0,fn.Z)(()=>({stepperRoot:{padding:0}})),Gt=Ke=>{const{initialUrl:nt,generateStepper:oe=ft,variant:Ee}=Ke,ke=(0,n.h_)(o),ot=rn(),Ye=$e({initialUrl:nt}),ut=(0,G.useMemo)(()=>oe(Ye.activeFlow,bt),[oe,Ye.activeFlow]),At=Ft=>G.createElement(dt.Z,null,Ft.stepLabel,G.createElement(Wt.Z,null,Ft.content));return G.createElement(_.rJ,{variant:Ee},G.createElement(Ct.Z,{classes:{root:ot.stepperRoot},activeStep:Ye.activeStepNumber,orientation:"vertical"},At(ut.analyze(Ye,{apis:{catalogImportApi:ke}})),At(ut.prepare(Ye,{apis:{catalogImportApi:ke}})),At(ut.review(Ye,{apis:{catalogImportApi:ke}})),At(ut.finish(Ye,{apis:{catalogImportApi:ke}}))))},gn=()=>{const nt=(0,n.h_)(n.Ds).getOptional("app.title")||"Backstage";return G.createElement(_.T3,{themeId:"home"},G.createElement(_.h4,{title:"Register an existing component"}),G.createElement(_.VY,null,G.createElement(_.yW,{title:`Start tracking your component in ${nt}`},G.createElement(_.qt,null,"Start tracking your component in ",nt," by adding it to the software catalog.")),G.createElement(h.Z,{container:!0,spacing:2,direction:"row-reverse"},G.createElement(h.Z,{item:!0,xs:12,md:4,lg:6,xl:8},G.createElement(dn,null)),G.createElement(h.Z,{item:!0,xs:12,md:8,lg:6,xl:4},G.createElement(Gt,null)))))}},52963:function(Kt,d,e){e.d(d,{N:function(){return t}});var n=e(34520),c=e(56563),m=e(30705),u=e(18473),r=e(2784);function l(y,f,F){var B;let k=((B=y==null?void 0:y.relations)==null?void 0:B.filter(X=>X.type===f).map(X=>parseEntityRef(X.targetRef)))||[];return F!=null&&F.kind&&(k=k.filter(X=>X.kind.toLocaleLowerCase("en-US")===F.kind.toLocaleLowerCase("en-US"))),k}function C(y,f){const F=new Set([...l(y,RELATION_MEMBER_OF,{kind:"group"}),...y?[getCompoundEntityRef(y)]:[]].map(stringifyEntityRef)),B=l(f,RELATION_OWNED_BY).map(stringifyEntityRef);for(const k of B)if(F.has(k))return!0;return!1}(0,u.CT)("entity-context");function _(){const y=(0,u.Vt)("entity-context");if(!y)throw new Error("Entity context is not available");const f=y.atVersion(1);if(!f)throw new Error("EntityContext v1 not available");const{entity:F,loading:B,error:k,refresh:X}=f;return{entity:F,loading:B,error:k,refresh:X}}function t(y){const{entity:f,loading:F,error:B}=_(),{allowed:k,loading:X,error:A}=(0,c.gI)({permission:y,resourceRef:f?(0,n.eE)(f):void 0});return F||X?{loading:!0,allowed:!1}:B?{loading:!1,allowed:!1,error:B}:{loading:!1,allowed:k,error:A}}},73495:function(Kt,d,e){e.d(d,{$3:function(){return gn},Ah:function(){return te},CR:function(){return yn},CV:function(){return Ye},EW:function(){return ba},LH:function(){return I},UO:function(){return Jn},U_:function(){return ia},Uh:function(){return Un},X2:function(){return _n},ZW:function(){return zn},_i:function(){return bt},ce:function(){return bn},df:function(){return Qa},dq:function(){return Z},dx:function(){return Ke},eK:function(){return Bn},h$:function(){return jt},hF:function(){return ot},hd:function(){return Gt},n3:function(){return n.n3},nN:function(){return kt},nl:function(){return or},p3:function(){return ae},pp:function(){return da},rI:function(){return oe},sL:function(){return i},tW:function(){return Ga},u3:function(){return kn},wi:function(){return rn},wp:function(){return Dn},xE:function(){return j}});var n=e(88285),c=e(30705),m=e(82394),u=e.n(m),r=e(2784),l=e(41156),C=e(60364),_=e(77277),t=e(4190),y=e(95544),f=e(90436),F=e(60905),B=e(80030),k=e(79692),X=e(5806),A=e(21324),D=e(86619),N=e(15223),p=e(42494),h=e(29611),b=e(50581),E=e(61837),S=e(15459),K=e(55999),pe=e(49378),he=e(54506),Fe=e(94339),ct=e(24579),Ut=e(38402),dt=e(86136),Wt=e(11776),Ct=e(8629),G=e(79249),fn=e(38724),Et=e(99152),je=e(6487),P=e(49429),Ue=e(85256),H=e(12231),R=e(9520),W=e(36444),ge=e(49558),Me=e(34520),et=e(18473),pt=e(64279),mt=e(76635),Dt=e.n(mt),ie=e(19126),o=e.n(ie),xe=e(73557),be=e(69294),Rt=e(48760),vt=e(90736),Vt=e(18149),de=e.n(Vt),Tt=e(829),xt=e.n(Tt),ln=e(72164),mn=e(19996),dn=e(25505),Ln=e(38016),it=e(88013),$e=e(99688),Zt=e(33375),Je=e(21853),Pe=e(72779),T=e.n(Pe),M=e(11640),J=e(28347),ne=e(39412),re=e(27685),Ae=e(3440),Ie=e.n(Ae),Ve=e(72847),at=e(32272),Se=e(47603);const te=(0,c.T0)({id:"plugin.catalog.service"}),ae=(0,c.T0)({id:"catalog-react.starred-entities"});class Be{constructor(){this.starredEntities=new Set,this.subscribers=new Set,this.observable=new ObservableImpl(le=>(le.next(new Set(this.starredEntities)),this.subscribers.add(le),()=>{this.subscribers.delete(le)}))}async toggleStarred(le){this.starredEntities.delete(le)||this.starredEntities.add(le);for(const De of this.subscribers)De.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const tt=Y=>{const le=(0,l.Z)(yt=>yt.breakpoints.down("md")),De=(0,C.Z)(),[Te,Xe]=(0,r.useState)(!1);return le?r.createElement(r.Fragment,null,r.createElement(_.Z,{style:{marginTop:De.spacing(1),marginLeft:De.spacing(1)},onClick:()=>Xe(!0),startIcon:r.createElement(W.Z,null)},"Filters"),r.createElement(t.ZP,{open:Te,onClose:()=>Xe(!1),anchor:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},r.createElement(y.Z,{m:2},r.createElement(f.Z,{variant:"h6",component:"h2",style:{marginBottom:De.spacing(1)}},"Filters"),Y.children))):r.createElement(F.Z,{item:!0,lg:2},Y.children)},ft=Y=>r.createElement(F.Z,{item:!0,xs:12,lg:10},Y.children),bt=Y=>r.createElement(F.Z,{container:!0,style:{position:"relative"}},Y.children);bt.Filters=tt,bt.Content=ft;const rn=(0,et.uW)("catalog:entity-route-ref",()=>(0,c.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Gt(Y){var le,De;return{kind:Y.kind.toLocaleLowerCase("en-US"),namespace:(De=(le=Y.metadata.namespace)==null?void 0:le.toLocaleLowerCase("en-US"))!=null?De:Me.zG,name:Y.metadata.name}}function gn(Y,le){const De=le==null?void 0:le.defaultKind;let Te,Xe,yt;return"metadata"in Y?(Te=Y.kind,Xe=Y.metadata.namespace,yt=Y.metadata.name):(Te=Y.kind,Xe=Y.namespace,yt=Y.name),(Xe===void 0||Xe==="")&&(Xe=Me.zG),(le==null?void 0:le.defaultNamespace)!==void 0?(le==null?void 0:le.defaultNamespace)===Xe&&(Xe=void 0):Xe===Me.zG&&(Xe=void 0),Te=Te.toLocaleLowerCase("en-US"),Te=De&&De.toLocaleLowerCase("en-US")===Te?void 0:Te,`${Te?`${Te}:`:""}${Xe?`${Xe}/`:""}${yt}`}const Ke=(0,r.forwardRef)((Y,le)=>{var De;const{entityRef:Te,defaultKind:Xe,title:yt,children:St,...gt}=Y,nn=(0,c.tg)(rn);let Xt,qt,en;if(typeof Te=="string"){const sn=(0,Me.of)(Te);Xt=sn.kind,qt=sn.namespace,en=sn.name}else"metadata"in Te?(Xt=Te.kind,qt=Te.metadata.namespace,en=Te.metadata.name):(Xt=Te.kind,qt=Te.namespace,en=Te.name);Xt=Xt.toLocaleLowerCase("en-US"),qt=(De=qt==null?void 0:qt.toLocaleLowerCase("en-US"))!=null?De:Me.zG;const Zn={kind:Xt,namespace:qt,name:en},Hn=gn({kind:Xt,namespace:qt,name:en},{defaultKind:Xe}),wn=r.createElement(ge.rU,{...gt,ref:le,to:nn(Zn)},St,!St&&(yt!=null?yt:Hn));return yt?r.createElement(B.ZP,{title:Hn},wn):wn});function nt(Y){const{entityRefs:le,defaultKind:De,getTitle:Te,...Xe}=Y,yt=(0,c.h_)(te),{value:St=new Array,loading:gt,error:nn}=(0,pt.default)(async()=>{const Xt=le.reduce((en,Zn)=>"metadata"in Zn?en:[...en,(0,Me.of)(Zn)],new Array),qt=le.filter(en=>"metadata"in en);return Xt.length>0?[...(await yt.getEntities({filter:Xt.map(en=>({kind:en.kind,"metadata.namespace":en.namespace,"metadata.name":en.name}))})).items,...qt]:qt},[le]);return gt?r.createElement(ge.Ex,null):nn?r.createElement(ge.yu,{error:nn}):r.createElement(r.Fragment,null,St.map((Xt,qt)=>r.createElement(r.Fragment,{key:qt},qt>0&&", ",r.createElement(Ke,{...Xe,defaultKind:De,entityRef:Xt,title:Te(Xt)}))))}function oe(Y){const{entityRefs:le,defaultKind:De,fetchEntities:Te,getTitle:Xe,...yt}=Y;return Te?r.createElement(nt,{...yt,defaultKind:De,entityRefs:le,getTitle:Xe}):r.createElement(r.Fragment,null,le.map((St,gt)=>r.createElement(r.Fragment,{key:gt},gt>0&&", ",r.createElement(Ke,{...yt,defaultKind:De,entityRef:St,title:Xe?Xe(St):void 0}))))}function Ee(Y){return Y.reduce((le,De)=>({...le,...De.getCatalogFilters?De.getCatalogFilters():{}}),{})}function ke(Y){return le=>Y.every(De=>!De.filterEntity||De.filterEntity(le))}function ot(Y,le,De){var Te;let Xe=((Te=Y==null?void 0:Y.relations)==null?void 0:Te.filter(yt=>yt.type===le).map(yt=>(0,Me.of)(yt.targetRef)))||[];return De!=null&&De.kind&&(Xe=Xe.filter(yt=>yt.kind.toLocaleLowerCase("en-US")===De.kind.toLocaleLowerCase("en-US"))),Xe}function Ye(Y,le){var De;const Te=(De=Y.metadata.annotations)==null?void 0:De[Me.M6];if(Te)try{const Xe=(0,Me.Ou)(Te),yt=le.byUrl(Xe.target);return{locationTargetUrl:Xe.target,integrationType:yt==null?void 0:yt.type}}catch{return}}class ut{constructor(le){this.value=le}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class At{constructor(le){this.value=le}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class Ft{constructor(le){this.values=le}filterEntity(le){return this.values.every(De=>{var Te;return((Te=le.metadata.tags)!=null?Te:[]).includes(De)})}toQueryValue(){return this.values}}class ue{constructor(le){this.value=le}filterEntity(le){const De=this.toUpperArray(this.value.split(/\s/)),Te=this.toUpperArray([le.metadata.tags]),Xe=this.toUpperArray([le.metadata.name,le.metadata.title]);for(const yt of De)if(Te.every(St=>St!==yt)&&Xe.every(St=>!St.includes(yt)))return!1;return!0}toUpperArray(le){return le.flat().filter(De=>Boolean(De)).map(De=>De.toLocaleUpperCase("en-US"))}}class ye{constructor(le){this.values=le}filterEntity(le){return this.values.some(De=>ot(le,Me.S4).some(Te=>gn(Te,{defaultKind:"group"})===De))}toQueryValue(){return this.values}}class Oe{constructor(le){this.values=le}filterEntity(le){return this.values.some(De=>{var Te;return((Te=le.spec)==null?void 0:Te.lifecycle)===De})}toQueryValue(){return this.values}}class He{constructor(le,De,Te){this.value=le,this.isOwnedEntity=De,this.isStarredEntity=Te}filterEntity(le){switch(this.value){case"owned":return this.isOwnedEntity(le);case"starred":return this.isStarredEntity(le);default:return!0}}toQueryValue(){return this.value}}class rt{constructor(le){this.value=le}filterEntity(le){var De;const Te=(De=le.metadata.annotations)==null?void 0:De["backstage.io/orphan"];return Te!==void 0&&this.value.toString()===Te}}class Pt{constructor(le){this.value=le}filterEntity(le){var De,Te;const Xe=((Te=(De=le==null?void 0:le.status)==null?void 0:De.items)==null?void 0:Te.length)>0;return Xe!==void 0&&this.value===Xe}}const Ot=(0,et.CT)("entity-context"),jt=Y=>{const{children:le,entity:De,loading:Te,error:Xe,refresh:yt}=Y,St={entity:De,loading:Te,error:Xe,refresh:yt};return r.createElement(Ot.Provider,{value:(0,et.EI)({1:St})},r.createElement(c.fC,{attributes:{...De?{entityRef:(0,Me.eE)(De)}:void 0}},le))},pn=Y=>React.createElement(jt,{entity:Y.entity,loading:!Boolean(Y.entity),error:void 0,refresh:void 0,children:Y.children});function _n(){const Y=(0,et.Vt)("entity-context");if(!Y)throw new Error("Entity context is not available");const le=Y.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");if(!le.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:le.entity}}function bn(){const Y=(0,et.Vt)("entity-context");if(!Y)throw new Error("Entity context is not available");const le=Y.atVersion(1);if(!le)throw new Error("EntityContext v1 not available");const{entity:De,loading:Te,error:Xe,refresh:yt}=le;return{entity:De,loading:Te,error:Xe,refresh:yt}}const $n=(0,r.createContext)(void 0),Jn=Y=>{const le=(0,vt.default)(),De=(0,c.h_)(te),[Te,Xe]=(0,r.useState)({}),yt=(0,xe.TH)(),St=(0,r.useMemo)(()=>{var wn;return(wn=o().parse(yt.search,{ignoreQueryPrefix:!0}).filters)!=null?wn:{}},[yt]),[gt,nn]=(0,r.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[]})),[{loading:Xt,error:qt},en]=(0,be.default)(async()=>{var wn;const sn=(0,mt.compact)(Object.values(Te)),qn=ke(sn),ma=Ee(sn),za=Ee((0,mt.compact)(Object.values(gt.appliedFilters))),wa=Object.keys(Te).reduce((ja,ir)=>{const Ya=Te[ir];return Ya!=null&&Ya.toQueryValue&&(ja[ir]=Ya.toQueryValue()),ja},{});if((0,mt.isEqual)(za,ma))nn({appliedFilters:Te,backendEntities:gt.backendEntities,entities:gt.backendEntities.filter(qn)});else{const ja=await De.getEntities({filter:ma});nn({appliedFilters:Te,backendEntities:ja.items,entities:ja.items.filter(qn)})}if(le()){const ja=o().parse(yt.search,{ignoreQueryPrefix:!0}),ir=o().stringify({...ja,filters:wa},{addQueryPrefix:!0,arrayFormat:"repeat"}),Ya=`${window.location.pathname}${ir}`;(wn=window.history)==null||wn.replaceState(null,document.title,Ya)}},[De,St,Te,gt],{loading:!0});(0,Rt.Z)(en,10,[Te]);const Zn=(0,r.useCallback)(wn=>{Xe(sn=>{const qn=typeof wn=="function"?wn(sn):wn;return{...sn,...qn}})},[]),Hn=(0,r.useMemo)(()=>({filters:gt.appliedFilters,entities:gt.entities,backendEntities:gt.backendEntities,updateFilters:Zn,queryParameters:St,loading:Xt,error:qt}),[gt,Zn,St,Xt,qt]);return r.createElement($n.Provider,{value:Hn},Y.children)};function Dn(){const Y=(0,r.useContext)($n);if(!Y)throw new Error("useEntityList must be used within EntityListProvider");return Y}function Un(){var Y;const le=(0,c.h_)(te),{filters:{kind:De,type:Te},queryParameters:{type:Xe},updateFilters:yt}=Dn(),St=(0,r.useMemo)(()=>[Xe].flat().filter(Boolean),[Xe]),[gt,nn]=(0,r.useState)(St.length?St:(Y=Te==null?void 0:Te.getTypes())!=null?Y:[]);(0,r.useEffect)(()=>{St.length&&nn(St)},[St]);const[Xt,qt]=(0,r.useState)([]),en=(0,r.useMemo)(()=>De==null?void 0:De.value,[De]),{error:Zn,loading:Hn,value:wn}=(0,pt.default)(async()=>en?await le.getEntityFacets({filter:{kind:en},facets:["spec.type"]}).then(ma=>ma.facets["spec.type"]||[]):[],[en,le]),sn=(0,r.useRef)(wn);return(0,r.useEffect)(()=>{const qn=sn.current;if(sn.current=wn,Hn||!en||qn===wn||!wn)return;const ma=[...new Set(xt()(wn,wa=>-wa.count).map(wa=>wa.value.toLocaleLowerCase("en-US")))];qt(ma);const za=gt.filter(wa=>ma.includes(wa));de()(gt,za)||nn(za)},[Hn,en,gt,nn,wn]),(0,r.useEffect)(()=>{yt({type:gt.length?new At(gt):void 0})},[gt,yt]),{loading:Hn,error:Zn,availableTypes:Xt,selectedTypes:gt,setSelectedTypes:nn}}const hn=20;function Bn(Y,le){var De,Te;const Xe=(De=le==null?void 0:le.type)==null?void 0:De.toLocaleLowerCase("en-US"),yt=(Te=le==null?void 0:le.kind)==null?void 0:Te.toLocaleLowerCase("en-US"),St=(0,c.h_)(te),{loading:gt,value:nn,error:Xt}=(0,pt.default)(async()=>{var qt;const en=(qt=Y.relations)==null?void 0:qt.map(sn=>({type:sn.type,target:(0,Me.of)(sn.targetRef)})).filter(sn=>(!Xe||sn.type.toLocaleLowerCase("en-US")===Xe)&&(!yt||sn.target.kind===yt));if(!en)return[];const Zn=Object.values((0,mt.groupBy)(en,({target:sn})=>`${sn.kind}:${sn.namespace}`.toLocaleLowerCase("en-US"))),Hn=[];for(const sn of Zn)Hn.push({kind:sn[0].target.kind,namespace:sn[0].target.namespace,nameBatches:(0,mt.chunk)(sn.map(qn=>qn.target.name),hn)});return(await Promise.all(Hn.flatMap(sn=>sn.nameBatches.map(qn=>St.getEntities({filter:{kind:sn.kind,"metadata.namespace":sn.namespace,"metadata.name":qn}}))))).flatMap(sn=>sn.items)},[Y,Xe,yt]);return{entities:nn,loading:gt,error:Xt}}function Pn(Y){return typeof Y=="string"?Y:(0,Me.eE)(Y)}function yn(){const Y=(0,c.h_)(ae),le=(0,ln.Z)(Y.starredEntitie$(),new Set),De=(0,r.useCallback)(Xe=>le.has(Pn(Xe)),[le]),Te=(0,r.useCallback)(Xe=>Y.toggleStarred(Pn(Xe)).then(),[Y]);return{starredEntities:le,toggleStarredEntity:Te,isStarredEntity:De}}function Kn(Y){return typeof Y=="string"?Y:(0,Me.eE)(Y)}function sa(Y){const le=(0,c.h_)(ae),[De,Te]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const yt=le.starredEntitie$().subscribe({next(St){Te(St.has(Kn(Y)))}});return()=>{yt.unsubscribe()}},[Y,le]),{toggleStarredEntity:(0,r.useCallback)(()=>le.toggleStarred(Kn(Y)).then(),[Y,le]),isStarredEntity:De}}function zn(){const Y=(0,c.h_)(c.$4),{loading:le,value:De}=(0,pt.default)(async()=>{const{ownershipEntityRefs:Xe}=await Y.getBackstageIdentity();return Xe},[]),Te=(0,r.useMemo)(()=>{const Xe=new Set(De!=null?De:[]);return yt=>{const St=ot(yt,Me.S4).map(Me.eE);for(const gt of St)if(Xe.has(gt))return!0;return!1}},[De]);return(0,r.useMemo)(()=>({loading:le,isOwnedEntity:Te}),[le,Te])}function jn(){const Y=(0,c.h_)(te),{error:le,loading:De,value:Te}=(0,pt.default)(async()=>await Y.getEntityFacets({facets:["kind"]}).then(yt=>{var St;return((St=yt.facets.kind)==null?void 0:St.map(gt=>gt.value).sort())||[]}),[Y]);return{loading:De,error:le,allKinds:Te!=null?Te:[]}}function ua(Y,le,De){let Te=Y;return le&&(Te=Te.filter(yt=>le.some(St=>St.toLocaleLowerCase("en-US")===yt.toLocaleLowerCase("en-US")))),De&&!Y.some(yt=>yt.toLocaleLowerCase("en-US")===De.toLocaleLowerCase("en-US"))&&(Te=Te.concat([De])),Te.sort().reduce((yt,St)=>(yt[St.toLocaleLowerCase("en-US")]=St,yt),{})}function _a(Y){var le,De;const{filters:Te,queryParameters:{kind:Xe},updateFilters:yt}=Dn(),St=(0,r.useMemo)(()=>[Xe].flat()[0],[Xe]),[gt,nn]=(0,r.useState)((De=St!=null?St:(le=Te.kind)==null?void 0:le.value)!=null?De:Y.initialFilter);(0,r.useEffect)(()=>{St&&nn(St)},[St]),(0,r.useEffect)(()=>{var Zn,Hn;(Zn=Te.kind)!=null&&Zn.value&&nn((Hn=Te.kind)==null?void 0:Hn.value)},[Te.kind]),(0,r.useEffect)(()=>{yt({kind:gt?new ut(gt):void 0})},[gt,yt]);const{allKinds:Xt,loading:qt,error:en}=jn();return{loading:qt,error:en,allKinds:Xt!=null?Xt:[],selectedKind:gt,setSelectedKind:nn}}const Ga=Y=>{const{allowedKinds:le,hidden:De,initialFilter:Te="component"}=Y,Xe=(0,c.h_)(c.$v),{error:yt,allKinds:St,selectedKind:gt,setSelectedKind:nn}=_a({initialFilter:Te});if((0,r.useEffect)(()=>{yt&&Xe.post({message:"Failed to load entity kinds",severity:"error"})},[yt,Xe]),yt)return null;const Xt=ua(St,le,gt),qt=Object.keys(Xt).map(en=>({value:en,label:Xt[en]}));return De?null:r.createElement(y.Z,{pb:1,pt:1},r.createElement(ge.Ph,{label:"Kind",items:qt,selected:gt.toLocaleLowerCase("en-US"),onChange:en=>nn(String(en))}))},Ha=(0,k.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),ur=r.createElement(dn.Z,{fontSize:"small"}),er=r.createElement(mn.Z,{fontSize:"small"}),Qa=Y=>{var le,De;const{initialFilter:Te=[]}=Y,Xe=Ha(),{updateFilters:yt,backendEntities:St,filters:gt,queryParameters:{lifecycles:nn}}=Dn(),Xt=(0,r.useMemo)(()=>[nn].flat().filter(Boolean),[nn]),[qt,en]=(0,r.useState)(Xt.length?Xt:(De=(le=gt.lifecycles)==null?void 0:le.values)!=null?De:Te);(0,r.useEffect)(()=>{Xt.length&&en(Xt)},[Xt]);const Zn=(0,r.useMemo)(()=>[...new Set(St.map(Hn=>{var wn;return(wn=Hn.spec)==null?void 0:wn.lifecycle}).filter(Boolean))].sort(),[St]);return(0,r.useEffect)(()=>{yt({lifecycles:qt.length&&Zn.length?new Oe(qt):void 0})},[qt,yt,Zn]),Zn.length?r.createElement(y.Z,{pb:1,pt:1},r.createElement(f.Z,{variant:"button",component:"label"},"Lifecycle",r.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Zn,value:qt,onChange:(Hn,wn)=>en(wn),renderOption:(Hn,{selected:wn})=>r.createElement(X.Z,{control:r.createElement(A.Z,{icon:ur,checkedIcon:er,checked:wn}),label:Hn}),size:"small",popupIcon:r.createElement(Ln.Z,{"data-testid":"lifecycle-picker-expand"}),renderInput:Hn=>r.createElement(D.Z,{...Hn,className:Xe.input,variant:"outlined"})}))):null},pr=(0,k.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),Ja=r.createElement(dn.Z,{fontSize:"small"}),L=r.createElement(mn.Z,{fontSize:"small"}),Z=()=>{var Y,le;const De=pr(),{updateFilters:Te,backendEntities:Xe,filters:yt,queryParameters:{owners:St}}=Dn(),gt=(0,r.useMemo)(()=>[St].flat().filter(Boolean),[St]),[nn,Xt]=(0,r.useState)(gt.length?gt:(le=(Y=yt.owners)==null?void 0:Y.values)!=null?le:[]);(0,r.useEffect)(()=>{gt.length&&Xt(gt)},[gt]);const qt=(0,r.useMemo)(()=>[...new Set(Xe.flatMap(en=>ot(en,Me.S4).map(Zn=>gn(Zn,{defaultKind:"group"}))).filter(Boolean))].sort(),[Xe]);return(0,r.useEffect)(()=>{Te({owners:nn.length&&qt.length?new ye(nn):void 0})},[nn,Te,qt]),qt.length?r.createElement(y.Z,{pb:1,pt:1},r.createElement(f.Z,{variant:"button",component:"label"},"Owner",r.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:qt,value:nn,onChange:(en,Zn)=>Xt(Zn),renderOption:(en,{selected:Zn})=>r.createElement(X.Z,{control:r.createElement(A.Z,{icon:Ja,checkedIcon:L,checked:Zn}),label:en}),size:"small",popupIcon:r.createElement(Ln.Z,{"data-testid":"owner-picker-expand"}),renderInput:en=>r.createElement(D.Z,{...en,className:De.input,variant:"outlined"})}))):null},q=Y=>{const le=useRouteRef(rn);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:le(getCompoundEntityRef(Y.entity))},React.createElement(InfoIcon,null))},_e=Y=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${Y.email}`,to:`mailto:${Y.email}`},React.createElement(EmailIcon,null)),U=Y=>{var le;const De=(le=Y.entity.spec.profile)==null?void 0:le.email;return De?React.createElement(_e,{email:De}):null},se=Y=>{var le;const De=(le=Y.entity.spec.profile)==null?void 0:le.email;return De?React.createElement(_e,{email:De}):null},Ce=(0,k.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),Le=4,wt=Y=>{var le,De,Te;const{entityRef:Xe,children:yt,delayTime:St=500}=Y,gt=Ce(),nn=useApiHolder(),Xt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[qt,en]=useState(!1),Zn=useMemo(()=>debounce(()=>en(!0),St),[St]),[{loading:Hn,error:wn,value:sn},qn]=useAsyncFn(async()=>{const za=nn.get(te);if(za){const wa=await za.getEntityByRef(Xe);if(!wa)throw new Error(`${Xe} not found`);return wa}},[nn,Xe]),ma=()=>{en(!1),Zn.cancel()};return useEffect(()=>{Xt.isOpen&&!sn&&!wn&&!Hn&&qn()},[Xt.isOpen,qn,sn,wn,Hn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:Zn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Xt)},yt)),qt&&React.createElement(HoverPopover,{PaperProps:{className:gt.popoverPaper},...bindPopover(Xt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ma},React.createElement(Card,null,React.createElement(CardContent,null,wn&&React.createElement(ResponseErrorPanel,{error:wn}),Hn&&React.createElement(Progress,null),sn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},sn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},sn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},sn.kind),sn.metadata.description&&React.createElement(Typography,{className:gt.descriptionTypography,paragraph:!0},sn.metadata.description),React.createElement(Typography,null,(le=sn.spec)==null?void 0:le.type),React.createElement(Box,{marginTop:"0.5em"},(sn.metadata.tags||[]).slice(0,Le).map(za=>React.createElement(Chip,{key:za,size:"small",label:za})),((De=sn.metadata.tags)==null?void 0:De.length)&&((Te=sn.metadata.tags)==null?void 0:Te.length)>Le&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!wn&&sn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(sn)&&React.createElement(se,{entity:sn}),isGroupEntity(sn)&&React.createElement(U,{entity:sn}),React.createElement(q,{entity:sn}))))))},It=(0,k.Z)(Y=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),kt=()=>{var Y,le;const De=It(),{filters:Te,updateFilters:Xe}=Dn(),[yt,St]=(0,r.useState)((le=(Y=Te.text)==null?void 0:Y.value)!=null?le:"");return(0,Rt.Z)(()=>{Xe({text:yt.length?new ue(yt):void 0})},250,[yt,Xe]),r.createElement(N.Z,{className:De.searchToolbar},r.createElement(p.Z,null,r.createElement(h.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:De.input,placeholder:"Search",autoComplete:"off",onChange:gt=>St(gt.target.value),value:yt,startAdornment:r.createElement(b.Z,{position:"start"},r.createElement(Je.Z,null)),endAdornment:r.createElement(b.Z,{position:"end"},r.createElement(E.Z,{"aria-label":"clear search",onClick:()=>St(""),edge:"end",disabled:yt.length===0},r.createElement(Zt.Z,null)))})))},En=Object.freeze({createEntityRefColumn(Y){const{defaultKind:le}=Y;function De(Te){var Xe;return((Xe=Te.metadata)==null?void 0:Xe.title)||gn(Te,{defaultKind:le})}return{title:"Name",highlight:!0,customFilterAndSearch(Te,Xe){return De(Xe).includes(Te)},customSort(Te,Xe){return De(Te).localeCompare(De(Xe))},render:Te=>{var Xe;return r.createElement(Ke,{entityRef:Te,defaultKind:le,title:(Xe=Te.metadata)==null?void 0:Xe.title})}}},createEntityRelationColumn(Y){const{title:le,relation:De,defaultKind:Te,filter:Xe}=Y;function yt(gt){return ot(gt,De,Xe)}function St(gt){return yt(gt).map(nn=>gn(nn,{defaultKind:Te})).join(", ")}return{title:le,customFilterAndSearch(gt,nn){return St(nn).includes(gt)},customSort(gt,nn){return St(gt).localeCompare(St(nn))},render:gt=>r.createElement(oe,{entityRefs:yt(gt),defaultKind:Te})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:Me.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:Me.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:Me.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:Y=>r.createElement(ge.Or,{text:Y.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),Rn=[En.createEntityRefColumn({defaultKind:"system"}),En.createDomainColumn(),En.createOwnerColumn(),En.createMetadataDescriptionColumn()],cn=[En.createEntityRefColumn({defaultKind:"component"}),En.createSystemColumn(),En.createOwnerColumn(),En.createSpecTypeColumn(),En.createSpecLifecycleColumn(),En.createMetadataDescriptionColumn()],na=(0,k.Z)(Y=>({empty:{padding:Y.spacing(2),display:"flex",justifyContent:"center"}})),kn=Y=>{const{entities:le,title:De,emptyContent:Te,variant:Xe="gridItem",columns:yt}=Y,St=na(),gt={minWidth:"0",width:"100%"};return Xe==="gridItem"&&(gt.height="calc(100% - 10px)"),r.createElement(ge.iA,{columns:yt,title:De,style:gt,emptyContent:Te&&r.createElement("div",{className:St.empty},Te),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1},data:le})};kn.columns=En,kn.systemEntityColumns=Rn,kn.componentEntityColumns=cn;const aa=r.createElement(dn.Z,{fontSize:"small"}),ha=r.createElement(mn.Z,{fontSize:"small"});function oa({selected:Y}){return r.createElement(A.Z,{icon:aa,checkedIcon:ha,checked:Y})}const Qn=(0,r.memo)(Y=>{const{selected:le,value:De,availableOptions:Te,showCounts:Xe}=Y,yt=Xe?`${De} (${Te==null?void 0:Te[De]})`:De;return r.createElement(X.Z,{control:r.createElement(oa,{selected:le}),label:yt})}),$a=(0,k.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Pa(Y){const le=$a();return r.createElement(D.Z,{variant:"outlined",...Y,className:T()(le.input,Y.className)})}function ya(Y){var le,De;const{label:Te,name:Xe,path:yt,showCounts:St,Filter:gt,InputProps:nn}=Y,{updateFilters:Xt,filters:qt,queryParameters:{[Xe]:en}}=Dn(),Zn=(0,c.h_)(te),{value:Hn}=(0,pt.default)(async()=>{var wa;const ja=yt,{facets:ir}=await Zn.getEntityFacets({facets:[ja],filter:(wa=qt.kind)==null?void 0:wa.getCatalogFilters()});return Object.fromEntries(ir[ja].map(({value:Ya,count:hr})=>[Ya,hr]))},[qt.kind]),wn=(0,r.useMemo)(()=>[en].flat().filter(Boolean),[en]),[sn,qn]=(0,r.useState)(wn.length?wn:(De=(le=qt[Xe])==null?void 0:le.values)!=null?De:[]);(0,r.useEffect)(()=>{wn.length&&!Dt().isEqual(sn,wn)&&qn(wn)},[sn,wn]);const ma=Object.keys(Hn!=null?Hn:{}),za=sn.length&&ma.length;return(0,r.useEffect)(()=>{Xt({[Xe]:za?new gt(sn):void 0})},[Xe,za,sn,gt,Xt]),qt[Xe]&&!("values"in qt[Xe])||!ma.length?null:r.createElement(y.Z,{pb:1,pt:1},r.createElement(f.Z,{variant:"button",component:"label"},Te,r.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:ma,value:sn,onChange:(wa,ja)=>qn(ja),renderOption:(wa,{selected:ja})=>r.createElement(Qn,{selected:ja,value:wa,availableOptions:Hn,showCounts:!!St}),size:"small",popupIcon:r.createElement(Ln.Z,{"data-testid":`${String(Xe)}-picker-expand`}),renderInput:wa=>r.createElement(Pa,{...wa,...nn})})))}const Ra=(0,k.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),j=Y=>{const le=Ra();return r.createElement(ya,{label:"Tags",name:"tags",path:"metadata.tags",Filter:Ft,showCounts:Y.showCounts,InputProps:{className:le.input}})},i=Y=>{var le;const{hidden:De,initialFilter:Te}=Y,Xe=(0,c.h_)(c.$v),{error:yt,availableTypes:St,selectedTypes:gt,setSelectedTypes:nn}=Un();if((0,r.useEffect)(()=>{yt&&Xe.post({message:"Failed to load entity types",severity:"error"}),Te&&nn([Te])},[yt,Xe,Te,nn]),St.length===0||yt)return null;const Xt=[{value:"all",label:"all"},...St.map(qt=>({value:qt,label:qt}))];return De?null:r.createElement(y.Z,{pb:1,pt:1},r.createElement(ge.Ph,{label:"Type",items:Xt,selected:(le=Xt.length>1?gt[0]:void 0)!=null?le:"all",onChange:qt=>nn(qt==="all"?[]:[String(qt)])}))},g=(0,S.Z)({root:{color:"#f3ba37"}})(M.Z),I=Y=>{const{toggleStarredEntity:le,isStarredEntity:De}=sa(Y.entity);return r.createElement(E.Z,{"aria-label":"favorite",color:"inherit",...Y,onClick:()=>le()},r.createElement(B.ZP,{title:De?"Remove from favorites":"Add to favorites"},De?r.createElement(g,null):r.createElement(J.Z,null)))},w=ne.Z;function $(Y,le){if(Y)return Y.toLocaleLowerCase("en-US");if(le)try{return(0,Me.of)(le).kind.toLocaleLowerCase("en-US")}catch{return}}function Re(Y,le){const De=(0,c.qD)(),Te=$(Y,le);return Te&&De.getSystemIcon(`kind:${Te}`)||w}function ze(Y){const{kind:le,entityRef:De,...Te}=Y,Xe=Re(le,De);return r.createElement(Xe,{...Te})}const ht=(0,k.Z)(Y=>({node:{fill:Y.palette.grey[300],stroke:Y.palette.grey[300],"&.primary":{fill:Y.palette.primary.light,stroke:Y.palette.primary.light},"&.secondary":{fill:Y.palette.secondary.light,stroke:Y.palette.secondary.light}},text:{fill:Y.palette.getContrastText(Y.palette.grey[300]),"&.primary":{fill:Y.palette.primary.contrastText},"&.secondary":{fill:Y.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function Yt(Y){const le=(0,c.h_)(te),De=(0,Me.eE)(Y),{loading:Te,error:Xe,value:yt}=(0,pt.default)(async()=>{const St=await le.getEntityAncestors({entityRef:De}),gt=new Array,nn=new Array;for(const Xt of St.items){const qt=(0,Me.eE)(Xt.entity),en=qt===St.rootEntityRef;gt.push({id:qt,root:en,...Xt.entity});for(const Zn of Xt.parentEntityRefs)nn.push({from:qt,to:Zn})}return{nodes:gt,edges:nn}},[De]);return{loading:Te,error:Xe,nodes:(yt==null?void 0:yt.nodes)||[],edges:(yt==null?void 0:yt.edges)||[]}}function un({node:Y}){const le=ht(),De=(0,xe.s0)(),Te=(0,c.tg)(rn),[Xe,yt]=(0,r.useState)(0),[St,gt]=(0,r.useState)(0),nn=(0,r.useRef)(null);(0,r.useLayoutEffect)(()=>{if(nn.current){let{height:qn,width:ma}=nn.current.getBBox();qn=Math.round(qn),ma=Math.round(ma),(qn!==St||ma!==Xe)&&(yt(ma),gt(qn))}},[Xe,St]);const Xt=10,qt=St,en=qt+Xt,Zn=en+Xe+Xt*2,Hn=St+Xt*2,wn=Y.metadata.title||(Y.kind&&Y.metadata.name&&Y.metadata.namespace?gn({kind:Y.kind,name:Y.metadata.name,namespace:Y.metadata.namespace||""}):Y.id),sn=()=>{De(Te({kind:Y.kind,namespace:Y.metadata.namespace||Me.zG,name:Y.metadata.name}))};return r.createElement("g",{onClick:sn,className:le.clickable},r.createElement("rect",{className:T()(le.node,Y.root?"secondary":"primary"),width:Zn,height:Hn,rx:10}),r.createElement(ze,{kind:Y.kind,y:Xt,x:Xt,width:qt,height:qt,className:T()(le.text,Y.root?"secondary":"primary")}),r.createElement("text",{ref:nn,className:T()(le.text,Y.root?"secondary":"primary"),y:Hn/2,x:en+(Xe+Xt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},wn))}function Tn(Y){const{loading:le,error:De,nodes:Te,edges:Xe}=Yt(Y.entity);return le?r.createElement(ge.Ex,null):De?r.createElement(ge.Gk,{error:De}):r.createElement(r.Fragment,null,r.createElement(K.Z,{variant:"h2"},"Ancestry"),r.createElement(K.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",r.createElement(ge.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),r.createElement(y.Z,{mt:4},r.createElement(ge.mn,{nodes:Te,edges:Xe,renderNode:un,direction:ge.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const Mn=(0,k.Z)(Y=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:Y.spacing(2)},helpIcon:{marginLeft:Y.spacing(1),color:Y.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Cn(Y){const le=Mn();return r.createElement(pe.Z,{...Y,primaryTypographyProps:{className:le.monospace},secondaryTypographyProps:{className:le.monospace}})}function Yn(Y){const le=Mn();return r.createElement(he.Z,{className:le.monospace},Y.children)}function ta(Y){return r.createElement(y.Z,{mt:2},r.createElement(Fe.Z,{variant:"outlined"},r.createElement(ct.Z,null,r.createElement(f.Z,{variant:"h6",gutterBottom:!0},Y.title,Y.helpLink&&r.createElement(xa,{to:Y.helpLink})),Y.children)))}function ga(Y){if(Y.match(/^url:https?:\/\//))return Y.slice(4);if(Y.match(/^https?:\/\//))return Y}function In(Y){const[le,De]=Y.entry,Te=ga(De);return r.createElement(Ut.Z,null,Y.indent&&r.createElement(dt.Z,null),r.createElement(Cn,{primary:le,secondary:Te?r.createElement(ge.rU,{to:Te},De):De}))}function xa(Y){const le=Mn();return r.createElement(ge.rU,{to:Y.to,className:le.helpIcon},r.createElement(re.Z,{fontSize:"inherit"}))}const V=(0,k.Z)({root:{display:"flex",flexDirection:"column"}});function ve(Y){var le,De;const Te=(0,c.h_)(te),Xe=(0,Me.eE)(Y),yt=(le=Y.metadata.annotations)==null?void 0:le[Me.P1],St=(De=Y.metadata.annotations)==null?void 0:De[Me.q1],{loading:gt,error:nn,value:Xt}=(0,pt.default)(async()=>!yt&&!St?[]:(await Te.getEntities({filter:[...yt?[{[`metadata.annotations.${Me.P1}`]:yt}]:[],...St?[{[`metadata.annotations.${Me.q1}`]:St}]:[]]})).items,[yt,St]);return{loading:gt,error:nn,location:yt,originLocation:St,colocatedEntities:Xt==null?void 0:Xt.filter(qt=>(0,Me.eE)(qt)!==Xe)}}function we(Y){return r.createElement(Wt.Z,{dense:!0},Y.header&&r.createElement(In,{key:"header",entry:Y.header}),Y.entities.map(le=>r.createElement(Ut.Z,{key:(0,Me.eE)(le)},r.createElement(dt.Z,null,r.createElement(ze,{kind:le.kind})),r.createElement(Cn,{primary:r.createElement(Ke,{entityRef:le})}))))}function lt(Y){const{entity:le}=Y,{loading:De,error:Te,location:Xe,originLocation:yt,colocatedEntities:St}=ve(le);if(De)return r.createElement(ge.Ex,null);if(Te)return r.createElement(ge.Gk,{error:Te});if(!Xe&&!yt)return r.createElement($e.Z,{severity:"warning"},"Entity had no location information.");if(!(St!=null&&St.length))return r.createElement($e.Z,{severity:"info"},"There were no other entities on this location.");if(Xe===yt)return r.createElement(we,{entities:St});const gt=St.filter(Xt=>{var qt;return((qt=Xt.metadata.annotations)==null?void 0:qt[Me.P1])===Xe}),nn=St.filter(Xt=>{var qt;return((qt=Xt.metadata.annotations)==null?void 0:qt[Me.q1])===yt});return r.createElement(r.Fragment,null,gt.length>0&&r.createElement(we,{entities:gt,header:["At the same location",Xe]}),nn.length>0&&r.createElement(we,{entities:nn,header:["At the same origin",yt]}))}function Mt(Y){const le=V();return r.createElement(r.Fragment,null,r.createElement(K.Z,{variant:"h2"},"Colocated"),r.createElement(K.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),r.createElement("div",{className:le.root},r.createElement(lt,{entity:Y.entity})))}function Ht(Y){return Object.fromEntries([...Object.entries(Y)].sort((le,De)=>le[0]<De[0]?-1:1))}function tn(Y){return r.createElement(r.Fragment,null,r.createElement(K.Z,{variant:"h2"},"Entity as JSON"),r.createElement(K.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),r.createElement(K.Z,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ge.Oi,{text:JSON.stringify(Ht(Y.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const on=(0,k.Z)({root:{display:"flex",flexDirection:"column"}});function xn(Y){var le,De;const Te=on(),{apiVersion:Xe,kind:yt,metadata:St,spec:gt,relations:nn=[],status:Xt={}}=Y.entity,qt=Ie()(xt()(nn,en=>en.targetRef),"type");return r.createElement(r.Fragment,null,r.createElement(K.Z,{variant:"h2"},"Overview"),r.createElement("div",{className:Te.root},r.createElement(ta,{title:"Identity"},r.createElement(Wt.Z,{dense:!0},r.createElement(Ut.Z,null,r.createElement(Cn,{primary:"apiVersion",secondary:Xe})),r.createElement(Ut.Z,null,r.createElement(Cn,{primary:"kind",secondary:yt})),(gt==null?void 0:gt.type)&&r.createElement(Ut.Z,null,r.createElement(Cn,{primary:"spec.type",secondary:gt.type})),St.uid&&r.createElement(Ut.Z,null,r.createElement(Cn,{primary:"uid",secondary:St.uid})),St.etag&&r.createElement(Ut.Z,null,r.createElement(Cn,{primary:"etag",secondary:St.etag})))),r.createElement(ta,{title:"Metadata"},!!Object.keys(St.annotations||{}).length&&r.createElement(Wt.Z,{dense:!0,subheader:r.createElement(Yn,null,"Annotations",r.createElement(xa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(St.annotations).map(en=>r.createElement(In,{key:en[0],indent:!0,entry:en}))),!!Object.keys(St.labels||{}).length&&r.createElement(Wt.Z,{dense:!0,subheader:r.createElement(Yn,null,"Labels")},Object.entries(St.labels).map(en=>r.createElement(In,{key:en[0],indent:!0,entry:en}))),!!((le=St.tags)!=null&&le.length)&&r.createElement(Wt.Z,{dense:!0,subheader:r.createElement(Yn,null,"Tags")},St.tags.map((en,Zn)=>r.createElement(Ut.Z,{key:`${en}-${Zn}`},r.createElement(dt.Z,null),r.createElement(Cn,{primary:en}))))),!!nn.length&&r.createElement(ta,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(qt).map(([en,Zn],Hn)=>r.createElement("div",{key:Hn},r.createElement(Wt.Z,{dense:!0,subheader:r.createElement(Yn,null,en)},Zn.map(wn=>r.createElement(Ut.Z,{key:wn.targetRef},r.createElement(dt.Z,null,r.createElement(ze,{entityRef:wn.targetRef})),r.createElement(Cn,{primary:r.createElement(Ke,{entityRef:wn.targetRef})}))))))),!!((De=Xt.items)!=null&&De.length)&&r.createElement(ta,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Xt.items.map((en,Zn)=>r.createElement("div",{key:Zn},r.createElement(f.Z,null,en.level,": ",en.type),r.createElement(y.Z,{ml:2},en.message))))))}function Wn(Y){return r.createElement(r.Fragment,null,r.createElement(K.Z,{variant:"h2"},"Entity as YAML"),r.createElement(K.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),r.createElement(K.Z,null,r.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},r.createElement(ge.Oi,{text:Ve.ZP.stringify(Ht(Y.entity)),language:"yaml",showCopyCodeButton:!0}))))}const On=(0,k.Z)(Y=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:Y.palette.background.paper},tabs:{borderRight:`1px solid ${Y.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Gn(Y){const{children:le,value:De,index:Te,...Xe}=Y,yt=On();return r.createElement("div",{role:"tabpanel",hidden:De!==Te,id:`vertical-tabpanel-${Te}`,"aria-labelledby":`vertical-tab-${Te}`,className:yt.tabContents,...Xe},De===Te&&r.createElement(y.Z,{pl:3,pr:3},le))}function Lt(Y){return{id:`vertical-tab-${Y}`,"aria-controls":`vertical-tabpanel-${Y}`}}function ia(Y){const le=On(),[De,Te]=r.useState(0);return(0,r.useEffect)(()=>{Te(0)},[Y.open]),Y.entity?r.createElement(Ct.Z,{fullWidth:!0,maxWidth:"xl",open:Y.open,onClose:Y.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:le.fullHeightDialog}},r.createElement(G.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),r.createElement(fn.Z,{dividers:!0},r.createElement("div",{className:le.root},r.createElement(Et.Z,{orientation:"vertical",variant:"scrollable",value:De,onChange:(Xe,yt)=>Te(yt),"aria-label":"Inspector options",className:le.tabs},r.createElement(je.Z,{label:"Overview",...Lt(0)}),r.createElement(je.Z,{label:"Ancestry",...Lt(1)}),r.createElement(je.Z,{label:"Colocated",...Lt(2)}),r.createElement(je.Z,{label:"Raw JSON",...Lt(3)}),r.createElement(je.Z,{label:"Raw YAML",...Lt(4)})),r.createElement(Gn,{value:De,index:0},r.createElement(xn,{entity:Y.entity})),r.createElement(Gn,{value:De,index:1},r.createElement(Tn,{entity:Y.entity})),r.createElement(Gn,{value:De,index:2},r.createElement(Mt,{entity:Y.entity})),r.createElement(Gn,{value:De,index:3},r.createElement(tn,{entity:Y.entity})),r.createElement(Gn,{value:De,index:4},r.createElement(Wn,{entity:Y.entity})))),r.createElement(P.Z,null,r.createElement(_.Z,{onClick:Y.onClose,color:"primary"},"Close"))):null}function va(Y){var le;const De=(0,c.h_)(te),Te=(le=Y.metadata.annotations)==null?void 0:le[Me.q1],Xe=Y.metadata.uid,yt=Te==="bootstrap:bootstrap",St=(0,pt.default)(async()=>{const wn=De.getLocationByRef(Te);let sn;if(!Te)sn=Promise.resolve([]);else{const qn=`metadata.annotations.${Me.q1}`;sn=De.getEntities({filter:{[qn]:Te},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(ma=>ma.items)}return Promise.all([wn,sn]).then(([qn,ma])=>({location:qn,colocatedEntities:ma}))},[De,Y]),gt=(0,r.useCallback)(async function(){const{location:sn}=St.value;await De.removeLocationById(sn.id)},[De,St]),nn=(0,r.useCallback)(async function(){await De.removeEntityByUid(Xe)},[De,Xe]);if(yt)return{type:"bootstrap",location:Te,deleteEntity:nn};const{loading:Xt,error:qt,value:en}=St;if(Xt)return{type:"loading"};if(qt)return{type:"error",error:qt};const{location:Zn,colocatedEntities:Hn}=en;return Zn?{type:"unregister",location:Te,colocatedEntities:Hn.map(Me.iB),unregisterLocation:gt,deleteEntity:nn}:{type:"only-delete",deleteEntity:nn}}const Aa=(0,k.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Sa=({entity:Y,onConfirm:le,onClose:De})=>{var Te;const Xe=(0,c.h_)(c.$v),yt=(0,c.h_)(c.Ds),St=Aa(),gt=va(Y),[nn,Xt]=(0,r.useState)(!1),[qt,en]=(0,r.useState)(!1),Zn=(Te=yt.getOptionalString("app.title"))!=null?Te:"Backstage",Hn=(0,r.useCallback)(async function(){if("unregisterLocation"in gt){en(!0);try{await gt.unregisterLocation(),le()}catch(ma){(0,at.BD)(ma),Xe.post({message:ma.message})}finally{en(!1)}}},[Xe,le,gt]),wn=(0,r.useCallback)(async function(){if("deleteEntity"in gt){en(!0);try{await gt.deleteEntity(),le()}catch(ma){(0,at.BD)(ma),Xe.post({message:ma.message})}finally{en(!1)}}},[Xe,le,gt]),sn=()=>r.createElement(P.Z,{className:St.dialogActions},r.createElement(_.Z,{onClick:De,color:"primary"},"Cancel"));return gt.type==="loading"?r.createElement(ge.Ex,null):gt.type==="error"?r.createElement(ge.Gk,{error:gt.error}):gt.type==="bootstrap"?r.createElement(r.Fragment,null,r.createElement($e.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',gt.location,'"). If you believe this is in error, please contact the ',Zn," ","integrator."),r.createElement(y.Z,{marginTop:2},!nn&&r.createElement(r.Fragment,null,r.createElement(_.Z,{variant:"text",size:"small",color:"primary",className:St.advancedButton,onClick:()=>Xt(!0)},"Advanced Options"),r.createElement(sn,null)),nn&&r.createElement(r.Fragment,null,r.createElement(K.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(_.Z,{variant:"contained",color:"secondary",disabled:qt,onClick:wn},"Delete Entity"),r.createElement(sn,null)))):gt.type==="only-delete"?r.createElement(r.Fragment,null,r.createElement(K.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),r.createElement(_.Z,{variant:"contained",color:"secondary",disabled:qt,onClick:wn},"Delete Entity"),r.createElement(sn,null)):gt.type==="unregister"?r.createElement(r.Fragment,null,r.createElement(K.Z,null,"This action will unregister the following entities:"),r.createElement(K.Z,{component:"ul"},gt.colocatedEntities.map(qn=>r.createElement("li",{key:`${qn.kind}:${qn.namespace}/${qn.name}`},r.createElement(Ke,{entityRef:qn})))),r.createElement(K.Z,null,"Located at the following location:"),r.createElement(K.Z,{component:"ul"},r.createElement("li",null,gt.location)),r.createElement(K.Z,null,"To undo, just re-register the entity in ",Zn,"."),r.createElement(y.Z,{marginTop:2},r.createElement(_.Z,{variant:"contained",color:"secondary",disabled:qt,onClick:Hn},"Unregister Location"),!nn&&r.createElement(y.Z,{component:"span",marginLeft:2},r.createElement(_.Z,{variant:"text",size:"small",color:"primary",className:St.advancedButton,onClick:()=>Xt(!0)},"Advanced Options"))),nn&&r.createElement(r.Fragment,null,r.createElement(y.Z,{paddingTop:4,paddingBottom:4},r.createElement(Ue.Z,null)),r.createElement(K.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),r.createElement(_.Z,{variant:"contained",color:"secondary",disabled:qt,onClick:wn},"Delete Entity"))):r.createElement($e.Z,{severity:"error"},"Internal error: Unknown state")},da=Y=>{const{open:le,onConfirm:De,onClose:Te,entity:Xe}=Y;return r.createElement(Ct.Z,{open:le,onClose:Te},r.createElement(G.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),r.createElement(fn.Z,null,r.createElement(Sa,{entity:Xe,onConfirm:De,onClose:Te})))},Ba=(0,k.Z)(Y=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:Y.spacing(1,0,1,0)},title:{margin:Y.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:Y.palette.text.primary},menuItem:{minHeight:Y.spacing(6)},groupWrapper:{margin:Y.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Oa(Y){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Se.Z},{id:"starred",label:"Starred",icon:M.Z}]},{name:Y!=null?Y:"Company",items:[{id:"all",label:"All"}]}]}const ba=Y=>{var le;const{initialFilter:De,availableFilters:Te}=Y,Xe=Ba(),St=(le=(0,c.h_)(c.Ds).getOptionalString("organization.name"))!=null?le:"Company",{filters:gt,updateFilters:nn,backendEntities:Xt,queryParameters:{kind:qt,user:en},loading:Zn}=Dn(),Hn=["starred","all"],wn=Oa(St).map(nr=>({...nr,items:nr.items.filter(({id:qa})=>["group","user"].some(br=>br===qt)?Hn.includes(qa):!Te||Te.includes(qa))})).filter(({items:nr})=>!!nr.length),{isStarredEntity:sn}=yn(),{isOwnedEntity:qn,loading:ma}=zn(),za=Zn||ma,wa=(0,r.useMemo)(()=>new He("owned",qn,sn),[qn,sn]),ja=(0,r.useMemo)(()=>new He("starred",qn,sn),[qn,sn]),ir=(0,r.useMemo)(()=>[en].flat()[0],[en]),[Ya,hr]=(0,r.useState)(ir!=null?ir:De),Tr=(0,r.useMemo)(()=>Xt.filter(ke((0,mt.compact)(Object.values({...gt,user:void 0})))),[gt,Xt]),_r=(0,r.useMemo)(()=>({all:Tr.length,starred:Tr.filter(nr=>ja.filterEntity(nr)).length,owned:Tr.filter(nr=>wa.filterEntity(nr)).length}),[Tr,ja,wa]);return(0,r.useEffect)(()=>{ir&&hr(ir)},[ir]),(0,r.useEffect)(()=>{!za&&Ya&&Ya!=="all"&&_r[Ya]===0&&hr("all")},[za,_r,Ya,hr]),(0,r.useEffect)(()=>{nn({user:Ya?new He(Ya,qn,sn):void 0})},[Ya,qn,sn,nn]),r.createElement(Fe.Z,{className:Xe.root},wn.map(nr=>r.createElement(r.Fragment,{key:nr.name},r.createElement(f.Z,{variant:"subtitle2",component:"span",className:Xe.title},nr.name),r.createElement(Fe.Z,{className:Xe.groupWrapper},r.createElement(Wt.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":nr.name},nr.items.map(qa=>{var br,$r;return r.createElement(H.Z,{role:"none presentation",key:qa.id,button:!0,divider:!0,onClick:()=>hr(qa.id),selected:qa.id===((br=gt.user)==null?void 0:br.value),className:Xe.menuItem,disabled:_r[qa.id]===0,"data-testid":`user-picker-${qa.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},qa.icon&&r.createElement(dt.Z,{className:Xe.listIcon},r.createElement(qa.icon,{fontSize:"small"})),r.createElement(pe.Z,null,r.createElement(f.Z,{variant:"body1"},qa.label," ")),r.createElement(R.Z,null,($r=_r[qa.id])!=null?$r:"-"))}))))))},Ma=(0,k.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),tr=r.createElement(dn.Z,{fontSize:"small"}),rr=r.createElement(mn.Z,{fontSize:"small"}),or=()=>{const Y=Ma(),{updateFilters:le}=Dn(),[De,Te]=(0,r.useState)([]);function Xe(gt){le({orphan:gt?new rt(gt):void 0})}function yt(gt){le({error:gt?new Pt(gt):void 0})}const St=["Is Orphan","Has Error"];return r.createElement(y.Z,{pb:1,pt:1},r.createElement(f.Z,{variant:"button",component:"label"},"Processing Status",r.createElement(it.ZP,{multiple:!0,disableCloseOnSelect:!0,options:St,value:De,onChange:(gt,nn)=>{Te(nn),Xe(nn.includes("Is Orphan")),yt(nn.includes("Has Error"))},renderOption:(gt,{selected:nn})=>r.createElement(X.Z,{control:r.createElement(A.Z,{icon:tr,checkedIcon:rr,checked:nn}),label:gt}),size:"small",popupIcon:r.createElement(Ln.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:gt=>r.createElement(D.Z,{...gt,className:Y.input,variant:"outlined"})})))};function sr(Y){var le;const{children:De,value:Te}=Y,[Xe,yt]=useState((le=Te==null?void 0:Te.filters)!=null?le:{}),St=useCallback(Xt=>{yt(qt=>{const en=typeof Xt=="function"?Xt(qt):Xt;return{...qt,...en}})},[]),gt=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),nn=useMemo(()=>{var Xt,qt,en,Zn,Hn;return{entities:(Xt=Te==null?void 0:Te.entities)!=null?Xt:gt.entities,backendEntities:(qt=Te==null?void 0:Te.backendEntities)!=null?qt:gt.backendEntities,updateFilters:(en=Te==null?void 0:Te.updateFilters)!=null?en:St,filters:Xe,loading:(Zn=Te==null?void 0:Te.loading)!=null?Zn:!1,queryParameters:(Hn=Te==null?void 0:Te.queryParameters)!=null?Hn:gt.queryParameters,error:Te==null?void 0:Te.error}},[Te,gt,Xe,St]);return React.createElement($n.Provider,{value:nn},De)}},33182:function(Kt,d,e){e.d(d,{A:function(){return Ie},C:function(){return ft},E:function(){return Kn},F:function(){return bn},L:function(){return M},a:function(){return re},b:function(){return $e},c:function(){return mn},d:function(){return ua},e:function(){return jn},f:function(){return zn},g:function(){return _a},h:function(){return sa},j:function(){return Ja},k:function(){return Z},l:function(){return er},m:function(){return pr},n:function(){return Qa},o:function(){return ur},p:function(){return Ga},r:function(){return _e},t:function(){return ke},u:function(){return ut},v:function(){return Ye},w:function(){return ye},x:function(){return ue},y:function(){return rt},z:function(){return _n}});var n=e(82394),c=e.n(n),m=e(34520),u=e(76635),r=e.n(u),l=e(49558),C=e(30705),_=e(49462),t=e(73495),y=e(79692),f=e(90436),F=e(60905),B=e(95544),k=e(41156),X=e(90348),A=e(11861),D=e(7089),N=e(94339),p=e(32552),h=e(61837),b=e(85256),E=e(24579),S=e(12420),K=e(12231),pe=e(86136),he=e(49378),Fe=e(80030),ct=e(79784),Ut=e(50758),dt=e(8629),Wt=e(79249),Ct=e(49429),G=e(77277),fn=e(52866),Et=e(30254),je=e(27604),P=e(2784),Ue=e(52160),H=e(19928),R=e.n(H),W=e(64279),ge=e(15459),Me=e(2997),et=e(11640),pt=e(28347),mt=e(99688),Dt=e(73557),ie=e(31654),o=e(43054),xe=e(65759),be=e(52963),Rt=e(75650),vt=e(49166),Vt=e(32272),de=e(88285),Tt=e(92573);async function xt({storageApi:U}){var se;const Ce=U.forBucket("settings"),Le=U.forBucket("starredEntities"),wt=Ce.snapshot("starredEntities").value;if(!(0,u.isArray)(wt))return;const It=new Set((se=Le.snapshot("entityRefs").value)!=null?se:[]);wt.filter(u.isString).map(kt=>kt.split(":")).filter(kt=>kt.length===4&&kt[0]==="entity").map(([kt,En,Rn,cn])=>(0,m.eE)({kind:En,namespace:Rn,name:cn})).forEach(kt=>It.add(kt)),await Le.set("entityRefs",Array.from(It)),await Ce.remove("starredEntities")}class ln{constructor(se){this.subscribers=new Set,this.observable=new(c())(Le=>(Le.next(new Set(this.starredEntities)),this.subscribers.add(Le),()=>{this.subscribers.delete(Le)}));var Ce;xt(se).then(),this.settingsStore=se.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((Ce=this.settingsStore.snapshot("entityRefs").value)!=null?Ce:[]),this.settingsStore.observe$("entityRefs").subscribe({next:Le=>{var wt;this.starredEntities=new Set((wt=Le.value)!=null?wt:[]),this.notifyChanges()}})}async toggleStarred(se){this.starredEntities.has(se)?this.starredEntities.delete(se):this.starredEntities.add(se),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const se of this.subscribers)se.next(new Set(this.starredEntities))}}const mn=(0,C.x8)({id:"create-component",optional:!0}),dn=(0,C.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ln=(0,C.NT)({id:"catalog"}),it=(0,y.Z)(U=>({value:{fontWeight:"bold",overflow:"hidden",lineHeight:"24px",wordBreak:"break-word"},label:{color:U.palette.text.secondary,textTransform:"uppercase",fontSize:"10px",fontWeight:"bold",letterSpacing:.5,overflow:"hidden",whiteSpace:"nowrap"}}));function $e(U){const{label:se,value:Ce,gridSizes:Le,children:wt}=U,It=it(),kt=(0,C.vJ)(wt,Rn=>Rn.getElements()),En=kt.length>0?kt:P.createElement(f.Z,{variant:"body2",className:It.value},Ce||"unknown");return P.createElement(F.Z,{item:!0,...Le},P.createElement(f.Z,{variant:"h2",className:It.label},se),En)}const Zt=(0,y.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}});function Je(U){const{href:se,text:Ce,Icon:Le}=U,wt=Zt();return P.createElement(B.Z,{display:"flex"},P.createElement(B.Z,{mr:1,className:wt.svgIcon},P.createElement(f.Z,{component:"div"},Le?P.createElement(Le,null):P.createElement(Ue.Z,null))),P.createElement(B.Z,{flexGrow:"1"},P.createElement(l.rU,{to:se,target:"_blank",rel:"noopener"},Ce||se)))}const Pe={xs:1,sm:1,md:1,lg:2,xl:3};function T(U){var se,Ce;const Le=[(0,k.Z)(It=>It.breakpoints.up("xl"))?"xl":null,(0,k.Z)(It=>It.breakpoints.up("lg"))?"lg":null,(0,k.Z)(It=>It.breakpoints.up("md"))?"md":null,(0,k.Z)(It=>It.breakpoints.up("sm"))?"sm":null,(0,k.Z)(It=>It.breakpoints.up("xs"))?"xs":null];let wt=1;if(typeof U=="number")wt=U;else{const It=(se=Le.find(kt=>kt!==null))!=null?se:"xs";wt=(Ce=U==null?void 0:U[It])!=null?Ce:Pe[It]}return wt}function M(U){const{items:se,cols:Ce=void 0}=U,Le=T(Ce);return P.createElement(X.Z,{rowHeight:"auto",cols:Le},se.map(({text:wt,href:It,Icon:kt},En)=>P.createElement(A.Z,{key:En},P.createElement(Je,{href:It,text:wt!=null?wt:It,Icon:kt}))))}const J=(0,y.Z)({description:{wordBreak:"break-word"}});function ne(U,se,Ce){if(se==="url"||U.includes("://"))return U;const Le=Ce.type==="file"?`file://${Ce.target}`:Ce.target;return se==="file"||Ce.type==="file"?new URL(U,Le).href:Le}function re(U){var se,Ce,Le,wt,It,kt,En,Rn;const{entity:cn}=U,na=J(),kn=cn.kind.toLocaleLowerCase("en-US")==="system",aa=cn.kind.toLocaleLowerCase("en-US")==="resource",ha=cn.kind.toLocaleLowerCase("en-US")==="component",oa=cn.kind.toLocaleLowerCase("en-US")==="api",Qn=cn.kind.toLocaleLowerCase("en-US")==="template",$a=cn.kind.toLocaleLowerCase("en-US")==="location",Pa=cn.kind.toLocaleLowerCase("en-US")==="group",ya=(0,t.hF)(cn,m.cz,{kind:"system"}),Ra=(0,t.hF)(cn,m.cz,{kind:"component"}),j=(0,t.hF)(cn,m.cz,{kind:"domain"}),i=(0,t.hF)(cn,m.S4);let g;try{g=(0,m.CV)(cn)}catch{g=void 0}return P.createElement(F.Z,{container:!0},P.createElement($e,{label:"Description",gridSizes:{xs:12}},P.createElement(l.SA,{className:na.description,content:((se=cn==null?void 0:cn.metadata)==null?void 0:se.description)||"No description"})),P.createElement($e,{label:"Owner",value:"No Owner",gridSizes:{xs:12,sm:6,lg:4}},i.length>0&&P.createElement(t.rI,{entityRefs:i,defaultKind:"group"})),(kn||j.length>0)&&P.createElement($e,{label:"Domain",value:"No Domain",gridSizes:{xs:12,sm:6,lg:4}},j.length>0&&P.createElement(t.rI,{entityRefs:j,defaultKind:"domain"})),(oa||ha||aa||ya.length>0)&&P.createElement($e,{label:"System",value:"No System",gridSizes:{xs:12,sm:6,lg:4}},ya.length>0&&P.createElement(t.rI,{entityRefs:ya,defaultKind:"system"})),ha&&Ra.length>0&&P.createElement($e,{label:"Parent Component",value:"No Parent Component",gridSizes:{xs:12,sm:6,lg:4}},P.createElement(t.rI,{entityRefs:Ra,defaultKind:"component"})),(oa||ha||aa||Qn||Pa||$a||typeof((Ce=cn==null?void 0:cn.spec)==null?void 0:Ce.type)=="string")&&P.createElement($e,{label:"Type",value:(Le=cn==null?void 0:cn.spec)==null?void 0:Le.type,gridSizes:{xs:12,sm:6,lg:4}}),(oa||ha||typeof((wt=cn==null?void 0:cn.spec)==null?void 0:wt.lifecycle)=="string")&&P.createElement($e,{label:"Lifecycle",value:(It=cn==null?void 0:cn.spec)==null?void 0:It.lifecycle,gridSizes:{xs:12,sm:6,lg:4}}),P.createElement($e,{label:"Tags",value:"No Tags",gridSizes:{xs:12,sm:6,lg:4}},(((kt=cn==null?void 0:cn.metadata)==null?void 0:kt.tags)||[]).map(I=>P.createElement(D.Z,{key:I,size:"small",label:I}))),$a&&(((En=cn==null?void 0:cn.spec)==null?void 0:En.targets)||((Rn=cn==null?void 0:cn.spec)==null?void 0:Rn.target))&&P.createElement($e,{label:"Targets",gridSizes:{xs:12}},P.createElement(M,{cols:1,items:(cn.spec.targets||[cn.spec.target]).map(I=>I).map(I=>{var w;return{text:I,href:ne(I,((w=cn==null?void 0:cn.spec)==null?void 0:w.type)||"unknown",g)}})})))}const Ae=(0,y.Z)({gridItemCard:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px"},fullHeightCard:{display:"flex",flexDirection:"column",height:"100%"},gridItemCardContent:{flex:1},fullHeightCardContent:{flex:1}});function Ie(U){var se,Ce,Le;const{variant:wt}=U,It=Ae(),{entity:kt}=(0,t.X2)(),En=(0,C.h_)(_.q3),Rn=(0,C.h_)(t.Ah),cn=(0,C.h_)(C.$v),na=(0,C.h_)(C.VE),kn=(0,C.tg)(dn),aa=(0,t.CV)(kt,En),ha=(se=kt.metadata.annotations)==null?void 0:se[m.Tf],oa={label:"View Source",disabled:!aa,icon:P.createElement(_.nW,{type:aa==null?void 0:aa.integrationType}),href:aa==null?void 0:aa.locationTargetUrl},Qn={label:"View TechDocs",disabled:!((Ce=kt.metadata.annotations)!=null&&Ce["backstage.io/techdocs-ref"])||!kn,icon:P.createElement(Et.Z,null),href:kn&&kn({namespace:kt.metadata.namespace||m.zG,kind:kt.kind,name:kt.metadata.name})};let $a="";wt==="gridItem"?$a=It.gridItemCard:wt==="fullHeight"&&($a=It.fullHeightCard);let Pa="";wt==="gridItem"?Pa=It.gridItemCardContent:wt==="fullHeight"&&(Pa=It.fullHeightCardContent);const ya=(Le=kt.metadata.annotations)==null?void 0:Le[m.P1],Ra=(ya==null?void 0:ya.startsWith("url:"))||(ya==null?void 0:ya.startsWith("file:")),j=(0,P.useCallback)(async()=>{try{await Rn.refreshEntity((0,m.eE)(kt)),cn.post({message:"Refresh scheduled",severity:"info"})}catch(i){na.post(i)}},[Rn,cn,na,kt]);return P.createElement(N.Z,{className:$a},P.createElement(p.Z,{title:"About",action:P.createElement(P.Fragment,null,Ra&&P.createElement(h.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:j},P.createElement(fn.Z,null)),P.createElement(h.Z,{component:l.rU,"aria-label":"Edit",disabled:!ha,title:"Edit Metadata",to:ha!=null?ha:"#"},P.createElement(je.Z,null))),subheader:P.createElement(l.M6,{links:[oa,Qn]})}),P.createElement(b.Z,null),P.createElement(E.Z,{className:Pa},P.createElement(re,{entity:kt})))}function Ve(){const U=useApi(catalogApiRef),{error:se,loading:Ce,value:Le}=useAsync(async()=>await U.getEntityFacets({facets:["kind"]}).then(It=>{var kt;return((kt=It.facets.kind)==null?void 0:kt.map(En=>En.value).sort())||[]}),[U]);return{loading:Ce,error:se,allKinds:Le!=null?Le:[]}}function at(U,se,Ce){let Le=U;return se&&(Le=Le.filter(It=>se.some(kt=>kt.toLocaleLowerCase("en-US")===It.toLocaleLowerCase("en-US")))),Ce&&!U.some(It=>It.toLocaleLowerCase("en-US")===Ce.toLocaleLowerCase("en-US"))&&(Le=Le.concat([Ce])),Le.sort().reduce((It,kt)=>(It[kt.toLocaleLowerCase("en-US")]=kt,It),{})}const Se=(0,y.Z)(U=>(0,S.Z)({root:{...U.typography.h4}}));function te(U){var se,Ce;const{initialFilter:Le="component",allowedKinds:wt}=U,It=Se(),{allKinds:kt}=Ve(),{filters:En,updateFilters:Rn,queryParameters:{kind:cn}}=useEntityList(),na=useMemo(()=>[cn].flat()[0],[cn]),[kn,aa]=useState((Ce=na!=null?na:(se=En.kind)==null?void 0:se.value)!=null?Ce:Le);useEffect(()=>{na&&aa(na)},[na]),useEffect(()=>{var oa,Qn;(oa=En.kind)!=null&&oa.value&&aa((Qn=En.kind)==null?void 0:Qn.value)},[En.kind]),useEffect(()=>{Rn({kind:kn?new EntityKindFilter(kn):void 0})},[kn,Rn]);const ha=at(kt,wt,kn);return React.createElement(Select,{input:React.createElement(InputBase,null),value:kn.toLocaleLowerCase("en-US"),onChange:oa=>aa(oa.target.value),classes:It},Object.keys(ha).map(oa=>React.createElement(MenuItem,{value:oa,key:oa},`${pluralize(ha[oa])}`)))}const ae=Object.freeze({createNameColumn(U){function se(Ce){var Le;return((Le=Ce.metadata)==null?void 0:Le.title)||(0,t.$3)(Ce,{defaultKind:U==null?void 0:U.defaultKind})}return{title:"Name",field:"resolved.name",highlight:!0,customSort({entity:Ce},{entity:Le}){return se(Ce).localeCompare(se(Le))},render:({entity:Ce})=>{var Le;return P.createElement(t.dx,{entityRef:Ce,defaultKind:(U==null?void 0:U.defaultKind)||"Component",title:(Le=Ce.metadata)==null?void 0:Le.title})}}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:U})=>P.createElement(t.rI,{entityRefs:U.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:U})=>P.createElement(t.rI,{entityRefs:U.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:U})=>{var se,Ce;return P.createElement(P.Fragment,null,(((se=U==null?void 0:U.spec)==null?void 0:se.targets)||((Ce=U==null?void 0:U.spec)==null?void 0:Ce.target))&&P.createElement(l.Or,{text:(U.spec.targets||[U.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(){return{title:"Type",field:"entity.spec.type",hidden:!0,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:U})=>P.createElement(l.Or,{text:U.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:U})=>P.createElement(P.Fragment,null,U.metadata.tags&&U.metadata.tags.map(se=>P.createElement(D.Z,{key:se,label:se,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(U){return{title:"Title",field:"entity.metadata.title",hidden:U==null?void 0:U.hidden,searchable:!0}},createLabelColumn(U,se){return{title:(se==null?void 0:se.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:Ce})=>{var Le;const wt=(Le=Ce.metadata)==null?void 0:Le.labels,It=wt&&wt[U]||(se==null?void 0:se.defaultValue);return P.createElement(P.Fragment,null,It&&P.createElement(D.Z,{key:It,label:It,size:"small",variant:"outlined"}))},width:"auto"}}}),Be=(0,ge.Z)({root:{color:"#f3ba37"}})(et.Z),tt=(U,se)=>{const Ce=Le=>Le.metadata.title||(0,t.$3)(Le,{defaultKind:"Component"});return Ce(U).localeCompare(Ce(se))},ft=U=>{var se,Ce,Le;const{columns:wt,actions:It,tableOptions:kt,subtitle:En,emptyContent:Rn}=U,{isStarredEntity:cn,toggleStarredEntity:na}=(0,t.CR)(),{loading:kn,error:aa,entities:ha,filters:oa}=(0,t.wp)(),Qn=(0,P.useMemo)(()=>{var g;return[ae.createTitleColumn({hidden:!0}),ae.createNameColumn({defaultKind:(g=oa.kind)==null?void 0:g.value}),...I(),ae.createMetadataDescriptionColumn(),ae.createTagsColumn()];function I(){var w;switch((w=oa.kind)==null?void 0:w.value){case"user":return[];case"domain":case"system":return[ae.createOwnerColumn()];case"group":case"template":return[ae.createSpecTypeColumn()];case"location":return[ae.createSpecTypeColumn(),ae.createSpecTargetsColumn()];default:return[ae.createSystemColumn(),ae.createOwnerColumn(),ae.createSpecTypeColumn(),ae.createSpecLifecycleColumn()]}}},[(se=oa.kind)==null?void 0:se.value]),$a=oa.type===void 0,Pa=(0,u.capitalize)((Le=(Ce=oa.user)==null?void 0:Ce.value)!=null?Le:"all");if(aa)return P.createElement("div",null,P.createElement(l.GB,{severity:"error",title:"Could not fetch catalog entities."},P.createElement(l.Oi,{language:"text",text:aa.toString()})));const ya=[({entity:g})=>{var I;const w=(I=g.metadata.annotations)==null?void 0:I[m.l2],$="View";return{icon:()=>P.createElement(P.Fragment,null,P.createElement(f.Z,{variant:"srOnly"},$),P.createElement(Me.Z,{fontSize:"small"})),tooltip:$,disabled:!w,onClick:()=>{w&&window.open(w,"_blank")}}},({entity:g})=>{var I;const w=(I=g.metadata.annotations)==null?void 0:I[m.Tf],$="Edit";return{icon:()=>P.createElement(P.Fragment,null,P.createElement(f.Z,{variant:"srOnly"},$),P.createElement(je.Z,{fontSize:"small"})),tooltip:$,disabled:!w,onClick:()=>{w&&window.open(w,"_blank")}}},({entity:g})=>{const I=cn(g),w=I?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>P.createElement(P.Fragment,null,P.createElement(f.Z,{variant:"srOnly"},w),I?P.createElement(Be,null):P.createElement(pt.Z,null)),tooltip:w,onClick:()=>na(g)}}],Ra=ha.sort(tt).map(g=>{const I=(0,t.hF)(g,m.cz,{kind:"system"}),w=(0,t.hF)(g,m.S4);return{entity:g,resolved:{name:(0,t.$3)(g,{defaultKind:"Component"}),ownedByRelationsTitle:w.map($=>(0,t.$3)($,{defaultKind:"group"})).join(", "),ownedByRelations:w,partOfSystemRelationTitle:I.map($=>(0,t.$3)($,{defaultKind:"system"})).join(", "),partOfSystemRelations:I}}}),j=(wt||Qn).find(g=>g.title==="Type");j&&(j.hidden=!$a);const i=Ra.length>20;return P.createElement(l.iA,{isLoading:kn,columns:wt||Qn,options:{paging:i,pageSize:20,actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!kn,padding:"dense",pageSizeOptions:[20,50,100],...kt},title:`${Pa} (${ha.length})`,data:Ra,actions:It||ya,subtitle:En,emptyContent:Rn})};ft.columns=ae;function bt(U){var se;const{unregisterEntityOptions:Ce,isUnregisterAllowed:Le,onUnregisterEntity:wt,onClose:It}=U,kt=typeof(Ce==null?void 0:Ce.disableUnregister)=="boolean",En=(se=!Le||(kt?!!(Ce!=null&&Ce.disableUnregister):(Ce==null?void 0:Ce.disableUnregister)==="disable"))!=null?se:!1;let Rn=P.createElement(P.Fragment,null);return(Ce==null?void 0:Ce.disableUnregister)!=="hidden"&&(Rn=P.createElement(K.Z,{onClick:()=>{It(),wt()},disabled:En},P.createElement(pe.Z,null,P.createElement(vt.Z,{fontSize:"small"})),P.createElement(he.Z,{primary:"Unregister entity"}))),P.createElement(P.Fragment,null,Rn)}const rn=(0,y.Z)(U=>({button:{color:U.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function Gt(U){const{UNSTABLE_extraContextMenuItems:se,UNSTABLE_contextMenuOptions:Ce,onUnregisterEntity:Le,onInspectEntity:wt}=U,[It,kt]=(0,P.useState)(),En=rn(),cn=(0,be.N)(Rt.j8).allowed,na=Qn=>{kt(Qn.currentTarget)},kn=()=>{kt(void 0)},aa=(0,C.h_)(C.$v),ha=(0,P.useCallback)(()=>{window.navigator.clipboard.writeText(window.location.toString()).then(()=>aa.post({message:"Copied!",severity:"info",display:"transient"}))},[aa]),oa=se&&[...se.map(Qn=>P.createElement(K.Z,{key:Qn.title,onClick:()=>{kn(),Qn.onClick()}},P.createElement(pe.Z,null,P.createElement(Qn.Icon,{fontSize:"small"})),P.createElement(he.Z,{primary:Qn.title}))),P.createElement(b.Z,{key:"the divider is here!"})];return P.createElement(P.Fragment,null,P.createElement(Fe.ZP,{title:"More",arrow:!0},P.createElement(h.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!It,role:"button",onClick:na,"data-testid":"menu-button",className:En.button,id:"long-menu"},P.createElement(o.Z,null))),P.createElement(ct.ZP,{open:Boolean(It),onClose:kn,anchorEl:It,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},P.createElement(Ut.Z,null,oa,P.createElement(bt,{unregisterEntityOptions:Ce,isUnregisterAllowed:cn,onUnregisterEntity:Le,onClose:kn}),P.createElement(K.Z,{onClick:()=>{kn(),wt()}},P.createElement(pe.Z,null,P.createElement(ie.Z,{fontSize:"small"})),P.createElement(he.Z,{primary:"Inspect entity"})),P.createElement(K.Z,{onClick:()=>{kn(),ha()}},P.createElement(pe.Z,null,P.createElement(xe.Z,{fontSize:"small"})),P.createElement(he.Z,{primary:"Copy entity URL"})))))}const gn="plugin.catalog.entityLayoutRoute",Ke=()=>null;(0,C.R5)(Ke,gn,!0),(0,C.R5)(Ke,"core.gatherMountPoints",!0);function nt(U){const{entity:se,title:Ce}=U;return P.createElement(B.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},P.createElement(B.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},Ce),se&&P.createElement(t.LH,{entity:se}))}function oe(U,se,Ce,Le){var wt,It,kt,En,Rn;const cn=(wt=U!=null?U:Le==null?void 0:Le.kind)!=null?wt:"",na=(It=se!=null?se:Le==null?void 0:Le.metadata.namespace)!=null?It:"";return{headerTitle:`${(Rn=(En=(kt=Le==null?void 0:Le.metadata.title)!=null?kt:Ce)!=null?En:Le==null?void 0:Le.metadata.name)!=null?Rn:""}${na&&na!==m.zG?` in ${na}`:""}`,headerType:(()=>{let aa=cn.toLocaleLowerCase("en-US");return Le&&Le.spec&&"type"in Le.spec&&(aa+=" \u2014 ",aa+=Le.spec.type.toLocaleLowerCase("en-US")),aa})()}}function Ee(U){var se;const{entity:Ce}=U,Le=(0,t.hF)(Ce,m.S4);return P.createElement(P.Fragment,null,Le.length>0&&P.createElement(l.i9,{label:"Owner",value:P.createElement(t.rI,{entityRefs:Le,defaultKind:"Group",color:"inherit"})}),((se=Ce.spec)==null?void 0:se.lifecycle)&&P.createElement(l.i9,{label:"Lifecycle",value:Ce.spec.lifecycle}))}const ke=U=>{var se,Ce,Le;const{UNSTABLE_extraContextMenuItems:wt,UNSTABLE_contextMenuOptions:It,children:kt,NotFoundComponent:En}=U,{kind:Rn,namespace:cn,name:na}=(0,C.Oi)(t.wi),{entity:kn,loading:aa,error:ha}=(0,t.ce)(),oa=(0,Dt.TH)(),Qn=(0,C.vJ)(kt,w=>w.selectByComponentData({key:gn,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:$})=>{if(kn){if($.if&&!$.if(kn))return[]}else return[];return[{path:$.path,title:$.title,children:$.children,tabProps:$.tabProps}]}),[kn]),{headerTitle:$a,headerType:Pa}=oe(Rn,cn,na,kn),[ya,Ra]=(0,P.useState)(!1),[j,i]=(0,P.useState)(!1),g=(0,Dt.s0)(),I=async()=>{Ra(!1),i(!1),g("/")};return(0,P.useEffect)(()=>{Ra(!1),i(!1)},[oa.pathname]),P.createElement(l.T3,{themeId:(Le=(Ce=(se=kn==null?void 0:kn.spec)==null?void 0:se.type)==null?void 0:Ce.toString())!=null?Le:"home"},P.createElement(l.h4,{title:P.createElement(nt,{title:$a,entity:kn}),pageTitleOverride:$a,type:Pa},kn&&P.createElement(P.Fragment,null,P.createElement(Ee,{entity:kn}),P.createElement(Gt,{UNSTABLE_extraContextMenuItems:wt,UNSTABLE_contextMenuOptions:It,onUnregisterEntity:()=>Ra(!0),onInspectEntity:()=>i(!0)}))),aa&&P.createElement(l.Ex,null),kn&&P.createElement(l.tn,{routes:Qn}),ha&&P.createElement(l.VY,null,P.createElement(mt.Z,{severity:"error"},ha.toString())),!aa&&!ha&&!kn&&P.createElement(l.VY,null,En||P.createElement(l.GB,{title:"Entity not found"},"There is no ",Rn," with the requested"," ",P.createElement(l.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),P.createElement(t.pp,{open:ya,entity:kn,onConfirm:I,onClose:()=>Ra(!1)}),P.createElement(t.U_,{open:j,entity:kn,onClose:()=>i(!1)}))};ke.Route=Ke;function ot(U){const{open:se,onClose:Ce,onConfirm:Le,entity:wt}=U,[It,kt]=(0,P.useState)(!1),En=(0,C.h_)(t.Ah),Rn=(0,C.h_)(C.$v),cn=async()=>{kt(!0);try{const na=wt.metadata.uid;await En.removeEntityByUid(na),Le()}catch(na){(0,Vt.BD)(na),Rn.post({message:na.message})}finally{kt(!1)}};return P.createElement(dt.Z,{open:se,onClose:Ce},P.createElement(Wt.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),P.createElement(Ct.Z,null,P.createElement(G.Z,{variant:"contained",color:"secondary",disabled:It,onClick:cn},"Delete"),P.createElement(G.Z,{onClick:Ce,color:"primary"},"Cancel")))}function Ye(U){var se,Ce;return((Ce=(se=U==null?void 0:U.metadata)==null?void 0:se.annotations)==null?void 0:Ce["backstage.io/orphan"])==="true"}function ut(){const U=(0,Dt.s0)(),se=(0,C.tg)(Ln),[Ce,Le]=(0,P.useState)(!1),{entity:wt}=(0,t.X2)(),It=async()=>{Le(!1),U(se())};return P.createElement(P.Fragment,null,P.createElement(mt.Z,{severity:"warning",onClick:()=>Le(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),P.createElement(ot,{open:Ce,entity:wt,onConfirm:It,onClose:()=>Le(!1)}))}const At=U=>U.error&&U.level==="error"&&U.type===de.mk;async function Ft(U,se){return{items:(await se.getEntityAncestors({entityRef:U})).items.map(wt=>{var It,kt;return{errors:((kt=(It=wt.entity.status)==null?void 0:It.items)!=null?kt:[]).filter(At).map(cn=>cn.error).filter(cn=>Boolean(cn)),entity:wt.entity}}).filter(wt=>wt.errors.length>0)}}async function ue(U,se){const Ce=se.apis.get(t.Ah);if(!Ce)throw new Error(`No implementation available for ${t.Ah}`);return(await Ft((0,m.eE)(U),Ce)).items.length>0}function ye(){const{entity:U}=(0,t.X2)(),se=(0,m.eE)(U),Ce=(0,C.h_)(t.Ah),{loading:Le,error:wt,value:It}=(0,W.default)(async()=>Ft(se,Ce),[se,Ce]);return wt?P.createElement(B.Z,{mb:1},P.createElement(l.Gk,{error:wt})):Le||!It?null:P.createElement(P.Fragment,null,It.items.map((kt,En)=>P.createElement(B.Z,{key:En,mb:1},(0,m.eE)(U)!==(0,m.eE)(kt.entity)&&P.createElement(B.Z,{p:1},"The error below originates from"," ",P.createElement(t.dx,{entityRef:kt.entity})),kt.errors.map((Rn,cn)=>P.createElement(l.Gk,{key:cn,error:Rn})))))}const Oe="core.backstage.entitySwitch",He=U=>null;(0,C.R5)(He,Oe,!0);const rt=U=>{var se,Ce;const{entity:Le,loading:wt}=(0,t.ce)(),It=(0,C.I_)(),kt=(0,C.vJ)(U.children,Rn=>Rn.selectByComponentData({key:Oe,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(cn=>{if(wt)return[];const{if:na,children:kn}=cn.props;return Le?[{if:na==null?void 0:na(Le,{apis:It}),children:kn}]:[{if:na===void 0,children:kn}]}),[It,Le,wt]);if(kt.some(Rn=>typeof Rn.if=="object"&&"then"in Rn.if))return P.createElement(Pt,{results:kt,renderMultipleMatches:U.renderMultipleMatches});if(U.renderMultipleMatches==="all"){const Rn=kt.filter(cn=>cn.if).map(cn=>cn.children);return Rn.length===0?Ot(kt):P.createElement(P.Fragment,null,Rn)}return(Ce=(se=kt.find(Rn=>Rn.if))==null?void 0:se.children)!=null?Ce:Ot(kt)};function Pt({results:U,renderMultipleMatches:se}){const{loading:Ce,value:Le}=(0,W.default)(async()=>{var wt;const It=U.map(async({if:kt,children:En})=>{try{if(await kt)return En}catch{}return null});if(se==="all"){const kt=(await Promise.all(It)).filter(Boolean);return kt.length===0?Ot(U):P.createElement(P.Fragment,null,kt)}return(wt=(await Promise.all(It)).find(Boolean))!=null?wt:Ot(U)},[U]);return Ce||!Le?null:Le}function Ot(U){var se,Ce;return(Ce=(se=U.filter(Le=>Le.if===void 0)[0])==null?void 0:se.children)!=null?Ce:null}rt.Case=He;function jt(U,se){return Boolean(U&&(U==null?void 0:U.toLocaleLowerCase("en-US"))===(se==null?void 0:se.toLocaleLowerCase("en-US")))}function pn(U,se){return typeof se=="string"?jt(U,se):se.some(Ce=>jt(U,Ce))}function _n(U){return se=>pn(se.kind,U)}function bn(U){return se=>jt(se.kind,"component")?pn(se.spec.type,U):!1}function $n(U){return se=>{var Ce;return pn((Ce=se.metadata)==null?void 0:Ce.namespace,U)}}const Jn=null,Dn=t._i.Filters,Un=t._i.Content,hn=`metadata:
  name: example
  labels:
    javaVersion: 1.2.3`,Bn=(0,y.Z)(U=>({code:{borderRadius:6,margin:`${U.spacing(2)}px 0px`,background:U.palette.type==="dark"?"#444":U.palette.common.white}}),{name:"PluginCatalogEntityLabelsEmptyState"});function Pn(){const U=Bn();return P.createElement(P.Fragment,null,P.createElement(f.Z,{variant:"body1"},"No labels defined for this entity. You can add labels to your entity YAML as shown in the highlighted example below:"),P.createElement("div",{className:U.code},P.createElement(l.Oi,{text:hn,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6],customStyle:{background:"inherit",fontSize:"115%"}})),P.createElement(G.Z,{variant:"contained",color:"primary",target:"_blank",href:"https://backstage.io/docs/features/software-catalog/descriptor-format#labels-optional"},"Read more"))}const yn=(0,y.Z)(U=>({key:{fontWeight:"bold"}})),Kn=U=>{var se;const{variant:Ce,title:Le}=U,{entity:wt}=(0,t.X2)(),It=yn(),kt=[{render:Rn=>P.createElement(f.Z,{className:It.key,variant:"body2"},Rn.key)},{field:"value"}],En=(se=wt==null?void 0:wt.metadata)==null?void 0:se.labels;return P.createElement(l.rJ,{title:Le||"Labels",variant:Ce},!En||Object.keys(En).length===0?P.createElement(Pn,null):P.createElement(l.iA,{columns:kt,data:Object.keys(En).map(Rn=>({key:Rn,value:En[Rn]})),options:{search:!1,showTitle:!0,loadingType:"linear",header:!1,padding:"dense",pageSize:5,toolbar:!1,paging:Object.keys(En).length>5}}))};function sa(U){var se,Ce;return(se=U==null?void 0:U.metadata)!=null&&se.labels?Object.keys((Ce=U==null?void 0:U.metadata)==null?void 0:Ce.labels).some(Boolean):!1}const zn=(0,C.rx)({id:"catalog",apis:[(0,C.ni)({api:t.Ah,deps:{discoveryApi:C.NW,fetchApi:C.gP},factory:({discoveryApi:U,fetchApi:se})=>new de.MS({discoveryApi:U,fetchApi:se})}),(0,C.ni)({api:t.p3,deps:{storageApi:C.E6},factory:({storageApi:U})=>new ln({storageApi:U})})],routes:{catalogIndex:Ln,catalogEntity:t.wi},externalRoutes:{createComponent:mn,viewTechDoc:dn},__experimentalConfigure(U){return{...{createButtonTitle:"Create"},...U}}}),jn=zn.provide((0,C.P4)({name:"CatalogIndexPage",component:()=>e.e(6135).then(e.bind(e,16135)).then(U=>U.CatalogPage),mountPoint:Ln})),ua=zn.provide((0,C.P4)({name:"CatalogEntityPage",component:()=>e.e(4104).then(e.bind(e,94104)).then(U=>U.CatalogEntityPage),mountPoint:t.wi})),_a=zn.provide((0,C.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(4702).then(e.bind(e,4702)).then(U=>U.AboutCard)}})),Ga=zn.provide((0,C.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(405).then(e.bind(e,74192)).then(U=>U.EntityLinksCard)}})),Ha=zn.provide((0,C.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(7357).then(e.bind(e,7357)).then(U=>U.EntityLabelsCard)}})),ur=zn.provide((0,C.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(8083).then(e.bind(e,88083)).then(U=>U.HasSystemsCard)}})),er=zn.provide((0,C.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(3676).then(e.bind(e,83676)).then(U=>U.HasComponentsCard)}})),Qa=zn.provide((0,C.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(962).then(e.bind(e,40962)).then(U=>U.HasSubcomponentsCard)}})),pr=zn.provide((0,C.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(7158).then(e.bind(e,87158)).then(U=>U.HasResourcesCard)}})),Ja=zn.provide((0,C.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(6178).then(e.bind(e,36178)).then(U=>U.DependsOnComponentsCard)}})),L=zn.provide((0,C.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(9462).then(e.bind(e,89462)).then(U=>U.DependencyOfComponentsCard)}})),Z=zn.provide((0,C.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(3885).then(e.bind(e,13885)).then(U=>U.DependsOnResourcesCard)}})),q=zn.provide((0,C.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(2027).then(e.bind(e,2027)).then(U=>U.RelatedEntitiesCard)}})),_e=zn.provide((0,Tt.E5)({name:"CatalogSearchResultListItem",component:()=>e.e(9787).then(e.bind(e,67830)).then(U=>U.CatalogSearchResultListItem),predicate:U=>U.type==="software-catalog"}))},16673:function(Kt,d,e){e.d(d,{BL:function(){return n.o},Cy:function(){return n.m},Eq:function(){return n.u},Es:function(){return n.C},FZ:function(){return n.r},Hz:function(){return n.t},Kf:function(){return n.F},PA:function(){return n.v},Tu:function(){return n.e},_l:function(){return n.z},bM:function(){return n.g},dN:function(){return n.d},f2:function(){return n.p},im:function(){return n.x},jF:function(){return n.j},mr:function(){return n.w},o6:function(){return n.k},oU:function(){return n.n},p$:function(){return n.y},rR:function(){return n.f},yf:function(){return n.l}});var n=e(33182),c=e(82394),m=e.n(c),u=e(34520),r=e(76635),l=e.n(r),C=e(49558),_=e(30705),t=e(49462),y=e(73495),f=e(2784),F=e(19928),B=e.n(F),k=e(52963),X=e(75650),A=e(32272),D=e(88285),N=e(92573)},42214:function(Kt,d,e){e.d(d,{IJ:function(){return Ie},Oz:function(){return at},Q3:function(){return T},fX:function(){return pt},i4:function(){return Ae}});var n=e(30705),c=e(1854),m=e(89393),u=e(2784),r=e(73495),l=e(39857),C=e(73557),_=e(79692),t=e(27616),y=e(8284),f=e(90436),F=e(4614),B=e(80030),k=e(69087),X=e(35111),A=e(14498),D=e(89571),N=e(15584),p=e(49378),h=e(70660),b=e(91256),E=e(37390),S=e(95544),K=e(67358),pe=e(27556),he=e(97485),Fe=e(61837),ct=e(77277),Ut=e(38016),dt=e(69001),Wt=e(26228),Ct=e(49558),G=e(64279),fn=e(30254),Et=e(43266),je=e(58838),P=e(77446),Ue=e(26883);const H=(0,n.T0)({id:"plugin.githubactions.service"});class R{constructor(te){this.configApi=te.configApi,this.githubAuthApi=te.githubAuthApi}async getOctokit(te){var ae;const Be=await this.githubAuthApi.getAccessToken(["repo"]),ft=(0,c.MY)((ae=this.configApi.getOptionalConfigArray("integrations.github"))!=null?ae:[]).find(rn=>rn.host===te),bt=ft==null?void 0:ft.apiBaseUrl;return new m.v({auth:Be,baseUrl:bt})}async reRunWorkflow(te){const{hostname:ae,owner:Be,repo:tt,runId:ft}=te;return(await this.getOctokit(ae)).actions.reRunWorkflow({owner:Be,repo:tt,run_id:ft})}async listWorkflowRuns(te){const{hostname:ae,owner:Be,repo:tt,pageSize:ft=100,page:bt=0,branch:rn}=te;return(await(await this.getOctokit(ae)).actions.listWorkflowRunsForRepo({owner:Be,repo:tt,per_page:ft,page:bt,...rn?{branch:rn}:{}})).data}async getWorkflow(te){const{hostname:ae,owner:Be,repo:tt,id:ft}=te;return(await(await this.getOctokit(ae)).actions.getWorkflow({owner:Be,repo:tt,workflow_id:ft})).data}async getWorkflowRun(te){const{hostname:ae,owner:Be,repo:tt,id:ft}=te;return(await(await this.getOctokit(ae)).actions.getWorkflowRun({owner:Be,repo:tt,run_id:ft})).data}async listJobsForWorkflowRun(te){const{hostname:ae,owner:Be,repo:tt,id:ft,pageSize:bt=100,page:rn=0}=te;return(await(await this.getOctokit(ae)).actions.listJobsForWorkflowRun({owner:Be,repo:tt,run_id:ft,per_page:bt,page:rn})).data}async downloadJobLogsForWorkflowRun(te){const{hostname:ae,owner:Be,repo:tt,runId:ft}=te;return(await(await this.getOctokit(ae)).actions.downloadJobLogsForWorkflowRun({owner:Be,repo:tt,job_id:ft})).data}}var W=(Se=>(Se[Se.success=0]="success",Se[Se.failure=1]="failure",Se[Se.pending=2]="pending",Se[Se.running=3]="running",Se))(W||{});const ge=(0,n.NT)({id:"github-actions"}),Me=(0,n.Rz)({id:"github-actions/build",path:"/:id",parent:ge}),et=(0,n.rx)({id:"github-actions",apis:[(0,n.ni)({api:H,deps:{configApi:n.Ds,githubAuthApi:n.F4},factory:({configApi:Se,githubAuthApi:te})=>new R({configApi:Se,githubAuthApi:te})})],routes:{entityContent:ge}}),pt=et.provide((0,n.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return J}).then(Se=>Se.Router),mountPoint:ge})),mt=et.provide((0,n.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(5878).then(e.bind(e,85878)).then(Se=>Se.LatestWorkflowRunCard)}})),Dt=et.provide((0,n.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(5878).then(e.bind(e,85878)).then(Se=>Se.LatestWorkflowsForBranchCard)}})),ie=et.provide((0,n.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(5878).then(e.bind(e,85878)).then(Se=>Se.RecentWorkflowRunsCard)}})),o="github.com/project-slug",xe=Se=>{var te,ae;return(ae=(te=Se==null?void 0:Se.metadata.annotations)==null?void 0:te[o])!=null?ae:""},be=({status:Se,conclusion:te})=>{if(Se===void 0)return null;switch(Se.toLocaleLowerCase("en-US")){case"queued":return u.createElement(u.Fragment,null,u.createElement(Ct.wA,null)," Queued");case"in_progress":return u.createElement(u.Fragment,null,u.createElement(Ct.VC,null)," In progress");case"completed":switch(te==null?void 0:te.toLocaleLowerCase("en-US")){case"skipped":return u.createElement(u.Fragment,null,u.createElement(Ct.dh,null)," Aborted");case"timed_out":return u.createElement(u.Fragment,null,u.createElement(Ct.Pd,null)," Timed out");case"failure":return u.createElement(u.Fragment,null,u.createElement(Ct.vK,null)," Error");default:return u.createElement(u.Fragment,null,u.createElement(Ct.Kq,null)," Completed")}default:return u.createElement(u.Fragment,null,u.createElement(Ct.wA,null)," Pending")}},Rt=({hostname:Se,owner:te,repo:ae})=>{const Be=(0,n.h_)(H),{id:tt}=(0,n.Oi)(Me);return(0,G.default)(async()=>{if(!ae||!te)throw new Error("No repo/owner provided");const ft=await Be.listJobsForWorkflowRun({hostname:Se,owner:te,repo:ae,id:parseInt(tt,10)});return{total_count:ft.total_count,jobs:ft.jobs.map(bt=>{var rn,Gt,gn,Ke;return{html_url:(rn=bt.html_url)!=null?rn:void 0,status:bt.status,conclusion:(Gt=bt.conclusion)!=null?Gt:void 0,started_at:bt.started_at,completed_at:(gn=bt.completed_at)!=null?gn:void 0,id:bt.id,name:bt.name,steps:(Ke=bt.steps)==null?void 0:Ke.map(nt=>{var oe,Ee,ke;return{name:nt.name,status:nt.status,conclusion:(oe=nt.conclusion)!=null?oe:void 0,number:nt.number,started_at:(Ee=nt.started_at)!=null?Ee:void 0,completed_at:(ke=nt.completed_at)!=null?ke:void 0}})}})}},[ae,te,tt])},vt=({hostname:Se,owner:te,repo:ae})=>{const Be=(0,n.h_)(H),{id:tt}=(0,n.Oi)(Me);return(0,G.default)(async()=>ae&&te?Be.getWorkflowRun({hostname:Se,owner:te,repo:ae,id:parseInt(tt,10)}):Promise.reject(new Error("No repo/owner provided")),[ae,te,tt])},Vt=({hostname:Se,owner:te,repo:ae,id:Be})=>{const tt=(0,n.h_)(H);return(0,G.default)(async()=>ae&&te?tt.downloadJobLogsForWorkflowRun({hostname:Se,owner:te,repo:ae,runId:Be}):Promise.reject("No repo/owner provided"),[ae,te,Be])},de=(0,_.Z)(Se=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:Se.palette.background.default}})),Tt=({entity:Se,runId:te,inProgress:ae})=>{var Be;const tt=(0,n.h_)(n.Ds),ft=de(),bt=xe(Se),rn=(0,c.MY)((Be=tt.getOptionalConfigArray("integrations.github"))!=null?Be:[])[0].host,[Gt,gn]=bt&&bt.split("/")||[],Ke=Vt({hostname:rn,owner:Gt,repo:gn,id:te}),nt=Ke.value?String(Ke.value):void 0,[oe,Ee]=u.useState(!1),ke=()=>{Ee(!0)},ot=()=>{Ee(!1)};return u.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},disabled:ae},u.createElement(y.Z,{expandIcon:u.createElement(Ut.Z,null),IconButtonProps:{className:ft.button}},u.createElement(f.Z,{variant:"button"},Ke.loading?u.createElement(F.Z,null):"Job Log"),u.createElement(B.ZP,{title:"Open Log",TransitionComponent:k.Z,arrow:!0},u.createElement(fn.Z,{onClick:Ye=>{Ye.stopPropagation(),ke()},style:{marginLeft:"auto"}})),u.createElement(X.Z,{className:ft.modal,onClick:Ye=>Ye.stopPropagation(),open:oe,onClose:ot},u.createElement(A.Z,{in:oe},u.createElement("div",{className:ft.modalLogContainer},u.createElement(Ct.nU,{text:nt!=null?nt:"No Values Found",classes:{root:ft.log}}))))),nt&&u.createElement("div",{className:ft.normalLogContainer},u.createElement(Ct.nU,{text:nt,classes:{root:ft.log}})))},xt=(0,_.Z)(Se=>({root:{maxWidth:720,margin:Se.spacing(2)},title:{padding:Se.spacing(1,0,2,0)},table:{padding:Se.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),ln=(Se,te)=>{if(!Se||!te)return"";const ae=Wt.ou.fromISO(Se);return(te?Wt.ou.fromISO(te):Wt.ou.now()).diff(ae).toFormat("m 'minutes' s 'seconds'")},mn=({step:Se})=>{var te;return u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(p.Z,{primary:Se.name,secondary:ln(Se.started_at,Se.completed_at)})),u.createElement(N.Z,null,u.createElement(be,{status:Se.status.toLocaleUpperCase("en-US"),conclusion:(te=Se.conclusion)==null?void 0:te.toLocaleUpperCase("en-US")})))},dn=({job:Se,className:te,entity:ae})=>{var Be;const tt=xt();return u.createElement(t.Z,{TransitionProps:{unmountOnExit:!0},className:te},u.createElement(y.Z,{expandIcon:u.createElement(Ut.Z,null),IconButtonProps:{className:tt.button}},u.createElement(f.Z,{variant:"button"},Se.name," (",ln(Se.started_at,Se.completed_at),")")),u.createElement(h.Z,{className:tt.accordionDetails},u.createElement(b.Z,null,u.createElement(E.Z,null,(Be=Se.steps)==null?void 0:Be.map(ft=>u.createElement(mn,{key:ft.number,step:ft}))))),Se.status==="queued"||Se.status==="in_progress"?u.createElement(Tt,{runId:Se.id,inProgress:!0,entity:ae}):u.createElement(Tt,{runId:Se.id,inProgress:!1,entity:ae}))},Ln=({jobs:Se,entity:te})=>{const ae=xt();return u.createElement(S.Z,null,Se&&Se.total_count>0&&Se.jobs.map(Be=>u.createElement(dn,{key:Be.id,job:Be,className:Be.status!=="success"?ae.failed:ae.success,entity:te})))},it=({entity:Se})=>{var te,ae,Be,tt,ft,bt,rn,Gt,gn,Ke,nt,oe,Ee,ke,ot,Ye;const ut=(0,n.h_)(n.Ds),At=xe(Se),Ft=(0,c.MY)((te=ut.getOptionalConfigArray("integrations.github"))!=null?te:[])[0].host,[ue,ye]=At&&At.split("/")||[],Oe=vt({hostname:Ft,owner:ue,repo:ye}),He=Rt({hostname:Ft,owner:ue,repo:ye}),rt=xt();return Oe.error&&Oe.error.message?u.createElement(f.Z,{variant:"h6",color:"error"},"Failed to load build, ",Oe.error.message):Oe.loading?u.createElement(K.Z,null):u.createElement("div",{className:rt.root},u.createElement(S.Z,{mb:3},u.createElement(Ct.Oo,{"aria-label":"breadcrumb"},u.createElement(Ct.rU,{to:".."},"Workflow runs"),u.createElement(f.Z,null,"Workflow run details"))),u.createElement(b.Z,{component:pe.Z,className:rt.table},u.createElement(E.Z,null,u.createElement(he.Z,null,u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Branch")),u.createElement(N.Z,null,(ae=Oe.value)==null?void 0:ae.head_branch)),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Message")),u.createElement(N.Z,null,(tt=(Be=Oe.value)==null?void 0:Be.head_commit)==null?void 0:tt.message)),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Commit ID")),u.createElement(N.Z,null,(bt=(ft=Oe.value)==null?void 0:ft.head_commit)==null?void 0:bt.id)),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Workflow")),u.createElement(N.Z,null,(rn=Oe.value)==null?void 0:rn.name)),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Status")),u.createElement(N.Z,null,u.createElement(be,{status:((Gt=Oe.value)==null?void 0:Gt.status)||void 0,conclusion:((gn=Oe.value)==null?void 0:gn.conclusion)||void 0}))),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Author")),u.createElement(N.Z,null,`${(oe=(nt=(Ke=Oe.value)==null?void 0:Ke.head_commit)==null?void 0:nt.author)==null?void 0:oe.name} (${(ot=(ke=(Ee=Oe.value)==null?void 0:Ee.head_commit)==null?void 0:ke.author)==null?void 0:ot.email})`)),u.createElement(D.Z,null,u.createElement(N.Z,null,u.createElement(f.Z,{noWrap:!0},"Links")),u.createElement(N.Z,null,((Ye=Oe.value)==null?void 0:Ye.html_url)&&u.createElement(Ct.rU,{to:Oe.value.html_url},"Workflow runs on GitHub"," ",u.createElement(dt.Z,{className:rt.externalLinkIcon})))),u.createElement(D.Z,null,u.createElement(N.Z,{colSpan:2},u.createElement(f.Z,{noWrap:!0},"Jobs"),He.loading?u.createElement(F.Z,null):u.createElement(Ln,{jobs:He.value,entity:Se})))))))};function $e({hostname:Se,owner:te,repo:ae,branch:Be,initialPageSize:tt=5}){const ft=(0,n.h_)(H),bt=(0,n.h_)(n.VE),[rn,Gt]=(0,u.useState)(0),[gn,Ke]=(0,u.useState)(0),[nt,oe]=(0,u.useState)(tt),{loading:Ee,value:ke,retry:ot,error:Ye}=(0,P.Z)(async()=>{const ut=await ft.listWorkflowRuns({hostname:Se,owner:te,repo:ae,pageSize:nt,page:gn+1,branch:Be});return Gt(ut.total_count),ut.workflow_runs.map(At=>{var Ft,ue,ye,Oe,He,rt,Pt,Ot,jt;return{workflowName:(Ft=At.name)!=null?Ft:void 0,message:(ue=At.head_commit)==null?void 0:ue.message,id:`${At.id}`,onReRunClick:async()=>{try{await ft.reRunWorkflow({hostname:Se,owner:te,repo:ae,runId:At.id})}catch(pn){bt.post(new Error(`Failed to rerun the workflow: ${pn.message}`))}},source:{branchName:(ye=At.head_branch)!=null?ye:void 0,commit:{hash:(Oe=At.head_commit)==null?void 0:Oe.id,url:(Pt=(He=At.head_repository)==null?void 0:He.branches_url)==null?void 0:Pt.replace("{/branch}",(rt=At.head_branch)!=null?rt:"")}},status:(Ot=At.status)!=null?Ot:void 0,conclusion:(jt=At.conclusion)!=null?jt:void 0,url:At.url,githubUrl:At.html_url}})},[gn,nt,ae,te]);return[{page:gn,pageSize:nt,loading:Ee,runs:ke,projectName:`${te}/${ae}`,total:rn,error:Ye},{runs:ke,setPage:Ke,setPageSize:oe,retry:ot}]}const Zt=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:Se=>{const te=()=>{const ae=(0,n.tg)(Me);return u.createElement(Ct.rU,{component:l.rU,to:ae({id:Se.id})},Se.message)};return u.createElement(te,null)}},{title:"Source",render:Se=>{var te,ae;return u.createElement(f.Z,{variant:"body2",noWrap:!0},u.createElement(f.Z,{paragraph:!0,variant:"body2"},(te=Se.source)==null?void 0:te.branchName),u.createElement(f.Z,{paragraph:!0,variant:"body2"},(ae=Se.source)==null?void 0:ae.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",width:"150px",render:Se=>u.createElement(S.Z,{display:"flex",alignItems:"center"},u.createElement(be,{status:Se.status,conclusion:Se.conclusion}))},{title:"Actions",render:Se=>u.createElement(B.ZP,{title:"Rerun workflow"},u.createElement(Fe.Z,{onClick:Se.onReRunClick},u.createElement(Et.Z,null))),width:"10%"}],Je=({projectName:Se,loading:te,pageSize:ae,page:Be,retry:tt,runs:ft,onChangePage:bt,onChangePageSize:rn,total:Gt})=>u.createElement(Ct.iA,{isLoading:te,options:{paging:!0,pageSize:ae,padding:"dense"},totalCount:Gt,page:Be,actions:[{icon:()=>u.createElement(Ue.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>tt()}],data:ft!=null?ft:[],onPageChange:bt,onRowsPerPageChange:rn,style:{width:"100%"},title:u.createElement(S.Z,{display:"flex",alignItems:"center"},u.createElement(je.Z,null),u.createElement(S.Z,{mr:1}),u.createElement(f.Z,{variant:"h6"},Se)),columns:Zt}),Pe=({entity:Se,branch:te})=>{var ae;const Be=(0,n.h_)(n.Ds),tt=xe(Se),ft=(0,c.MY)((ae=Be.getOptionalConfigArray("integrations.github"))!=null?ae:[])[0].host,[bt,rn]=(tt!=null?tt:"/").split("/"),[{runs:Gt,...gn},{retry:Ke,setPage:nt,setPageSize:oe}]=$e({hostname:ft,owner:bt,repo:rn,branch:te}),Ee=ft||"github.com";return!gn.loading&&!Gt?u.createElement(Ct.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:u.createElement(ct.Z,{variant:"contained",color:"primary",href:`https://${Ee}/${tt}/actions/new`},"Create new Workflow")}):u.createElement(Je,{...gn,runs:Gt,loading:gn.loading,retry:Ke,onChangePageSize:oe,onChangePage:nt})},T=Se=>{var te;return Boolean((te=Se.metadata.annotations)==null?void 0:te[o])};var J=Object.freeze({__proto__:null,isGithubActionsAvailable:T,Router:()=>{const{entity:Se}=(0,r.X2)();return T(Se)?u.createElement(C.Z5,null,u.createElement(C.AW,{path:"/",element:u.createElement(Pe,{entity:Se})}),u.createElement(C.AW,{path:`${Me.path}`,element:u.createElement(it,{entity:Se})}),")"):u.createElement(Ct.sk,{annotation:o})}});const ne=(0,_.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),re=Se=>{var te;const{error:ae,loading:Be,lastRun:tt,branch:ft}=Se,bt=ne();return ae?u.createElement(f.Z,null,"Couldn't fetch latest ",ft," run"):Be?u.createElement(K.Z,null):u.createElement(Ct.xT,{metadata:{status:u.createElement(u.Fragment,null,u.createElement(be,{status:tt.status,conclusion:tt.conclusion})),message:tt.message,url:u.createElement(Ct.rU,{to:(te=tt.githubUrl)!=null?te:""},"See more on GitHub"," ",u.createElement(dt.Z,{className:bt.externalLinkIcon}))}})},Ae=Se=>{var te,ae,Be,tt;const{branch:ft="master",variant:bt}=Se,{entity:rn}=(0,r.X2)(),Gt=(0,n.h_)(n.Ds),gn=(0,n.h_)(n.VE),Ke=(0,c.MY)((te=Gt.getOptionalConfigArray("integrations.github"))!=null?te:[])[0].host,[nt,oe]=((Be=(ae=rn==null?void 0:rn.metadata.annotations)==null?void 0:ae[o])!=null?Be:"/").split("/"),[{runs:Ee,loading:ke,error:ot}]=$e({hostname:Ke,owner:nt,repo:oe,branch:ft}),Ye=(tt=Ee==null?void 0:Ee[0])!=null?tt:{};return(0,u.useEffect)(()=>{ot&&gn.post(ot)},[ot,gn]),u.createElement(Ct.rJ,{title:`Last ${ft} build`,variant:bt},u.createElement(re,{error:ot,loading:ke,branch:ft,lastRun:Ye}))},Ie=Se=>{const{branch:te="master",variant:ae}=Se,{entity:Be}=(0,r.X2)();return u.createElement(Ct.rJ,{title:`Last ${te} build`,variant:ae},u.createElement(Pe,{branch:te,entity:Be}))},Ve=Se=>Se.split(`
`)[0],at=Se=>{var te,ae,Be;const{branch:tt,dense:ft=!1,limit:bt=5,variant:rn}=Se,{entity:Gt}=(0,r.X2)(),gn=(0,n.h_)(n.Ds),Ke=(0,n.h_)(n.VE),nt=(0,c.MY)((te=gn.getOptionalConfigArray("integrations.github"))!=null?te:[])[0].host,[oe,Ee]=((Be=(ae=Gt==null?void 0:Gt.metadata.annotations)==null?void 0:ae[o])!=null?Be:"/").split("/"),[{runs:ke=[],loading:ot,error:Ye}]=$e({hostname:nt,owner:oe,repo:Ee,branch:tt,initialPageSize:bt});(0,u.useEffect)(()=>{Ye&&Ke.post(Ye)},[Ye,Ke]);const ut=nt||"github.com",At=(0,n.tg)(Me);return Ye?u.createElement(Ct.yu,{title:Ye.message,error:Ye}):u.createElement(Ct.rJ,{title:"Recent Workflow Runs",subheader:tt?`Branch: ${tt}`:"All Branches",noPadding:!0,variant:rn},ke.length?u.createElement(Ct.iA,{isLoading:ot,options:{search:!1,paging:!1,padding:ft?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:Ft=>{var ue;return u.createElement(Ct.rU,{component:l.rU,to:At({id:Ft.id})},Ve((ue=Ft.message)!=null?ue:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:be}],data:ke}):u.createElement("div",{style:{textAlign:"center"}},u.createElement(f.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),u.createElement(f.Z,{variant:"body2"},u.createElement(Ct.rU,{to:`https://${ut}/${oe}/${Ee}/actions/new`},"Create a new workflow"))))}},59235:function(Kt,d,e){e.d(d,{$M:function(){return H},Eg:function(){return W},Jh:function(){return be},Yq:function(){return Ln},jJ:function(){return it},jQ:function(){return ge},oy:function(){return o},qJ:function(){return pt},rw:function(){return R},w1:function(){return Ue}});var n=e(30705),c=e(34520),m=e(73495),u=e(79692),r=e(12420),l=e(60905),C=e(95544),_=e(90436),t=e(38402),y=e(86136),f=e(49378),F=e(85256),B=e(61837),k=e(11776),X=e(80030),A=e(9520),D=e(82938),N=e(76637),p=e(2784),h=e(16060),b=e(64279),E=e(49558),S=e(73655),K=e(99688),pe=e(52866),he=e(27604),Fe=e(13384),ct=e(62367),Ut=e(52160),dt=e(98685),Wt=e(19928),Ct=e.n(Wt),G=e(14162),fn=e.n(G),Et=e(19126),je=e.n(Et);const P=(0,n.x8)({id:"catalog-index"}),Ue=(0,n.rx)({id:"org",externalRoutes:{catalogIndex:P}}),H=Ue.provide((0,n.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(3612).then(e.bind(e,93612)).then($e=>$e.GroupProfileCard)}})),R=Ue.provide((0,n.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(3612).then(e.bind(e,93612)).then($e=>$e.MembersListCard)}})),W=Ue.provide((0,n.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(3612).then(e.bind(e,93612)).then($e=>$e.OwnershipCard)}})),ge=Ue.provide((0,n.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(3612).then(e.bind(e,93612)).then($e=>$e.UserProfileCard)}})),Me=(0,u.Z)($e=>(0,r.Z)({card:{border:`1px solid ${$e.palette.divider}`,boxShadow:$e.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:$e.spacing(4,1,1),flex:"1",minWidth:"0px"}})),et=$e=>{var Zt;const Je=Me(),{metadata:{name:Pe,description:T},spec:{profile:M}}=$e.member,J=(Zt=M==null?void 0:M.displayName)!=null?Zt:Pe;return p.createElement(l.Z,{item:!0,container:!0,xs:12,sm:6,md:4,xl:2},p.createElement(C.Z,{className:Je.card},p.createElement(C.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},p.createElement(E.qE,{displayName:J,picture:M==null?void 0:M.picture,customStyles:{position:"absolute",top:"-2rem"}}),p.createElement(C.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},p.createElement(_.Z,{variant:"h6"},p.createElement(E.rU,{to:(0,h.Gn)(`/catalog/:namespace/user/${Pe}`,(0,m.hd)($e.member))},p.createElement(E.Or,{text:J}))),(M==null?void 0:M.email)&&p.createElement(E.rU,{to:`mailto:${M.email}`},p.createElement(E.Or,{text:M.email})),T&&p.createElement(_.Z,{variant:"subtitle2"},T)))))},pt=$e=>{var Zt;const{memberDisplayTitle:Je="Members",pageSize:Pe=50}=$e,{entity:T}=(0,m.X2)(),{metadata:{name:M,namespace:J},spec:{profile:ne}}=T,re=(0,n.h_)(m.Ah),Ae=(Zt=ne==null?void 0:ne.displayName)!=null?Zt:M,Ie=J||c.zG,[Ve,at]=p.useState(1),Se=(rn,Gt)=>{at(Gt)},{loading:te,error:ae,value:Be}=(0,b.default)(async()=>(await re.getEntities({filter:{kind:"User","relations.memberof":[(0,c.eE)({kind:"group",namespace:Ie.toLocaleLowerCase("en-US"),name:M.toLocaleLowerCase("en-US")})]}})).items,[re,T]);if(te)return p.createElement(E.Ex,null);if(ae)return p.createElement(E.Gk,{error:ae});const tt=Math.ceil(((Be==null?void 0:Be.length)||0)/Pe),ft=tt<2?"":`, page ${Ve} of ${tt}`,bt=p.createElement(N.Z,{count:tt,page:Ve,onChange:Se,showFirstButton:!0,showLastButton:!0});return p.createElement(l.Z,{item:!0},p.createElement(E.rJ,{title:`${Je} (${(Be==null?void 0:Be.length)||0}${ft})`,subheader:`of ${Ae}`,...tt<=1?{}:{actions:bt}},p.createElement(l.Z,{container:!0,spacing:3},Be&&Be.length>0?Be.slice(Pe*(Ve-1),Pe*Ve).map(rn=>p.createElement(et,{member:rn,key:rn.metadata.uid})):p.createElement(C.Z,{p:2},p.createElement(_.Z,null,"This group has no ",Je.toLocaleLowerCase(),".")))))},mt=({href:$e,Icon:Zt,text:Je})=>p.createElement(t.Z,{key:$e},p.createElement(y.Z,null,Zt?p.createElement(Zt,null):p.createElement(Ut.Z,null)),p.createElement(f.Z,null,p.createElement(E.rU,{to:$e},Je))),Dt=({links:$e})=>{const Zt=(0,n.qD)(),Je=Pe=>{var T;return Pe&&(T=Zt.getSystemIcon(Pe))!=null?T:Ut.Z};return $e===void 0?null:p.createElement(p.Fragment,null,p.createElement(F.Z,null),$e.map(Pe=>p.createElement(mt,{key:Pe.url,href:Pe.url,text:Pe.title,Icon:Je(Pe.icon)})))},ie=$e=>p.createElement(C.Z,{display:"flex",alignItems:"center"},p.createElement(ct.Z,{fontSize:"inherit"}),p.createElement(C.Z,{ml:1},$e.title)),o=$e=>{var Zt,Je;const Pe=(0,n.h_)(m.Ah),T=(0,n.h_)(n.$v),{entity:M}=(0,m.X2)(),J=(0,p.useCallback)(async()=>{await Pe.refreshEntity((0,c.eE)(M)),T.post({message:"Refresh scheduled",severity:"info"})},[Pe,T,M]);if(!M)return p.createElement(K.Z,{severity:"error"},"Group not found");const{metadata:{name:ne,description:re,annotations:Ae,links:Ie},spec:{profile:Ve}}=M,at=(0,m.hF)(M,c._b,{kind:"Group"}),Se=(0,m.hF)(M,c.wP,{kind:"group"}),te=Ae==null?void 0:Ae[c.P1],ae=(te==null?void 0:te.startsWith("url:"))||(te==null?void 0:te.startsWith("file:")),Be=(Zt=M.metadata.annotations)==null?void 0:Zt[c.Tf],tt=(Je=Ve==null?void 0:Ve.displayName)!=null?Je:ne,ft=Ve!=null&&Ve.email?`mailto:${Ve.email}`:"#",bt=Be?p.createElement(B.Z,{"aria-label":"Edit",title:"Edit Metadata",component:E.rU,to:Be},p.createElement(he.Z,null)):p.createElement(B.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},p.createElement(he.Z,null));return p.createElement(E.rJ,{title:p.createElement(ie,{title:tt}),subheader:re,variant:$e.variant,action:p.createElement(p.Fragment,null,ae&&p.createElement(B.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:J},p.createElement(pe.Z,null)),bt)},p.createElement(l.Z,{container:!0,spacing:3},p.createElement(l.Z,{item:!0,xs:12,sm:2,xl:1},p.createElement(E.qE,{displayName:tt,picture:Ve==null?void 0:Ve.picture})),p.createElement(l.Z,{item:!0,md:10,xl:11},p.createElement(k.Z,null,(Ve==null?void 0:Ve.email)&&p.createElement(t.Z,null,p.createElement(y.Z,null,p.createElement(X.ZP,{title:"Email"},p.createElement(Fe.Z,null))),p.createElement(f.Z,{primary:p.createElement(E.rU,{to:ft},Ve.email),secondary:"Email"})),p.createElement(t.Z,null,p.createElement(y.Z,null,p.createElement(X.ZP,{title:"Parent Group"},p.createElement(S.Z,null))),p.createElement(f.Z,{primary:Se.length?p.createElement(m.rI,{entityRefs:Se,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),p.createElement(t.Z,null,p.createElement(y.Z,null,p.createElement(X.ZP,{title:"Child Groups"},p.createElement(ct.Z,null))),p.createElement(f.Z,{primary:at.length?p.createElement(m.rI,{entityRefs:at,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),($e==null?void 0:$e.showLinks)&&p.createElement(Dt,{links:Ie})))))},xe=$e=>$e.title?p.createElement(C.Z,{display:"flex",alignItems:"center"},p.createElement(dt.Z,{fontSize:"inherit"}),p.createElement(C.Z,{ml:1},$e.title)):null,be=$e=>{var Zt,Je;const{entity:Pe}=(0,m.X2)();if(!Pe)return p.createElement(K.Z,{severity:"error"},"User not found");const T=(Zt=Pe.metadata.annotations)==null?void 0:Zt[c.Tf],{metadata:{name:M,description:J,links:ne},spec:{profile:re}}=Pe,Ae=(Je=re==null?void 0:re.displayName)!=null?Je:M,Ie=re!=null&&re.email?`mailto:${re.email}`:void 0,Ve=(0,m.hF)(Pe,c.hr,{kind:"Group"});return p.createElement(E.rJ,{title:p.createElement(xe,{title:Ae}),subheader:J,variant:$e.variant,action:p.createElement(p.Fragment,null,T&&p.createElement(B.Z,{"aria-label":"Edit",title:"Edit Metadata",component:E.rU,to:T},p.createElement(he.Z,null)))},p.createElement(l.Z,{container:!0,spacing:3,alignItems:"flex-start"},p.createElement(l.Z,{item:!0,xs:12,sm:2,xl:1},p.createElement(E.qE,{displayName:Ae,picture:re==null?void 0:re.picture})),p.createElement(l.Z,{item:!0,md:10,xl:11},p.createElement(k.Z,null,(re==null?void 0:re.email)&&p.createElement(t.Z,null,p.createElement(y.Z,null,p.createElement(X.ZP,{title:"Email"},p.createElement(Fe.Z,null))),p.createElement(f.Z,null,p.createElement(E.rU,{to:Ie!=null?Ie:""},re.email))),p.createElement(t.Z,null,p.createElement(y.Z,null,p.createElement(X.ZP,{title:"Member of"},p.createElement(ct.Z,null))),p.createElement(f.Z,null,p.createElement(m.rI,{entityRefs:Ve,defaultKind:"Group"}))),($e==null?void 0:$e.showLinks)&&p.createElement(Dt,{links:ne})))))},Rt=fn()(10),vt=($e,Zt)=>{const{kind:Je,type:Pe}=Zt,T=$e.map(J=>(0,m.$3)((0,c.of)(J),{defaultKind:"group"})),M={kind:Je.toLocaleLowerCase("en-US"),type:Pe,owners:T,user:"all"};return je().stringify({filters:M},{arrayFormat:"repeat"})},Vt=$e=>{let Zt=[(0,c.eE)($e)];if($e.kind==="User"){const Pe=(0,m.hF)($e,c.hr,{kind:"Group"}).map(T=>(0,c.eE)({kind:T.kind,namespace:T.namespace,name:T.name}));Zt=[...Zt,...Pe]}return Zt},de=async($e,Zt)=>{const Je=[],Pe=new Map,T=new Set;Je.push($e);let M=$e;for(;Je.length>0;){const J=(0,m.hF)(M,c._b,{kind:"Group"});await Promise.all(J.map(ne=>Rt(async()=>{const re=Zt.getEntityByRef(ne);Pe.set(ne.name,re);try{const Ae=await re;Ae&&Je.push(Ae)}finally{Pe.delete(ne.name)}}))),Je.shift(),T.add((0,c.eE)({kind:M.kind,namespace:M.metadata.namespace,name:M.metadata.name})),M=Je[0]}return Array.from(T)};function Tt($e,Zt,Je,Pe){const T=(0,n.h_)(m.Ah),M=Pe!=null?Pe:["Component","API","System"],{loading:J,error:ne,value:re}=(0,b.default)(async()=>{const Ae=Zt==="aggregated"&&Je?await de($e,T):Vt($e);return(await T.getEntities({filter:[{kind:M,"relations.ownedBy":Ae}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]})).items.reduce((Se,te)=>{var ae,Be;const tt=Se.find(ft=>{var bt;return ft.kind===te.kind&&ft.type===((bt=te.spec)==null?void 0:bt.type)});return tt?tt.count+=1:Se.push({kind:te.kind,type:(Be=(ae=te.spec)==null?void 0:ae.type)==null?void 0:Be.toString(),count:1}),Se},[]).sort((Se,te)=>te.count-Se.count).slice(0,6).map(Se=>({counter:Se.count,type:Se.type,kind:Se.kind,queryParams:vt(Ae,Se)}))},[T,$e,Zt]);return{componentsWithCounters:re,loading:J,error:ne}}const xt=(0,u.Z)($e=>(0,r.Z)({card:{border:`1px solid ${$e.palette.divider}`,boxShadow:$e.shadows[2],borderRadius:"4px",padding:$e.spacing(2),color:$e.palette.common.white,transition:`${$e.transitions.duration.standard}ms`,"&:hover":{boxShadow:$e.shadows[4]},height:"100%"},bold:{fontWeight:$e.typography.fontWeightBold},smallFont:{fontSize:$e.typography.body2.fontSize},entityTypeBox:{background:Zt=>$e.getPageTheme({themeId:Zt.type}).backgroundImage}})),ln=({counter:$e,type:Zt,kind:Je,url:Pe})=>{const T=xt({type:Zt!=null?Zt:Je}),M=Zt!=null?Zt:Je,J=M.length>10;return p.createElement(E.rU,{to:Pe,variant:"body2"},p.createElement(C.Z,{className:`${T.card} ${T.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},p.createElement(_.Z,{className:T.bold,variant:"h6"},$e),p.createElement(C.Z,{sx:{width:"100%",textAlign:"center"}},p.createElement(_.Z,{className:`${T.bold} ${J&&T.smallFont}`,variant:"h6"},p.createElement(E.Or,{text:Ct()(M.toLocaleUpperCase("en-US"),$e)}))),Zt&&p.createElement(_.Z,{variant:"subtitle1"},Je)))},mn=({entity:$e,relationsType:Zt,isGroup:Je,entityFilterKind:Pe})=>{const T=(0,n.tg)(P),{componentsWithCounters:M,loading:J,error:ne}=Tt($e,Zt,Je,Pe);return J?p.createElement(E.Ex,null):ne?p.createElement(E.Gk,{error:ne}):p.createElement(l.Z,{container:!0},M==null?void 0:M.map(re=>{var Ae;return p.createElement(l.Z,{item:!0,xs:6,md:6,lg:4,key:(Ae=re.type)!=null?Ae:re.kind},p.createElement(ln,{counter:re.counter,kind:re.kind,type:re.type,url:`${T()}/?${re.queryParams}`}))}))},dn=(0,u.Z)($e=>({list:{[$e.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[$e.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[$e.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),Ln=$e=>{const{variant:Zt,entityFilterKind:Je,hideRelationsToggle:Pe,relationsType:T}=$e,M=Pe===void 0?!1:Pe,J=dn(),{entity:ne}=(0,m.X2)(),re=ne.kind==="Group",[Ae,Ie]=(0,p.useState)(T||"direct");return p.createElement(E.rJ,{title:"Ownership",variant:Zt},!M&&p.createElement(k.Z,{dense:!0},p.createElement(t.Z,{className:J.list},p.createElement(f.Z,{className:J.listItemText}),p.createElement(A.Z,{className:J.listItemSecondaryAction},"Direct Relations",p.createElement(X.ZP,{placement:"top",arrow:!0,title:`${Ae==="direct"?"Direct":"Aggregated"} Relations`},p.createElement(D.Z,{color:"primary",checked:Ae!=="direct",onChange:()=>Ie(Ae==="direct"?"aggregated":"direct"),name:"pin",inputProps:{"aria-label":"Ownership Type Switch"},disabled:!re})),"Aggregated Relations"))),p.createElement(mn,{entity:ne,relationsType:Ae,isGroup:re,entityFilterKind:Je}))},it=$e=>{const{singularTitle:Zt,pluralTitle:Je,icon:Pe,filter:T}=$e,M=(0,n.h_)(n.$4),J=(0,n.h_)(m.Ah),ne=(0,n.tg)(m.wi),{value:re}=(0,b.default)(async()=>{const Ae=await M.getBackstageIdentity();return(await J.getEntities({filter:[{kind:"group","relations.hasMember":Ae.userEntityRef,...T!=null?T:{}}],fields:["metadata","kind"]})).items},[]);if(!(re!=null&&re.length))return null;if(re.length===1){const Ae=re[0];return p.createElement(E.R6,{text:Zt,to:ne((0,c.iB)(Ae)),icon:Pe})}return p.createElement(E.R6,{icon:Pe,text:Je},p.createElement(E.k2,{title:Je},re==null?void 0:re.map(function(Ie){return p.createElement(E.BT,{title:Ie.metadata.title||Ie.metadata.name,subtitle:Ie.metadata.namespace!==c.zG?Ie.metadata.namespace:void 0,to:ne((0,c.iB)(Ie)),icon:Pe,key:(0,c.eE)(Ie)})})))}},5083:function(Kt,d,e){e.d(d,{J$:function(){return k},Y2:function(){return p},g2:function(){return _},rG:function(){return l}});var n=e(32272),c=e(96279),m=e.n(c),u=e(9571),r=e(30195),l=(h=>(h.DENY="DENY",h.ALLOW="ALLOW",h.CONDITIONAL="CONDITIONAL",h))(l||{});function C(h,b){return h.name===b.name}function _(h,b){return"resourceType"in h?!b||h.resourceType===b:!1}function t(h){return h.attributes.action==="create"}function y(h){return h.attributes.action==="read"}function f(h){return h.attributes.action==="update"}function F(h){return h.attributes.action==="delete"}function B(h){return{authorize:async(b,E)=>await h.authorize(b,E),authorizeConditional(b,E){const S=b;return h.authorize(S,E)}}}function k({name:h,attributes:b,resourceType:E}){return E?{type:"resource",name:h,attributes:b,resourceType:E}:{type:"basic",name:h,attributes:b}}const X=r.z.lazy(()=>r.z.object({rule:r.z.string(),resourceType:r.z.string(),params:r.z.record(r.z.any()).optional()}).or(r.z.object({anyOf:r.z.array(X).nonempty()})).or(r.z.object({allOf:r.z.array(X).nonempty()})).or(r.z.object({not:X}))),A=r.z.object({result:r.z.literal(l.ALLOW).or(r.z.literal(l.DENY))}),D=r.z.union([r.z.object({result:r.z.literal(l.ALLOW).or(r.z.literal(l.DENY))}),r.z.object({result:r.z.literal(l.CONDITIONAL),pluginId:r.z.string(),resourceType:r.z.string(),conditions:X})]),N=(h,b)=>r.z.object({items:r.z.array(r.z.intersection(r.z.object({id:r.z.string()}),h)).refine(E=>E.length===b.size&&E.every(({id:S})=>b.has(S)),{message:"Items in response do not match request"})});class p{constructor(b){var E;this.discovery=b.discovery,this.enabled=(E=b.config.getOptionalBoolean("permission.enabled"))!=null?E:!1}async authorize(b,E){return this.makeRequest(b,A,E)}async authorizeConditional(b,E){return this.makeRequest(b,D,E)}async makeRequest(b,E,S){if(!this.enabled)return b.map(dt=>({result:l.ALLOW}));const K={items:b.map(dt=>({id:u.Z(),...dt}))},pe=await this.discovery.getBaseUrl("permission"),he=await m()(`${pe}/authorize`,{method:"POST",body:JSON.stringify(K),headers:{...this.getAuthorizationHeader(S==null?void 0:S.token),"content-type":"application/json"}});if(!he.ok)throw await n.VL.fromResponse(he);const Fe=await he.json(),Ut=N(E,new Set(K.items.map(({id:dt})=>dt))).parse(Fe).items.reduce((dt,Wt)=>(dt[Wt.id]=Wt,dt),{});return K.items.map(dt=>Ut[dt.id])}getAuthorizationHeader(b){return b?{Authorization:`Bearer ${b}`}:{}}}},56563:function(Kt,d,e){e.d(d,{RV:function(){return r},gI:function(){return C},iM:function(){return l},un:function(){return t}});var n=e(2784),c=e(30705),m=e(5083),u=e(69984);const r=(0,c.T0)({id:"plugin.permission.api"});class l{constructor(f,F){this.permissionClient=f,this.identityApi=F}static create(f){const{config:F,discovery:B,identity:k}=f,X=new m.Y2({discovery:B,config:F});return new l(X,k)}async authorize(f){return(await this.permissionClient.authorize([f],await this.identityApi.getCredentials()))[0]}}function C(y){const f=(0,c.h_)(r),{data:F,error:B}=(0,u.ZP)(y,async k=>{if((0,m.g2)(k.permission)&&!k.resourceRef)return m.rG.DENY;const{result:X}=await f.authorize(k);return X});return B?{error:B,loading:!1,allowed:!1}:F===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:F===m.rG.ALLOW}}const _=y=>{const{permission:f,resourceRef:F,errorComponent:B,...k}=y,X=C(isResourcePermission(f)?{permission:f,resourceRef:F}:{permission:f}),A=useApp(),{NotFoundErrorPage:D}=A.getComponents();let N=B===void 0?React.createElement(D,null):B;return X.loading?N=null:X.allowed&&(N=y.element),React.createElement(Route,{...k,element:N})};function t(y){const{permission:f,resourceRef:F}=y,B=C((0,m.g2)(f)?{permission:f,resourceRef:F}:{permission:f}),k=(0,c.qD)();if(B.loading)return null;if(B.allowed)return n.createElement(n.Fragment,null,y.children);if(y.errorPage)return n.createElement(n.Fragment,null,y.errorPage);const{NotFoundErrorPage:X}=k.getComponents();return n.createElement(X,null)}},31011:function(Kt,d,e){e.d(d,{Gc:function(){return J},Iy:function(){return te},Lp:function(){return rn},h4:function(){return Ie},l0:function(){return dn},mg:function(){return mt},v9:function(){return gn},vF:function(){return it}});var n=e(30705),c=e(79692),m=e(31625),u=e(31377),r=e(34546),l=e(77277),C=e(60364),_=e(94339),t=e(24579),y=e(60905),f=e(95544),F=e(85256),B=e(7089),k=e(14503),X=e(90436),A=e(27556),D=e(4614),N=e(67358),p=e(97136),h=e(2784),b=e(51251),E=e(49558),S=e(39362),K=e(19126),pe=e.n(K),he=e(64279),Fe=e(18473),ct=e(55635),Ut=e(34520),dt=e(73495),Wt=e(52160),Ct=e(27057),G=e(71140),fn=e(34063),Et=e(72779),je=e.n(Et),P=e(34812),Ue=e(91750),H=e(70218),R=e(26228),W=e(75951),ge=e.n(W),Me=e(52084);function et(oe){return typeof oe=="object"&&oe!==null&&!Array.isArray(oe)}function pt(oe,Ee){if(!et(oe))return;const{properties:ke,items:ot,anyOf:Ye,oneOf:ut,allOf:At,dependencies:Ft}=oe;for(const ue in oe)oe.hasOwnProperty(ue)&&ue.startsWith("ui:")&&(Ee[ue]=oe[ue],delete oe[ue]);if(et(ke))for(const ue in ke){if(!ke.hasOwnProperty(ue))continue;const ye=ke[ue];if(!et(ye))continue;const Oe={};Ee[ue]=Oe,pt(ye,Oe)}if(et(ot)){const ue={};Ee.items=ue,pt(ot,ue)}if(Array.isArray(Ye))for(const ue of Ye)et(ue)&&pt(ue,Ee);if(Array.isArray(ut))for(const ue of ut)et(ue)&&pt(ue,Ee);if(Array.isArray(At))for(const ue of At)et(ue)&&pt(ue,Ee);if(et(Ft))for(const ue of Object.keys(Ft)){const ye=Ft[ue];et(ye)&&pt(ye,Ee)}}const mt=oe=>{const Ee={},ke=JSON.parse(JSON.stringify(oe));return pt(ke,Ee),{uiSchema:Ee,schema:ke}},Dt=()=>{const oe={__errors:[],addError:Ee=>{var ke;(ke=oe.__errors)==null||ke.push(Ee)}};return oe};function ie(oe){return!!oe&&"__errors"in oe}function o(oe){var Ee;if(!oe)return!1;for(const ke of Object.values(oe)){if(ie(ke)){if(((Ee=ke.__errors)!=null?Ee:[]).length>0)return!0;continue}if(o(ke))return!0}return!1}function xe(oe){return typeof oe=="object"&&oe!==null&&!Array.isArray(oe)}const be=(oe,Ee,ke)=>{async function ot(Ye,ut="#",At=Ye){var Ft,ue;const ye=new b.NL(oe),Oe={},He=async(rt,Pt,Ot,jt,pn)=>{const _n=Ee[rt];if(_n){const bn=Dt();try{await _n(Ot,bn,{...ke,formData:Ye,schema:jt,uiSchema:pn})}catch($n){bn.addError($n.message)}Oe[Pt]=bn}};for(const[rt,Pt]of Object.entries(At)){const Ot=`${ut}/${rt}`,jt=ye.getSchema(Ot,Ye),{schema:pn,uiSchema:_n}=mt(jt),bn=jt&&jt.items,$n=async(Dn,Un,hn)=>{await He(Dn["ui:field"],rt,Pt,Un,hn)},Jn=async Dn=>{if("ui:field"in Dn){const{schema:Un,uiSchema:hn}=mt(jt.items);await $n(Dn,Un,hn)}};if(jt&&"ui:field"in jt)await $n(jt,pn,_n);else if(bn&&"ui:field"in jt.items)await Jn(jt.items);else if(bn&&jt.items.type==="object"){const Dn=(ue=(Ft=jt.items)==null?void 0:Ft.properties)!=null?ue:[];for(const[,Un]of Object.entries(Dn))await Jn(Un)}else xe(Pt)&&(Oe[rt]=await ot(Ye,Ot,Pt))}return Oe}return async Ye=>await ot(Ye)},Rt=oe=>{const Ee=Object.fromEntries(Object.entries(oe.formState).map(([ke,ot])=>{var Ye;for(const ut of oe.schemas){const Ft=new b.NL(ut.mergedSchema).getSchema(`#/${ke}`,oe.formState);if(Ft){const ue=(Ye=Ft["ui:backstage"])==null?void 0:Ye.review;if(ue){if(ue.mask)return[ke,ue.mask];if(ue.show===!1)return[]}if(Ft["ui:widget"]==="password")return[ke,"******"]}}return[ke,ot]}));return h.createElement(E.xT,{metadata:Ee})},vt=oe=>{const Ee=(0,n.h_)(n.W0);return{steps:oe.steps.map(({title:Ye,description:ut,schema:At})=>({title:Ye,description:ut,mergedSchema:At,...mt(At)})).filter(Ye=>{var ut;const At=(ut=Ye.uiSchema["ui:backstage"])==null?void 0:ut.featureFlag;return At?Ee.isActive(At):!0}).map(Ye=>{var ut,At;return{...Ye,schema:{...Ye.schema,title:void 0,properties:Object.fromEntries(Object.entries((At=(ut=Ye.schema)==null?void 0:ut.properties)!=null?At:[]).filter(([Ft])=>{var ue,ye;const Oe=(ye=(ue=Ye.uiSchema[Ft])==null?void 0:ue["ui:backstage"])==null?void 0:ye.featureFlag;return Oe?Ee.isActive(Oe):!0}))}}})}},Vt=oe=>(0,h.useState)(()=>{if(oe)return oe;const Ee=pe().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(Ee.formData)}catch{return{}}}),de=(0,Fe.uW)("scaffolder:scaffolder-api-ref",()=>(0,n.T0)({id:"plugin.scaffolder.service"})),Tt=oe=>{const Ee=(0,n.h_)(de),{value:ke,loading:ot,error:Ye}=(0,he.default)(()=>Ee.getTemplateParameterSchema(oe),[Ee,oe]);return{manifest:ke,loading:ot,error:Ye}},xt=(oe,Ee={})=>{var ke;const{layouts:ot=[]}=Ee,Ye=oe==null?void 0:oe.uiSchema["ui:ObjectFieldTemplate"];if(typeof Ye!="string")return oe;const ut=(ke=ot.find(At=>At.name===Ye))==null?void 0:ke.component;return ut?{...oe,uiSchema:{...oe.uiSchema,["ui:ObjectFieldTemplate"]:ut}}:oe};var mn=Object.freeze({__proto__:null,DescriptionField:({description:oe})=>oe&&h.createElement(E.SA,{content:oe,linkTarget:"_blank"})});const dn=(0,ct.Zz)(e(80070).Q2),Ln=(0,c.Z)(oe=>({backButton:{marginRight:oe.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right"},formWrapper:{padding:oe.spacing(2)}})),it=oe=>{var Ee;const{layouts:ke=[],components:ot={},...Ye}=oe,{ReviewStateComponent:ut=Rt,createButtonText:At="Create",reviewButtonText:Ft="Review"}=ot,ue=(0,n.z$)(),{steps:ye}=vt(Ye.manifest),Oe=(0,n.I_)(),[He,rt]=(0,h.useState)(0),[Pt,Ot]=Vt(Ye.initialState),[jt,pn]=(0,h.useState)(),_n=Ln(),bn=(0,h.useMemo)(()=>Object.fromEntries(Ye.extensions.map(({name:Pn,component:yn})=>[Pn,yn])),[Ye.extensions]),$n=(0,h.useMemo)(()=>Object.fromEntries(Ye.extensions.map(({name:Pn,validation:yn})=>[Pn,yn])),[Ye.extensions]),Jn=(0,h.useMemo)(()=>{var Pn;return be((Pn=ye[He])==null?void 0:Pn.mergedSchema,$n,{apiHolder:Oe})},[ye,He,$n,Oe]),Dn=()=>{rt(Pn=>Pn-1)},Un=(0,h.useCallback)(Pn=>Ot(yn=>({...yn,...Pn.formData})),[Ot]),hn=xt(ye[He],{layouts:ke}),Bn=async({formData:Pn={}})=>{pn(void 0);const yn=await Jn(Pn);o(yn)?pn(yn):(pn(void 0),rt(Kn=>{const sa=Kn+1;return ue.captureEvent("click",`Next Step (${sa})`),sa})),Ot(Kn=>({...Kn,...Pn}))};return h.createElement(h.Fragment,null,h.createElement(m.Z,{activeStep:He,alternativeLabel:!0,variant:"elevation"},ye.map((Pn,yn)=>h.createElement(u.Z,{key:yn},h.createElement(r.Z,null,Pn.title))),h.createElement(u.Z,null,h.createElement(r.Z,null,"Review"))),h.createElement("div",{className:_n.formWrapper},He<ye.length?h.createElement(dn,{validator:S.Z,extraErrors:jt,formData:Pt,formContext:{formData:Pt},schema:hn.schema,uiSchema:hn.uiSchema,onSubmit:Bn,fields:{...mn,...bn},showErrorList:!1,onChange:Un,...(Ee=Ye.FormProps)!=null?Ee:{}},h.createElement("div",{className:_n.footer},h.createElement(l.Z,{onClick:Dn,className:_n.backButton,disabled:He<1},"Back"),h.createElement(l.Z,{variant:"contained",color:"primary",type:"submit"},He===ye.length-1?Ft:"Next"))):h.createElement(h.Fragment,null,h.createElement(ut,{formState:Pt,schemas:ye}),h.createElement("div",{className:_n.footer},h.createElement(l.Z,{onClick:Dn,className:_n.backButton,disabled:He<1},"Back"),h.createElement(l.Z,{variant:"contained",onClick:()=>{var Pn;Ye.onCreate(Pt);const yn=typeof Pt.name=="string"?Pt.name:void 0;ue.captureEvent("create",(Pn=yn!=null?yn:Ye.templateName)!=null?Pn:"unknown")}},At)))))},$e=(0,c.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:oe})=>oe,color:({cardFontColor:oe})=>oe},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),Zt=oe=>{const{template:{metadata:{title:Ee,name:ke},spec:{type:ot}}}=oe,{getPageTheme:Ye}=(0,C.Z)(),ut=Ye({themeId:ot}),At=$e({cardFontColor:ut.fontColor,cardBackgroundImage:ut.backgroundImage}),Ft=h.createElement("div",{className:At.subtitleWrapper},h.createElement("div",null,ot),h.createElement("div",null,h.createElement(dt.LH,{entity:oe.template,style:{padding:0}})));return h.createElement(E.hu,{title:Ee!=null?Ee:ke,subtitle:Ft,classes:{root:At.header}})},Je=(0,c.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Pe=({icon:oe,text:Ee,url:ke})=>{const ot=Je();return h.createElement("div",{className:ot.linkText},h.createElement(oe,{fontSize:"small"}),h.createElement(E.rU,{style:{marginLeft:"8px"},to:ke},Ee||ke))},T=(0,c.Z)(oe=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:oe.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:oe.palette.link}})),M=oe=>{var Ee,ke,ot,Ye,ut,At,Ft;const{template:ue}=oe,ye=T(),Oe=(0,dt.hF)(ue,Ut.S4),He=(0,n.qD)(),rt=Pt=>{var Ot;return Pt&&(Ot=He.getSystemIcon(Pt))!=null?Ot:Wt.Z};return h.createElement(_.Z,null,h.createElement(Zt,{template:ue}),h.createElement(t.Z,null,h.createElement(y.Z,{container:!0,spacing:2},h.createElement(y.Z,{item:!0,xs:12},h.createElement(f.Z,{className:ye.box},h.createElement(E.SA,{className:ye.markdown,content:(Ee=ue.metadata.description)!=null?Ee:"No description"}))),((ot=(ke=ue.metadata.tags)==null?void 0:ke.length)!=null?ot:0)>0&&h.createElement(h.Fragment,null,h.createElement(y.Z,{item:!0,xs:12},h.createElement(F.Z,null)),h.createElement(y.Z,{item:!0,xs:12},h.createElement(y.Z,{container:!0,spacing:2},(Ye=ue.metadata.tags)==null?void 0:Ye.map(Pt=>h.createElement(y.Z,{item:!0},h.createElement(B.Z,{style:{margin:0},size:"small",label:Pt,key:Pt})))))),(oe.additionalLinks||((ut=ue.metadata.links)==null?void 0:ut.length))&&h.createElement(h.Fragment,null,h.createElement(y.Z,{item:!0,xs:12},h.createElement(F.Z,null)),h.createElement(y.Z,{item:!0,xs:12},h.createElement(y.Z,{container:!0,spacing:2},(At=oe.additionalLinks)==null?void 0:At.map(({icon:Pt,text:Ot,url:jt})=>h.createElement(y.Z,{className:ye.linkText,item:!0,xs:6},h.createElement(Pe,{icon:Pt,text:Ot,url:jt}))),(Ft=ue.metadata.links)==null?void 0:Ft.map(({url:Pt,icon:Ot,title:jt})=>h.createElement(y.Z,{className:ye.linkText,item:!0,xs:6},h.createElement(Pe,{icon:rt(Ot),text:jt||Pt,url:Pt})))))))),h.createElement(k.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},h.createElement("div",{className:ye.footer},h.createElement("div",{className:ye.ownedBy},Oe.length>0&&h.createElement(h.Fragment,null,h.createElement(E.tB,{fontSize:"small"}),h.createElement(dt.rI,{style:{marginLeft:"8px"},entityRefs:Oe,defaultKind:"Group"}))),h.createElement(l.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var Pt;return(Pt=oe.onSelected)==null?void 0:Pt.call(oe,ue)}},"Choose"))))},J=oe=>{const{templates:Ee,title:ke,components:{CardComponent:ot}={},onSelected:Ye}=oe,ut=typeof ke=="string"?h.createElement(E.yW,{title:ke}):ke;if(Ee.length===0)return h.createElement(E.VY,null,ut,h.createElement(X.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",h.createElement(E.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."));const At=ot||M;return h.createElement(E.VY,null,ut,h.createElement(E.Oh,null,Ee.map(({template:Ft,additionalLinks:ue})=>h.createElement(At,{key:(0,Ut.eE)(Ft),additionalLinks:ue,template:Ft,onSelected:Ye}))))},ne=(0,Fe.CT)("secrets-context"),re=oe=>{const[Ee,ke]=useState({});return React.createElement(ne.Provider,{value:createVersionedValueMap({1:{secrets:Ee,setSecrets:ke}})},oe.children)},Ae=(0,c.Z)(()=>({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}})),Ie=oe=>{var Ee;const{title:ke,description:ot,namespace:Ye,templateName:ut,...At}=oe,Ft=Ae(),ue=(0,Ut.eE)({kind:"Template",namespace:Ye,name:ut}),ye=(0,n.h_)(n.VE),{loading:Oe,manifest:He,error:rt}=Tt(ue);return(0,h.useEffect)(()=>{rt&&ye.post(new Error(`Failed to load template, ${rt}`))},[rt,ye]),rt?At.onError(rt):h.createElement(E.VY,null,Oe&&h.createElement(E.Ex,null),He&&h.createElement(E.rJ,{title:ke!=null?ke:He.title,subheader:h.createElement(E.SA,{className:Ft.markdown,content:(Ee=ot!=null?ot:He.description)!=null?Ee:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},h.createElement(it,{manifest:He,...At})))},Ve=oe=>React.createElement(re,null,React.createElement(Ie,{...oe})),at=(0,c.Z)({root:{"&:hover":{textDecoration:"none"}}}),Se=oe=>{const{links:Ee=[]}=oe.output,ke=at(),ot=(0,n.qD)(),Ye=(0,n.tg)(dt.wi),ut=At=>{var Ft;return(Ft=ot.getSystemIcon(At))!=null?Ft:Ct.Z};return h.createElement(h.Fragment,null,Ee.filter(({url:At,entityRef:Ft})=>At||Ft).map(({url:At,entityRef:Ft,title:ue,icon:ye})=>{if(Ft){const Oe=(0,Ut.of)(Ft),He=Ye(Oe);return{title:ue,icon:ye,url:He}}return{title:ue,icon:ye,url:At}}).map(({url:At,title:Ft,icon:ue},ye)=>{const Oe=ut(ue);return h.createElement(E.rU,{to:At,key:ye,classes:{root:ke.root}},h.createElement(l.Z,{startIcon:h.createElement(Oe,null),component:"div",color:"primary"},Ft))}))},te=oe=>{var Ee;return(Ee=oe.output)!=null&&Ee.links?h.createElement(f.Z,{paddingBottom:2},h.createElement(A.Z,null,h.createElement(f.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},h.createElement(Se,{output:oe.output})))):null},ae=(0,c.Z)(oe=>({root:{color:oe.palette.text.disabled},completed:{color:oe.palette.status.ok},error:{color:oe.palette.status.error}})),Be=oe=>{const Ee=ae(),{active:ke,completed:ot,error:Ye,skipped:ut}=oe,At=()=>ke?h.createElement(D.Z,{size:"20px"}):ot?h.createElement(P.Z,null):Ye?h.createElement(Ue.Z,null):ut?h.createElement(G.Z,null):h.createElement(fn.Z,null);return h.createElement("div",{className:je()(Ee.root,{[Ee.completed]:ot,[Ee.error]:Ye})},At())},tt=oe=>{const[Ee,ke]=(0,h.useState)(""),{step:ot}=oe,Ye=(0,h.useCallback)(()=>{if(!ot.startedAt){ke("");return}const ut=ot.endedAt?R.ou.fromISO(ot.endedAt):R.ou.local(),At=R.ou.fromISO(ot.startedAt),Ft=R.Xp.fromDateTimes(At,ut).toDuration().valueOf();ke(ge()(Ft,{round:!0}))},[ot.endedAt,ot.startedAt]);return(0,Me.n)(()=>Ye()),(0,H.Z)(()=>!ot.endedAt&&Ye(),1e3),h.createElement(X.Z,{variant:"caption"},Ee)},ft=(0,c.Z)(oe=>({failed:{backgroundColor:oe.palette.error.main},success:{backgroundColor:oe.palette.success.main}})),bt=oe=>{const Ee=ft();return oe.isComplete?h.createElement(N.Z,{variant:"determinate",classes:{bar:oe.isError?Ee.failed:Ee.success},value:100}):h.createElement(N.Z,{variant:"indeterminate"})},rn=oe=>{var Ee,ke;return h.createElement(A.Z,{style:{position:"relative",overflow:"hidden"}},h.createElement(bt,{isComplete:(Ee=oe.isComplete)!=null?Ee:!1,isError:(ke=oe.isError)!=null?ke:!1}),h.createElement(f.Z,{padding:2},h.createElement(m.Z,{activeStep:oe.activeStep,alternativeLabel:!0,variant:"elevation"},oe.steps.map((ot,Ye)=>{const ut=ot.status==="completed",At=ot.status==="failed",Ft=ot.status==="processing",ue=ot.status==="skipped",ye={completed:ut,error:At,active:Ft,skipped:ue};return h.createElement(u.Z,{key:Ye},h.createElement(p.Z,null,h.createElement(r.Z,{StepIconProps:ye,StepIconComponent:Be,"data-testid":"step-label"},h.createElement(f.Z,null,ot.name),!ue&&h.createElement(tt,{step:ot}))))}))))},Gt=(0,c.Z)({root:{width:"100%",height:"100%",position:"relative"}}),gn=oe=>{const Ee=Gt();return h.createElement("div",{className:Ee.root},h.createElement(E.nU,{text:Object.values(oe.logs).map(ke=>ke.join(`
`)).filter(Boolean).join(`
`)}))},Ke="scaffolder.extensions.field.v1";function nt(oe){return{expose(){const Ee=()=>null;return attachComponentData(Ee,Ke,oe),Ee}}}},12053:function(Kt,d,e){e.d(d,{A3:function(){return y},PT:function(){return B},TD:function(){return f},WQ:function(){return N},eP:function(){return C},lc:function(){return F},zS:function(){return A}});var n=e(30705),c=e(18473),m=e(2784),u=e(92233);const r="scaffolder.extensions.wrapper.v1",l="scaffolder.extensions.field.v1";function C(b){return{expose(){const E=()=>null;return(0,n.R5)(E,l,b),E}}}const _=()=>null;(0,n.R5)(_,r,!0);const t=(0,c.CT)("secrets-context"),y=b=>{const[E,S]=(0,m.useState)({});return m.createElement(t.Provider,{value:(0,c.EI)({1:{secrets:E,setSecrets:S}})},b.children)},f=()=>{var b;const E=(b=(0,m.useContext)(t))==null?void 0:b.atVersion(1);if(!E)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:S,secrets:K={}}=E;return{setSecrets:(0,m.useCallback)(he=>{S(Fe=>({...Fe,...he}))},[S]),secrets:K}},F=(0,c.uW)("scaffolder:scaffolder-api-ref",()=>(0,n.T0)({id:"plugin.scaffolder.service"})),B=b=>(0,n.vJ)(b,E=>E.selectByComponentData({key:r}).findComponentData({key:l})),k="scaffolder.layout.v1",X="scaffolder.layouts.wrapper.v1",A=b=>(0,n.vJ)(b,E=>E.selectByComponentData({key:X}).findComponentData({key:k}));function D(b,E){var S,K,pe;switch(E.type){case"INIT":{b.steps=E.data.spec.steps.reduce((he,Fe)=>(he[Fe.id]={status:"open",id:Fe.id},he),{}),b.stepLogs=E.data.spec.steps.reduce((he,Fe)=>(he[Fe.id]=[],he),{}),b.loading=!1,b.error=void 0,b.completed=!1,b.task=E.data;return}case"LOGS":{const he=E.data;for(const Fe of he){const ct=`${Fe.createdAt} ${Fe.body.message}`;if(!Fe.body.stepId||!((S=b.steps)!=null&&S[Fe.body.stepId]))continue;const Ut=(K=b.stepLogs)==null?void 0:K[Fe.body.stepId],dt=(pe=b.steps)==null?void 0:pe[Fe.body.stepId];Fe.body.status&&Fe.body.status!==dt.status&&(dt.status=Fe.body.status,dt.status==="processing"&&(dt.startedAt=Fe.createdAt),["cancelled","failed","completed"].includes(dt.status)&&(dt.endedAt=Fe.createdAt)),Ut==null||Ut.push(ct)}return}case"COMPLETED":{b.completed=!0,b.output=E.data.body.output,b.error=E.data.body.error;return}case"ERROR":{b.error=E.data,b.loading=!1,b.completed=!0;return}default:return}}const N=b=>{const E=(0,n.h_)(F),[S,K]=(0,u.C)(D,{loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,m.useEffect)(()=>{let pe=!1,he,Fe;return E.getTask(b).then(ct=>{if(pe)return;K({type:"INIT",data:ct});const Ut=E.streamLogs({taskId:b}),dt=new Array;function Wt(){if(dt.length){const Ct=dt.splice(0,dt.length);K({type:"LOGS",data:Ct})}}Fe=setInterval(Wt,500),he=Ut.subscribe({next:Ct=>{switch(Ct.type){case"log":return dt.push(Ct);case"completion":Wt(),K({type:"COMPLETED",data:Ct});return;default:throw new Error(`Unhandled event type ${Ct.type} in observer`)}},error:Ct=>{Wt(),K({type:"ERROR",data:Ct})}})},ct=>{pe||K({type:"ERROR",data:ct})}),()=>{pe=!0,he&&he.unsubscribe(),Fe&&clearInterval(Fe)}},[E,K,b]),S};function p(b){return{expose(){const E=()=>null;return attachComponentData(E,k,b),E}}}const h=()=>null;(0,n.R5)(h,X,!0)},18868:function(Kt,d,e){e.d(d,{A:function(){return ga},B:function(){return cn},C:function(){return Rn},D:function(){return Xe},E:function(){return jn},F:function(){return V},G:function(){return I},H:function(){return Yt},I:function(){return g},J:function(){return w},K:function(){return _o},L:function(){return Co},M:function(){return en},N:function(){return ze},O:function(){return Qa},P:function(){return Re},Q:function(){return $},R:function(){return kt},S:function(){return Cn},T:function(){return jo},W:function(){return Mt},a:function(){return j},a0:function(){return Oo},a1:function(){return fr},b:function(){return Ra},c:function(){return ya},d:function(){return Qn},e:function(){return i},f:function(){return Te},g:function(){return Wn},h:function(){return Yr},i:function(){return xr},j:function(){return Cr},k:function(){return Po},l:function(){return $a},m:function(){return _r},n:function(){return zn},o:function(){return Ha},p:function(){return ua},q:function(){return Ga},r:function(){return ha},s:function(){return Pa},t:function(){return aa},u:function(){return On},v:function(){return oa},w:function(){return kn},x:function(){return L},y:function(){return Ja},z:function(){return er}});var n=e(34520),c=e(32272),m=e(19126),u=e.n(m),r=e(82394),l=e.n(r),C=e(49462),_=e(12053),t=e(30705),y=e(73495),f=e(86619),F=e(42494),B=e(79692),k=e(61837),X=e(79784),A=e(50758),D=e(12231),N=e(86136),p=e(49378),h=e(95544),b=e(27556),E=e(60905),S=e(90436),K=e(89571),pe=e(15584),he=e(7089),Fe=e(91256),ct=e(37390),Ut=e(58987),dt=e(97485),Wt=e(27616),Ct=e(8284),G=e(70660),fn=e(94339),Et=e(11776),je=e(56939),P=e(73698),Ue=e(32552),H=e(24579),R=e(77277),W=e(4614),ge=e(97136),Me=e(80030),et=e(85256),pt=e(67358),mt=e(5806),Dt=e(21324),ie=e(88013),o=e(2784),xe=e(64279),be=e(30195),Rt=e(68111),vt=e(74828),Vt=e(29611),de=e(49558),Tt=e(48760),xt=e(62155),ln=e(73557),mn=e(82108),dn=e.n(mn),Ln=e(19996),it=e(25505),$e=e(38016),Zt=e(75650),Je=e(56563),Pe=e(31011),T=e(12420),M=e(30254),J=e(27604),ne=e(33882),re=e(43054),Ae=e(93269),Ie=e(8198),Ve=e(72779),at=e.n(Ve),Se=e(47603),te=e(90548),ae=e(26228),Be=e(75951),tt=e.n(Be),ft=e(77120),bt=e(42123),rn=e(87685),Gt=e(77799),gn=e(72847),Ke=e(11001),nt=e(51967),oe=e(13317),Ee=e(35194),ke=e(39362),ot=e(84905),Ye=e(38402),ut=e(9520),At=e(49166),Ft=e(98281),ue=e(22983),ye=e(6487),Oe=e(99152),He=e(31377),rt=e(34546),Pt=e(31625),Ot=e(16874),jt=e(70218),pn=e(52160),_n=e(14348),bn=e(51209),$n=e(26659),Jn=e(49423),Dn=e(96401),Un=e(95885),hn=e(25417),Bn=e(82726);class Pn{constructor(z){var ce,fe;this.discoveryApi=z.discoveryApi,this.fetchApi=(ce=z.fetchApi)!=null?ce:{fetch},this.scmIntegrationsApi=z.scmIntegrationsApi,this.useLongPollingLogs=(fe=z.useLongPollingLogs)!=null?fe:!1,this.identityApi=z.identityApi}async listTasks(z){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const ce=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:fe}=await this.identityApi.getBackstageIdentity(),Ne=u().stringify(z.filterByOwnership==="owned"?{createdBy:fe}:{}),Qe=await this.fetchApi.fetch(`${ce}/v2/tasks?${Ne}`);if(!Qe.ok)throw await c.VL.fromResponse(Qe);return await Qe.json()}async getIntegrationsList(z){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(fe=>!this.scmIntegrationsApi.bitbucketCloud.byHost(fe.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(fe.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(fe=>({type:fe.type,title:fe.title,host:fe.config.host})).filter(fe=>z.allowedHosts.includes(fe.host))}}async getTemplateParameterSchema(z){const{namespace:ce,kind:fe,name:Ne}=(0,n.of)(z,{defaultKind:"template"}),Qe=await this.discoveryApi.getBaseUrl("scaffolder"),We=[ce,fe,Ne].map(Jt=>encodeURIComponent(Jt)).join("/"),st=`${Qe}/v2/templates/${We}/parameter-schema`,Nt=await this.fetchApi.fetch(st);if(!Nt.ok)throw await c.VL.fromResponse(Nt);return await Nt.json()}async scaffold(z){const{templateRef:ce,values:fe,secrets:Ne={}}=z,Qe=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,We=await this.fetchApi.fetch(Qe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:ce,values:{...fe},secrets:Ne})});if(We.status!==201){const Nt=`${We.status} ${We.statusText}`,Bt=await We.text();throw new Error(`Backend request failed, ${Nt} ${Bt.trim()}`)}const{id:st}=await We.json();return{taskId:st}}async getTask(z){const fe=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(z)}`,Ne=await this.fetchApi.fetch(fe);if(!Ne.ok)throw await c.VL.fromResponse(Ne);return await Ne.json()}streamLogs(z){return this.useLongPollingLogs?this.streamLogsPolling(z):this.streamLogsEventStream(z)}async dryRun(z){const ce=await this.discoveryApi.getBaseUrl("scaffolder"),fe=await this.fetchApi.fetch(`${ce}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:z.template,values:z.values,secrets:z.secrets,directoryContents:z.directoryContents})});if(!fe.ok)throw await c.VL.fromResponse(fe);return fe.json()}streamLogsEventStream({taskId:z,after:ce}){return new(l())(fe=>{const Ne=new URLSearchParams;ce!==void 0&&Ne.set("after",String(Number(ce))),this.discoveryApi.getBaseUrl("scaffolder").then(Qe=>{const We=`${Qe}/v2/tasks/${encodeURIComponent(z)}/eventstream`,st=new EventSource(We,{withCredentials:!0});st.addEventListener("log",Nt=>{if(Nt.data)try{fe.next(JSON.parse(Nt.data))}catch(Bt){fe.error(Bt)}}),st.addEventListener("completion",Nt=>{if(Nt.data)try{fe.next(JSON.parse(Nt.data))}catch(Bt){fe.error(Bt)}st.close(),fe.complete()}),st.addEventListener("error",Nt=>{fe.error(Nt)})},Qe=>{fe.error(Qe)})})}streamLogsPolling({taskId:z,after:ce}){let fe=ce;return new(l())(Ne=>{this.discoveryApi.getBaseUrl("scaffolder").then(async Qe=>{for(;!Ne.closed;){const We=`${Qe}/v2/tasks/${encodeURIComponent(z)}/events?${u().stringify({after:fe})}`,st=await this.fetchApi.fetch(We);if(!st.ok){await new Promise(Bt=>setTimeout(Bt,1e3));continue}const Nt=await st.json();for(const Bt of Nt)if(fe=Number(Bt.id),Ne.next(Bt),Bt.type==="completion"){Ne.complete();return}}})})}async listActions(){const z=await this.discoveryApi.getBaseUrl("scaffolder"),ce=await this.fetchApi.fetch(`${z}/v2/actions`);if(!ce.ok)throw await c.VL.fromResponse(ce);return await ce.json()}}function yn(Q,z){return{schema:{returnValue:(0,Rt.ZP)(Q),uiOptions:z?(0,Rt.ZP)(z):void 0},type:null,uiOptionsType:null}}const Kn=be.z.record(be.z.string().or(be.z.array(be.z.string()))),zn=yn(be.z.string(),be.z.object({allowedKinds:be.z.array(be.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:be.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:be.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:be.z.union([be.z.string(),be.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:be.z.array(Kn).or(Kn).optional().describe("List of key-value filter expression for entities")})).schema,jn=Q=>{var z,ce,fe,Ne,Qe,We,st;const{onChange:Nt,schema:{title:Bt="Entity",description:Jt="An entity from the catalog"},required:an,uiSchema:vn,rawErrors:Vn,formData:Fn,idSchema:La}=Q,ra=(z=vn["ui:options"])==null?void 0:z.allowedKinds,pa=((ce=vn["ui:options"])==null?void 0:ce.catalogFilter)||ra&&{kind:ra},Na=(fe=vn["ui:options"])==null?void 0:fe.defaultKind,Ea=((Ne=vn["ui:options"])==null?void 0:Ne.defaultNamespace)||void 0,Wa=(0,t.h_)(y.Ah),{value:Xn,loading:fa}=(0,xe.default)(async()=>{const{items:Ca}=await Wa.getEntities(pa?{filter:pa}:void 0);return Ca}),Nn=(We=(Qe=vn["ui:options"])==null?void 0:Qe.allowArbitraryValues)!=null?We:!0,ea=(0,o.useCallback)(Ca=>{try{return(0,y.$3)((0,n.of)(Ca,{defaultKind:Na,defaultNamespace:Ea}),{defaultKind:Na,defaultNamespace:Ea})}catch{return Ca}},[Na,Ea]),ar=(0,o.useCallback)((Ca,dr,yr)=>{if(typeof dr!="string")Nt(dr?(0,n.eE)(dr):"");else if(yr==="blur"||yr==="create-option"){let Pr=dr;try{Pr=(0,n.eE)((0,n.of)(dr,{defaultKind:Na,defaultNamespace:Ea}))}catch{}(Fn!==dr||Nn)&&Nt(Pr)}},[Nt,Fn,Na,Ea,Nn]);return(0,o.useEffect)(()=>{(Xn==null?void 0:Xn.length)===1&&Nt((0,n.eE)(Xn[0]))},[Xn,Nt]),o.createElement(F.Z,{margin:"normal",required:an,error:(Vn==null?void 0:Vn.length)>0&&!Fn},o.createElement(ie.ZP,{disabled:(Xn==null?void 0:Xn.length)===1,id:La==null?void 0:La.$id,value:(st=Xn==null?void 0:Xn.find(Ca=>(0,n.eE)(Ca)===Fn))!=null?st:Nn&&Fn?ea(Fn):"",loading:fa,onChange:ar,options:Xn||[],getOptionLabel:Ca=>typeof Ca=="string"?Ca:(0,y.$3)(Ca,{defaultKind:Na,defaultNamespace:Ea}),autoSelect:!0,freeSolo:Nn,renderInput:Ca=>o.createElement(f.Z,{...Ca,label:Bt,margin:"dense",helperText:Jt,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:an,InputProps:Ca.InputProps})}))},ua=(Q,z)=>{n.y$.isValidObjectName(Q)||z.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Ga=yn(be.z.string()).schema,Ha=Q=>{const{onChange:z,required:ce,schema:{title:fe="Name",description:Ne="Unique name of the component"},rawErrors:Qe,formData:We,uiSchema:{"ui:autofocus":st},idSchema:Nt,placeholder:Bt}=Q;return o.createElement(f.Z,{id:Nt==null?void 0:Nt.$id,label:fe,placeholder:Bt,helperText:Ne,required:ce,value:We!=null?We:"",onChange:({target:{value:Jt}})=>z(Jt),margin:"normal",error:(Qe==null?void 0:Qe.length)>0&&!We,inputProps:{autoFocus:st}})},er=yn(be.z.string(),be.z.object({allowedKinds:be.z.array(be.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:be.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:be.z.union([be.z.string(),be.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:be.z.array(Kn).or(Kn).optional().describe("List of key-value filter expression for entities")})).schema,Qa=Q=>{var z,ce,fe,Ne,Qe;const{schema:{title:We="Owner",description:st="The owner of the component"},uiSchema:Nt,...Bt}=Q,Jt=(z=Nt["ui:options"])==null?void 0:z.defaultNamespace,an=(ce=Nt["ui:options"])==null?void 0:ce.allowedKinds,vn=((fe=Nt["ui:options"])==null?void 0:fe.catalogFilter)||{kind:an||["Group","User"]},Vn={...Nt,"ui:options":{catalogFilter:vn,defaultKind:"Group",allowArbitraryValues:(Qe=(Ne=Nt["ui:options"])==null?void 0:Ne.allowArbitraryValues)!=null?Qe:!0,...Jt!==void 0?{defaultNamespace:Jt}:{}}};return o.createElement(jn,{...Bt,schema:{title:We,description:st},uiSchema:Vn})},Ja=yn(be.z.string(),be.z.object({allowedHosts:be.z.array(be.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:be.z.array(be.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:be.z.array(be.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:be.z.array(be.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:be.z.array(be.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:be.z.object({secretsKey:be.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:be.z.object({gerrit:be.z.array(be.z.string()).optional().describe("Additional Gerrit scopes to request"),github:be.z.array(be.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:be.z.array(be.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:be.z.array(be.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:be.z.array(be.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,L=(Q,z,ce)=>{var fe,Ne;try{const{host:Qe,searchParams:We}=new URL(`https://${Q}`),st=ce.apiHolder.get(C.q3);Qe?(((fe=st==null?void 0:st.byHost(Qe))==null?void 0:fe.type)==="bitbucket"?(Qe==="bitbucket.org"&&!We.get("workspace")&&z.addError("Incomplete repository location provided, workspace not provided"),We.get("project")||z.addError("Incomplete repository location provided, project not provided")):((Ne=st==null?void 0:st.byHost(Qe))==null?void 0:Ne.type)!=="gerrit"&&(We.get("owner")||z.addError("Incomplete repository location provided, owner not provided")),We.get("repo")||z.addError("Incomplete repository location provided, repo not provided")):z.addError("Incomplete repository location provided, host not provided")}catch{z.addError("Unable to parse the Repository URL")}},Z=Q=>{const{allowedOwners:z=[],rawErrors:ce,state:fe,onChange:Ne}=Q,Qe=z?z.map(st=>({label:st,value:st})):[{label:"Loading...",value:"loading"}],{owner:We}=fe;return o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",required:!0,error:(ce==null?void 0:ce.length)>0&&!We},z!=null&&z.length?o.createElement(de.Ph,{native:!0,label:"Owner Available",onChange:st=>Ne({owner:String(Array.isArray(st)?st[0]:st)}),disabled:z.length===1,selected:We,items:Qe}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"ownerInput"},"Owner"),o.createElement(Vt.Z,{id:"ownerInput",onChange:st=>Ne({owner:st.target.value}),value:We})),o.createElement(vt.Z,null,"The organization, user or project that this repo will belong to")))},q=Q=>{const{allowedOwners:z=[],state:ce,onChange:fe,rawErrors:Ne}=Q,Qe=z?z.map(st=>({label:st,value:st})):[{label:"Loading...",value:"loading"}],{owner:We}=ce;return o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!We},z!=null&&z.length?o.createElement(de.Ph,{native:!0,label:"Owner Available",onChange:st=>fe({owner:String(Array.isArray(st)?st[0]:st)}),disabled:z.length===1,selected:We,items:Qe}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"ownerInput"},"Owner"),o.createElement(Vt.Z,{id:"ownerInput",onChange:st=>fe({owner:st.target.value}),value:We})),o.createElement(vt.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},_e=Q=>{const{allowedOrganizations:z=[],allowedOwners:ce=[],rawErrors:fe,state:Ne,onChange:Qe}=Q,We=z?z.map(Jt=>({label:Jt,value:Jt})):[{label:"Loading...",value:"loading"}],st=ce?ce.map(Jt=>({label:Jt,value:Jt})):[{label:"Loading...",value:"loading"}],{organization:Nt,owner:Bt}=Ne;return o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",required:!0,error:(fe==null?void 0:fe.length)>0&&!Nt},z!=null&&z.length?o.createElement(de.Ph,{native:!0,label:"Organization",onChange:Jt=>Qe({organization:String(Array.isArray(Jt)?Jt[0]:Jt)}),disabled:z.length===1,selected:Nt,items:We}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"orgInput"},"Organization"),o.createElement(Vt.Z,{id:"orgInput",onChange:Jt=>Qe({organization:Jt.target.value}),value:Nt})),o.createElement(vt.Z,null,"The Organization that this repo will belong to")),o.createElement(F.Z,{margin:"normal",required:!0,error:(fe==null?void 0:fe.length)>0&&!Bt},ce!=null&&ce.length?o.createElement(de.Ph,{native:!0,label:"Owner",onChange:Jt=>Qe({owner:String(Array.isArray(Jt)?Jt[0]:Jt)}),disabled:ce.length===1,selected:Bt,items:st}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"ownerInput"},"Project"),o.createElement(Vt.Z,{id:"ownerInput",onChange:Jt=>Qe({owner:Jt.target.value}),value:Bt})),o.createElement(vt.Z,null,"The Project that this repo will belong to")))},U=Q=>{const{allowedOwners:z=[],allowedProjects:ce=[],onChange:fe,rawErrors:Ne,state:Qe}=Q,{host:We,workspace:st,project:Nt}=Qe,Bt=z?z==null?void 0:z.map(an=>({label:an,value:an})):[],Jt=ce?ce==null?void 0:ce.map(an=>({label:an,value:an})):[];return(0,o.useEffect)(()=>{We==="bitbucket.org"&&z.length&&fe({workspace:z[0]})},[z,We,fe]),o.createElement(o.Fragment,null,We==="bitbucket.org"&&o.createElement(F.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!st},z!=null&&z.length?o.createElement(de.Ph,{native:!0,label:"Allowed Workspaces",onChange:an=>fe({workspace:String(Array.isArray(an)?an[0]:an)}),disabled:z.length===1,selected:st,items:Bt}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"workspaceInput"},"Workspace"),o.createElement(Vt.Z,{id:"workspaceInput",onChange:an=>fe({workspace:an.target.value}),value:st})),o.createElement(vt.Z,null,"The Workspace that this repo will belong to")),o.createElement(F.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!Nt},ce!=null&&ce.length?o.createElement(de.Ph,{native:!0,label:"Allowed Projects",onChange:an=>fe({project:String(Array.isArray(an)?an[0]:an)}),disabled:ce.length===1,selected:Nt,items:Jt}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"projectInput"},"Project"),o.createElement(Vt.Z,{id:"projectInput",onChange:an=>fe({project:an.target.value}),value:Nt})),o.createElement(vt.Z,null,"The Project that this repo will belong to")))},se=Q=>{const{onChange:z,rawErrors:ce,state:fe}=Q,{workspace:Ne,owner:Qe}=fe;return o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",error:(ce==null?void 0:ce.length)>0&&!Ne},o.createElement(je.Z,{htmlFor:"ownerInput"},"Owner"),o.createElement(Vt.Z,{id:"ownerInput",onChange:We=>z({owner:We.target.value}),value:Qe}),o.createElement(vt.Z,null,"The owner of the project (optional)")),o.createElement(F.Z,{margin:"normal",required:!0,error:(ce==null?void 0:ce.length)>0&&!Ne},o.createElement(je.Z,{htmlFor:"parentInput"},"Parent"),o.createElement(Vt.Z,{id:"parentInput",onChange:We=>z({workspace:We.target.value}),value:Ne}),o.createElement(vt.Z,null,"The project parent that the repo will belong to")))},Ce=Q=>{const{host:z,hosts:ce,onChange:fe,rawErrors:Ne}=Q,Qe=(0,t.h_)(_.lc),{value:{integrations:We}={integrations:[]},loading:st}=(0,xe.default)(async()=>await Qe.getIntegrationsList({allowedHosts:ce!=null?ce:[]}));(0,o.useEffect)(()=>{z||(ce!=null&&ce.length?fe(ce[0]):We!=null&&We.length&&fe(We[0].host))},[ce,z,fe,We]);const Nt=We?We.filter(Bt=>ce!=null&&ce.length?ce==null?void 0:ce.includes(Bt.host):!0).map(Bt=>({label:Bt.title,value:Bt.host})):[{label:"Loading...",value:"loading"}];return st?o.createElement(de.Ex,null):o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!z},o.createElement(de.Ph,{native:!0,disabled:(ce==null?void 0:ce.length)===1,label:"Host",onChange:Bt=>fe(String(Array.isArray(Bt)?Bt[0]:Bt)),selected:z,items:Nt,"data-testid":"host-select"}),o.createElement(vt.Z,null,"The host where the repository will be created")))},Le=Q=>{const{repoName:z,allowedRepos:ce,onChange:fe,rawErrors:Ne}=Q;(0,o.useEffect)(()=>{z||ce!=null&&ce.length&&fe(ce[0])},[ce,z,fe]);const Qe=ce?ce.map(We=>({label:We,value:We})):[{label:"Loading...",value:"loading"}];return o.createElement(o.Fragment,null,o.createElement(F.Z,{margin:"normal",required:!0,error:(Ne==null?void 0:Ne.length)>0&&!z},ce!=null&&ce.length?o.createElement(de.Ph,{native:!0,label:"Repositories Available",onChange:We=>String(Array.isArray(We)?We[0]:We),disabled:ce.length===1,selected:z,items:Qe}):o.createElement(o.Fragment,null,o.createElement(je.Z,{htmlFor:"repoNameInput"},"Repository"),o.createElement(Vt.Z,{id:"repoNameInput",onChange:We=>fe(String(We.target.value)),value:z})),o.createElement(vt.Z,null,"The name of the repository")))};function wt(Q){if(!Q.host)return;const z=new URLSearchParams;return Q.owner&&z.set("owner",Q.owner),Q.repoName&&z.set("repo",Q.repoName),Q.organization&&z.set("organization",Q.organization),Q.workspace&&z.set("workspace",Q.workspace),Q.project&&z.set("project",Q.project),`${Q.host}?${z.toString()}`}function It(Q){let z="",ce="",fe="",Ne="",Qe="",We="";try{if(Q){const st=new URL(`https://${Q}`);z=st.host,ce=st.searchParams.get("owner")||"",fe=st.searchParams.get("repo")||"",Ne=st.searchParams.get("organization")||"",Qe=st.searchParams.get("workspace")||"",We=st.searchParams.get("project")||""}}catch{}return{host:z,owner:ce,repoName:fe,organization:Ne,workspace:Qe,project:We}}const kt=Q=>{var z,ce;const{uiSchema:fe,onChange:Ne,rawErrors:Qe,formData:We}=Q,[st,Nt]=(0,o.useState)(It(We)),Bt=(0,t.h_)(C.q3),Jt=(0,t.h_)(C.Om),{setSecrets:an}=(0,_.TD)(),vn=(0,o.useMemo)(()=>{var Nn,ea;return(ea=(Nn=fe==null?void 0:fe["ui:options"])==null?void 0:Nn.allowedHosts)!=null?ea:[]},[fe]),Vn=(0,o.useMemo)(()=>{var Nn,ea;return(ea=(Nn=fe==null?void 0:fe["ui:options"])==null?void 0:Nn.allowedOrganizations)!=null?ea:[]},[fe]),Fn=(0,o.useMemo)(()=>{var Nn,ea;return(ea=(Nn=fe==null?void 0:fe["ui:options"])==null?void 0:Nn.allowedOwners)!=null?ea:[]},[fe]),La=(0,o.useMemo)(()=>{var Nn,ea;return(ea=(Nn=fe==null?void 0:fe["ui:options"])==null?void 0:Nn.allowedProjects)!=null?ea:[]},[fe]),ra=(0,o.useMemo)(()=>{var Nn,ea;return(ea=(Nn=fe==null?void 0:fe["ui:options"])==null?void 0:Nn.allowedRepos)!=null?ea:[]},[fe]),{owner:pa,organization:Na,project:Ea,repoName:Wa}=st;(0,o.useEffect)(()=>{Ne(wt(st))},[st,Ne]),(0,o.useEffect)(()=>{Vn.length>0&&!Na&&Nt(Nn=>({...Nn,organization:Vn[0]}))},[Nt,Vn,Na]),(0,o.useEffect)(()=>{Fn.length>0&&!pa&&Nt(Nn=>({...Nn,owner:Fn[0]}))},[Nt,Fn,pa]),(0,o.useEffect)(()=>{La.length>0&&!Ea&&Nt(Nn=>({...Nn,project:La[0]}))},[Nt,La,Ea]),(0,o.useEffect)(()=>{ra.length>0&&!Wa&&Nt(Nn=>({...Nn,repoName:ra[0]}))},[Nt,ra,Wa]);const Xn=(0,o.useCallback)(Nn=>{Nt(ea=>({...ea,...Nn}))},[Nt]);(0,Tt.Z)(async()=>{var Nn;const{requestUserCredentials:ea}=(Nn=fe==null?void 0:fe["ui:options"])!=null?Nn:{},ar=st.owner?st.owner:st.project;if(!ea||!(st.host&&ar&&st.repoName))return;const[Ca,dr,yr]=[st.host,ar,st.repoName].map(encodeURIComponent),{token:Pr}=await Jt.getCredentials({url:`https://${Ca}/${dr}/${yr}`,additionalScope:{repoWrite:!0,customScopes:ea.additionalScopes}});an({[ea.secretsKey]:Pr})},500,[st,fe]);const fa=(ce=st.host&&((z=Bt.byHost(st.host))==null?void 0:z.type))!=null?ce:null;return o.createElement(o.Fragment,null,o.createElement(Ce,{host:st.host,hosts:vn,onChange:Nn=>Nt(ea=>({...ea,host:Nn})),rawErrors:Qe}),fa==="github"&&o.createElement(Z,{allowedOwners:Fn,onChange:Xn,rawErrors:Qe,state:st}),fa==="gitlab"&&o.createElement(q,{allowedOwners:Fn,rawErrors:Qe,state:st,onChange:Xn}),fa==="bitbucket"&&o.createElement(U,{allowedOwners:Fn,allowedProjects:La,rawErrors:Qe,state:st,onChange:Xn}),fa==="azure"&&o.createElement(_e,{allowedOrganizations:Vn,allowedOwners:Fn,rawErrors:Qe,state:st,onChange:Xn}),fa==="gerrit"&&o.createElement(se,{rawErrors:Qe,state:st,onChange:Xn}),o.createElement(Le,{repoName:st.repoName,allowedRepos:ra,onChange:Nn=>Nt(ea=>({...ea,repoName:Nn})),rawErrors:Qe}))},Rn=yn(be.z.string(),be.z.object({allowedKinds:be.z.array(be.z.string()).optional().describe("List of kinds of entities to derive options from"),defaultKind:be.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:be.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:be.z.union([be.z.string(),be.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed.")})).schema,cn=Q=>{var z;const{schema:{title:ce="Entity",description:fe="An entity from the catalog"},uiSchema:Ne,required:Qe}=Q,We=(0,t.h_)(t.$4),{loading:st,value:Nt}=(0,xe.default)(async()=>(await We.getBackstageIdentity()).ownershipEntityRefs),Bt=(z=Ne["ui:options"])==null?void 0:z.allowedKinds;return st?o.createElement(ie.ZP,{loading:st,renderInput:Jt=>o.createElement(f.Z,{...Jt,label:ce,margin:"dense",helperText:fe,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Qe,InputProps:Jt.InputProps}),options:[]}):o.createElement(jn,{...Q,schema:{title:ce,description:fe},allowedKinds:Bt,catalogFilter:Bt?{filter:{kind:Bt,[`relations.${n.S4}`]:Nt||[]}}:{filter:{[`relations.${n.S4}`]:Nt||[]}}})},kn=yn(be.z.array(be.z.string()),be.z.object({kinds:be.z.array(be.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:be.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:be.z.string().optional().describe("Helper text to display")})).schema,aa=Q=>{var z,ce,fe;const{formData:Ne,onChange:Qe,uiSchema:We}=Q,st=(0,t.h_)(y.Ah),[Nt,Bt]=(0,o.useState)([]),[Jt,an]=(0,o.useState)(""),[vn,Vn]=(0,o.useState)(!1),Fn=(0,n.In)().isValidTag,La=(z=We["ui:options"])==null?void 0:z.kinds,ra=(ce=We["ui:options"])==null?void 0:ce.showCounts,pa=(fe=We["ui:options"])==null?void 0:fe.helperText,{loading:Na,value:Ea}=(0,xe.default)(async()=>{const Xn="metadata.tags",fa={facets:[Xn]};La&&(fa.filter={kind:La});const{facets:Nn}=await st.getEntityFacets(fa),ea=Object.fromEntries(Nn[Xn].map(({value:ar,count:Ca})=>[ar,Ca]));return Bt(Object.keys(ea).sort((ar,Ca)=>ra?ea[Ca]-ea[ar]:ar.localeCompare(Ca))),ea}),Wa=(Xn,fa)=>{let Nn=!1,ea=!1;const ar=Ne||[];if(fa!=null&&fa.length&&ar.length<fa.length){const Ca=fa[fa.length-1]=fa[fa.length-1].toLocaleLowerCase("en-US").trim();Nn=!Fn(Ca),ea=ar.indexOf(Ca)!==-1}Vn(Nn),an(Nn?Jt:""),!Nn&&!ea&&Qe(fa||[])};return(0,xt.Z)(()=>Qe(Ne||[])),o.createElement(F.Z,{margin:"normal"},o.createElement(ie.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:Wa,value:Ne||[],inputValue:Jt,loading:Na,options:Nt,ChipProps:{size:"small"},renderOption:Xn=>ra?`${Xn} (${Ea==null?void 0:Ea[Xn]})`:Xn,renderInput:Xn=>o.createElement(f.Z,{...Xn,label:"Tags",onChange:fa=>an(fa.target.value),error:vn,helperText:pa!=null?pa:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},ha=(0,t.x8)({id:"register-component",optional:!0}),oa=(0,t.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Qn=(0,t.NT)({id:"scaffolder"}),$a=(0,t.Rz)({id:"scaffolder/legacy/selected-template",parent:Qn,path:"/templates/:templateName"}),Pa=(0,t.Rz)({id:"scaffolder/selected-template",parent:Qn,path:"/templates/:namespace/:templateName"}),ya=(0,t.Rz)({id:"scaffolder/task",parent:Qn,path:"/tasks/:taskId"}),Ra=(0,t.Rz)({id:"scaffolder/list-tasks",parent:Qn,path:"/tasks"}),j=(0,t.Rz)({id:"scaffolder/actions",parent:Qn,path:"/actions"}),i=(0,t.Rz)({id:"scaffolder/edit",parent:Qn,path:"/edit"}),g=(0,t.NT)({id:"scaffolder/next"}),I=(0,t.Rz)({id:"scaffolder/next/selected-template",parent:g,path:"/templates/:namespace/:templateName"}),w=(0,t.Rz)({id:"scaffolder/next/task",parent:g,path:"/tasks/:taskId"}),$=(0,t.Rz)({id:"scaffolder/next/list-tasks",parent:g,path:"/tasks"}),Re=(0,t.Rz)({id:"scaffolder/next/actions",parent:g,path:"/actions"}),ze=(0,t.Rz)({id:"scaffolder/next/edit",parent:g,path:"/edit"}),ht=(0,B.Z)(Q=>({button:{color:Q.page.fontColor}}));function Yt(Q){const z=ht(),[ce,fe]=(0,o.useState)(),Ne=(0,t.tg)(ze),Qe=(0,t.tg)(Re),We=(0,t.tg)($),st=(0,ln.s0)(),Nt=Q.editor!==!1,Bt=Q.actions!==!1,Jt=Q.tasks!==!1;if(!Nt&&!Bt)return null;const an=Vn=>{fe(Vn.currentTarget)},vn=()=>{fe(void 0)};return o.createElement(o.Fragment,null,o.createElement(k.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:an,"data-testid":"menu-button",color:"inherit",className:z.button},o.createElement(re.Z,null)),o.createElement(X.ZP,{open:Boolean(ce),onClose:vn,anchorEl:ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.createElement(A.Z,null,Nt&&o.createElement(D.Z,{onClick:()=>st(Ne())},o.createElement(N.Z,null,o.createElement(J.Z,{fontSize:"small"})),o.createElement(p.Z,{primary:"Template Editor"})),Bt&&o.createElement(D.Z,{onClick:()=>st(Qe())},o.createElement(N.Z,null,o.createElement(M.Z,{fontSize:"small"})),o.createElement(p.Z,{primary:"Installed Actions"})),Jt&&o.createElement(D.Z,{onClick:()=>st(We())},o.createElement(N.Z,null,o.createElement(ne.Z,{fontSize:"small"})),o.createElement(p.Z,{primary:"Task List"})))))}const un=(0,B.Z)(Q=>({button:{color:Q.palette.common.white}})),Tn=Q=>{const{logsVisible:z,onToggleLogs:ce,onStartOver:fe}=Q,Ne=un(),[Qe,We]=(0,o.useState)();return o.createElement(o.Fragment,null,o.createElement(k.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:st=>{We(st.currentTarget)},"data-testid":"menu-button",color:"inherit",className:Ne.button},o.createElement(re.Z,null)),o.createElement(X.ZP,{open:Boolean(Qe),onClose:()=>We(void 0),anchorEl:Qe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},o.createElement(A.Z,null,o.createElement(D.Z,{onClick:()=>ce==null?void 0:ce(!z)},o.createElement(N.Z,null,o.createElement(Ie.Z,{fontSize:"small"})),o.createElement(p.Z,{primary:z?"Hide Logs":"Show Logs"})),o.createElement(D.Z,{onClick:fe},o.createElement(N.Z,null,o.createElement(Ae.Z,{fontSize:"small"})),o.createElement(p.Z,{primary:"Start Over"})))))},Mn=(0,B.Z)({contentWrapper:{display:"flex",flexDirection:"column"}}),Cn=Q=>{var z,ce,fe,Ne,Qe,We,st,Nt;const{taskId:Bt}=(0,ln.UO)(),Jt=(0,t.tg)(I),an=(0,ln.s0)(),vn=(0,_.WQ)(Bt),Vn=Mn(),Fn=(0,o.useMemo)(()=>{var Xn,fa;return(fa=(Xn=vn.task)==null?void 0:Xn.spec.steps.map(Nn=>{var ea;return{...Nn,...(ea=vn==null?void 0:vn.steps)==null?void 0:ea[Nn.id]}}))!=null?fa:[]},[vn]),[La,ra]=(0,o.useState)(!1);(0,o.useEffect)(()=>{vn.error&&ra(!0)},[vn.error]);const pa=(0,o.useMemo)(()=>{for(let Xn=Fn.length-1;Xn>=0;Xn--)if(Fn[Xn].status!=="open")return Xn;return 0},[Fn]),Na=(0,o.useCallback)(()=>{var Xn,fa,Nn,ea,ar,Ca;const{namespace:dr,name:yr}=(ea=(Nn=(fa=(Xn=vn.task)==null?void 0:Xn.spec.templateInfo)==null?void 0:fa.entity)==null?void 0:Nn.metadata)!=null?ea:{},Pr=(Ca=(ar=vn.task)==null?void 0:ar.spec.parameters)!=null?Ca:{};!dr||!yr||an({pathname:Jt({namespace:dr,templateName:yr}),search:`?${u().stringify({formData:JSON.stringify(Pr)})}`})},[an,(z=vn.task)==null?void 0:z.spec.parameters,(Ne=(fe=(ce=vn.task)==null?void 0:ce.spec.templateInfo)==null?void 0:fe.entity)==null?void 0:Ne.metadata,Jt]),Ea=(Qe=Q.TemplateOutputsComponent)!=null?Qe:Pe.Iy,Wa=(Nt=(st=(We=vn.task)==null?void 0:We.spec.templateInfo)==null?void 0:st.entity)==null?void 0:Nt.metadata.name;return o.createElement(de.T3,{themeId:"website"},o.createElement(de.h4,{pageTitleOverride:`Run of ${Wa}`,title:o.createElement("div",null,"Run of ",o.createElement("code",null,Wa)),subtitle:`Task ${Bt}`},o.createElement(Tn,{onToggleLogs:ra,onStartOver:Na,logsVisible:La})),o.createElement(de.VY,{className:Vn.contentWrapper},vn.error?o.createElement(h.Z,{paddingBottom:2},o.createElement(de.yu,{error:vn.error,title:vn.error.message})):null,o.createElement(h.Z,{paddingBottom:2},o.createElement(Pe.Lp,{steps:Fn,activeStep:pa,isComplete:vn.completed,isError:Boolean(vn.error)})),o.createElement(Ea,{output:vn.output}),La?o.createElement(h.Z,{paddingBottom:2,height:"100%"},o.createElement(b.Z,{style:{height:"100%"}},o.createElement(h.Z,{padding:2,height:"100%"},o.createElement(Pe.v9,{logs:vn.stepLogs})))):null))},Yn=(0,B.Z)(Q=>({code:{fontFamily:"Menlo, monospace",padding:Q.spacing(1),backgroundColor:Q.palette.type==="dark"?Q.palette.grey[700]:Q.palette.grey[300],display:"inline-block",borderRadius:5,border:`1px solid ${Q.palette.grey[500]}`,position:"relative"},codeRequired:{"&::after":{position:"absolute",content:'"*"',top:0,right:Q.spacing(.5),fontWeight:"bolder",color:Q.palette.error.light}}})),ta=Q=>o.createElement(E.Z,{container:!0},Q.examples.map((z,ce)=>o.createElement(o.Fragment,{key:`example-${ce}`},o.createElement(E.Z,{item:!0,lg:3},o.createElement(h.Z,{padding:4},o.createElement(S.Z,null,z.description))),o.createElement(E.Z,{item:!0,lg:9},o.createElement(h.Z,{padding:1},o.createElement(de.Oi,{text:z.example,showLineNumbers:!0,showCopyCodeButton:!0,language:"yaml"})))))),ga=()=>{const Q=(0,t.h_)(_.lc),z=Yn(),{loading:ce,value:fe,error:Ne}=(0,xe.default)(async()=>Q.listActions());if(ce)return o.createElement(de.Ex,null);if(Ne)return o.createElement(de.mf,{statusMessage:"Failed to load installed actions",status:"500"});const Qe=Bt=>{const Jt=Bt.properties;if(Jt)return Object.entries(Jt).map(an=>{var vn;const[Vn]=an,Fn=an[1],La=at()(z.code,{[z.codeRequired]:(vn=Bt.required)==null?void 0:vn.includes(Vn)});return o.createElement(K.Z,{key:Vn},o.createElement(pe.Z,null,o.createElement("div",{className:La},Vn)),o.createElement(pe.Z,null,Fn.title),o.createElement(pe.Z,null,Fn.description),o.createElement(pe.Z,null,o.createElement(o.Fragment,null,[Fn.type].flat().map(ra=>o.createElement(he.Z,{label:ra,key:ra})))))})},We=Bt=>{if(Bt.properties)return o.createElement(Fe.Z,{component:b.Z},o.createElement(ct.Z,{size:"small"},o.createElement(Ut.Z,null,o.createElement(K.Z,null,o.createElement(pe.Z,null,"Name"),o.createElement(pe.Z,null,"Title"),o.createElement(pe.Z,null,"Description"),o.createElement(pe.Z,null,"Type"))),o.createElement(dt.Z,null,Qe(Bt))))},st=(Bt,Jt)=>{if(Jt)return o.createElement(o.Fragment,null,o.createElement(S.Z,{variant:"h6"},Bt),Jt.map((an,vn)=>o.createElement("div",{key:vn},We(an))))},Nt=fe==null?void 0:fe.map(Bt=>{var Jt,an,vn,Vn;if(Bt.id.startsWith("legacy:"))return;const Fn=st("oneOf",(an=(Jt=Bt.schema)==null?void 0:Jt.input)==null?void 0:an.oneOf);return o.createElement(h.Z,{pb:4,key:Bt.id},o.createElement(S.Z,{variant:"h4",className:z.code},Bt.id),Bt.description&&o.createElement(de.SA,{content:Bt.description}),((vn=Bt.schema)==null?void 0:vn.input)&&o.createElement(h.Z,{pb:2},o.createElement(S.Z,{variant:"h5"},"Input"),We(Bt.schema.input),Fn),((Vn=Bt.schema)==null?void 0:Vn.output)&&o.createElement(h.Z,{pb:2},o.createElement(S.Z,{variant:"h5"},"Output"),We(Bt.schema.output)),Bt.examples&&o.createElement(Wt.Z,null,o.createElement(Ct.Z,{expandIcon:o.createElement($e.Z,null)},o.createElement(S.Z,{variant:"h5"},"Examples")),o.createElement(G.Z,null,o.createElement(h.Z,{pb:2},o.createElement(ta,{examples:Bt.examples})))))});return o.createElement(de.T3,{themeId:"home"},o.createElement(de.h4,{pageTitleOverride:"Create a New Component",title:"Installed actions",subtitle:"This is the collection of all installed actions"}),o.createElement(de.VY,null,Nt))},In=(0,B.Z)(Q=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:Q.spacing(1,0,1,0)},title:{margin:Q.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:Q.palette.text.primary},menuItem:{minHeight:Q.spacing(6)},groupWrapper:{margin:Q.spacing(1,1,2,1)}}),{name:"ScaffolderReactOwnerListPicker"});function xa(){return[{name:"Task Owner",items:[{id:"owned",label:"Owned",icon:Se.Z},{id:"all",label:"All",icon:te.Z}]}]}const V=Q=>{const{filter:z,onSelectOwner:ce}=Q,fe=In(),Ne=xa();return o.createElement(fn.Z,{className:fe.root},Ne.map(Qe=>o.createElement(o.Fragment,{key:Qe.name},o.createElement(S.Z,{variant:"subtitle2",className:fe.title},Qe.name),o.createElement(fn.Z,{className:fe.groupWrapper},o.createElement(Et.Z,{disablePadding:!0,dense:!0},Qe.items.map(We=>o.createElement(D.Z,{key:We.id,button:!0,divider:!0,onClick:()=>ce(We.id),selected:We.id===z,className:fe.menuItem,"data-testid":`owner-picker-${We.id}`},We.icon&&o.createElement(N.Z,{className:fe.listIcon},o.createElement(We.icon,{fontSize:"small"})),o.createElement(p.Z,null,o.createElement(S.Z,{variant:"body1"},We.label)))))))))},ve=window.showDirectoryPicker;class we{constructor(z,ce){this.path=z,this.handle=ce}file(){return this.handle.getFile()}async save(z){const ce=await this.handle.createWritable();await ce.write(z),await ce.close()}}class lt{constructor(z){this.handle=z}async listFiles(){const z=[];for await(const ce of this.listDirectoryContents(this.handle))z.push(ce);return z}async*listDirectoryContents(z,ce=[]){for await(const fe of z.values())if(fe.kind==="file")yield new we([...ce,fe.name].join("/"),fe);else if(fe.kind==="directory"){if(fe.name===".git")continue;yield*this.listDirectoryContents(fe,[...ce,fe.name])}}}class Mt{static isSupported(){return Boolean(ve)}static async requestDirectoryAccess(){if(!ve)throw new Error("File system access is not supported");const z=await ve();return new lt(z)}constructor(){}}const Ht=64*1024,tn=32*1024,on=(0,o.createContext)(void 0);function xn(Q){if(Q.length>Ht)return window.btoa("<file too large>");try{return window.btoa(Q)}catch{const ce=new TextEncoder().encode(Q),fe=new Array;for(let Ne=0;Ne<ce.length;Ne+=tn)fe.push(String.fromCharCode(...ce.slice(Ne,Ne+tn)));return window.btoa(fe.join(""))}}function Wn(Q){const z=(0,t.h_)(_.lc),[ce,fe]=(0,o.useState)({results:[],selectedResult:void 0}),Ne=(0,o.useRef)(1),Qe=(0,o.useCallback)(Bt=>{fe(Jt=>{const an=Jt.results.find(vn=>vn.id===Bt);return an===Jt.selectedResult?Jt:{results:Jt.results,selectedResult:an}})},[]),We=(0,o.useCallback)(Bt=>{fe(Jt=>{var an;const vn=Jt.results.findIndex(La=>La.id===Bt);if(vn===-1)return Jt;const Vn=Jt.results.slice(),[Fn]=Vn.splice(vn,1);return{results:Vn,selectedResult:((an=Jt.selectedResult)==null?void 0:an.id)===Fn.id?Vn[0]:Jt.selectedResult}})},[]),st=(0,o.useCallback)(async Bt=>{if(!z.dryRun)throw new Error("Scaffolder API does not support dry-run");const Jt=gn.ZP.parse(Bt.templateContent),vn={...await z.dryRun({template:Jt,values:Bt.values,secrets:{},directoryContents:Bt.files.map(Vn=>({path:Vn.path,base64Content:xn(Vn.content)}))}),id:Ne.current++};fe(Vn=>{var Fn;return{results:[...Vn.results,vn],selectedResult:(Fn=Vn.selectedResult)!=null?Fn:vn}})},[z]),Nt=(0,o.useMemo)(()=>({...ce,selectResult:Qe,deleteResult:We,execute:st}),[ce,Qe,We,st]);return o.createElement(on.Provider,{value:Nt},Q.children)}function On(){const Q=(0,o.useContext)(on);if(!Q)throw new Error("must be used within a DryRunProvider");return Q}var Gn=(Q,z,ce)=>{if(!z.has(Q))throw TypeError("Cannot "+ce)},Lt=(Q,z,ce)=>(Gn(Q,z,"read from private field"),ce?ce.call(Q):z.get(Q)),ia=(Q,z,ce)=>{if(z.has(Q))throw TypeError("Cannot add the same private member more than once");z instanceof WeakSet?z.add(Q):z.set(Q,ce)},va=(Q,z,ce,fe)=>(Gn(Q,z,"write to private field"),fe?fe.call(Q,ce):z.set(Q,ce),ce),Aa,Sa,da,Ba,Oa,ba,Ma,tr,rr;const or=1024*1024,sr="This file is too large to be displayed";class Y{constructor(z,ce){ia(this,Aa,void 0),ia(this,Sa,void 0),ia(this,da,void 0),ia(this,Ba,void 0),va(this,Aa,z),va(this,Sa,ce)}get path(){return Lt(this,Aa).path}get content(){var z;return(z=Lt(this,da))!=null?z:sr}updateContent(z){Lt(this,da)!==void 0&&(va(this,da,z),Lt(this,Sa).call(this))}get dirty(){return Lt(this,da)!==Lt(this,Ba)}async save(){Lt(this,da)!==void 0&&(await Lt(this,Aa).save(Lt(this,da)),va(this,Ba,Lt(this,da)),Lt(this,Sa).call(this))}async reload(){const z=await Lt(this,Aa).file();if(z.size>or){Lt(this,da)!==void 0&&(va(this,da,void 0),va(this,Ba,void 0),Lt(this,Sa).call(this));return}const ce=await z.text();Lt(this,da)!==ce&&(va(this,da,ce),va(this,Ba,ce),Lt(this,Sa).call(this))}}Aa=new WeakMap,Sa=new WeakMap,da=new WeakMap,Ba=new WeakMap;class le{constructor(z){ia(this,Oa,void 0),ia(this,ba,new Set),ia(this,Ma,[]),ia(this,tr,void 0),this.setSelectedFile=ce=>{const fe=Lt(this,tr),Ne=Lt(this,Ma).find(Qe=>Qe.path===ce);fe!==Ne&&(va(this,tr,Ne),Lt(this,rr).call(this))},ia(this,rr,()=>{Lt(this,ba).forEach(ce=>ce())}),va(this,Oa,z)}get files(){return Lt(this,Ma)}get selectedFile(){return Lt(this,tr)}get dirty(){return Lt(this,Ma).some(z=>z.dirty)}async save(){await Promise.all(Lt(this,Ma).map(z=>z.save()))}async reload(){var z;const ce=(z=Lt(this,tr))==null?void 0:z.path,fe=await Lt(this,Oa).listFiles(),Ne=await Promise.all(fe.map(async Qe=>{const We=new Y(Qe,Lt(this,rr));return await We.reload(),We}));Lt(this,Ma).length=0,Lt(this,Ma).push(...Ne),this.setSelectedFile(ce),Lt(this,rr).call(this)}subscribe(z){return Lt(this,ba).add(z),()=>{Lt(this,ba).delete(z)}}}Oa=new WeakMap,ba=new WeakMap,Ma=new WeakMap,tr=new WeakMap,rr=new WeakMap;const De=(0,o.createContext)(void 0);function Te(){const Q=(0,o.useContext)(De),z=(0,Ke.S)();if((0,o.useEffect)(()=>Q==null?void 0:Q.subscribe(z),[Q,z]),!Q)throw new Error("must be used within a DirectoryEditorProvider");return Q}function Xe(Q){const{directory:z}=Q,[{result:ce,error:fe},{execute:Ne}]=(0,nt.r)(async Qe=>{const We=new le(Qe);await We.reload();const st=We.files.find(Nt=>Nt.path.match(/\.ya?ml$/));return st&&We.setSelectedFile(st.path),We});return(0,o.useEffect)(()=>{Ne(z)},[Ne,z]),fe?o.createElement(de.yu,{error:fe}):ce?o.createElement(De.Provider,{value:ce},Q.children):o.createElement(de.Ex,null)}const yt=(0,B.Z)({containerWrapper:{position:"relative",width:"100%",height:"100%"},container:{position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto"}});class St extends o.Component{constructor(){super(...arguments),this.state={shouldRender:!0}}componentDidUpdate(z){z.invalidator!==this.props.invalidator&&this.setState({shouldRender:!0})}componentDidCatch(z){this.props.setErrorText(z.message),this.setState({shouldRender:!1})}render(){return this.state.shouldRender?this.props.children:null}}function gt(Q){return typeof Q=="object"&&Q!==null&&!Array.isArray(Q)}function nn(Q){const{content:z,contentIsSpec:ce,onDryRun:fe,setErrorText:Ne,fieldExtensions:Qe=[],layouts:We=[]}=Q,st=yt(),Nt=(0,t.I_)(),[Bt,Jt]=(0,o.useState)();return(0,Tt.Z)(()=>{try{if(!z){Jt(void 0);return}const an=gn.ZP.parse(z);if(!gt(an)){Jt(void 0);return}let vn=an;if(!ce){if(!(String(an.kind).toLocaleLowerCase("en-US")==="template")){Jt(void 0);return}vn=gt(an.spec)?an.spec:{}}const{parameters:Vn}=vn;if(!Array.isArray(Vn)){Ne("Template parameters must be an array"),Jt(void 0);return}Ne(),Jt(Vn.flatMap(Fn=>gt(Fn)?[{title:String(Fn.title),schema:Fn}]:[]))}catch(an){Ne(an.message)}},250,[ce,z,Nt]),Bt?o.createElement("div",{className:st.containerWrapper},o.createElement("div",{className:st.container},o.createElement(St,{invalidator:Bt,setErrorText:Ne},o.createElement(Pe.vF,{manifest:{steps:Bt,title:"Template Editor"},extensions:Qe,onCreate:async an=>{await(fe==null?void 0:fe(an))},layouts:We,components:{createButtonText:fe&&"Try It"}})))):null}function Xt(Q){const{setErrorText:z,fieldExtensions:ce=[],layouts:fe}=Q,Ne=On(),Qe=Te(),{selectedFile:We}=Qe,st=async Bt=>{if(We)try{await Ne.execute({templateContent:We.content,values:Bt,files:Qe.files}),z()}catch(Jt){throw z(String(Jt.cause||Jt)),Jt}},Nt=We&&We.path.match(/\.ya?ml$/)?We.content:void 0;return o.createElement(nn,{onDryRun:st,fieldExtensions:ce,setErrorText:z,content:Nt,layouts:fe})}nn.DirectoryEditorDryRun=Xt;const qt=(0,B.Z)(Q=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "fieldForm preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:Q.spacing(1)},fieldForm:{gridArea:"fieldForm"},preview:{gridArea:"preview"}})),en=({customFieldExtensions:Q=[],onClose:z})=>{var ce,fe;const Ne=qt(),Qe=Q.filter(ra=>!!ra.schema),[We,st]=(0,o.useState)(Qe[0]),[Nt,Bt]=(0,o.useState)({}),[Jt,an]=(0,o.useState)(Date.now()),vn=(0,o.useMemo)(()=>{var ra,pa;return gn.ZP.stringify({parameters:[{title:`${We.name} Example`,properties:{[We.name]:{type:(pa=(ra=We.schema)==null?void 0:ra.returnValue)==null?void 0:pa.type,"ui:field":We.name,"ui:options":Nt}}}]})},[Nt,We]),Vn=(0,o.useMemo)(()=>Object.fromEntries(Q.map(({name:ra,component:pa})=>[ra,pa])),[Q]),Fn=(0,o.useCallback)(ra=>{st(ra),Bt({})},[Bt,st]),La=(0,o.useCallback)(ra=>{Bt(ra),an(Date.now())},[Bt,an]);return o.createElement("main",{className:Ne.root},o.createElement("div",{className:Ne.controls},o.createElement(F.Z,{variant:"outlined",size:"small",fullWidth:!0},o.createElement(je.Z,{id:"select-field-label"},"Choose Custom Field Extension"),o.createElement(P.Z,{value:We,label:"Choose Custom Field Extension",labelId:"select-field-label",onChange:ra=>Fn(ra.target.value)},Qe.map((ra,pa)=>o.createElement(D.Z,{key:pa,value:ra},ra.name)))),o.createElement(k.Z,{size:"medium",onClick:z},o.createElement(rn.Z,null))),o.createElement("div",{className:Ne.fieldForm},o.createElement(fn.Z,null,o.createElement(Ue.Z,{title:"Field Options"}),o.createElement(H.Z,null,o.createElement(Pe.l0,{showErrorList:!1,fields:{...Vn},noHtml5Validate:!0,formData:Nt,formContext:{fieldFormState:Nt},onSubmit:ra=>La(ra.formData),validator:ke.Z,schema:((ce=We.schema)==null?void 0:ce.uiOptions)||{}},o.createElement(R.Z,{variant:"contained",color:"primary",type:"submit",disabled:!((fe=We.schema)!=null&&fe.uiOptions)},"Apply"))))),o.createElement("div",{className:Ne.preview},o.createElement(fn.Z,null,o.createElement(Ue.Z,{title:"Example Template Spec"}),o.createElement(H.Z,null,o.createElement(Gt.ZP,{readOnly:!0,theme:"dark",height:"100%",extensions:[ft.il.define(bt.r)],value:vn}))),o.createElement(nn,{key:Jt,content:vn,contentIsSpec:!0,fieldExtensions:Q,setErrorText:()=>null})))},Zn=(0,B.Z)(Q=>({root:{overflowY:"auto",background:Q.palette.background.default},iconSuccess:{minWidth:0,marginRight:Q.spacing(1),color:Q.palette.status.ok},iconFailure:{minWidth:0,marginRight:Q.spacing(1),color:Q.palette.status.error}}));function Hn(){const Q=Zn(),z=On();return o.createElement(Et.Z,{className:Q.root,dense:!0},z.results.map(ce=>{var fe;const Ne=ce.log.some(Qe=>Qe.body.status==="failed");return o.createElement(Ye.Z,{button:!0,key:ce.id,selected:((fe=z.selectedResult)==null?void 0:fe.id)===ce.id,onClick:()=>z.selectResult(ce.id)},o.createElement(N.Z,{className:Ne?Q.iconFailure:Q.iconSuccess},Ne?o.createElement(At.Z,null):o.createElement(Ft.Z,null)),o.createElement(p.Z,{primary:`Result ${ce.id}`}),o.createElement(ut.Z,null,o.createElement(k.Z,{edge:"end","aria-label":"delete",onClick:()=>z.deleteResult(ce.id)},o.createElement(ue.Z,null))))}))}const wn=({error:Q})=>{const z=(0,o.useRef)("");return(0,o.useEffect)(()=>{z.current=String(Math.random())},[Q]),Q?o.createElement(h.Z,null,o.createElement(de.SX,{id:z.current,variant:"warning",message:Q.message})):null},sn=(0,B.Z)({svgIcon:{display:"inline-block","& svg":{display:"inline-block",fontSize:"inherit",verticalAlign:"baseline"}}}),qn=Q=>{const{href:z,text:ce,Icon:fe,...Ne}=Q,Qe=sn();return o.createElement(E.Z,{container:!0,direction:"row",spacing:1},o.createElement(E.Z,{item:!0},o.createElement(S.Z,{component:"div",className:Qe.svgIcon},fe?o.createElement(fe,null):o.createElement(pn.Z,null))),o.createElement(E.Z,{item:!0},o.createElement(de.rU,{to:z,...Ne},ce||z)))},ma=({output:Q})=>{const{links:z=[]}=Q,ce=(0,t.qD)(),fe=(0,t.tg)(y.wi),Ne=Qe=>{var We;return Qe&&(We=ce.getSystemIcon(Qe))!=null?We:pn.Z};return o.createElement(h.Z,{px:3,pb:3},z.filter(({url:Qe,entityRef:We})=>Qe||We).map(({url:Qe,entityRef:We,title:st,icon:Nt})=>{if(We){const Bt=(0,n.of)(We,{defaultKind:"<unknown>",defaultNamespace:"<unknown>"}),Jt=fe(Bt);return{title:st,icon:Nt,url:Jt}}return{title:st,icon:Nt,url:Qe}}).map(({url:Qe,title:We,icon:st},Nt)=>o.createElement(qn,{key:`output-link-${Nt}`,href:Qe,text:We!=null?We:Qe,Icon:Ne(st),target:"_blank"})))},za=e(75951),wa=(0,B.Z)(Q=>(0,T.Z)({root:{width:"100%"},button:{marginBottom:Q.spacing(2),marginLeft:Q.spacing(2)},actionsContainer:{marginBottom:Q.spacing(2)},resetContainer:{padding:Q.spacing(3)},labelWrapper:{display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between"},stepWrapper:{width:"100%"}})),ja=({step:Q})=>{const[z,ce]=(0,o.useState)("");return(0,jt.Z)(()=>{if(!Q.startedAt){ce("");return}const fe=Q.endedAt?ae.ou.fromISO(Q.endedAt):ae.ou.local(),Ne=ae.ou.fromISO(Q.startedAt),Qe=ae.Xp.fromDateTimes(Ne,fe).toDuration().valueOf();ce(za(Qe,{round:!0}))},1e3),o.createElement(S.Z,{variant:"caption"},z)},ir=(0,B.Z)(Q=>(0,T.Z)({root:{color:Q.palette.text.disabled,display:"flex",height:22,alignItems:"center"},completed:{color:Q.palette.status.ok},error:{color:Q.palette.status.error}}));function Ya(Q){const z=ir(),{active:ce,completed:fe,error:Ne}=Q,Qe=()=>ce?o.createElement(W.Z,{size:"24px"}):fe?o.createElement(Ft.Z,null):Ne?o.createElement(At.Z,null):o.createElement(Ot.Z,null);return o.createElement("div",{className:at()(z.root,{[z.completed]:fe,[z.error]:Ne})},Qe())}const hr=(0,o.memo)(Q=>{const{steps:z,currentStepId:ce,onUserStepChange:fe}=Q,Ne=wa(Q);return o.createElement("div",{className:Ne.root},o.createElement(Pt.Z,{activeStep:z.findIndex(Qe=>Qe.id===ce),orientation:"vertical",nonLinear:!0},z.map((Qe,We)=>{const st=Qe.status==="completed",Nt=Qe.status==="failed",Bt=Qe.status==="processing",Jt=Qe.status==="skipped";return o.createElement(He.Z,{key:String(We),expanded:!0},o.createElement(ge.Z,{onClick:()=>fe(Qe.id)},o.createElement(rt.Z,{StepIconProps:{completed:st,error:Nt,active:Bt},StepIconComponent:Ya,className:Ne.stepWrapper},o.createElement("div",{className:Ne.labelWrapper},o.createElement(S.Z,{variant:"subtitle2"},Qe.name),Jt?o.createElement(S.Z,{variant:"caption"},"Skipped"):o.createElement(ja,{step:Qe})))))})))}),Tr=({links:Q=[]})=>Q.length>0,_r=Q=>{const{loadingText:z}=Q,ce=wa(),fe=(0,ln.s0)(),Ne=(0,t.tg)(Qn),Qe=(0,t.tg)(Pa),[We,st]=(0,o.useState)(void 0),[Nt,Bt]=(0,o.useState)(void 0),{taskId:Jt}=(0,t.Oi)(ya),an=(0,_.WQ)(Jt),vn=an.completed,Vn=(0,o.useMemo)(()=>{var Ea,Wa;return(Wa=(Ea=an.task)==null?void 0:Ea.spec.steps.map(Xn=>{var fa;return{...Xn,...(fa=an==null?void 0:an.steps)==null?void 0:fa[Xn.id]}}))!=null?Wa:[]},[an]);(0,o.useEffect)(()=>{var Ea;const Wa=Vn.find(Xn=>["failed","processing"].includes(Xn.status));if(vn&&!Wa){Bt((Ea=Vn[Vn.length-1])==null?void 0:Ea.id);return}Bt(Wa==null?void 0:Wa.id)},[Vn,vn]);const Fn=We!=null?We:Nt,La=(0,o.useMemo)(()=>{if(!Fn)return z||"Loading...";const Ea=an.stepLogs[Fn];return Ea!=null&&Ea.length?Ea.join(`
`):"Waiting for logs..."},[an.stepLogs,Fn,z]),ra=an.completed===!0&&an.loading===!1&&!an.task,{output:pa}=an,Na=()=>{var Ea,Wa,Xn;if(!an.task||!((Wa=(Ea=an.task)==null?void 0:Ea.spec.templateInfo)!=null&&Wa.entityRef)){fe(Ne());return}const fa=an.task.spec.parameters,{name:Nn,namespace:ea}=(0,n.of)((Xn=an.task.spec.templateInfo)==null?void 0:Xn.entityRef);fe(`${Qe({templateName:Nn,namespace:ea})}?${u().stringify({formData:JSON.stringify(fa)})}`)};return o.createElement(de.T3,{themeId:"home"},o.createElement(de.h4,{pageTitleOverride:`Task ${Jt}`,title:"Task Activity",subtitle:`Activity for task: ${Jt}`}),o.createElement(de.VY,null,ra?o.createElement(de.mf,{status:"404",statusMessage:"Task not found",additionalInfo:"No task found with this ID"}):o.createElement("div",null,o.createElement(E.Z,{container:!0},o.createElement(E.Z,{item:!0,xs:3},o.createElement(b.Z,null,o.createElement(hr,{steps:Vn,currentStepId:Fn,onUserStepChange:st}),pa&&Tr(pa)&&o.createElement(ma,{output:pa}),o.createElement(R.Z,{className:ce.button,onClick:Na,disabled:!vn,variant:"contained",color:"primary"},"Start Over"))),o.createElement(E.Z,{item:!0,xs:9},!Fn&&o.createElement(de.Ex,null),o.createElement("div",{style:{height:"80vh"}},o.createElement(wn,{error:an.error}),o.createElement(de.nU,{text:La})))))))},nr=(0,B.Z)({root:{whiteSpace:"nowrap",overflowY:"auto"}});function qa(Q){const z={type:"directory",name:"",path:"",children:[]};for(const ce of Q.slice().sort()){const fe=ce.split("/");let Ne=z;for(let Qe=0;Qe<fe.length;Qe++){const We=fe[Qe];if(We==="")throw new Error("Invalid path part: ''");const st=fe.slice(0,Qe+1).join("/"),Nt=Ne.children.find(Bt=>Bt.name===We);if((Nt==null?void 0:Nt.type)==="file")throw new Error(`Duplicate filename at '${st}'`);if(Nt)Ne=Nt;else if(Qe<fe.length-1){const Bt={type:"directory",name:We,path:st,children:[]},Jt=Ne.children.findIndex(an=>an.type==="file");Ne.children.splice(Jt,0,Bt),Ne=Bt}else Ne.children.push({type:"file",name:We,path:st})}}return z.children}function br({entry:Q}){return Q.type==="file"?o.createElement($n.Z,{nodeId:Q.path,label:Q.name}):o.createElement($n.Z,{nodeId:Q.path,label:Q.name},Q.children.map(z=>o.createElement(br,{key:z.path,entry:z})))}function $r(Q){const z=nr(),ce=(0,o.useMemo)(()=>qa(Q.filePaths),[Q.filePaths]);return o.createElement(_n.Z,{selected:Q.selected,className:z.root,defaultCollapseIcon:o.createElement($e.Z,null),defaultExpandIcon:o.createElement(bn.Z,null),onNodeSelect:(fe,Ne)=>{Q.onSelect&&Q.filePaths.includes(Ne)&&Q.onSelect(Ne)}},ce.map(fe=>o.createElement(br,{key:fe.path,entry:fe})))}const uo=(0,B.Z)(Q=>({root:{display:"grid",gridTemplateColumns:"280px auto 3fr",gridTemplateRows:"1fr"},child:{overflowY:"auto",height:"100%",minHeight:0},firstChild:{background:Q.palette.background.paper}}));function Hr(Q){const z=uo(),ce=o.Children.toArray(Q.children);if(ce.length!==2)throw new Error("must have exactly 2 children");return o.createElement("div",{className:z.root},o.createElement("div",{className:at()(z.child,z.firstChild)},ce[0]),o.createElement(et.Z,{orientation:"horizontal"}),o.createElement("div",{className:z.child},ce[1]))}const zr=(0,B.Z)({root:{display:"flex",flexFlow:"column nowrap"},contentWrapper:{flex:1,position:"relative"},content:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex","& > *":{flex:1}},codeMirror:{height:"100%",overflowY:"auto"}});function mo(){const Q=zr(),{selectedResult:z}=On(),[ce,fe]=(0,o.useState)(""),Ne=z==null?void 0:z.directoryContents.find(Qe=>Qe.path===ce);return(0,o.useEffect)(()=>{if(z){const[Qe]=z.directoryContents;fe(Qe?Qe.path:"")}},[z]),z?o.createElement(Hr,null,o.createElement($r,{selected:ce,onSelect:fe,filePaths:z.directoryContents.map(Qe=>Qe.path)}),o.createElement(Gt.ZP,{className:Q.codeMirror,theme:"dark",height:"100%",extensions:[ft.il.define(bt.r)],readOnly:!0,value:Ne!=null&&Ne.base64Content?atob(Ne.base64Content):""})):null}function po(){var Q,z;const{selectedResult:ce}=On(),[fe,Ne]=(0,o.useState)(),Qe=(0,o.useMemo)(()=>{var st;return ce?(st=ce.steps.map(Nt=>{var Bt,Jt;const an=ce.log.filter(vn=>vn.body.stepId===Nt.id);return{id:Nt.id,name:Nt.name,logString:an.map(vn=>vn.body.message).join(`
`),status:(Jt=(Bt=an[an.length-1])==null?void 0:Bt.body.status)!=null?Jt:"completed"}}))!=null?st:[]:[]},[ce]);if(!ce)return null;const We=(Q=Qe.find(st=>st.id===fe))!=null?Q:Qe[0];return o.createElement(Hr,null,o.createElement(hr,{steps:Qe,currentStepId:We.id,onUserStepChange:Ne}),o.createElement(de.nU,{text:(z=We==null?void 0:We.logString)!=null?z:""}))}function fo(){var Q,z;const ce=zr(),{selectedResult:fe}=On();return fe?o.createElement(Hr,null,o.createElement(h.Z,{pt:2},((z=(Q=fe.output)==null?void 0:Q.links)==null?void 0:z.length)&&o.createElement(ma,{output:fe.output})),o.createElement(Gt.ZP,{className:ce.codeMirror,theme:"dark",height:"100%",extensions:[ft.il.define(bt.r)],readOnly:!0,value:JSON.stringify(fe.output,null,2)})):null}function ho(){const Q=zr(),[z,ce]=(0,o.useState)("files");return o.createElement("div",{className:Q.root},o.createElement(Oe.Z,{value:z,onChange:(fe,Ne)=>ce(Ne)},o.createElement(ye.Z,{value:"files",label:"Files"}),o.createElement(ye.Z,{value:"log",label:"Log"}),o.createElement(ye.Z,{value:"output",label:"Output"})),o.createElement(et.Z,null),o.createElement("div",{className:Q.contentWrapper},o.createElement("div",{className:Q.content},z==="files"&&o.createElement(mo,null),z==="log"&&o.createElement(po,null),z==="output"&&o.createElement(fo,null))))}const Jr=(0,B.Z)(Q=>({header:{height:48,minHeight:0,"&.Mui-expanded":{height:48,minHeight:0}},content:{display:"grid",background:Q.palette.background.default,gridTemplateColumns:"180px auto 1fr",gridTemplateRows:"1fr",padding:0,height:400}}));function Cr(){const Q=Jr(),z=On(),[ce,fe]=(0,o.useState)(!1),[Ne,Qe]=(0,o.useState)(!0),We=z.results.length,st=(0,oe.D)(We);return(0,o.useEffect)(()=>{st===0&&We===1?(Qe(!1),fe(!0)):st===1&&We===0&&fe(!1)},[st,We]),o.createElement(o.Fragment,null,o.createElement(Wt.Z,{variant:"outlined",expanded:ce,hidden:We===0&&Ne,onChange:(Nt,Bt)=>fe(Bt),onTransitionEnd:()=>We===0&&Qe(!0)},o.createElement(Ct.Z,{className:Q.header,expandIcon:o.createElement(ot.Z,null)},o.createElement(S.Z,null,"Dry-run results")),o.createElement(et.Z,{orientation:"horizontal"}),o.createElement(G.Z,{className:Q.content},o.createElement(Hn,null),o.createElement(et.Z,{orientation:"horizontal"}),o.createElement(ho,null))))}const go=(0,B.Z)(Q=>({button:{padding:Q.spacing(1)},buttons:{display:"flex",flexFlow:"row nowrap",alignItems:"center",justifyContent:"flex-start"},buttonsGap:{flex:"1 1 auto"},buttonsDivider:{marginBottom:Q.spacing(1)}}));function Yr(Q){var z,ce;const fe=go(),Ne=Te(),Qe=Ne.files.filter(st=>st.dirty),We=()=>{Q.onClose&&(Qe.length>0&&!window.confirm("Are you sure? Unsaved changes will be lost")||Q.onClose())};return o.createElement(o.Fragment,null,o.createElement("div",{className:fe.buttons},o.createElement(Me.ZP,{title:"Save all files"},o.createElement(k.Z,{className:fe.button,disabled:Ne.files.every(st=>!st.dirty),onClick:()=>Ne.save()},o.createElement(Dn.Z,null))),o.createElement(Me.ZP,{title:"Reload directory"},o.createElement(k.Z,{className:fe.button,onClick:()=>Ne.reload()},o.createElement(Jn.Z,null))),o.createElement("div",{className:fe.buttonsGap}),o.createElement(Me.ZP,{title:"Close directory"},o.createElement(k.Z,{className:fe.button,onClick:We},o.createElement(rn.Z,null)))),o.createElement(et.Z,{className:fe.buttonsDivider}),o.createElement($r,{selected:(ce=(z=Ne.selectedFile)==null?void 0:z.path)!=null?ce:"",onSelect:Ne.setSelectedFile,filePaths:Ne.files.map(st=>st.path)}))}const Eo=(0,B.Z)(Q=>({container:{position:"relative",width:"100%",height:"100%"},codeMirror:{position:"absolute",top:0,bottom:0,left:0,right:0},errorPanel:{color:Q.palette.error.main,lineHeight:2,margin:Q.spacing(0,1)},floatingButtons:{position:"absolute",top:Q.spacing(1),right:Q.spacing(3)},floatingButton:{padding:Q.spacing(1)}}));function xr(Q){const{errorText:z}=Q,ce=Eo(),fe=(0,o.useMemo)(()=>{if(!z)return Un.mH.of(null);const Ne=document.createElement("div");return Ne.classList.add(ce.errorPanel),Ne.textContent=z,Un.mH.of(()=>({dom:Ne,bottom:!0}))},[ce,z]);return(0,Ee.v)(Ne=>Ne.key==="s"&&(Ne.ctrlKey||Ne.metaKey),Ne=>{Ne.preventDefault(),Q.onSave&&Q.onSave()}),o.createElement("div",{className:ce.container},o.createElement(Gt.ZP,{className:ce.codeMirror,theme:"dark",height:"100%",extensions:[ft.il.define(bt.r),fe],value:Q.content,onChange:Q.onUpdate}),(Q.onSave||Q.onReload)&&o.createElement("div",{className:ce.floatingButtons},o.createElement(b.Z,null,Q.onSave&&o.createElement(Me.ZP,{title:"Save file"},o.createElement(k.Z,{className:ce.floatingButton,onClick:()=>{var Ne;return(Ne=Q.onSave)==null?void 0:Ne.call(Q)}},o.createElement(Dn.Z,null))),Q.onReload&&o.createElement(Me.ZP,{title:"Reload file"},o.createElement(k.Z,{className:ce.floatingButton,onClick:()=>{var Ne;return(Ne=Q.onReload)==null?void 0:Ne.call(Q)}},o.createElement(Jn.Z,null))))))}function vo(Q){var z,ce;const fe=Te(),Ne=(z=fe.selectedFile)!=null&&z.dirty?{onSave:()=>fe.save(),onReload:()=>fe.reload()}:{onReload:()=>fe.reload()};return o.createElement(xr,{errorText:Q.errorText,content:(ce=fe.selectedFile)==null?void 0:ce.content,onUpdate:Qe=>{var We;return(We=fe.selectedFile)==null?void 0:We.updateContent(Qe)},...Ne})}xr.DirectoryEditor=vo;const yo=(0,B.Z)({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "browser editor preview"
      "results results results"
    `,gridTemplateColumns:"1fr 3fr 2fr",gridTemplateRows:"1fr auto"},browser:{gridArea:"browser",overflow:"auto"},editor:{gridArea:"editor",overflow:"auto"},preview:{gridArea:"preview",overflow:"auto"},results:{gridArea:"results"}}),_o=Q=>{const z=yo(),[ce,fe]=(0,o.useState)();return o.createElement(Xe,{directory:Q.directory},o.createElement(Wn,null,o.createElement("main",{className:z.root},o.createElement("section",{className:z.browser},o.createElement(Yr,{onClose:Q.onClose})),o.createElement("section",{className:z.editor},o.createElement(xr.DirectoryEditor,{errorText:ce})),o.createElement("section",{className:z.preview},o.createElement(nn.DirectoryEditorDryRun,{setErrorText:fe,fieldExtensions:Q.fieldExtensions,layouts:Q.layouts})),o.createElement("section",{className:z.results},o.createElement(Cr,null)))))},bo=`# Edit the template parameters below to see how they will render in the scaffolder form UI
parameters:
  - title: Fill in some steps
    required:
      - name
    properties:
      name:
        title: Name
        type: string
        description: Unique name of the component
      owner:
        title: Owner
        type: string
        description: Owner of the component
        ui:field: OwnerPicker
        ui:options:
          catalogFilter:
            kind: Group
  - title: Choose a location
    required:
      - repoUrl
    properties:
      repoUrl:
        title: Repository Location
        type: string
        ui:field: RepoUrlPicker
        ui:options:
          allowedHosts:
            - github.com
steps:
  - id: fetch-base
    name: Fetch Base
    action: fetch:template
    input:
      url: ./template
      values:
        name: \${{parameters.name}}
`,Nr=(0,B.Z)(Q=>({root:{gridArea:"pageContent",display:"grid",gridTemplateAreas:`
      "controls controls"
      "textArea preview"
    `,gridTemplateRows:"auto 1fr",gridTemplateColumns:"1fr 1fr"},controls:{gridArea:"controls",display:"flex",flexFlow:"row nowrap",alignItems:"center",margin:Q.spacing(1)},textArea:{gridArea:"textArea"},preview:{gridArea:"preview"}})),Co=({defaultPreviewTemplate:Q=bo,customFieldExtensions:z=[],onClose:ce,layouts:fe=[]})=>{const Ne=Nr(),Qe=(0,t.h_)(t.$v),We=(0,t.h_)(y.Ah),[st,Nt]=(0,o.useState)(""),[Bt,Jt]=(0,o.useState)(),[an,vn]=(0,o.useState)([]),[Vn,Fn]=(0,o.useState)(Q),{loading:La}=(0,xe.default)(()=>We.getEntities({filter:{kind:"template"},fields:["kind","metadata.namespace","metadata.name","metadata.title","spec.parameters","spec.steps","spec.output"]}).then(({items:pa})=>vn(pa.map(Na=>{var Ea;return{label:(Ea=Na.metadata.title)!=null?Ea:(0,y.$3)(Na,{defaultKind:"template"}),value:Na}}))).catch(pa=>Qe.post({message:`Error loading exisiting templates: ${pa.message}`,severity:"error"})),[We]),ra=(0,o.useCallback)(pa=>{Nt(pa),Fn(gn.ZP.stringify(pa.spec))},[Fn]);return o.createElement(o.Fragment,null,La&&o.createElement(pt.Z,null),o.createElement("main",{className:Ne.root},o.createElement("div",{className:Ne.controls},o.createElement(F.Z,{variant:"outlined",size:"small",fullWidth:!0},o.createElement(je.Z,{id:"select-template-label"},"Load Existing Template"),o.createElement(P.Z,{value:st,label:"Load Existing Template",labelId:"select-template-label",onChange:pa=>ra(pa.target.value)},an.map((pa,Na)=>o.createElement(D.Z,{key:Na,value:pa.value},pa.label)))),o.createElement(k.Z,{size:"medium",onClick:ce},o.createElement(rn.Z,null))),o.createElement("div",{className:Ne.textArea},o.createElement(xr,{content:Vn,onUpdate:Fn,errorText:Bt})),o.createElement("div",{className:Ne.preview},o.createElement(nn,{content:Vn,contentIsSpec:!0,fieldExtensions:z,setErrorText:Jt,layouts:fe}))))},Xr=(0,B.Z)(Q=>({introText:{textAlign:"center",marginTop:Q.spacing(2)},card:{position:"relative",maxWidth:340,marginTop:Q.spacing(4),margin:Q.spacing(0,2)},infoIcon:{position:"absolute",top:Q.spacing(1),right:Q.spacing(1)}}));function Po(Q){const z=Xr(),ce=Mt.isSupported(),fe=o.createElement(fn.Z,{className:z.card,elevation:4},o.createElement(hn.Z,{disabled:!ce,onClick:()=>{var We;return(We=Q.onSelect)==null?void 0:We.call(Q,"local")}},o.createElement(H.Z,null,o.createElement(S.Z,{variant:"h5",gutterBottom:!0,color:ce?void 0:"textSecondary",style:{display:"flex",flexFlow:"row nowrap"}},"Load Template Directory"),o.createElement(S.Z,{variant:"body1",color:ce?void 0:"textSecondary"},"Load a local template directory, allowing you to both edit and try executing your own template."))),!ce&&o.createElement("div",{className:z.infoIcon},o.createElement(Me.ZP,{placement:"top",title:"Only supported in some Chromium-based browsers"},o.createElement(Bn.Z,null)))),Ne=o.createElement(fn.Z,{className:z.card,elevation:4},o.createElement(hn.Z,{onClick:()=>{var We;return(We=Q.onSelect)==null?void 0:We.call(Q,"form")}},o.createElement(H.Z,null,o.createElement(S.Z,{variant:"h5",gutterBottom:!0},"Edit Template Form"),o.createElement(S.Z,{variant:"body1"},"Preview and edit a template form, either using a sample template or by loading a template from the catalog.")))),Qe=o.createElement(fn.Z,{className:z.card,elevation:4},o.createElement(hn.Z,{onClick:()=>{var We;return(We=Q.onSelect)==null?void 0:We.call(Q,"field-explorer")}},o.createElement(H.Z,null,o.createElement(S.Z,{variant:"h5",gutterBottom:!0},"Custom Field Explorer"),o.createElement(S.Z,{variant:"body1"},"View and play around with available installed custom field extensions."))));return o.createElement("div",{style:Q.style},o.createElement(S.Z,{variant:"h6",className:z.introText},"Get started by choosing one of the options below"),o.createElement("div",{style:{display:"flex",flexFlow:"row wrap",alignItems:"flex-start",justifyContent:"center",alignContent:"flex-start"}},ce&&fe,Ne,!ce&&fe,Qe))}const fr=(0,t.rx)({id:"scaffolder",apis:[(0,t.ni)({api:_.lc,deps:{discoveryApi:t.NW,scmIntegrationsApi:C.q3,fetchApi:t.gP,identityApi:t.$4},factory:({discoveryApi:Q,scmIntegrationsApi:z,fetchApi:ce,identityApi:fe})=>new Pn({discoveryApi:Q,scmIntegrationsApi:z,fetchApi:ce,identityApi:fe})})],routes:{root:Qn,selectedTemplate:Pa,ongoingTask:ya},externalRoutes:{registerComponent:ha,viewTechDoc:oa}}),Ko=fr.provide((0,_.eP)({component:jn,name:"EntityPicker",schema:zn})),zo=fr.provide((0,_.eP)({component:Ha,name:"EntityNamePicker",validation:ua,schema:Ga})),So=fr.provide((0,_.eP)({component:kt,name:"RepoUrlPicker",validation:L,schema:Ja})),Br=fr.provide((0,_.eP)({component:Qa,name:"OwnerPicker",schema:er})),Oo=fr.provide((0,t.P4)({name:"ScaffolderPage",component:()=>e.e(9478).then(e.bind(e,79478)).then(Q=>Q.Router),mountPoint:Qn})),Ro=fr.provide((0,_.eP)({component:cn,name:"OwnedEntityPicker",schema:Rn})),Ao=fr.provide((0,_.eP)({component:aa,name:"EntityTagsPicker",schema:kn}));fr.provide((0,t.P4)({name:"NextScaffolderPage",component:()=>e.e(4026).then(e.bind(e,24026)).then(Q=>Q.Router),mountPoint:g}));const wo=o.createElement(it.Z,{fontSize:"small"}),To=o.createElement(Ln.Z,{fontSize:"small"}),jo=()=>{const Q=(0,t.h_)(t.$v),{error:z,loading:ce,availableTypes:fe,selectedTypes:Ne,setSelectedTypes:Qe}=(0,y.Uh)();return ce?o.createElement(de.Ex,null):fe?z?(Q.post({message:"Failed to load entity types",severity:"error"}),null):o.createElement(h.Z,{pb:1,pt:1},o.createElement(S.Z,{variant:"button"},"Categories"),o.createElement(ie.ZP,{multiple:!0,"aria-label":"Categories",options:fe,value:Ne,onChange:(We,st)=>Qe(st),renderOption:(We,{selected:st})=>o.createElement(mt.Z,{control:o.createElement(Dt.Z,{icon:wo,checkedIcon:To,checked:st}),label:dn()(We)}),size:"small",popupIcon:o.createElement($e.Z,{"data-testid":"categories-picker-expand"}),renderInput:We=>o.createElement(f.Z,{...We,variant:"outlined"})})):null},Ks=null,Vo=null,Go=null,Ho=null,Jo=null,Yo=null,Xo=null},78990:function(Kt,d,e){e.d(d,{Ho:function(){return n.a1},sG:function(){return n.a0}});var n=e(18868),c=e(34520),m=e(32272),u=e(19126),r=e.n(u),l=e(82394),C=e.n(l),_=e(49462),t=e(12053),y=e(30705),f=e(73495),F=e(2784),B=e(68111),k=e(49558),X=e(82108),A=e.n(X),D=e(75650),N=e(56563),p=e(31011),h=e(72779),b=e.n(h),E=e(26228),S=e(75951),K=e.n(S),pe=e(77799),he=e(72847),Fe=e(39362)},92573:function(Kt,d,e){e.d(d,{E1:function(){return de},E5:function(){return ut},FA:function(){return et},GQ:function(){return Ee},Nd:function(){return be},Rx:function(){return mt},US:function(){return Vt},ay:function(){return Je},gK:function(){return W},lt:function(){return Ve},qO:function(){return xt},wy:function(){return J}});var n=e(30705),c=e(2784),m=e(79692),u=e(50581),r=e(61837),l=e(74603),C=e(4614),_=e(86619),t=e(7089),y=e(42494),f=e(84899),F=e(5806),B=e(21324),k=e(56939),X=e(73698),A=e(12231),D=e(28899),N=e(86136),p=e(49378),h=e(95544),b=e(77277),E=e(38402),S=e(11776),K=e(48760),pe=e(21853),he=e(33375),Fe=e(76635),ct=e.n(Fe),Ut=e(64279),dt=e(25557),Wt=e(18473),Ct=e(88013),G=e(69294),fn=e(49558),Et=e(90436),je=e(19126),P=e.n(je),Ue=e(27742),H=e(35352),R=e(48834).Buffer;const W=(0,n.T0)({id:"plugin.search.queryservice"});class ge{constructor(ye){this.mockedResults=ye}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const Me=(0,m.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),et=ue=>{const{text:ye,preTag:Oe,postTag:He}=ue,rt=Me(),Pt=(0,c.useMemo)(()=>ye.split(new RegExp(`(${Oe}.+?${He})`)),[He,Oe,ye]);return c.createElement(c.Fragment,null,Pt.map((Ot,jt)=>Ot.includes(Oe)?c.createElement("mark",{className:rt.highlight,key:jt},Ot.replace(new RegExp(`${Oe}|${He}`,"g"),"")):Ot))},pt=(0,Wt.CT)("search-context"),mt=()=>{const ue=(0,c.useContext)(pt);if(!ue)throw new Error("useSearch must be used within a SearchContextProvider");const ye=ue.atVersion(1);if(!ye)throw new Error("No SearchContext v1 found");return ye},Dt=()=>(0,c.useContext)(pt)!==void 0,ie={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},o=(ue=ie)=>{var ye,Oe,He,rt;const Pt=(0,n.h_)(W),[Ot,jt]=(0,c.useState)(ue.term),[pn,_n]=(0,c.useState)(ue.types),[bn,$n]=(0,c.useState)(ue.filters),[Jn,Dn]=(0,c.useState)(ue.pageLimit),[Un,hn]=(0,c.useState)(ue.pageCursor),Bn=(0,dt.Z)(Ot),Pn=(0,dt.Z)(bn),yn=(0,Ut.default)(()=>Pt.query({term:Ot,types:pn,filters:bn,pageLimit:Jn,pageCursor:Un}),[Ot,pn,bn,Jn,Un]),Kn=!yn.loading&&!yn.error&&((ye=yn.value)==null?void 0:ye.nextPageCursor),sa=!yn.loading&&!yn.error&&((Oe=yn.value)==null?void 0:Oe.previousPageCursor),zn=(0,c.useCallback)(()=>{var _a;hn((_a=yn.value)==null?void 0:_a.nextPageCursor)},[(He=yn.value)==null?void 0:He.nextPageCursor]),jn=(0,c.useCallback)(()=>{var _a;hn((_a=yn.value)==null?void 0:_a.previousPageCursor)},[(rt=yn.value)==null?void 0:rt.previousPageCursor]);return(0,c.useEffect)(()=>{Bn!==void 0&&Ot!==Bn&&hn(void 0)},[Ot,Bn,hn]),(0,c.useEffect)(()=>{Pn!==void 0&&!(0,Fe.isEqual)(bn,Pn)&&hn(void 0)},[bn,Pn,hn]),{result:yn,term:Ot,setTerm:jt,types:pn,setTypes:_n,filters:bn,setFilters:$n,pageLimit:Jn,setPageLimit:Dn,pageCursor:Un,setPageCursor:hn,fetchNextPage:Kn?zn:void 0,fetchPreviousPage:sa?jn:void 0}},xe=ue=>{const{initialState:ye,children:Oe}=ue,He=o(ye);return c.createElement(n.fC,{attributes:{searchTypes:He.types.sort().join(",")}},c.createElement(pt.Provider,{value:(0,Wt.EI)({1:He})},Oe))},be=ue=>{const{initialState:ye,inheritParentContextIfAvailable:Oe,children:He}=ue;return Dt()&&Oe?c.createElement(c.Fragment,null,He):c.createElement(xe,{initialState:ye},He)},Rt=({children:ue})=>{var ye,Oe;const He=bn=>(0,dt.Z)(bn)!==bn,rt=(0,n.z$)(),{term:Pt,result:Ot}=mt(),jt=(Oe=(ye=Ot.value)==null?void 0:ye.numberOfResults)!=null?Oe:void 0,_n=He(Ot.loading)&&!Ot.loading;return(0,c.useEffect)(()=>{Pt&&_n&&rt.captureEvent("search",Pt,{value:jt})},[rt,Pt,jt,_n]),c.createElement(c.Fragment,null,ue)};function vt(ue){return(0,c.forwardRef)((ye,Oe)=>c.createElement(be,{inheritParentContextIfAvailable:!0},c.createElement(ue,{...ye,ref:Oe})))}const Vt=vt((0,c.forwardRef)((ue,ye)=>{const{onChange:Oe,onKeyDown:He=()=>{},onClear:rt=()=>{},onSubmit:Pt=()=>{},debounceTime:Ot=200,clearButton:jt=!0,fullWidth:pn=!0,value:_n,placeholder:bn,inputProps:$n={},endAdornment:Jn,...Dn}=ue,Un=(0,n.h_)(n.Ds),[hn,Bn]=(0,c.useState)("");(0,c.useEffect)(()=>{Bn(ua=>ua!==_n?String(_n):ua)},[_n]),(0,K.Z)(()=>Oe(hn),Ot,[hn]);const Pn=(0,c.useCallback)(ua=>{Bn(ua.target.value)},[Bn]),yn=(0,c.useCallback)(ua=>{He&&He(ua),Pt&&ua.key==="Enter"&&Pt()},[He,Pt]),Kn=(0,c.useCallback)(()=>{Oe(""),rt&&rt()},[Oe,rt]),sa=bn!=null?bn:`Search in ${Un.getOptionalString("app.title")||"Backstage"}`,zn=c.createElement(u.Z,{position:"start"},c.createElement(r.Z,{"aria-label":"Query",size:"small",disabled:!0},c.createElement(pe.Z,null))),jn=c.createElement(u.Z,{position:"end"},c.createElement(r.Z,{"aria-label":"Clear",size:"small",onClick:Kn},c.createElement(he.Z,null)));return c.createElement(Rt,null,c.createElement(l.Z,{"data-testid":"search-bar-next",ref:ye,value:hn,placeholder:sa,startAdornment:zn,endAdornment:jt?jn:Jn,inputProps:{"aria-label":"Search",...$n},fullWidth:pn,onChange:Pn,onKeyDown:yn,...Dn}))})),de=vt((0,c.forwardRef)((ue,ye)=>{const{value:Oe="",onChange:He,...rt}=ue,{term:Pt,setTerm:Ot}=mt();(0,c.useEffect)(()=>{Oe&&Ot(String(Oe))},[Oe,Ot]);const jt=(0,c.useCallback)(pn=>{He?He(pn):Ot(pn)},[He,Ot]);return c.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},c.createElement(Vt,{...rt,ref:ye,value:Pt,onChange:jt}))})),xt=(ue=>ye=>c.createElement(be,{inheritParentContextIfAvailable:!0},c.createElement(ue,{...ye})))(function(ye){const{loading:Oe,value:He,onChange:rt=()=>{},options:Pt=[],getOptionLabel:Ot=Kn=>String(Kn),inputPlaceholder:jt,inputDebounceTime:pn,freeSolo:_n=!0,fullWidth:bn=!0,clearOnBlur:$n=!1,"data-testid":Jn="search-autocomplete",...Dn}=ye,{setTerm:Un}=mt(),hn=(0,c.useCallback)(Kn=>Kn?typeof Kn=="string"?Kn:Ot(Kn):"",[Ot]),Bn=(0,c.useMemo)(()=>hn(He),[He,hn]),Pn=(0,c.useCallback)((Kn,sa,zn,jn)=>{Un(hn(sa)),rt(Kn,sa,zn,jn)},[hn,Un,rt]),yn=(0,c.useCallback)(({InputProps:{ref:Kn,endAdornment:sa},InputLabelProps:zn,...jn})=>c.createElement(de,{...jn,ref:Kn,clearButton:!1,value:Bn,placeholder:jt,debounceTime:pn,endAdornment:Oe?c.createElement(C.Z,{"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20}):sa}),[Oe,Bn,jt,pn]);return c.createElement(Ct.ZP,{...Dn,"data-testid":Jn,value:He,onChange:Pn,options:Pt,getOptionLabel:Ot,renderInput:yn,freeSolo:_n,fullWidth:bn,clearOnBlur:$n})}),ln=ue=>{const{icon:ye,primaryText:Oe,primaryTextTypographyProps:He,secondaryText:rt,secondaryTextTypographyProps:Pt,disableTextTypography:Ot}=ue;return React.createElement(React.Fragment,null,ye?React.createElement(ListItemIcon,null,ye):null,React.createElement(ListItemText,{primary:Oe,primaryTypographyProps:He,secondary:rt,secondaryTypographyProps:Pt,disableTypography:Ot}))},mn=(ue,ye,Oe=[],He=250)=>{const rt=(0,c.useRef)({}),Pt=ue||(()=>Promise.resolve([])),[Ot,jt]=(0,G.default)(Pt,[ye],{loading:!0});if((0,K.Z)(()=>{rt.current[ye]===void 0&&(rt.current[ye]=jt(ye).then(_n=>(rt.current[ye]=_n,_n)))},He,[jt,ye]),Oe.length)return{loading:!1,value:Oe};const pn=rt.current[ye];return Array.isArray(pn)?{loading:!1,value:pn}:Ot},dn=(ue,ye)=>{const{setFilters:Oe}=mt();(0,c.useEffect)(()=>{ye&&[ye].flat().length>0&&Oe(He=>({...He,[ue]:ye}))},[])},Ln=ue=>{const{className:ye,defaultValue:Oe,name:He,values:rt,valuesDebounceMs:Pt,label:Ot,filterSelectedOptions:jt,limitTags:pn,multiple:_n}=ue,[bn,$n]=(0,c.useState)("");dn(He,Oe);const Jn=typeof rt=="function"?rt:void 0,Dn=typeof rt=="function"?void 0:rt,{value:Un,loading:hn}=mn(Jn,bn,Dn,Pt),{filters:Bn,setFilters:Pn}=mt(),yn=Bn[He]||(_n?[]:null),Kn=(jn,ua)=>{Pn(_a=>{const{[He]:Ga,...Ha}=_a;return ua?{...Ha,[He]:ua}:{...Ha}})},sa=jn=>c.createElement(_.Z,{...jn,name:"search",variant:"outlined",label:Ot,fullWidth:!0}),zn=(jn,ua)=>jn.map((_a,Ga)=>c.createElement(t.Z,{label:_a,color:"primary",...ua({index:Ga})}));return c.createElement(Ct.ZP,{filterSelectedOptions:jt,limitTags:pn,multiple:_n,className:ye,id:`${_n?"multi-":""}select-filter-${He}--select`,options:Un||[],loading:hn,value:yn,onChange:Kn,onInputChange:(jn,ua)=>$n(ua),renderInput:sa,renderTags:zn})},it=(0,m.Z)({label:{textTransform:"capitalize"}}),$e=ue=>{const{className:ye,defaultValue:Oe,label:He,name:rt,values:Pt=[],valuesDebounceMs:Ot}=ue,jt=it(),{filters:pn,setFilters:_n}=mt();dn(rt,Oe);const bn=typeof Pt=="function"?Pt:void 0,$n=typeof Pt=="function"?void 0:Pt,{value:Jn=[],loading:Dn}=mn(bn,"",$n,Ot),Un=hn=>{const{target:{value:Bn,checked:Pn}}=hn;_n(yn=>{const{[rt]:Kn,...sa}=yn,zn=(Kn||[]).filter(ua=>ua!==Bn),jn=Pn?[...zn,Bn]:zn;return jn.length?{...sa,[rt]:jn}:sa})};return c.createElement(y.Z,{className:ye,disabled:Dn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},He?c.createElement(f.Z,{className:jt.label},He):null,Jn.map(hn=>{var Bn;return c.createElement(F.Z,{key:hn,control:c.createElement(B.Z,{color:"primary",tabIndex:-1,inputProps:{"aria-labelledby":hn},value:hn,name:hn,onChange:Un,checked:((Bn=pn[rt])!=null?Bn:[]).includes(hn)}),label:hn})}))},Zt=ue=>{const{className:ye,defaultValue:Oe,label:He,name:rt,values:Pt,valuesDebounceMs:Ot}=ue,jt=it();dn(rt,Oe);const pn=typeof Pt=="function"?Pt:void 0,_n=typeof Pt=="function"?void 0:Pt,{value:bn=[],loading:$n}=mn(pn,"",_n,Ot),{filters:Jn,setFilters:Dn}=mt(),Un=hn=>{const{target:{value:Bn}}=hn;Dn(Pn=>{const{[rt]:yn,...Kn}=Pn;return Bn?{...Kn,[rt]:Bn}:Kn})};return c.createElement(y.Z,{disabled:$n,className:ye,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},He?c.createElement(k.Z,{className:jt.label,margin:"dense"},He):null,c.createElement(X.Z,{variant:"outlined",value:Jn[rt]||"",onChange:Un},c.createElement(A.Z,{value:""},c.createElement("em",null,"All")),bn.map(hn=>c.createElement(A.Z,{key:hn,value:hn},hn))))},Je=ue=>{const{component:ye,...Oe}=ue;return c.createElement(ye,{...Oe})};Je.Checkbox=ue=>c.createElement(Je,{...ue,component:$e}),Je.Select=ue=>c.createElement(Je,{...ue,component:Zt}),Je.Autocomplete=ue=>c.createElement(Je,{...ue,component:Ln});const Pe=ue=>R.from(ue.toString(),"utf-8").toString("base64"),T=ue=>ue?Number(R.from(ue,"base64").toString("utf-8")):0,M=ue=>{const{total:ye=-1,cursor:Oe,hasNextPage:He,onCursorChange:rt,limit:Pt=25,limitLabel:Ot="Results per page:",limitText:jt=({from:Un,to:hn})=>ye>0?`of ${ye}`:`${Un}-${hn}`,limitOptions:pn,onLimitChange:_n,...bn}=ue,$n=(0,c.useMemo)(()=>T(Oe),[Oe]),Jn=(0,c.useCallback)((Un,hn)=>{rt==null||rt(Pe(hn))},[rt]),Dn=(0,c.useCallback)(Un=>{const hn=Un.target.value;_n==null||_n(parseInt(hn,10))},[_n]);return c.createElement(D.Z,{...bn,component:"div",count:ye,page:$n,nextIconButtonProps:{...He!==void 0&&{disabled:!He}},onPageChange:Jn,rowsPerPage:Pt,labelRowsPerPage:Ot,labelDisplayedRows:jt,rowsPerPageOptions:pn,onRowsPerPageChange:Dn})},J=ue=>{const{pageLimit:ye,setPageLimit:Oe,pageCursor:He,setPageCursor:rt,fetchNextPage:Pt}=mt();return c.createElement(M,{...ue,hasNextPage:!!Pt,limit:ye,onLimitChange:Oe,cursor:He,onCursorChange:rt})},ne=ue=>{const{children:ye}=ue,Oe=mt(),{result:He,...rt}=Oe;return ye(He,rt)},re=ue=>{const{query:ye,children:Oe}=ue,He=(0,n.h_)(W),rt=(0,Ut.default)(()=>{const{term:Pt="",types:Ot=[],filters:jt={},...pn}=ye;return He.query({...pn,term:Pt,types:Ot,filters:jt})},[ye]);return Oe(rt,ye)},Ae=ue=>{const{query:ye,children:Oe}=ue;return ye?c.createElement(re,{query:ye},Oe):c.createElement(ne,null,Oe)},Ie=ue=>{const{query:ye,children:Oe,noResultsComponent:He=c.createElement(fn.ub,{missing:"data",title:"Sorry, no results were found"}),...rt}=ue;return c.createElement(Ae,{query:ye},({loading:Pt,error:Ot,value:jt})=>Pt?c.createElement(fn.Ex,null):Ot?c.createElement(fn.Gk,{title:"Error encountered while fetching search results",error:Ot}):jt!=null&&jt.results.length?(0,Fe.isFunction)(Oe)?Oe(jt):c.createElement(Ft,{...rt,results:jt.results},Oe):He)},Ve=ue=>c.createElement(n.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},c.createElement(Ie,{...ue})),at=({result:ue,highlight:ye,icon:Oe,secondaryAction:He,lineClamp:rt=5})=>ue?c.createElement(c.Fragment,null,Oe&&c.createElement(N.Z,null,Oe),c.createElement(p.Z,{primaryTypographyProps:{variant:"h6"},primary:c.createElement(fn.rU,{noTrack:!0,to:ue.location},ye!=null&&ye.fields.title?c.createElement(et,{text:(ye==null?void 0:ye.fields.title)||"",preTag:(ye==null?void 0:ye.preTag)||"",postTag:(ye==null?void 0:ye.postTag)||""}):ue.title),secondary:c.createElement(Et.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:rt,overflow:"hidden"}},ye!=null&&ye.fields.text?c.createElement(et,{text:ye.fields.text,preTag:ye.preTag,postTag:ye.postTag}):ue.text)}),He&&c.createElement(h.Z,{alignItems:"flex-end"},He)):null,Se=ue=>c.createElement(n.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},c.createElement(at,{...ue})),te=ue=>{const{error:ye,loading:Oe,resultItems:He,renderResultItem:rt=pn=>React.createElement(Se,{key:pn.document.location,result:pn.document}),disableRenderingWithNoResults:Pt,noResultsComponent:Ot=Pt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...jt}=ue;return Oe?React.createElement(Progress,null):ye?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:ye}):He!=null&&He.length?React.createElement(List,{...jt},He.map(rt)):React.createElement(React.Fragment,null,Ot)},ae=ue=>{const{query:ye,renderResultItem:Oe,children:He,...rt}=ue,Pt=At(He);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(Ae,{query:ye},({loading:Ot,error:jt,value:pn})=>React.createElement(te,{...rt,error:jt,loading:Ot,resultItems:pn==null?void 0:pn.results,renderResultItem:Oe!=null?Oe:Pt})))},Be=(0,m.Z)(ue=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:ue.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:ue.palette.text.secondary,margin:ue.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:ue.palette.text.secondary,margin:ue.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:ue.spacing(.5)}})),tt=ue=>{const ye=Be(),{label:Oe,children:He,...rt}=ue;return React.createElement(Chip,{...rt,className:ye.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,Oe,": ",He)})},ft=()=>null,bt=(0,m.Z)(ue=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:ue.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:ue.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),rn=ue=>{const ye=bt(),{label:Oe,value:He="None",onChange:rt,onDelete:Pt}=ue,Ot=useCallback(jt=>{rt(jt.target.value)},[rt]);return React.createElement(tt,{label:Oe,onDelete:Pt},React.createElement(Typography$1,{role:"textbox",component:"span",className:ye.root,onChange:Ot,contentEditable:!0,suppressContentEditableWarning:!0},He))},Gt=(0,m.Z)(ue=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:ue.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),gn=ue=>{const ye=Gt(),{label:Oe,value:He="none",onChange:rt,onDelete:Pt,children:Ot}=ue,jt=useCallback(pn=>{rt(pn.target.value)},[rt]);return React.createElement(tt,{label:Oe,onDelete:Pt},React.createElement(Select,{className:ye.root,value:He,onChange:jt,input:React.createElement(InputBase,null),IconComponent:ft},React.createElement(MenuItem,{value:"none"},"None"),Ot))};function Ke(ue){const ye=Be(),[Oe,He]=useState(null),{error:rt,loading:Pt,icon:Ot,title:jt,titleProps:pn={},link:_n=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:ye.listSubheaderLinkIcon})),linkProps:bn={},filterOptions:$n,renderFilterOption:Jn=jn=>React.createElement(MenuItem,{key:String(jn),value:String(jn)},jn),filterFields:Dn,renderFilterField:Un,resultItems:hn,renderResultItem:Bn=jn=>React.createElement(Se,{key:jn.document.location,result:jn.document}),disableRenderingWithNoResults:Pn,noResultsComponent:yn=Pn?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Kn}=ue,sa=useCallback(jn=>{He(jn.currentTarget)},[]),zn=useCallback(()=>{He(null)},[]);return Pt?React.createElement(Progress,null):rt?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:rt}):hn!=null&&hn.length?React.createElement(List,{...Kn},React.createElement(ListSubheader,{className:ye.listSubheader},Ot,React.createElement(Typography$1,{className:ye.listSubheaderName,component:"strong",...pn},jt),$n?React.createElement(Chip,{className:ye.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:sa}):null,$n?React.createElement(Menu,{id:"filters-menu",anchorEl:Oe,open:Boolean(Oe),onClose:zn,onClick:zn,keepMounted:!0},$n.map(Jn)):null,Dn==null?void 0:Dn.map(jn=>{var ua;return(ua=Un==null?void 0:Un(jn))!=null?ua:null}),React.createElement(Link,{className:ye.listSubheaderLink,to:"/search",...bn},_n)),hn.map(Bn)):React.createElement(React.Fragment,null,yn)}function nt(ue){const{query:ye,children:Oe,renderResultItem:He,linkProps:rt={},...Pt}=ue,Ot=At(Oe);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(Ae,{query:ye},({loading:jt,error:pn,value:_n},{term:bn,types:$n,pageCursor:Jn,filters:Dn={}})=>{const Un=`/search?${qs.stringify({term:bn,types:$n,filters:Dn,pageCursor:Jn,query:bn},{arrayFormat:"brackets"})}`;return React.createElement(Ke,{...Pt,error:pn,loading:jt,linkProps:{to:Un,...rt},filterFields:Object.keys(Dn),resultItems:_n==null?void 0:_n.results,renderResultItem:He!=null?He:Ot})}))}const oe=(0,m.Z)(ue=>({root:{display:"flex",justifyContent:"space-between",gap:ue.spacing(2),margin:ue.spacing(2,0)}})),Ee=()=>{const{fetchNextPage:ue,fetchPreviousPage:ye}=mt(),Oe=oe();return!ue&&!ye?c.createElement(c.Fragment,null):c.createElement("nav",{"aria-label":"pagination navigation",className:Oe.root},c.createElement(b.Z,{"aria-label":"previous page",disabled:!ye,onClick:ye,startIcon:c.createElement(H.Z,null)},"Previous"),c.createElement(b.Z,{"aria-label":"next page",disabled:!ue,onClick:ue,endIcon:c.createElement(Ue.Z,null)},"Next"))},ke="search.results.list.items.extensions.v1",ot=(ue,ye)=>{for(const Oe of ue){if(!(0,c.isValidElement)(Oe))continue;const He=(0,n.IY)(Oe,ke);if(He!=null&&He(ye))return(0,c.cloneElement)(Oe,{rank:ye.rank,highlight:ye.highlight,result:ye.document,...Oe.props})}return null},Ye=ue=>{const{rank:ye,result:Oe,noTrack:He,children:rt,alignItems:Pt="flex-start",...Ot}=ue,jt=(0,n.z$)(),pn=(0,c.useCallback)(()=>{He||Oe&&jt.captureEvent("discover",Oe.title,{attributes:{to:Oe.location},value:ye})},[ye,Oe,He,jt]);return c.createElement(E.Z,{divider:!0,alignItems:Pt,onClickCapture:pn,...Ot},rt)},ut=ue=>{const{name:ye,component:Oe,predicate:He=()=>!0}=ue;return(0,n.YO)({name:ye,component:{lazy:()=>Oe().then(rt=>Pt=>c.createElement(Ye,{rank:Pt.rank,result:Pt.result,noTrack:Pt.noTrack},(0,c.createElement)(rt,Pt)))},data:{[ke]:He}})},At=ue=>{const ye=(0,n.vJ)(ue,Oe=>Oe.selectByComponentData({key:ke}).getElements(),[ue]);return(0,c.useCallback)((Oe,He)=>{const rt=ot(ye,Oe);return c.createElement(c.Fragment,{key:He},rt!=null?rt:c.createElement(Ye,{rank:Oe.rank,result:Oe.document},c.createElement(Se,{rank:Oe.rank,highlight:Oe.highlight,result:Oe.document})))},[ye])},Ft=ue=>{const{results:ye,children:Oe,...He}=ue,rt=At(Oe);return c.createElement(S.Z,{...He},ye.map(rt))}},39947:function(Kt,d,e){e.d(d,{S:function(){return xt},a:function(){return Vt},b:function(){return Rt},c:function(){return $e},e:function(){return Dt},f:function(){return ie},r:function(){return pt},u:function(){return de}});var n=e(2784),c=e(73557),m=e(60364),u=e(79249),r=e(27556),l=e(38724),C=e(60905),_=e(85256),t=e(49429),y=e(8629),f=e(79692),F=e(94339),B=e(32552),k=e(24579),X=e(27616),A=e(8284),D=e(70660),N=e(11776),p=e(38402),h=e(86136),b=e(49378),E=e(99152),S=e(6487),K=e(42494),pe=e(56939),he=e(73698),Fe=e(7089),ct=e(12231),Ut=e(21324),dt=e(90436),Wt=e(69001),Ct=e(92573),G=e(30705),fn=e(49558),Et=e(32272),je=e(19126),P=e.n(je),Ue=e(18473),H=e(25557),R=e(62155),W=e(38016),ge=e(90548),Me=e(64279);class et{constructor(Pe){this.discoveryApi=Pe.discoveryApi,this.identityApi=Pe.identityApi}async query(Pe){const{token:T}=await this.identityApi.getCredentials(),M=P().stringify(Pe),J=`${await this.discoveryApi.getBaseUrl("search/query")}?${M}`,ne=await fetch(J,{headers:T?{Authorization:`Bearer ${T}`}:{}});if(!ne.ok)throw await Et.VL.fromResponse(ne);return ne.json()}}const pt=(0,G.NT)({id:"search"}),mt=(0,G.rx)({id:"search",apis:[(0,G.ni)({api:Ct.gK,deps:{discoveryApi:G.NW,identityApi:G.$4},factory:({discoveryApi:Je,identityApi:Pe})=>new et({discoveryApi:Je,identityApi:Pe})})],routes:{root:pt}}),Dt=mt.provide((0,G.P4)({name:"SearchPage",component:()=>e.e(4797).then(e.bind(e,34797)).then(Je=>Je.SearchPage),mountPoint:pt})),ie=mt.provide((0,G.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(7642).then(e.bind(e,77642)).then(Je=>Je.SidebarSearchModal)}})),o=mt.provide((0,G.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(2788).then(e.bind(e,42788)).then(Je=>Je.HomePageSearchBar)}})),xe=(0,f.Z)(Je=>({container:{borderRadius:30,display:"flex",height:"2.4em"},input:{flex:1},paperFullWidth:{height:"calc(100% - 128px)"},dialogActionsContainer:{padding:Je.spacing(1,3)},viewResultsLink:{verticalAlign:"0.5em"}})),be=({toggleModal:Je})=>{const Pe=xe(),T=(0,c.s0)(),{transitions:M}=(0,m.Z)(),{focusContent:J}=(0,fn.r0)(),{term:ne}=(0,Ct.Rx)(),re=(0,n.useRef)(null),Ae=`${(0,G.tg)(pt)()}?query=${ne}`;(0,n.useEffect)(()=>{var at;(at=re==null?void 0:re.current)==null||at.focus()});const Ie=(0,n.useCallback)(()=>{Je(),setTimeout(J,M.duration.leavingScreen)},[Je,J,M]),Ve=(0,n.useCallback)(at=>{at.key==="Enter"&&(T(Ae),Ie())},[T,Ie,Ae]);return n.createElement(n.Fragment,null,n.createElement(u.Z,null,n.createElement(r.Z,{className:Pe.container},n.createElement(Ct.E1,{className:Pe.input,inputProps:{ref:re},onKeyDown:Ve}))),n.createElement(l.Z,null,n.createElement(C.Z,{container:!0,direction:"row-reverse",justifyContent:"flex-start",alignItems:"center"},n.createElement(C.Z,{item:!0},n.createElement(fn.rU,{to:Ae,onClick:Ie},n.createElement(dt.Z,{component:"span",className:Pe.viewResultsLink},"View Full Results"),n.createElement(Wt.Z,{color:"primary"})))),n.createElement(_.Z,null),n.createElement(Ct.lt,{onClick:Ie,onKeyDown:Ie})),n.createElement(t.Z,{className:Pe.dialogActionsContainer},n.createElement(C.Z,{container:!0,direction:"row"},n.createElement(C.Z,{item:!0,xs:12},n.createElement(Ct.GQ,null)))))},Rt=Je=>{var Pe;const{open:T=!0,hidden:M,toggleModal:J,children:ne}=Je,re=xe();return n.createElement(y.Z,{classes:{paperFullWidth:re.paperFullWidth},onClose:J,"aria-labelledby":"search-modal-title",fullWidth:!0,maxWidth:"lg",open:T,hidden:M},T&&n.createElement(Ct.Nd,{inheritParentContextIfAvailable:!0},(Pe=ne&&ne({toggleModal:J}))!=null?Pe:n.createElement(be,{toggleModal:J})))},vt=(0,Ue.CT)("search-modal-context"),Vt=Je=>{const Pe=de(Je.showInitially),T=(0,Ue.EI)({1:Pe});return n.createElement(vt.Provider,{value:T},Je.children)};function de(Je=!1){const Pe=(0,n.useContext)(vt),T=Pe==null?void 0:Pe.atVersion(1),[M,J]=(0,n.useState)({hidden:!Je,open:Je}),ne=(0,n.useCallback)(()=>J(Ae=>({open:!0,hidden:!Ae.hidden})),[]),re=(0,n.useCallback)(Ae=>J(Ie=>({open:Ie.open||Ae,hidden:!Ae})),[]);return T!=null&&T.state?T:{state:M,toggleModal:ne,setOpen:re}}const Tt=()=>{const Je=(0,c.TH)(),{term:Pe,setTerm:T,types:M,setTypes:J,pageCursor:ne,setPageCursor:re,filters:Ae,setFilters:Ie}=(0,Ct.Rx)(),Ve=(0,H.Z)(Je.search);return(0,n.useEffect)(()=>{if(Je.search===Ve)return;const at=P().parse(Je.search.substring(1),{arrayLimit:0})||{};at.filters&&Ie(at.filters),at.query&&T(at.query),at.pageCursor&&re(at.pageCursor),at.types&&J(at.types)},[Ve,Je,T,J,re,Ie]),(0,n.useEffect)(()=>{const at=P().stringify({query:Pe,types:M,pageCursor:ne,filters:Ae},{arrayFormat:"brackets"}),Se=`${window.location.pathname}?${at}`;window.history.replaceState(null,document.title,Se)},[Pe,M,ne,Ae]),null},xt=()=>{const Je=(0,c.pC)();return n.createElement(Ct.Nd,null,n.createElement(Tt,null),Je)},ln=(0,f.Z)(Je=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:Je.spacing(1)},icon:{color:Je.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:Je.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:Je.spacing(2,0),"&.Mui-expanded":{margin:Je.spacing(2,0)}},accordionDetails:{padding:Je.spacing(0,0,1)}})),mn=Je=>{const Pe=ln(),{filters:T,setPageCursor:M,setTypes:J,term:ne,types:re}=(0,Ct.Rx)(),Ae=(0,G.h_)(Ct.gK),[Ie,Ve]=(0,n.useState)(!0),{defaultValue:at,name:Se,showCounts:te,types:ae}=Je,Be=()=>Ve(Gt=>!Gt),tt=Gt=>()=>{J(Gt!==""?[Gt]:[]),M(void 0),Ve(!1)};(0,n.useEffect)(()=>{at&&J([at])},[]);const ft=[{value:"",name:"All",icon:n.createElement(ge.Z,null)},...ae],bt=re[0]||"",{value:rn}=(0,Me.default)(async()=>{if(!te)return{};const Gt=await Promise.all(ft.map(gn=>gn.value).map(async gn=>{const{numberOfResults:Ke}=await Ae.query({term:ne,types:gn?[gn]:[],filters:re.includes(gn)||!re.length&&!gn?T:{},pageLimit:0});return[gn,Ke!==void 0?`${Ke>=1e4?">10000":Ke} results`:" -- "]}));return Object.fromEntries(Gt)},[T,te,ne,re]);return n.createElement(F.Z,{className:Pe.card},n.createElement(B.Z,{title:Se,titleTypographyProps:{variant:"overline"}}),n.createElement(k.Z,{className:Pe.cardContent},n.createElement(X.Z,{className:Pe.accordion,expanded:Ie,onChange:Be},n.createElement(A.Z,{classes:{root:Pe.accordionSummary,content:Pe.accordionSummaryContent},expandIcon:n.createElement(W.Z,{className:Pe.icon}),IconButtonProps:{size:"small"}},Ie?"Collapse":ft.filter(Gt=>Gt.value===bt)[0].name),n.createElement(D.Z,{classes:{root:Pe.accordionDetails}},n.createElement(N.Z,{className:Pe.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},ft.map(Gt=>n.createElement(n.Fragment,{key:Gt.value},n.createElement(_.Z,null),n.createElement(p.Z,{selected:re[0]===Gt.value||re.length===0&&Gt.value==="",onClick:tt(Gt.value),button:!0},n.createElement(h.Z,null,(0,n.cloneElement)(Gt.icon,{className:Pe.listItemIcon})),n.createElement(b.Z,{primary:Gt.name,secondary:rn&&rn[Gt.value]})))))))))},dn=(0,f.Z)(Je=>({tabs:{borderBottom:`1px solid ${Je.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:Je.typography.fontWeightBold,fontSize:Je.typography.pxToRem(13),color:Je.palette.text.primary,minWidth:"130px"}})),Ln=Je=>{const Pe=dn(),{setPageCursor:T,setTypes:M,types:J}=(0,Ct.Rx)(),{defaultValue:ne,types:re}=Je,Ae=(Ve,at)=>{M(at!==""?[at]:[]),T(void 0)};(0,n.useEffect)(()=>{ne&&M([ne])},[]);const Ie=[{value:"",name:"All"},...re];return n.createElement(E.Z,{"aria-label":"List of search types tabs",className:Pe.tabs,indicatorColor:"primary",value:J.length===0?"":J[0],onChange:Ae},Ie.map((Ve,at)=>n.createElement(S.Z,{key:at,className:Pe.tab,label:Ve.name,value:Ve.value})))},it=(0,f.Z)(Je=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:Je.spacing(1)},chip:{margin:2}})),$e=Je=>{const{className:Pe,defaultValue:T,name:M,values:J=[]}=Je,ne=it(),{types:re,setTypes:Ae}=(0,Ct.Rx)();(0,R.Z)(()=>{re.length||(T&&Array.isArray(T)?Ae(T):T&&Ae([T]))});const Ie=Ve=>{const at=Ve.target.value;Ae(at)};return n.createElement(K.Z,{className:Pe,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},n.createElement(pe.Z,{className:ne.label,margin:"dense"},M),n.createElement(he.Z,{multiple:!0,variant:"outlined",value:re,onChange:Ie,placeholder:"All Results",renderValue:Ve=>n.createElement("div",{className:ne.chips},Ve.map(at=>n.createElement(Fe.Z,{key:at,label:at,className:ne.chip,size:"small"})))},J.map(Ve=>n.createElement(ct.Z,{key:Ve,value:Ve},n.createElement(Ut.Z,{checked:re.indexOf(Ve)>-1}),n.createElement(b.Z,{primary:Ve})))))};$e.Accordion=Je=>n.createElement(mn,{...Je}),$e.Tabs=Je=>n.createElement(Ln,{...Je});const Zt=Je=>{const Pe=useRouteRef(pt),{focusContent:T}=useContent(),M=useNavigate(),J=useCallback(ne=>{const re=qs.stringify({query:ne},{addQueryPrefix:!0});T(),M(`${Pe()}${re}`)},[T,M,Pe]);return React.createElement(SidebarSearchField,{icon:Je.icon,onSearch:J,to:"/search"})}},23778:function(Kt,d,e){e.d(d,{Sc:function(){return n.c},YC:function(){return n.f},Z9:function(){return n.e}});var n=e(39947),c=e(2784),m=e(92573),u=e(30705),r=e(49558),l=e(32272),C=e(19126),_=e.n(C),t=e(18473)},44741:function(Kt,d,e){e.d(d,{Wf:function(){return Je}});var n=e(49558),c=e(30705),m=e(2784),u=e(64279),r=e(79692),l=e(38724),C=e(49429),_=e(77277),t=e(29611),y=e(60905),f=e(8629),F=e(79249),B=e(35292),k=e(58238),X=e(90436),A=e(71346),D=e.n(A),N=e(62432),p=e(26506);const h=(0,c.T0)({id:"plugin.techradar.service"});var b=(T=>(T[T.Down=-1]="Down",T[T.NoChange=0]="NoChange",T[T.Up=1]="Up",T))(b||{});const E=(0,r.Z)(T=>({ring:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},axis:{fill:"none",stroke:"#bbb",strokeWidth:"1px"},text:{pointerEvents:"none",userSelect:"none",fill:T.palette.text.primary,fontSize:"25px",fontWeight:800,opacity:.7}}),{name:"PluginTechRadarGrid"}),S=T=>{const{radius:M,rings:J}=T,ne=E(T),re=(Ve,at)=>[m.createElement("circle",{key:`c${Ve}`,cx:0,cy:0,r:at,className:ne.ring}),m.createElement("text",{key:`t${Ve}`,y:at!==void 0?-at+42:void 0,textAnchor:"middle",className:ne.text,style:{fill:J[Ve].color},"data-testid":"radar-ring-heading"},J[Ve].name)],Ae=[m.createElement("line",{key:"x",x1:0,y1:-M,x2:0,y2:M,className:ne.axis,"data-testid":"radar-grid-x-line"}),m.createElement("line",{key:"y",x1:-M,y1:0,x2:M,y2:0,className:ne.axis,"data-testid":"radar-grid-y-line"})],Ie=J.map(Ve=>Ve.outerRadius).map((Ve,at)=>re(at,Ve));return m.createElement(m.Fragment,null,Ae.concat(...Ie))};function K(T){return Boolean(T&&T!=="#"&&T.length>0)}const pe=({url:T,className:M,children:J})=>K(T)?m.createElement(n.rU,{className:M,to:T},J):m.createElement(m.Fragment,null,J),he=T=>{function M(at,Se){return K(at)||Boolean(Se&&Se.length>0)}const{open:J,onClose:ne,title:re,description:Ae,url:Ie,links:Ve}=T;return m.createElement(f.Z,{"data-testid":"radar-description",open:J,onClose:ne},m.createElement(F.Z,{"data-testid":"radar-description-dialog-title"},re),m.createElement(l.Z,{dividers:!0},m.createElement(n.SA,{content:Ae})),M(Ie,Ve)&&m.createElement(C.Z,null,Ve==null?void 0:Ve.map(at=>m.createElement(_.Z,{component:n.rU,to:at.url,onClick:ne,color:"primary",startIcon:m.createElement(B.Z,null),key:at.url},at.title)),K(Ie)&&m.createElement(_.Z,{component:n.rU,to:Ie,onClick:ne,color:"primary",startIcon:m.createElement(B.Z,null),key:Ie},"LEARN MORE")))},Fe=(0,r.Z)(T=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"9px",fill:T.palette.common.white,textAnchor:"middle"},link:{cursor:"pointer"}})),ct=(T,M)=>{const J={fill:T};let ne=m.createElement("circle",{r:9,style:J});return M&&M>0?ne=m.createElement("path",{d:"M -11,5 11,5 0,-13 z",style:J}):M&&M<0&&(ne=m.createElement("path",{d:"M -11,-5 11,-5 0,13 z",style:J})),ne},Ut=T=>{const M=Fe(T),[J,ne]=m.useState(!1),{moved:re,description:Ae,title:Ie,color:Ve,url:at,value:Se,x:te,y:ae,onMouseEnter:Be,onMouseLeave:tt,onClick:ft}=T,bt=ct(Ve,re),rn=()=>{ne(!0)},Gt=()=>{ne(!1)},gn=()=>{ne(!J)};return m.createElement("g",{transform:`translate(${te}, ${ae})`,onMouseEnter:Be,onMouseLeave:tt,onClick:ft,"data-testid":"radar-entry"}," ",J&&m.createElement(he,{open:J,onClose:Gt,title:Ie||"no title",description:Ae||"no description",url:at}),Ae?m.createElement("a",{className:M.link,onClick:rn,role:"button",href:"#",tabIndex:0,onKeyPress:gn},bt):m.createElement(pe,{url:at,className:M.link},bt),m.createElement("text",{y:3,className:M.text},Se))},dt=(0,r.Z)(T=>({bubble:{pointerEvents:"none",userSelect:"none",opacity:0},visibleBubble:{pointerEvents:"none",userSelect:"none",opacity:.8},background:{fill:"#333"},text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:T.palette.common.white}})),Wt=T=>{const M=dt(T),{visible:J,text:ne}=T,re=(0,m.useRef)(null),Ae=(0,m.useRef)(null),Ie=(0,m.useRef)(null),Ve=(0,m.useRef)(null),at=()=>{if(re.current){const{x:Se,y:te}=T,ae=re.current.getBBox(),Be=5,tt=4;Ae.current&&Ae.current.setAttribute("transform",`translate(${Se-ae.width/2}, ${te-ae.height-tt})`),Ie.current&&(Ie.current.setAttribute("x",String(-Be)),Ie.current.setAttribute("y",String(-ae.height)),Ie.current.setAttribute("width",String(ae.width+2*Be)),Ie.current.setAttribute("height",String(ae.height+tt))),Ve.current&&Ve.current.setAttribute("transform",`translate(${ae.width/2-Be}, ${tt-1})`)}};return(0,m.useLayoutEffect)(()=>{at()}),m.createElement("g",{ref:Ae,x:0,y:0,className:J?M.visibleBubble:M.bubble,"data-testid":"radar-bubble"},m.createElement("rect",{ref:Ie,rx:4,ry:4,className:M.background}),m.createElement("text",{ref:re,className:M.text},ne),m.createElement("path",{ref:Ve,d:"M 0,0 10,0 5,8 z",className:M.background}))},Ct=(0,r.Z)(T=>({text:{pointerEvents:"none",userSelect:"none",fontSize:"10px",fill:T.palette.text.secondary}})),G=T=>{const{x:M,y:J}=T,ne=Ct(T);return m.createElement("text",{"data-testid":"radar-footer",transform:`translate(${M}, ${J})`,className:ne.text},"\u25B2 moved up\xA0\xA0\xA0\xA0\xA0\u25BC moved down")},fn=({url:T,description:M,title:J,classes:ne,active:re,links:Ae})=>{const[Ie,Ve]=m.useState(!1),at=()=>{Ve(!0)},Se=()=>{Ve(!1)},te=()=>{Ve(!Ie)};return M?m.createElement(m.Fragment,null,m.createElement(X.Z,{component:"span",className:ne.entryLink,onClick:at,role:"button",tabIndex:0,onKeyPress:te},m.createElement(X.Z,{component:"span",className:re?ne.activeEntry:ne.entry},J)),Ie&&m.createElement(he,{open:Ie,onClose:Se,title:J||"no title",url:T,description:M,links:Ae})):m.createElement(pe,{url:T,className:ne.entryLink},m.createElement(X.Z,{component:"span",className:re?ne.activeEntry:ne.entry},J))},Et=({ring:T,entries:M,classes:J,onEntryMouseEnter:ne,onEntryMouseLeave:re})=>m.createElement("div",{"data-testid":"radar-ring",key:T.id,className:J.ring},m.createElement("h3",{className:J.ringHeading,style:{color:T.color},"data-testid":"radar-legend-heading"},T.name),M.length===0?m.createElement(k.ZP,{paragraph:!0,className:J.ringEmpty},"(empty)"):m.createElement("ol",{className:J.ringList},M.map(Ae=>{var Ie;return m.createElement("li",{key:Ae.id,value:(Ae.index||0)+1,onMouseEnter:ne&&(()=>ne(Ae)),onMouseLeave:re&&(()=>re(Ae))},m.createElement(fn,{classes:J,url:Ae.url,title:Ae.title,description:Ae.description,active:Ae.active,links:(Ie=Ae.links)!=null?Ie:[]}))}))),je=T=>{const M={};for(const J of T){const ne=J.quadrant.index,re=J.ring.index;let Ae={};ne!==void 0&&(M[ne]===void 0&&(M[ne]={}),Ae=M[ne]);let Ie=[];re!==void 0&&(Ae[re]===void 0&&(Ae[re]=[]),Ie=Ae[re]),Ie.push(J)}return M},P=(T,M,J,ne=0)=>{const re=M.index,Ae=J.index,Ie=re===void 0?{}:T[re]||{};return Ae===void 0?[]:Ie[Ae+ne]||[]},Ue=({segments:T,quadrant:M,rings:J,classes:ne,onEntryMouseEnter:re,onEntryMouseLeave:Ae})=>m.createElement("foreignObject",{key:M.id,x:M.legendX,y:M.legendY,width:M.legendWidth,height:M.legendHeight,"data-testid":"radar-quadrant"},m.createElement("div",{className:ne.quadrant},m.createElement("h2",{className:ne.quadrantHeading},M.name),m.createElement("div",{className:ne.rings},J.map(Ie=>m.createElement(Et,{key:Ie.id,ring:Ie,classes:ne,entries:P(T,M,Ie),onEntryMouseEnter:re,onEntryMouseLeave:Ae}))))),H=(0,r.Z)(T=>({quadrant:{height:"100%",width:"100%",overflowY:"auto",scrollbarWidth:"thin"},quadrantHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:T.spacing(2),fontSize:"18px"},rings:{columns:3},ring:{breakInside:"avoid-column",pageBreakInside:"avoid","-webkit-column-break-inside":"avoid",fontSize:"12px",marginBottom:T.spacing(2)},ringEmpty:{color:T.palette.text.secondary,fontSize:"12px"},ringHeading:{pointerEvents:"none",userSelect:"none",marginTop:0,marginBottom:T.spacing(1),fontSize:"12px",fontWeight:800},ringList:{listStylePosition:"inside",marginTop:0,paddingLeft:0,fontVariantNumeric:"proportional-nums","-moz-font-feature-settings":"pnum","-webkit-font-feature-settings":"pnum","font-feature-settings":"pnum"},entry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px"},activeEntry:{pointerEvents:"visiblePainted",userSelect:"none",fontSize:"11px",background:"#6f6f6f",color:T.palette.common.white},entryLink:{pointerEvents:"visiblePainted",cursor:"pointer"}})),R=({quadrants:T,rings:M,entries:J,onEntryMouseEnter:ne,onEntryMouseLeave:re,...Ae})=>{const Ie=H(Ae);return m.createElement("g",{"data-testid":"radar-legend"},T.map(Ve=>m.createElement(Ue,{key:Ve.id,segments:je(J),quadrant:Ve,rings:M,classes:Ie,onEntryMouseEnter:ne,onEntryMouseLeave:re})))},W=T=>{const{width:M,height:J,radius:ne,quadrants:re,rings:Ae,entries:Ie,activeEntry:Ve,onEntryMouseEnter:at,onEntryMouseLeave:Se}=T;return m.createElement("g",{"data-testid":"radar-plot"},m.createElement(R,{quadrants:re,rings:Ae,entries:Ie,onEntryMouseEnter:at&&(te=>at(te)),onEntryMouseLeave:Se&&(te=>Se(te))}),m.createElement("g",{transform:`translate(${M/2}, ${J/2})`},m.createElement(S,{radius:ne,rings:Ae}),m.createElement(G,{x:-.5*M,y:.5*J}),Ie.map(te=>m.createElement(Ut,{key:te.id,x:te.x||0,y:te.y||0,color:te.color||"",value:((te==null?void 0:te.index)||0)+1,url:te.url,description:te.description,moved:te.moved,title:te.title,onMouseEnter:at&&(()=>at(te)),onMouseLeave:Se&&(()=>Se(te))})),m.createElement(Wt,{visible:!!Ve,text:(Ve==null?void 0:Ve.title)||"",x:(Ve==null?void 0:Ve.x)||0,y:(Ve==null?void 0:Ve.y)||0})))};class ge{constructor(M,J,ne,re){this.nextSeed=re,this.polarMin={t:M.radialMin,r:J.innerRadius},this.polarMax={t:M.radialMax,r:J.outerRadius},this.cartesianMin={x:15*M.offsetX,y:15*M.offsetY},this.cartesianMax={x:ne*M.offsetX,y:ne*M.offsetY}}clipx(M){const J=Dt(M,this.cartesianMin,this.cartesianMax),ne=mt(Me(J),this.polarMin.r+15,this.polarMax.r-15);return M.x=et(ne).x,M.x}clipy(M){const J=Dt(M,this.cartesianMin,this.cartesianMax),ne=mt(Me(J),this.polarMin.r+15,this.polarMax.r-15);return M.y=et(ne).y,M.y}random(){return et({t:this._randomBetween(this.polarMin.t,this.polarMax.t),r:this._normalBetween(this.polarMin.r,this.polarMax.r)})}_random(){const M=Math.sin(this.nextSeed())*1e4;return M-Math.floor(M)}_randomBetween(M,J){return M+this._random()*(J-M)}_normalBetween(M,J){return M+(this._random()+this._random())*.5*(J-M)}}function Me({x:T,y:M}){return{t:Math.atan2(M,T),r:Math.sqrt(T*T+M*M)}}function et({r:T,t:M}){return{x:T*Math.cos(M),y:T*Math.sin(M)}}function pt(T,M,J){const ne=Math.min(M,J),re=Math.max(M,J);return Math.min(Math.max(T,ne),re)}function mt(T,M,J){return{t:T.t,r:pt(T.r,M,J)}}function Dt(T,M,J){return{x:pt(T.x,M.x,J.x),y:pt(T.y,M.y,J.y)}}const ie=(T,M,J,ne)=>{const Ae=[16,J/2-M-16,J/2+M+16,J-16],Ie=[16,ne/2-16,ne/2,ne-16],Ve=[{x:Ae[2],y:Ie[2],width:Ae[3]-Ae[2],height:Ie[3]-Ie[2]},{x:Ae[0],y:Ie[2],width:Ae[1]-Ae[0],height:Ie[3]-Ie[2]},{x:Ae[0],y:Ie[0],width:Ae[1]-Ae[0],height:Ie[1]-Ie[0]},{x:Ae[2],y:Ie[0],width:Ae[3]-Ae[2],height:Ie[1]-Ie[0]}];return T.map((at,Se)=>{const te=Ve[Se%4];return{...at,index:Se,radialMin:Se*Math.PI/2,radialMax:(Se+1)*Math.PI/2,offsetX:Se%4===0||Se%4===3?1:-1,offsetY:Se%4===0||Se%4===1?1:-1,legendX:te.x,legendY:te.y,legendWidth:te.width,legendHeight:te.height}})},o=(T,M,J,ne,re)=>{let Ae=42;const Ie=T.map((at,Se)=>{const te=M.find(ft=>{const bt=typeof at.quadrant=="object"?at.quadrant.id:at.quadrant;return ft.id===bt}),ae=J.find(ft=>{const bt=typeof at.ring=="object"?at.ring.id:at.ring;return ft.id===bt});if(!te)throw new Error(`Unknown quadrant ${at.quadrant} for entry ${at.id}!`);if(!ae)throw new Error(`Unknown ring ${at.ring} for entry ${at.id}!`);const Be=new ge(te,ae,ne,()=>Ae++),tt=Be==null?void 0:Be.random();return{...at,index:Se,quadrant:te,ring:ae,segment:Be,x:tt.x,y:tt.y,color:re&&at.id===(re==null?void 0:re.id)?at.ring.color:D()(at.ring.color).desaturate(.5).lighten(.1).string(),active:!!(re&&at.id===(re==null?void 0:re.id))}}),Ve=(0,N.Z)().nodes(Ie).velocityDecay(.19).force("collision",(0,p.Z)().radius(12).strength(.85)).stop();for(let at=0,Se=Math.ceil(Math.log(Ve.alphaMin())/Math.log(1-Ve.alphaDecay()));at<Se;++at){Ve.tick();for(const te of Ie)te.segment&&(te.x=te.segment.clipx(te),te.y=te.segment.clipy(te))}return Ie},xe=(T,M)=>T.map((J,ne)=>({...J,index:ne,outerRadius:(ne+2)/(T.length+1)*M,innerRadius:(ne===0?0:ne+1)/(T.length+1)*M})),be=({width:T,height:M,quadrants:J,rings:ne,entries:re,...Ae})=>{const Ie=Math.min(T,M)/2,[Ve,at]=(0,m.useState)(),Se=(0,m.useRef)(null),te=(0,m.useMemo)(()=>ie(J,Ie,T,M),[J,Ie,T,M]),ae=(0,m.useMemo)(()=>xe(ne,Ie),[Ie,ne]),Be=(0,m.useMemo)(()=>o(re,te,ae,Ie,Ve),[re,te,ae,Ie,Ve]);return m.createElement("svg",{ref:Se,width:T,height:M,...Ae.svgProps},m.createElement(W,{width:T,height:M,radius:Ie,entries:Be,quadrants:te,rings:ae,activeEntry:Ve,onEntryMouseEnter:tt=>at(tt),onEntryMouseLeave:()=>at(void 0)}))},Rt=T=>{const M=(0,c.h_)(c.VE),J=(0,c.h_)(h),{error:ne,value:re,loading:Ae}=(0,u.default)(async()=>J.load(T),[J,T]);return(0,m.useEffect)(()=>{ne&&M.post(ne)},[ne,M]),{loading:Ae,value:re,error:ne}};function vt(T){const M=T==null?void 0:T.toLocaleLowerCase("en-US").split(/\s/).map(J=>J.trim()).filter(Boolean);return M!=null&&M.length?J=>{var ne;const re=`${J.title} ${((ne=J.timeline[0])==null?void 0:ne.description)||""}`.toLocaleLowerCase("en-US");return M.every(Ae=>re.includes(Ae))}:()=>!0}function Vt(T){const{loading:M,error:J,value:ne}=Rt(T.id),re=Ae=>Ae.entries.filter(vt(T.searchText)).map(Ie=>({id:Ie.key,quadrant:Ae.quadrants.find(Ve=>Ve.id===Ie.quadrant),title:Ie.title,ring:Ae.rings.find(Ve=>Ve.id===Ie.timeline[0].ringId),timeline:Ie.timeline.map(Ve=>({date:Ve.date,ring:Ae.rings.find(at=>at.id===Ve.ringId),description:Ve.description,moved:Ve.moved})),moved:Ie.timeline[0].moved,description:Ie.description||Ie.timeline[0].description,url:Ie.url,links:Ie.links}));return m.createElement(m.Fragment,null,M&&m.createElement(n.Ex,null),!M&&!J&&ne&&m.createElement(be,{...T,rings:ne.rings,quadrants:ne.quadrants,entries:re(ne)}))}const de=(0,r.Z)(()=>({overflowXScroll:{overflowX:"scroll"}}));function Tt(T){const{title:M="Tech Radar",subtitle:J="Pick the recommended technologies for your projects",pageTitle:ne="Company Radar",...re}=T,Ae=de(),[Ie,Ve]=m.useState("");return m.createElement(n.T3,{themeId:"tool"},m.createElement(n.h4,{title:M,subtitle:J}),m.createElement(n.VY,{className:Ae.overflowXScroll},m.createElement(n.yW,{title:ne},m.createElement(t.Z,{id:"tech-radar-filter",type:"search",placeholder:"Filter",onChange:at=>Ve(at.target.value)}),m.createElement(n.qt,null,m.createElement(X.Z,{paragraph:!0},"This is used for visualizing the official guidelines of different areas of software development such as languages, frameworks, infrastructure and processes. You can find an explanation for the radar at"," ",m.createElement(n.rU,{to:"https://opensource.zalando.com/tech-radar/"},"Zalando Tech Radar"),"."))),m.createElement(y.Z,{container:!0,spacing:3,direction:"row"},m.createElement(y.Z,{item:!0,xs:12,sm:6,md:4},m.createElement(Vt,{searchText:Ie,...re})))))}var xt=Object.freeze({__proto__:null,RadarPage:Tt});const ln=new Array;ln.push({id:"adopt",name:"ADOPT",color:"#5BA300"}),ln.push({id:"trial",name:"TRIAL",color:"#009EB0"}),ln.push({id:"assess",name:"ASSESS",color:"#C7BA00"}),ln.push({id:"hold",name:"HOLD",color:"#E09B96"});const mn=new Array;mn.push({id:"infrastructure",name:"Infrastructure"}),mn.push({id:"frameworks",name:"Frameworks"}),mn.push({id:"languages",name:"Languages"}),mn.push({id:"process",name:"Process"});const dn=new Array;dn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),dn.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),dn.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),dn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),dn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),dn.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),dn.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),dn.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),dn.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Ln={entries:dn,quadrants:mn,rings:ln};class it{async load(){return Ln}}const $e=(0,c.NT)({id:"tech-radar"}),Je=(0,c.rx)({id:"tech-radar",routes:{root:$e},apis:[(0,c.ni)(h,new it)]}).provide((0,c.P4)({name:"TechRadarPage",component:()=>Promise.resolve().then(function(){return xt}).then(T=>T.RadarPage),mountPoint:$e})),Pe=null},65609:function(Kt,d,e){e.d(d,{EU:function(){return $e}});var n=e(30705),c=e(66565),m=e(2784),u=e(87370),r=e(15459),l=e(77277),C=e(79692),_=e(8560),t=e(27556),y=e(11433),f=e(60364),F=e(12231),B=e(49378),k=e(90436),X=e(95544),A=e(61837),D=e(51209),N=e(38016),p=e(82717),h=e.n(p),b=e(1854),E=e(49462),S=e(31654),K=e(49558),pe=e(65549),he=e(17373),Fe=e(85224),ct=e(96103);const Ut=".md-nav__item--nested .md-toggle",dt="@backstage/techdocs-addons/nav-expanded",Wt=(0,r.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(l.Z),Ct=(0,r.Z)({root:{height:"20px",width:"20px"}})(D.Z),G=(0,r.Z)({root:{height:"20px",width:"20px"}})(N.Z),fn=()=>{const Pe={expandAllNestedNavs:!1},{value:T,set:M}=(0,u.Z)(dt,{defaultValue:Pe}),[J,ne]=(0,m.useState)(!1),[...re]=(0,c.pV)([Ut]),Ae=(0,m.useCallback)(Ve=>{const at=Ve.checked,Se=T==null?void 0:T.expandAllNestedNavs;return!!(Se&&!at||!Se&&at)},[T]);(0,m.useEffect)(()=>{re!=null&&re.length&&(ne(!0),re.forEach(Ve=>{Ae(Ve)&&Ve.click()}))},[T,Ae,re]);const Ie=()=>{M(Ve=>({expandAllNestedNavs:!(Ve!=null&&Ve.expandAllNestedNavs)}))};return m.createElement(m.Fragment,null,J?m.createElement(Wt,{size:"small",onClick:Ie,"aria-label":T!=null&&T.expandAllNestedNavs?"collapse-nav":"expand-nav"},T!=null&&T.expandAllNestedNavs?m.createElement(G,null):m.createElement(Ct,null)):null)},Et="techdocs-report-issue",je=`#${Et}`,P='[title^="Edit this page"]',Ue='[title^="Leave feedback for"]',H='[data-md-component="main"] .md-content',R=(Pe,T)=>T==="github"?(0,b.BT)(Pe,"blob"):T==="gitlab"?(0,b.ah)(Pe,"blob"):(console.error(`Invalid SCM type ${T} found in ReportIssue addon for URL ${Pe}!`),Pe),W=Pe=>{const T=Pe.toString().substring(0,70),M=T.length===70?"...":"";return`Documentation feedback: ${T}${M}`},ge=(Pe,T,M)=>{const J="## Documentation Feedback \u{1F4DD}",ne="#### The highlighted text:",re="#### The comment on the text:",Ae="_>replace this line with your comment<_",Ie=Pe.toString().trim().split(`
`).map(at=>`> ${at.trim()}`).join(`
`),Ve=[`${M} URL: <${window.location.href}> 
Markdown URL: <${T}>`];return`${J}

 ${ne} 

 ${Ie}

 ${re} 
 ${Ae}

 ___
${Ve}`},Me=Pe=>{var T,M;const J={title:"",body:""},ne=(0,c.oi)(Pe),[re]=(0,c.pV)([P]),Ae=(T=re==null?void 0:re.href)!=null?T:"",Ie=(0,n.h_)(E.q3),at=(0,n.h_)(n.Ds).getOptionalString("app.title")||"Backstage";if(!ne||!Ae)return J;const Se=(M=Ie.byUrl(Ae))==null?void 0:M.type;return Se?{title:W(ne),body:ge(ne,R(Ae,Se),at)}:J},et=()=>{var Pe,T;const M=(0,n.h_)(E.q3),[J]=(0,c.pV)([P]),ne=(Pe=J==null?void 0:J.href)!=null?Pe:"";if(!ne)return null;const re=(T=M.byUrl(ne))==null?void 0:T.type;return re?{...h()(R(ne,re)),type:re}:null},pt=(0,C.Z)(Pe=>({root:{display:"grid",gridGap:Pe.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Pe.palette.common.black,fontSize:Pe.typography.button.fontSize}})),mt=({type:Pe})=>Pe==="github"?K.fy:S.Z,Dt=({type:Pe})=>Pe==="github"?"Github":"Gitlab",ie=(Pe,T)=>{const{title:M,body:J}=T,ne=encodeURIComponent(M),re=encodeURIComponent(J),{protocol:Ae,resource:Ie,owner:Ve,name:at,type:Se}=Pe,te=`${Ae}://${Ie}/${Ve}/${at}`,ae=encodeURI(te);return Se==="github"?`${ae}/issues/new?title=${ne}&body=${re}`:`${ae}/issues/new?issue[title]=${ne}&issue[description]=${re}`},o=({template:Pe,repository:T})=>{const M=pt(),J=mt(T),ne=ie(T,Pe);return m.createElement(K.rU,{className:M.root,to:ne,target:"_blank"},m.createElement(J,null)," Open new ",Dt(T)," issue")},xe=(0,C.Z)(Pe=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Pe.spacing(1),zIndex:Pe.zIndex.tooltip,background:Pe.palette.common.white}})),be=({debounceTime:Pe=500,templateBuilder:T})=>{const M=xe(),[J,ne]=(0,m.useState)(),re=et(),Ae=Me(Pe),Ie=(0,c.oi)(Pe),[Ve,at]=(0,c.pV)([H,Ue]);let[Se]=(0,c.pV)([je]);return at&&(at.style.display="none"),(0,m.useEffect)(()=>{if(!re||!Ie||!Ie.containsNode(Ve,!0)||Ie!=null&&Ie.containsNode(Se,!0))return;const te=Ve.getBoundingClientRect(),ae=Ie.getRangeAt(0).getBoundingClientRect();ne({top:`${ae.top-te.top-16}px`,left:`${ae.left+ae.width/2}px`})},[Ie,Ve,Se]),!Ie||!re||!["github","gitlab"].includes(re.type)?null:(Se||(Se=document.createElement("div"),Se.setAttribute("id",Et),Ve.prepend(Se)),m.createElement(_.Z,{container:Se},m.createElement(t.Z,{"data-testid":"report-issue-addon",className:M.root,style:J},m.createElement(o,{repository:re,template:T?T({selection:Ie}):Ae}))))},Rt="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",vt=(0,r.Z)(Pe=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Pe.palette.common.white,boxShadow:Rt,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:Rt}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Pe.palette.common.black,fontSize:Pe.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(y.Z),Vt={key:"techdocs.addons.settings.textsize",defaultValue:100},de=[{value:90},{value:100},{value:115},{value:130},{value:150}],Tt=(0,C.Z)(Pe=>({container:{color:Pe.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Pe.spacing(1)},increaseButton:{marginLeft:Pe.spacing(1)}})),xt=()=>{const Pe=Tt(),T=(0,f.Z)(),[M]=(0,c.pV)(["body"]),[J,ne]=(0,m.useState)(()=>{const Be=localStorage==null?void 0:localStorage.getItem(Vt.key);return Be?parseInt(Be,10):Vt.defaultValue}),re=(0,m.useMemo)(()=>de.map(Be=>Be.value),[]),Ae=(0,m.useMemo)(()=>re.indexOf(J),[re,J]),Ie=(0,m.useMemo)(()=>re[0],[re]),Ve=(0,m.useMemo)(()=>re[re.length-1],[re]),at=(0,m.useCallback)(()=>`${J}%`,[J]),Se=(0,m.useCallback)((Be,tt)=>{Array.isArray(tt)||(ne(tt),localStorage==null||localStorage.setItem(Vt.key,String(tt)))},[ne]),te=(0,m.useCallback)(Be=>{Se(Be,re[Ae-1])},[Ae,re,Se]),ae=(0,m.useCallback)(Be=>{Se(Be,re[Ae+1])},[Ae,re,Se]);return(0,m.useEffect)(()=>{var Be,tt;if(!M)return;const ft=(tt=(Be=T.typography)==null?void 0:Be.htmlFontSize)!=null?tt:16;M.style.setProperty("--md-typeset-font-size",`${ft*(J/100)}px`)},[M,J,T]),m.createElement(F.Z,{className:Pe.menuItem,button:!0,disableRipple:!0},m.createElement(B.Z,{primary:m.createElement(k.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:m.createElement(X.Z,{className:Pe.container},m.createElement(A.Z,{className:Pe.decreaseButton,size:"small",edge:"start",disabled:J===Ie,onClick:te,"aria-label":"Decrease text size"},m.createElement(he.Z,null)),m.createElement(vt,{value:J,"aria-labelledby":"text-size-slider",getAriaValueText:at,valueLabelDisplay:"on",valueLabelFormat:at,marks:de,step:null,min:Ie,max:Ve,onChangeCommitted:Se}),m.createElement(A.Z,{className:Pe.increaseButton,size:"small",edge:"end",disabled:J===Ve,onClick:ae,"aria-label":"Increase text size"},m.createElement(pe.Z,null))),disableTypography:!0}))};function ln(Pe,T){T===void 0&&(T={});var M=T.insertAt;if(!(!Pe||typeof document=="undefined")){var J=document.head||document.getElementsByTagName("head")[0],ne=document.createElement("style");ne.type="text/css",M==="top"&&J.firstChild?J.insertBefore(ne,J.firstChild):J.appendChild(ne),ne.styleSheet?ne.styleSheet.cssText=Pe:ne.appendChild(document.createTextNode(Pe))}}var mn=`.pswp {
  --pswp-bg: #f8f8f8;
}
.pswp__counter {
  color: rgba(0, 0, 0, 0.87);
  text-shadow: none;
}
`;ln(mn);const dn=()=>{const Pe=(0,c.pV)(["img"]);return(0,m.useEffect)(()=>{let T=null,M=new Fe.Z({pswpModule:ct.Z,wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomInIcon" aria-label="fontSize large"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></svg>'});return Pe.forEach((J,ne)=>{J.onclick=()=>(T===null&&(T=Pe.map(re=>({element:re,src:re.src,msrc:re.src,alt:re.alt,width:re.clientWidth,height:re.clientHeight}))),M.loadAndOpen(ne,T),!1)}),M.init(),()=>{M.destroy(),M=null}},[Pe]),null},Ln=(0,n.rx)({id:"techdocsModuleAddonsContrib"}),it=Ln.provide((0,c.KY)({name:"ExpandableNavigation",location:c.oZ.PrimarySidebar,component:fn})),$e=Ln.provide((0,c.KY)({name:"ReportIssue",location:c.oZ.Content,component:be})),Zt=Ln.provide((0,c.KY)({name:"TextSize",location:c.oZ.Settings,component:xt})),Je=Ln.provide((0,c.KY)({name:"LightBox",location:c.oZ.Content,component:dn}))},66565:function(Kt,d,e){e.d(d,{$L:function(){return b},DR:function(){return X},Dl:function(){return S},KY:function(){return D},Ox:function(){return Wt},VA:function(){return fn},ZS:function(){return ct},Zz:function(){return k},gT:function(){return E},jM:function(){return B},oZ:function(){return dt},oi:function(){return Ue},pV:function(){return je},ux:function(){return G},x1:function(){return Ut}});var n=e(2784),c=e(73557),m=e(30705),u=e(64279),r=e(34520),l=e(18473),C=e(70882),_=e(50236),t=e(19219),y=e(49558),f=e(54073),F=e.n(f);const B="techdocs.addons.addon.v1",k="techdocs.addons.wrapper.v1",X=()=>null;(0,m.R5)(X,k,!0);const A=H=>`${B}.${H.toLocaleLowerCase("en-US")}`;function D(H){const{name:R,component:W}=H;return(0,m.YO)({name:R,component:{sync:ge=>n.createElement(W,{...ge})},data:{[B]:H,[A(R)]:!0}})}const N=(H,R)=>H.selectByComponentData({key:R}).getElements()[0],p=H=>H.selectByComponentData({key:k}).selectByComponentData({key:B}),h=H=>H.selectByComponentData({key:k}).findComponentData({key:B}),b=()=>{const H=(0,c.pC)(),R=(0,m.vJ)(H,p),W=(0,m.vJ)(H,h),ge=(0,n.useCallback)(pt=>{var mt;if(!R||!pt)return null;const Dt=A(pt.name);return(mt=N(R,Dt))!=null?mt:null},[R]),Me=(0,n.useCallback)(pt=>{const mt=W.find(Dt=>Dt.name===pt);return mt?ge(mt):null},[W,ge]),et=(0,n.useCallback)(pt=>{const mt=W.filter(Dt=>Dt.location===pt);return mt.length?mt.map(ge):null},[W,ge]);return{renderComponentByName:Me,renderComponentsByLocation:et}},E=(0,m.T0)({id:"plugin.techdocs.service"}),S=(0,m.T0)({id:"plugin.techdocs.storageservice"});function K(H,R){return R.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(H.kind=H.kind.toLocaleLowerCase(),H.name=H.name.toLocaleLowerCase(),H.namespace=H.namespace.toLocaleLowerCase()),H}const pe=(H,R)=>(0,r.eE)(H)===(0,r.eE)(R),he={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Fe=(0,l.CT)("techdocs-reader-page-context"),ct=(0,n.memo)(H=>{const{entityRef:R,children:W}=H,ge=(0,m.h_)(E),Me=(0,m.h_)(m.Ds),et=(0,u.default)(async()=>ge.getTechDocsMetadata(R),[R]),pt=(0,u.default)(async()=>ge.getEntityMetadata(R),[R]),[mt,Dt]=(0,n.useState)(he.title),[ie,o]=(0,n.useState)(he.subtitle),[xe,be]=(0,n.useState)(he.shadowRoot),Rt={metadata:et,entityRef:K(R,Me),entityMetadata:pt,shadowRoot:xe,setShadowRoot:be,title:mt,setTitle:Dt,subtitle:ie,setSubtitle:o},vt=(0,l.EI)({1:Rt});return n.createElement(m.fC,{attributes:{entityRef:(0,r.eE)(R)}},n.createElement(Fe.Provider,{value:vt},W instanceof Function?W(Rt):W))},(H,R)=>pe(H.entityRef,R.entityRef)),Ut=()=>{const H=(0,n.useContext)(Fe);if(H===void 0)return he;const R=H.atVersion(1);if(R===void 0)throw new Error("No context found for version 1.");return R},dt=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Wt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",Ct=H=>{(0,n.useEffect)(()=>{var R;if(!H)return()=>{};const W=H.querySelectorAll('head > link[rel="stylesheet"]');let ge=(R=W==null?void 0:W.length)!=null?R:0;const Me=new CustomEvent(Wt);if(!ge)return H.dispatchEvent(Me),()=>{};const et=()=>{--ge===0&&H.dispatchEvent(Me)};return W==null||W.forEach(pt=>{pt.addEventListener("load",et)}),()=>{W==null||W.forEach(pt=>{pt.removeEventListener("load",et)})}},[H])},G=H=>{const[R,W]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!H)return()=>{};W(!0);const ge=H.style;ge.setProperty("opacity","0");const Me=()=>{W(!1),ge.setProperty("opacity","1")};return H.addEventListener(Wt,Me),()=>{H.removeEventListener(Wt,Me)}},[H]),R},fn=H=>{const{element:R,onAppend:W,children:ge}=H,[Me,et]=(0,n.useState)((0,C.Ue)({...(0,_.Z)(),insertionPoint:void 0}));Ct(R);const pt=G(R),mt=(0,n.useCallback)(Dt=>{if(!R||!Dt)return;et((0,C.Ue)({...(0,_.Z)(),insertionPoint:R.querySelector("head")||void 0}));let ie=Dt.shadowRoot;ie||(ie=Dt.attachShadow({mode:"open"})),ie.replaceChildren(R),typeof W=="function"&&W(ie)},[R,W]);return n.createElement(n.Fragment,null,pt&&n.createElement(y.Ex,null),n.createElement(t.ZP,{jss:Me,sheetsManager:new Map},n.createElement("div",{ref:mt,"data-testid":"techdocs-native-shadowroot"}),ge))},Et=()=>{const{shadowRoot:H}=Ut();return H},je=H=>{const R=Et();return R?H.map(W=>R==null?void 0:R.querySelectorAll(W)).filter(W=>W.length).map(W=>Array.from(W)).flat():[]},P=H=>H.toString()&&H.rangeCount&&H.getRangeAt(0).getBoundingClientRect().top,Ue=(H=0)=>{const R=Et(),[W,ge]=(0,n.useState)(null),Me=(0,n.useMemo)(()=>F()(()=>{const et=R,pt=et.getSelection?et.getSelection():document.getSelection();pt&&P(pt)?ge(pt):ge(null)},H),[R,ge,H]);return(0,n.useEffect)(()=>(window.document.addEventListener("selectionchange",Me),()=>window.document.removeEventListener("selectionchange",Me)),[Me]),W}},51443:function(Kt,d,e){e.d(d,{D:function(){return ya},E:function(){return Re},T:function(){return j},a:function(){return na},b:function(){return Rn},c:function(){return En},e:function(){return ht},g:function(){return Yt},h:function(){return un},t:function(){return w}});var n=e(30705),c=e(32272),m=e(76372),u=e.n(m),r=e(2784),l=e(73557),C=e(66565),_=e(64279),t=e(77446),y=e(49558),f=e(79692),F=e(49378),B=e(86136),k=e(27556),X=e(12420),A=e(60905),D=e(90436),N=e(61837),p=e(77277),h=e(4190),b=e(4614),E=e(41128),S=e(60364),K=e(15459),pe=e(80030),he=e(72379),Fe=e(41547),ct=e(41156),Ut=e(8560),dt=e(15223),Wt=e(95544),Ct=e(48348),G=e(94339),fn=e(16111),Et=e(24579),je=e(14503),P=e(92573),Ue=e(99688),H=e(98069),R=e(87685),W=e(49462),ge=e(35368),Me=e.n(ge),et=e(1854),pt=e(67097),mt=e(28316),Dt=e(82717),ie=e.n(Dt),o=e(44882),xe=e(95074),be=e(18671),Rt=e(73250),vt=e(73495),Vt=e(34520),de=e(76635),Tt=e.n(de),xt=e(47603),ln=e(39981),mn=e(2337),dn=e(11640),Ln=e(28347);const it=(0,n.T0)({id:"plugin.techdocs.storageservice"}),$e=(0,n.T0)({id:"plugin.techdocs.service"});class Zt{constructor(ve){this.configApi=ve.configApi,this.discoveryApi=ve.discoveryApi,this.fetchApi=ve.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(ve){const{kind:we,namespace:lt,name:Mt}=ve,tn=`${await this.getApiOrigin()}/metadata/techdocs/${lt}/${we}/${Mt}`,on=await this.fetchApi.fetch(`${tn}`);if(!on.ok)throw await c.VL.fromResponse(on);return await on.json()}async getEntityMetadata(ve){const{kind:we,namespace:lt,name:Mt}=ve,tn=`${await this.getApiOrigin()}/metadata/entity/${lt}/${we}/${Mt}`,on=await this.fetchApi.fetch(`${tn}`);if(!on.ok)throw await c.VL.fromResponse(on);return await on.json()}}class Je{constructor(ve){this.configApi=ve.configApi,this.discoveryApi=ve.discoveryApi,this.identityApi=ve.identityApi,this.fetchApi=ve.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var ve;return(ve=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?ve:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(ve,we){const{kind:lt,namespace:Mt,name:Ht}=ve,on=`${await this.getStorageUrl()}/${Mt}/${lt}/${Ht}/${we}`,xn=await this.fetchApi.fetch(`${on.endsWith("/")?on:`${on}/`}index.html`);let Wn="";switch(xn.status){case 404:throw Wn="Page not found. ",we||(Wn+="This could be because there is no index.md file in the root of the docs directory of this repository."),new c.dR(Wn);case 500:throw Wn="Could not generate documentation or an error in the TechDocs backend. ",new Error(Wn)}return xn.text()}async syncEntityDocs(ve,we=()=>{}){const{kind:lt,namespace:Mt,name:Ht}=ve,on=`${await this.getApiOrigin()}/sync/${Mt}/${lt}/${Ht}`,{token:xn}=await this.identityApi.getCredentials();return new Promise((Wn,On)=>{const Gn=new m.EventSourcePolyfill(on,{withCredentials:!0,headers:xn?{Authorization:`Bearer ${xn}`}:{}});Gn.addEventListener("log",Lt=>{Lt.data&&we(JSON.parse(Lt.data))}),Gn.addEventListener("finish",Lt=>{let ia=!1;Lt.data&&({updated:ia}=JSON.parse(Lt.data)),Wn(ia?"updated":"cached")}),Gn.onerror=Lt=>{switch(Gn.close(),Lt.status){case 404:On(new c.dR(Lt.message));return;default:On(new Error(Lt.data));return}}})}async getBaseUrl(ve,we,lt){const{kind:Mt,namespace:Ht,name:tn}=we,xn=`${await this.getApiOrigin()}/static/docs/${Ht}/${Mt}/${tn}/${lt}`;return new URL(ve,xn.endsWith("/")?xn:`${xn}/`).toString()}}function Pe({contentLoading:V,content:ve,activeSyncState:we}){return V||we==="BUILD_READY_RELOAD"||!ve&&we==="CHECKING"?"CHECKING":!ve&&we==="BUILDING"?"INITIAL_BUILD":ve?we==="BUILDING"?"CONTENT_STALE_REFRESHING":we==="BUILD_READY"?"CONTENT_STALE_READY":we==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function T(V,ve){const we={...V};switch(ve.type){case"sync":ve.state==="CHECKING"&&(we.buildLog=[]),we.activeSyncState=ve.state,we.syncError=ve.syncError;break;case"contentLoading":we.contentLoading=!0,we.contentError=void 0;break;case"content":typeof ve.path=="string"&&(we.path=ve.path),we.contentLoading=!1,we.content=ve.content,we.contentError=ve.contentError;break;case"buildLog":we.buildLog=we.buildLog.concat(ve.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(we.activeSyncState)&&["contentLoading","content"].includes(ve.type)&&(we.activeSyncState="UP_TO_DATE",we.buildLog=[]),we}function M(V,ve,we,lt){var Mt,Ht;const[tn,on]=(0,r.useReducer)(T,{activeSyncState:"CHECKING",path:lt,contentLoading:!0,buildLog:[]}),xn=(0,n.h_)(C.Dl),{retry:Wn}=(0,t.Z)(async()=>{on({type:"contentLoading"});try{const Lt=await xn.getEntityDocs({kind:V,namespace:ve,name:we},lt);return on({type:"content",content:Lt,path:lt}),Lt}catch(Lt){on({type:"content",contentError:Lt,path:lt})}},[xn,V,ve,we,lt]),On=(0,r.useRef)({content:void 0,reload:()=>{}});return On.current={content:tn.content,reload:Wn},(0,_.default)(async()=>{on({type:"sync",state:"CHECKING"});const Lt=setTimeout(()=>{on({type:"sync",state:"BUILDING"})},1e3);try{switch(await xn.syncEntityDocs({kind:V,namespace:ve,name:we},va=>{on({type:"buildLog",log:va})})){case"updated":On.current.content?on({type:"sync",state:"BUILD_READY"}):(On.current.reload(),on({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":on({type:"sync",state:"UP_TO_DATE"});break;default:on({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(ia){on({type:"sync",state:"ERROR",syncError:ia})}finally{clearTimeout(Lt)}},[V,we,ve,xn,on,On]),{state:(0,r.useMemo)(()=>Pe({activeSyncState:tn.activeSyncState,contentLoading:tn.contentLoading,content:tn.content}),[tn.activeSyncState,tn.content,tn.contentLoading]),contentReload:Wn,path:tn.path,content:tn.content,contentErrorMessage:(Mt=tn.contentError)==null?void 0:Mt.toString(),syncErrorMessage:(Ht=tn.syncError)==null?void 0:Ht.toString(),buildLog:tn.buildLog}}const J=(0,r.createContext)({}),ne=()=>(0,r.useContext)(J),re=V=>{const{children:ve}=V,{"*":we=""}=(0,l.UO)(),{entityRef:lt}=(0,C.x1)(),{kind:Mt,namespace:Ht,name:tn}=lt,on=M(Mt,Ht,tn,we);return r.createElement(J.Provider,{value:on},ve instanceof Function?ve(on):ve)},Ae=V=>ve=>r.createElement(re,null,r.createElement(V,{...ve})),Ie=(0,f.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ve=V=>{const{result:ve,highlight:we,lineClamp:lt=5,asListItem:Mt=!0,asLink:Ht=!0,title:tn,icon:on}=V,xn=Ie(),Wn=({children:Lt})=>Ht?r.createElement(y.rU,{noTrack:!0,to:ve.location},Lt):r.createElement(r.Fragment,null,Lt),On=()=>{const Lt=we!=null&&we.fields.title?r.createElement(P.FA,{text:we.fields.title,preTag:we.preTag,postTag:we.postTag}):ve.title,ia=we!=null&&we.fields.entityTitle?r.createElement(P.FA,{text:we.fields.entityTitle,preTag:we.preTag,postTag:we.postTag}):ve.entityTitle,va=we!=null&&we.fields.name?r.createElement(P.FA,{text:we.fields.name,preTag:we.preTag,postTag:we.postTag}):ve.name;return ve?r.createElement(F.Z,{className:xn.itemText,primaryTypographyProps:{variant:"h6"},primary:r.createElement(Wn,null,tn||r.createElement(r.Fragment,null,Lt," | ",ia!=null?ia:va," docs")),secondary:r.createElement(D.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:lt,overflow:"hidden"}},we!=null&&we.fields.text?r.createElement(P.FA,{text:we.fields.text,preTag:we.preTag,postTag:we.postTag}):ve.text)}):null},Gn=({children:Lt})=>Mt?r.createElement(r.Fragment,null,on&&r.createElement(B.Z,null,typeof on=="function"?on(ve):on),r.createElement("div",{className:xn.flexContainer},Lt)):r.createElement(r.Fragment,null,Lt);return r.createElement(Gn,null,r.createElement(On,null))};var at=Object.freeze({__proto__:null,TechDocsSearchResultListItem:Ve});const Se=(0,f.Z)(V=>({root:{width:"100%"},bar:{padding:V.spacing(1)}})),te=V=>V==null?void 0:V.document,ae=V=>{const{entityId:ve,entityTitle:we,debounceTime:lt=150}=V,[Mt,Ht]=(0,r.useState)(!1),tn=(0,l.s0)(),{setFilters:on,result:{loading:xn,value:Wn}}=(0,P.Rx)(),On=Se(),[Gn,Lt]=(0,r.useState)([]);(0,r.useEffect)(()=>{let da=!0;if(da&&Wn){const Ba=Wn.results.slice(0,10);Lt(Ba)}return()=>{da=!1}},[xn,Wn]);const{kind:ia,name:va,namespace:Aa}=ve;(0,r.useEffect)(()=>{on(da=>({...da,kind:ia,namespace:Aa,name:va}))},[ia,Aa,va,on]);const Sa=(da,Ba)=>{if(te(Ba)){const{location:Oa}=Ba.document;tn(Oa)}};return r.createElement(k.Z,{className:On.bar,variant:"outlined"},r.createElement(P.qO,{classes:{root:On.root},"data-testid":"techdocs-search-bar",size:"small",open:Mt,getOptionLabel:()=>"",filterOptions:da=>da,onClose:()=>{Ht(!1)},onFocus:()=>{Ht(!0)},onChange:Sa,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:Gn,renderOption:({document:da,highlight:Ba})=>r.createElement(Ve,{result:da,lineClamp:3,asListItem:!1,asLink:!1,title:da.title,highlight:Ba}),loading:xn,inputDebounceTime:lt,inputPlaceholder:`Search ${we||ve.name} docs`,freeSolo:!1}))},Be=V=>{const ve={term:"",types:["techdocs"],pageCursor:"",filters:V.entityId};return r.createElement(P.Nd,{initialState:ve},r.createElement(ae,{...V}))},tt=(0,f.Z)(V=>(0,X.Z)({paper:{width:"100%",[V.breakpoints.up("sm")]:{width:"75%"},[V.breakpoints.up("md")]:{width:"50%"},padding:V.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:V.palette.background.default}})),ft=({buildLog:V,onClose:ve})=>{const we=tt(),lt=V.length===0?"Waiting for logs...":V.join(`
`);return r.createElement(A.Z,{container:!0,direction:"column",className:we.root,spacing:0,wrap:"nowrap"},r.createElement(A.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},r.createElement(D.Z,{variant:"h5"},"Build Details"),r.createElement(N.Z,{key:"dismiss",title:"Close the drawer",onClick:ve,color:"inherit"},r.createElement(R.Z,null))),r.createElement(A.Z,{item:!0,xs:!0},r.createElement(y.nU,{text:lt,classes:{root:we.logs}})))},bt=({buildLog:V})=>{const ve=tt(),[we,lt]=(0,r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(p.Z,{color:"inherit",onClick:()=>lt(!0)},"Show Build Logs"),r.createElement(h.ZP,{classes:{paper:ve.paper},anchor:"right",open:we,onClose:()=>lt(!1)},r.createElement(ft,{buildLog:V,onClose:()=>lt(!1)})))},rn=({errorMessage:V})=>{const ve=(0,n.h_)(n.Ds).getOptionalString("techdocs.builder");let we="";return ve!=="local"&&(we="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),r.createElement(y.mf,{status:"404",statusMessage:V||"Documentation not found",additionalInfo:we})},Gt=(0,f.Z)(V=>({root:{marginBottom:V.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),gn=()=>{let V=null;const ve=Gt(),{state:we,contentReload:lt,contentErrorMessage:Mt,syncErrorMessage:Ht,buildLog:tn}=ne();return we==="INITIAL_BUILD"&&(V=r.createElement(Ue.Z,{classes:{root:ve.root},variant:"outlined",severity:"info",icon:r.createElement(b.Z,{size:"24px"}),action:r.createElement(bt,{buildLog:tn})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),we==="CONTENT_STALE_REFRESHING"&&(V=r.createElement(Ue.Z,{variant:"outlined",severity:"info",icon:r.createElement(b.Z,{size:"24px"}),action:r.createElement(bt,{buildLog:tn}),classes:{root:ve.root}},"A newer version of this documentation is being prepared and will be available shortly.")),we==="CONTENT_STALE_READY"&&(V=r.createElement(Ue.Z,{variant:"outlined",severity:"success",action:r.createElement(p.Z,{color:"inherit",onClick:()=>lt()},"Refresh"),classes:{root:ve.root}},"A newer version of this documentation is now available, please refresh to view.")),we==="CONTENT_STALE_ERROR"&&(V=r.createElement(Ue.Z,{variant:"outlined",severity:"error",action:r.createElement(bt,{buildLog:tn}),classes:{root:ve.root,message:ve.message}},"Building a newer version of this documentation failed."," ",Ht)),we==="CONTENT_NOT_FOUND"&&(V=r.createElement(r.Fragment,null,Ht&&r.createElement(Ue.Z,{variant:"outlined",severity:"error",action:r.createElement(bt,{buildLog:tn}),classes:{root:ve.root,message:ve.message}},"Building a newer version of this documentation failed."," ",Ht),r.createElement(rn,{errorMessage:Mt}))),V},Ke=/main\.[A-Fa-f0-9]{8}\.min\.css$/,nt=/^https:\/\/fonts\.googleapis\.com/,oe=/^https:\/\/fonts\.gstatic\.com/,Ee=V=>V.nodeName==="LINK",ke=V=>{const ve=(V==null?void 0:V.getAttribute("href"))||"",we=ve.match(Ke),lt=ve.match(nt),Mt=ve.match(oe);return we||lt||Mt},ot=V=>(Ee(V)&&!ke(V)&&V.remove(),V),Ye=V=>V.nodeName==="IFRAME",ut=(V,ve)=>{const we=V.getAttribute("src")||"";try{const{host:lt}=new URL(we);return ve.includes(lt)}catch{return!1}},At=V=>ve=>(Ye(ve)&&!ut(ve,V)&&ve.remove(),ve),Ft=()=>{const V=(0,n.h_)(n.Ds);return(0,r.useMemo)(()=>V.getOptionalConfig("techdocs.sanitizer"),[V])},ue=()=>{const V=Ft();return(0,r.useCallback)(async ve=>{const we=V==null?void 0:V.getOptionalStringArray("allowedIframeHosts");Me().addHook("beforeSanitizeElements",ot);const lt=["link"];return we&&(lt.push("iframe"),Me().addHook("beforeSanitizeElements",At(we))),Me().sanitize(ve.outerHTML,{ADD_TAGS:lt,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[V])};var ye=({theme:V})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${V.palette.text.primary};
  --md-default-fg-color--light: ${V.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,E.$n)(V.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,E.$n)(V.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${V.palette.background.default};
  --md-default-bg-color--light: ${V.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,E.$n)(V.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,E.$n)(V.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${V.palette.primary.main};
  --md-primary-fg-color--light: ${V.palette.primary.light};
  --md-primary-fg-color--dark: ${V.palette.primary.dark};
  --md-primary-bg-color: ${V.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,E.$n)(V.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${V.shadows[1]};
  --md-shadow-z2: ${V.shadows[2]};
  --md-shadow-z3: ${V.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${V.palette.text.primary};
  --md-code-bg-color: ${V.palette.background.paper};
  --md-code-hl-color: ${(0,E.Fq)(V.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${V.palette.type==="dark"?V.palette.primary.light:V.palette.primary.dark};
  --md-code-hl-function-color: ${V.palette.type==="dark"?V.palette.secondary.light:V.palette.secondary.dark};
  --md-code-hl-string-color: ${V.palette.type==="dark"?V.palette.success.light:V.palette.success.dark};
  --md-code-hl-number-color: ${V.palette.type==="dark"?V.palette.error.light:V.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: var(--md-accent-fg-color);
  --md-typeset-table-color: ${V.palette.text.primary};
  --md-typeset-del-color: ${V.palette.type==="dark"?(0,E.Fq)(V.palette.error.dark,.5):(0,E.Fq)(V.palette.error.light,.5)};
  --md-typeset-ins-color: ${V.palette.type==="dark"?(0,E.Fq)(V.palette.success.dark,.5):(0,E.Fq)(V.palette.success.light,.5)};
  --md-typeset-mark-color: ${V.palette.type==="dark"?(0,E.Fq)(V.palette.warning.dark,.5):(0,E.Fq)(V.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,Oe=({theme:V})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${V.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const He="224px";var rt=({theme:V,sidebar:ve})=>`
/*==================  Layout  ==================*/

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${V.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${V.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${ve.isPinned?`calc(-12.1rem + ${He})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}
`;const Pt=["h1","h2","h3","h4","h5","h6"];var Ot=({theme:V})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Pt.reduce((ve,we)=>{var lt;const Mt=(lt=V.typography.htmlFontSize)!=null?lt:16,Ht=V.typography[we],{lineHeight:tn,fontFamily:on,fontWeight:xn,fontSize:Wn}=Ht,On=Gn=>{let Lt=1;return typeof Gn=="number"&&(Lt=Gn/Mt*.6),typeof Gn=="string"&&(Lt=Gn.replace("rem","")),`calc(${Lt} * var(--md-typeset-font-size))`};return ve.concat(`
    .md-typeset ${we} {
      color: var(--md-default-fg-color);
      line-height: ${tn};
      font-family: ${on};
      font-weight: ${xn};
      font-size: ${On(Wn)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${V.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,jt=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,pn=({theme:V})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${V.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${V.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${V.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${V.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${V.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const _n=[ye,Oe,rt,Ot,jt,pn],bn=()=>(0,y.Pf)(),$n=()=>{const V=bn(),ve=(0,S.Z)();return(0,r.useMemo)(()=>{const we={theme:ve,sidebar:V};return _n.reduce((lt,Mt)=>lt+Mt(we),"")},[ve,V])},Jn=()=>{const V=$n();return(0,r.useCallback)(ve=>(ve.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${V}</style>`),ve),[V])},Dn=(V,ve,we)=>{const lt=V==="src"&&ve.endsWith(".svg"),Mt=!ve.match(/^([a-z]*:)?\/\//i),Ht=ve.startsWith(we);return lt&&(Mt||Ht)},Un=({techdocsStorageApi:V,entityId:ve,path:we})=>async lt=>{const Mt=await V.getApiOrigin(),Ht=async(tn,on)=>{for(const xn of tn)if(xn.hasAttribute(on)){const Wn=xn.getAttribute(on);if(!Wn)return;const On=await V.getBaseUrl(Wn,ve,we);if(Dn(on,Wn,Mt))try{const Lt=await(await fetch(On,{credentials:"include"})).text();xn.setAttribute(on,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(Lt)))}`)}catch{xn.setAttribute("alt",`Error: ${Wn}`)}else xn.setAttribute(on,On)}};return await Promise.all([Ht(lt.querySelectorAll("img"),"src"),Ht(lt.querySelectorAll("script"),"src"),Ht(lt.querySelectorAll("source"),"src"),Ht(lt.querySelectorAll("link"),"href"),Ht(lt.querySelectorAll("a[download]"),"href")]),lt},hn=V=>ve=>{var we;const lt=ve.querySelector('[title="Edit this page"]');if(!lt||!lt.href)return ve;const Mt=new URL(lt.href),Ht=V.byUrl(Mt);if((Ht==null?void 0:Ht.type)!=="github"&&(Ht==null?void 0:Ht.type)!=="gitlab")return ve;const tn=((we=ve.querySelector("article>h1"))==null?void 0:we.childNodes[0].textContent)||"",on=encodeURIComponent(`Documentation Feedback: ${tn}`),xn=encodeURIComponent(`Page source:
${lt.href}

Feedback:`),Wn=(Ht==null?void 0:Ht.type)==="github"?(0,et.BT)(Mt.href,"blob"):Mt.href,On=ie()(Wn),Gn=`/${On.organization}/${On.name}`,Lt=lt.cloneNode();switch(Ht==null?void 0:Ht.type){case"gitlab":Lt.href=`${Mt.origin}${Gn}/issues/new?issue[title]=${on}&issue[description]=${xn}`;break;case"github":Lt.href=`${Mt.origin}${Gn}/issues/new?title=${on}&body=${xn}`;break;default:return ve}return mt.render(r.createElement(pt.Z),Lt),Lt.style.paddingLeft="5px",Lt.title="Leave feedback for this page",Lt.id="git-feedback-link",lt==null||lt.insertAdjacentElement("beforebegin",Lt),ve},Bn=()=>V=>{const ve=V.querySelector('.md-header label[for="__drawer"]'),we=V.querySelector("article");if(!ve||!we)return V;const lt=ve.cloneNode();return mt.render(r.createElement(o.Z),lt),lt.id="toggle-sidebar",lt.title="Toggle Sidebar",lt.classList.add("md-content__button"),lt.style.setProperty("padding","0 0 0 5px"),lt.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),we==null||we.prepend(lt),V},Pn=()=>V=>(((we,lt)=>{Array.from(we).filter(Mt=>Mt.hasAttribute(lt)).forEach(Mt=>{const Ht=Mt.getAttribute(lt);if(Ht){Ht.match(/^https?:\/\//i)&&Mt.setAttribute("target","_blank");try{const tn=yn(window.location.href);Mt.setAttribute(lt,new URL(Ht,tn).toString())}catch{Mt.replaceWith(Mt.textContent||Ht)}}})})(Array.from(V.getElementsByTagName("a")),"href"),V);function yn(V){const ve=new URL(V);return!ve.pathname.endsWith("/")&&!ve.pathname.endsWith(".html")&&(ve.pathname+="/"),ve.toString()}const Kn=({baseUrl:V,onClick:ve})=>we=>(Array.from(we.getElementsByTagName("a")).forEach(lt=>{lt.addEventListener("click",Mt=>{const tn=lt.getAttribute("href");tn&&tn.startsWith(V)&&!lt.hasAttribute("download")&&(Mt.preventDefault(),ve(Mt,tn))})}),we),sa=(0,K.Z)(V=>({tooltip:{fontSize:"inherit",color:V.palette.text.primary,margin:0,padding:V.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(pe.ZP),zn=()=>r.createElement(he.Z,null,r.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),jn=({text:V})=>{const[ve,we]=(0,r.useState)(!1),[,lt]=(0,xe.Z)(),Mt=(0,r.useCallback)(()=>{lt(V),we(!0)},[V,lt]),Ht=(0,r.useCallback)(()=>{we(!1)},[we]);return r.createElement(sa,{title:"Copied to clipboard",placement:"left",open:ve,onClose:Ht,leaveDelay:1e3},r.createElement(p.Z,{className:"md-clipboard md-icon",onClick:Mt},r.createElement(zn,null)))},ua=V=>ve=>{var we;const lt=ve.querySelectorAll("pre > code");for(const Mt of lt){const Ht=Mt.textContent||"",tn=document.createElement("div");(we=Mt==null?void 0:Mt.parentElement)==null||we.prepend(tn),mt.render(r.createElement(Fe.Z,{theme:V},r.createElement(jn,{text:Ht})),tn)}return ve},_a=()=>V=>{var ve;return(ve=V.querySelector(".md-header"))==null||ve.remove(),V},Ga=()=>V=>{var ve,we;return(ve=V.querySelector(".md-footer .md-copyright"))==null||ve.remove(),(we=V.querySelector(".md-footer-copyright"))==null||we.remove(),V},Ha=({onLoading:V,onLoaded:ve})=>we=>(V(),we.addEventListener(C.Ox,function lt(){ve(),we.removeEventListener(C.Ox,lt)}),we),ur=()=>V=>(V.addEventListener(C.Ox,function ve(){var we;if(window.location.hash){const lt=window.location.hash.slice(1);(we=V==null?void 0:V.querySelector(`[id="${lt}"]`))==null||we.scrollIntoView()}V.removeEventListener(C.Ox,ve)}),V),er=()=>V=>(setTimeout(()=>{const ve=V==null?void 0:V.querySelectorAll("li.md-nav__item--active");ve.length!==0&&(ve.forEach(lt=>{const Mt=lt==null?void 0:lt.querySelector("input");Mt!=null&&Mt.checked||Mt==null||Mt.click()}),ve[ve.length-1].scrollIntoView())},200),V),Qa=async(V,ve)=>{let we;if(typeof V=="string")we=new DOMParser().parseFromString(V,"text/html").documentElement;else if(V instanceof Element)we=V;else throw new Error("dom is not a recognized type");for(const lt of ve)we=await lt(we);return we},pr="screen and (max-width: 76.1875em)",Ja=V=>{const ve=(0,l.s0)(),we=(0,S.Z)(),lt=(0,ct.Z)(pr),Mt=ue(),Ht=Jn(),tn=(0,n.z$)(),on=(0,n.h_)(C.Dl),xn=(0,n.h_)(W.q3),{state:Wn,path:On,content:Gn}=ne(),[Lt,ia]=(0,r.useState)(null),va=(0,C.ux)(Lt),Aa=(0,r.useCallback)(()=>{if(!Lt)return;Lt.querySelectorAll(".md-sidebar").forEach(ba=>{var Ma,tr,rr;if(lt)ba.style.top="0px";else{const or=document==null?void 0:document.querySelector(".techdocs-reader-page"),sr=(Ma=or==null?void 0:or.getBoundingClientRect().top)!=null?Ma:0;let Y=(tr=Lt.getBoundingClientRect().top)!=null?tr:0;const le=Lt.querySelector(".md-container > .md-tabs"),De=(rr=le==null?void 0:le.getBoundingClientRect().height)!=null?rr:0;Y<sr&&(Y=sr),ba.style.top=`${Math.max(Y,0)+De}px`}ba.style.setProperty("opacity","1")})},[Lt,lt]);(0,r.useEffect)(()=>(window.addEventListener("resize",Aa),window.addEventListener("scroll",Aa,!0),()=>{window.removeEventListener("resize",Aa),window.removeEventListener("scroll",Aa,!0)}),[Lt,Aa]);const Sa=(0,r.useCallback)(()=>{if(!Lt)return;const Oa=Lt.querySelector(".md-footer");Oa&&(Oa.style.width=`${Lt.getBoundingClientRect().width}px`)},[Lt]);(0,r.useEffect)(()=>(window.addEventListener("resize",Sa),()=>{window.removeEventListener("resize",Sa)}),[Lt,Sa]),(0,r.useEffect)(()=>{va||(Sa(),Aa())},[Wn,va,Sa,Aa]);const da=(0,r.useCallback)((Oa,ba)=>Qa(Oa,[Mt,Un({techdocsStorageApi:on,entityId:V,path:ba}),Pn(),Bn(),_a(),Ga(),hn(xn),Ht]),[V,xn,on,Mt,Ht]),Ba=(0,r.useCallback)(async Oa=>Qa(Oa,[ur(),er(),ua(we),Kn({baseUrl:window.location.origin,onClick:(ba,Ma)=>{var tr,rr;const or=ba.ctrlKey||ba.metaKey,sr=new URL(Ma),Y=`${sr.pathname}${sr.search}${sr.hash}`,le=((tr=ba.target)==null?void 0:tr.innerText)||Ma,De=Ma.replace(window.location.origin,"");tn.captureEvent("click",le,{attributes:{to:De}}),sr.hash?or?window.open(Y,"_blank"):(ve(Y),(rr=Oa==null?void 0:Oa.querySelector(`[id="${sr.hash.slice(1)}"]`))==null||rr.scrollIntoView()):or?window.open(Y,"_blank"):ve(Y)}}),Ha({onLoading:()=>{},onLoaded:()=>{var ba;(ba=Oa.querySelector(".md-nav__title"))==null||ba.removeAttribute("for")}}),Ha({onLoading:()=>{Array.from(Oa.querySelectorAll(".md-sidebar")).forEach(Ma=>{Ma.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[we,ve,tn]);return(0,r.useEffect)(()=>{if(!Gn)return()=>{};let Oa=!0;return da(Gn,On).then(async ba=>{if(!(ba!=null&&ba.innerHTML)||!Oa)return;window.scroll({top:0});const Ma=await Ba(ba);ia(Ma)}),()=>{Oa=!1}},[Gn,On,da,Ba]),Lt},L=()=>{const V=(0,C.$L)(),{shadowRoot:ve}=(0,C.x1)(),we=ve==null?void 0:ve.querySelector('[data-md-component="content"]'),lt=ve==null?void 0:ve.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Mt=lt==null?void 0:lt.querySelector('[data-techdocs-addons-location="primary sidebar"]');Mt||(Mt=document.createElement("div"),Mt.setAttribute("data-techdocs-addons-location","primary sidebar"),lt==null||lt.prepend(Mt));const Ht=ve==null?void 0:ve.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let tn=Ht==null?void 0:Ht.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return tn||(tn=document.createElement("div"),tn.setAttribute("data-techdocs-addons-location","secondary sidebar"),Ht==null||Ht.prepend(tn)),r.createElement(r.Fragment,null,r.createElement(Ut.Z,{container:Mt},V.renderComponentsByLocation(C.oZ.PrimarySidebar)),r.createElement(Ut.Z,{container:we},V.renderComponentsByLocation(C.oZ.Content)),r.createElement(Ut.Z,{container:tn},V.renderComponentsByLocation(C.oZ.SecondarySidebar)))},Z=(0,f.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"}}}),q=Ae(V=>{var ve;const{withSearch:we=!0,onReady:lt}=V,Mt=Z(),{entityMetadata:{value:Ht,loading:tn},entityRef:on,setShadowRoot:xn}=(0,C.x1)(),Wn=Ja(on),On=(0,r.useCallback)(Gn=>{xn(Gn),lt instanceof Function&&lt()},[xn,lt]);return tn===!1&&!Ht?r.createElement(y.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):Wn?r.createElement(y.VY,null,r.createElement(A.Z,{container:!0},r.createElement(A.Z,{xs:12,item:!0},r.createElement(gn,null)),we&&r.createElement(A.Z,{className:Mt.search,xs:"auto",item:!0},r.createElement(Be,{entityId:on,entityTitle:(ve=Ht==null?void 0:Ht.metadata)==null?void 0:ve.title})),r.createElement(A.Z,{xs:12,item:!0},r.createElement(C.VA,{element:Wn,onAppend:On},r.createElement(L,null))))):r.createElement(y.VY,null,r.createElement(A.Z,{container:!0},r.createElement(A.Z,{xs:12,item:!0},r.createElement(gn,null))))}),_e=null,U=(0,n.NT)({id:"techdocs:index-page"}),se=(0,n.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Ce=(0,n.NT)({id:"techdocs:catalog-reader-view"}),Le=r.createElement(H.Z,{animation:"wave",variant:"text",height:40}),wt=V=>{const{palette:{common:{white:ve}}}=(0,S.Z)(),{children:we}=V,lt=(0,C.$L)(),Mt=(0,n.h_)(n.Ds),{title:Ht,setTitle:tn,subtitle:on,setSubtitle:xn,entityRef:Wn,metadata:{value:On,loading:Gn},entityMetadata:{value:Lt,loading:ia}}=(0,C.x1)();(0,r.useEffect)(()=>{On&&(tn(On.site_name),xn(()=>{let{site_description:or}=On;return(!or||or==="None")&&(or=""),or}))},[On,tn,xn]);const va=Mt.getOptional("app.title")||"Backstage",Aa=[Ht,on,va].filter(Boolean).join(" | "),{locationMetadata:Sa,spec:da}=Lt||{},Ba=da==null?void 0:da.lifecycle,Oa=Lt?(0,vt.hF)(Lt,Vt.S4):[],ba=(0,n.tg)(U)(),Ma=r.createElement(r.Fragment,null,r.createElement(y.i9,{label:(0,de.capitalize)((Lt==null?void 0:Lt.kind)||"entity"),value:r.createElement(vt.dx,{color:"inherit",entityRef:Wn,title:Lt==null?void 0:Lt.metadata.title,defaultKind:"Component"})}),Oa.length>0&&r.createElement(y.i9,{label:"Owner",value:r.createElement(vt.rI,{color:"inherit",entityRefs:Oa,defaultKind:"group"})}),Ba?r.createElement(y.i9,{label:"Lifecycle",value:Ba}):null,Sa&&Sa.type!=="dir"&&Sa.type!=="file"?r.createElement(y.i9,{label:"",value:r.createElement(A.Z,{container:!0,direction:"column",alignItems:"center",style:{color:ve}},r.createElement(A.Z,{style:{padding:0},item:!0},r.createElement(Rt.Z,{style:{marginTop:"-25px"}})),r.createElement(A.Z,{style:{padding:0},item:!0},"Source")),url:Sa.target}):null);return!ia&&Lt===void 0||!Gn&&On===void 0?null:r.createElement(y.h4,{type:"Documentation",typeLink:ba,title:Ht||Le,subtitle:on===""?void 0:on||Le},r.createElement(be.Z,{titleTemplate:"%s"},r.createElement("title",null,Aa)),Ma,we,lt.renderComponentsByLocation(C.oZ.Header))},It=(0,f.Z)(V=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:V.spacing(3,3,0)}})),kt=V=>{const ve=It(),[we,lt]=(0,r.useState)(null),Mt=(0,r.useCallback)(Gn=>{lt(Gn.currentTarget)},[]),Ht=(0,r.useCallback)(()=>{lt(null)},[]),{entityMetadata:{value:tn,loading:on}}=(0,C.x1)(),xn=(0,C.$L)(),Wn=xn.renderComponentsByLocation(C.oZ.Subheader),On=xn.renderComponentsByLocation(C.oZ.Settings);return!Wn&&!On||on===!1&&!tn?null:r.createElement(dt.Z,{classes:ve,...V.toolbarProps},r.createElement(Wt.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},Wn,On?r.createElement(r.Fragment,null,r.createElement(pe.ZP,{title:"Settings"},r.createElement(N.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Mt},r.createElement(xt.Z,null))),r.createElement(Ct.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:we,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(we),onClose:Ht,keepMounted:!0},On)):null))},En=V=>{const{withSearch:ve,withHeader:we=!0}=V;return r.createElement(y.T3,{themeId:"documentation"},we&&r.createElement(wt,null),r.createElement(kt,null),r.createElement(q,{withSearch:ve}))},Rn=V=>{const{kind:ve,name:we,namespace:lt}=(0,n.Oi)(se),{children:Mt,entityRef:Ht={kind:ve,name:we,namespace:lt}}=V,tn=(0,l.pC)();if(!Mt){const Wn=(tn?r.Children.toArray(tn.props.children):[]).flatMap(On=>{var Gn,Lt;return(Lt=(Gn=On==null?void 0:On.props)==null?void 0:Gn.children)!=null?Lt:[]}).find(On=>!(0,n.IY)(On,C.Zz)&&!(0,n.IY)(On,C.jM));return r.createElement(C.ZS,{entityRef:Ht},Wn||r.createElement(En,null))}return r.createElement(C.ZS,{entityRef:Ht},({metadata:on,entityMetadata:xn,onReady:Wn})=>r.createElement("div",{className:"techdocs-reader-page"},r.createElement(y.T3,{themeId:"documentation"},Mt instanceof Function?Mt({entityRef:Ht,techdocsMetadataValue:on.value,entityMetadataValue:xn.value,onReady:Wn}):Mt)))};function cn(V,ve){return ve.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?V:V.toLocaleLowerCase("en-US")}const na=V=>{const{entities:ve}=V,we=(0,n.tg)(se),lt=(0,n.h_)(n.Ds);return ve?r.createElement(y.Oh,{"data-testid":"docs-explore"},ve!=null&&ve.length?ve.map((Mt,Ht)=>{var tn,on;return r.createElement(G.Z,{key:Ht},r.createElement(fn.Z,null,r.createElement(y.hu,{title:(tn=Mt.metadata.title)!=null?tn:Mt.metadata.name})),r.createElement(Et.Z,null,Mt.metadata.description),r.createElement(je.Z,null,r.createElement(y.Qj,{to:we({namespace:cn((on=Mt.metadata.namespace)!=null?on:"default",lt),kind:cn(Mt.kind,lt),name:cn(Mt.metadata.name,lt)}),color:"primary","data-testid":"read_docs"},"Read Docs")))}):null):null},kn={title:"All Documentation",filterPredicate:()=>!0},aa=V=>{const{entities:ve,group:we}=V,{loading:lt,isOwnedEntity:Mt}=useEntityOwnership(),Ht=ve.filter(on=>we.filterPredicate==="ownedByUser"?lt?!1:Mt(on):typeof we.filterPredicate=="function"&&we.filterPredicate(on)),tn=(()=>typeof we.title=="string"?React.createElement(ContentHeader,{title:we.title}):we.title)();return Ht.length===0?null:React.createElement(Content,null,tn,React.createElement(na,{entities:Ht}))},ha=V=>{const{loading:ve,error:we,entities:lt}=useEntityList();return we?React.createElement(WarningPanel,{severity:"error",title:"Could not load available documentation."},React.createElement(CodeSnippet,{language:"text",text:we.toString()})):ve?React.createElement(Progress,null):lt.length===0?React.createElement("div",{"data-testid":"doc-not-found"},React.createElement(Typography$1,{variant:"body2"},"No documentation found that match your filter. Learn more about"," ",React.createElement(Link,{to:"https://backstage.io/docs/features/techdocs/creating-and-publishing"},"publishing documentation"),".")):(lt.sort((Mt,Ht)=>{var tn,on;return((tn=Mt.metadata.title)!=null?tn:Mt.metadata.name).localeCompare((on=Ht.metadata.title)!=null?on:Ht.metadata.name)}),React.createElement(Content,null,(V.groups||[kn]).map((Mt,Ht)=>React.createElement(aa,{entities:lt,group:Mt,key:`${Mt.title}-${Ht}`}))))},oa=(0,mn.Z)({root:{color:"#f3ba37"}})(dn.Z),Qn={createCopyDocsUrlAction(V){return ve=>({icon:()=>r.createElement(ln.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>V(`${window.location.origin}${ve.resolved.docsUrl}`)})},createStarEntityAction(V,ve){return we=>{const lt=we.entity,Mt=V(lt);return{cellStyle:{paddingLeft:"1em"},icon:()=>Mt?r.createElement(oa,null):r.createElement(Ln.Z,null),tooltip:Mt?"Remove from favorites":"Add to favorites",onClick:()=>ve(lt)}}}};function $a(V){return V.metadata.title||V.metadata.name}const Pa={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:V=>r.createElement(y.uw,{value:r.createElement(y.rU,{to:V.resolved.docsUrl},$a(V.entity)),subvalue:V.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:V})=>r.createElement(vt.rI,{entityRefs:V.ownedByRelations,defaultKind:"group"})}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},ya=V=>{const{entities:ve,title:we,loading:lt,columns:Mt,actions:Ht,options:tn}=V,[,on]=(0,xe.Z)(),xn=(0,n.tg)(se),Wn=(0,n.h_)(n.Ds);if(!ve)return null;const On=ve.map(ia=>{var va;const Aa=(0,vt.hF)(ia,Vt.S4);return{entity:ia,resolved:{docsUrl:xn({namespace:cn((va=ia.metadata.namespace)!=null?va:"default",Wn),kind:cn(ia.kind,Wn),name:cn(ia.metadata.name,Wn)}),ownedByRelations:Aa,ownedByRelationsTitle:Aa.map(Sa=>(0,vt.$3)(Sa,{defaultKind:"group"})).join(", ")}}}),Gn=[Pa.createNameColumn(),Pa.createOwnerColumn(),Pa.createTypeColumn()],Lt=[Qn.createCopyDocsUrlAction(on)];return r.createElement(r.Fragment,null,lt||On&&On.length>0?r.createElement(y.iA,{isLoading:lt,options:{paging:!0,pageSize:20,search:!0,actionsColumnIndex:-1,...tn},data:On,columns:Mt||Gn,actions:Ht||Lt,title:we?`${we} (${On.length})`:`All (${On.length})`}):r.createElement(y.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:r.createElement(y.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};ya.columns=Pa,ya.actions=Qn;const Ra=V=>{var ve,we;const{columns:lt,actions:Mt,options:Ht}=V,{loading:tn,error:on,entities:xn,filters:Wn}=(0,vt.wp)(),{isStarredEntity:On,toggleStarredEntity:Gn}=(0,vt.CR)(),[,Lt]=(0,xe.Z)(),ia=(0,de.capitalize)((we=(ve=Wn.user)==null?void 0:ve.value)!=null?we:"all"),va=[Qn.createCopyDocsUrlAction(Lt),Qn.createStarEntityAction(On,Gn)];return on?r.createElement(y.GB,{severity:"error",title:"Could not load available documentation."},r.createElement(y.Oi,{language:"text",text:on.toString()})):r.createElement(ya,{title:ia,entities:xn,loading:tn,actions:Mt||va,columns:lt,options:Ht})};Ra.columns=Pa,Ra.actions=Qn;const j=V=>{var ve;const{children:we}=V,Mt=`Documentation available in ${(ve=(0,n.h_)(n.Ds).getOptionalString("organization.name"))!=null?ve:"Backstage"}`;return r.createElement(y.g9,{title:"Documentation",subtitle:Mt,themeId:"documentation"},we)};class i{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":vt.n3}}}const g=()=>{const{updateFilters:V}=(0,vt.wp)();return(0,r.useEffect)(()=>{V({techdocs:new i})},[V]),null},I=V=>{const{initialFilter:ve="owned",columns:we,actions:lt}=V;return r.createElement(j,null,r.createElement(y.VY,null,r.createElement(y.yW,{title:""},r.createElement(y.qt,null,"Discover documentation in your ecosystem.")),r.createElement(vt.UO,null,r.createElement(vt._i,null,r.createElement(vt._i.Filters,null,r.createElement(g,null),r.createElement(vt.EW,{initialFilter:ve}),r.createElement(vt.dq,null),r.createElement(vt.xE,null)),r.createElement(vt._i.Content,null,r.createElement(Ra,{actions:lt,columns:we}))))))},w=(0,n.rx)({id:"techdocs",apis:[(0,n.ni)({api:C.Dl,deps:{configApi:n.Ds,discoveryApi:n.NW,identityApi:n.$4,fetchApi:n.gP},factory:({configApi:V,discoveryApi:ve,identityApi:we,fetchApi:lt})=>new Je({configApi:V,discoveryApi:ve,identityApi:we,fetchApi:lt})}),(0,n.ni)({api:C.gT,deps:{configApi:n.Ds,discoveryApi:n.NW,fetchApi:n.gP},factory:({configApi:V,discoveryApi:ve,fetchApi:we})=>new Zt({configApi:V,discoveryApi:ve,fetchApi:we})})],routes:{root:U,docRoot:se,entityContent:Ce}}),$=w.provide((0,n.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return xa}).then(V=>V.Router),mountPoint:U})),Re=w.provide((0,n.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return xa}).then(V=>V.EmbeddedDocsRouter),mountPoint:Ce})),ze=w.provide((0,n.P4)({name:"TechDocsCustomHome",component:()=>e.e(1116).then(e.bind(e,71116)).then(V=>V.TechDocsCustomHome),mountPoint:U})),ht=w.provide((0,n.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(function(){return Cn}).then(V=>V.TechDocsIndexPage),mountPoint:U})),Yt=w.provide((0,n.P4)({name:"TechDocsReaderPage",component:()=>e.e(6570).then(e.bind(e,6570)).then(V=>V.TechDocsReaderPage),mountPoint:se})),un=w.provide((0,P.E5)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(function(){return at}).then(V=>V.TechDocsSearchResultListItem),predicate:V=>V.type==="techdocs"})),Tn=({entity:V})=>{const ve=(0,Vt.iB)(V);return r.createElement(Yt,{entityRef:ve},r.createElement(kt,null),r.createElement(q,{withSearch:!1}))},Mn=V=>(0,l.pC)()||r.createElement(I,{...V});var Cn=Object.freeze({__proto__:null,TechDocsIndexPage:Mn});const Yn="backstage.io/techdocs-ref";var xa=Object.freeze({__proto__:null,isTechDocsAvailable:V=>{var ve,we;return Boolean((we=(ve=V==null?void 0:V.metadata)==null?void 0:ve.annotations)==null?void 0:we[Yn])},Router:()=>r.createElement(l.Z5,null,r.createElement(l.AW,{path:"/",element:r.createElement(Mn,null)}),r.createElement(l.AW,{path:"/:namespace/:kind/:name/*",element:r.createElement(Rn,null)})),EmbeddedDocsRouter:V=>{var ve;const{children:we}=V,{entity:lt}=(0,vt.X2)(),Mt=(0,l.V$)([{path:"/*",element:r.createElement(Tn,{entity:lt}),children:[{path:"*",element:we}]}]);return((ve=lt.metadata.annotations)==null?void 0:ve[Yn])?Mt:r.createElement(y.sk,{annotation:Yn})}})},70557:function(Kt,d,e){e.d(d,{$d:function(){return n.E},I6:function(){return n.g},Jl:function(){return n.e},bf:function(){return n.h},s4:function(){return n.t}});var n=e(51443),c=e(30705),m=e(32272),u=e(76372),r=e.n(u),l=e(2784),C=e(66565),_=e(49558),t=e(92573),y=e(49462),f=e(35368),F=e.n(f),B=e(1854),k=e(28316),X=e(82717),A=e.n(X),D=e(18671),N=e(73495),p=e(34520),h=e(76635),b=e.n(h)},43229:function(Kt,d,e){e.d(d,{F0:function(){return Ve},H2:function(){return W},Zr:function(){return ge},kG:function(){return xt}});var n=e(53907),c=e(32272),m=e(82394),u=e.n(m),r=e(30705),l=e(2784),C=e(47603),_=e(49558),t=e(73557),y=e(90436),f=e(77277),F=e(79692),B=e(43434),k=e(38402),X=e(86136),A=e(49378),D=e(80030),N=e(60905),p=e(9520),h=e(11776),b=e(82938),E=e(86619),S=e(61837),K=e(48348),pe=e(12231),he=e(11640),Fe=e(33375),ct=e(64279),Ut=e(71554),dt=e(43054),Wt=e(72164),Ct=e(59324),G=e(13737),fn=e(31168),Et=e(73495);const je={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},P=new Map;class Ue{constructor(ae,Be,tt,ft,bt,rn){this.namespace=ae,this.fetchApi=Be,this.discoveryApi=tt,this.errorApi=ft,this.identityApi=bt,this.fallback=rn,this.subscribers=new Set,this.observables=new Map}static create(ae){var Be;return new Ue((Be=ae.namespace)!=null?Be:"default",ae.fetchApi,ae.discoveryApi,ae.errorApi,ae.identityApi,WebStorage.create({namespace:ae.namespace,errorApi:ae.errorApi}))}forBucket(ae){const Be=`${this.namespace}.${ae}`;return P.has(Be)||P.set(Be,new Ue(Be,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),P.get(Be)}async remove(ae){const Be=await this.getFetchUrl(ae),tt=await this.fetchApi.fetch(Be,{method:"DELETE"});if(!tt.ok&&tt.status!==404)throw await ResponseError.fromResponse(tt);this.notifyChanges({key:ae,presence:"absent"})}async set(ae,Be){if(!await this.isSignedIn()){await this.fallback.set(ae,Be),this.notifyChanges({key:ae,presence:"present",value:Be});return}const tt=await this.getFetchUrl(ae),ft=await this.fetchApi.fetch(tt,{method:"PUT",headers:je,body:JSON.stringify({value:Be})});if(!ft.ok)throw await ResponseError.fromResponse(ft);const{value:bt}=await ft.json();this.notifyChanges({key:ae,value:bt,presence:"present"})}observe$(ae){return this.observables.has(ae)||this.observables.set(ae,new ObservableImpl(Be=>(this.subscribers.add(Be),Promise.resolve().then(()=>this.get(ae)).then(tt=>Be.next(tt)).catch(tt=>this.errorApi.post(tt)),()=>{this.subscribers.delete(Be)})).filter(({key:Be})=>Be===ae)),this.observables.get(ae)}snapshot(ae){return{key:ae,presence:"unknown"}}async get(ae){if(!await this.isSignedIn())return this.fallback.snapshot(ae);const Be=await this.getFetchUrl(ae),tt=await this.fetchApi.fetch(Be);if(tt.status===404)return{key:ae,presence:"absent"};if(!tt.ok)throw await ResponseError.fromResponse(tt);try{const{value:ft}=await tt.json(),bt=JSON.parse(JSON.stringify(ft),(rn,Gt)=>(typeof Gt=="object"&&Gt!==null&&Object.freeze(Gt),Gt));return{key:ae,presence:"present",value:bt}}catch{return{key:ae,presence:"absent"}}}async getFetchUrl(ae){const Be=await this.discoveryApi.getBaseUrl("user-settings"),tt=encodeURIComponent(this.namespace),ft=encodeURIComponent(ae);return`${Be}/buckets/${tt}/keys/${ft}`}async notifyChanges(ae){for(const Be of this.subscribers)try{Be.next(ae)}catch{}}async isSignedIn(){try{const ae=await this.identityApi.getCredentials();return!!(ae!=null&&ae.token)}catch{return!1}}}const H=(0,r.NT)({id:"user-settings"}),W=(0,r.rx)({id:"user-settings",routes:{settingsPage:H}}).provide((0,r.P4)({name:"UserSettingsPage",component:()=>e.e(4674).then(e.bind(e,34674)).then(te=>te.SettingsPage),mountPoint:H})),ge=te=>{const ae=(0,r.tg)(H),Be=te.icon?te.icon:C.Z;return l.createElement(_.R6,{text:"Settings",to:ae(),icon:Be})},Me=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,et=()=>l.createElement(_.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:l.createElement(l.Fragment,null,l.createElement(y.Z,{variant:"body1"},"Open ",l.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),l.createElement(_.Oi,{text:Me,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(f.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),pt=(0,F.Z)(te=>({avatar:{width:({size:ae})=>ae,height:({size:ae})=>ae,fontSize:({size:ae})=>ae*.7,border:`1px solid ${te.palette.textSubtle}`}})),mt=({size:te,picture:ae})=>{const{iconSize:Be}=_.po,tt=pt(te?{size:te}:{size:Be});return l.createElement(B.Z,{src:ae,className:tt.avatar})},Dt=te=>{const{title:ae,description:Be,icon:tt,apiRef:ft}=te,bt=(0,r.h_)(ft),rn=(0,r.h_)(r.VE),[Gt,gn]=(0,l.useState)(!1),Ke={},[nt,oe]=(0,l.useState)(Ke);return(0,l.useEffect)(()=>{let Ee=!1;const ke=bt.sessionState$().subscribe(ot=>{Ee||bt.getProfile({optional:!0}).then(Ye=>{Ee||(ot===r.sM.SignedIn&&gn(!0),Ye&&oe(Ye))})});return()=>{Ee=!0,ke.unsubscribe()}},[bt]),l.createElement(k.Z,null,l.createElement(X.Z,null,l.createElement(tt,null)),l.createElement(A.Z,{primary:ae,secondary:l.createElement(D.ZP,{placement:"top",arrow:!0,title:Be},l.createElement(N.Z,{container:!0,spacing:6},l.createElement(N.Z,{item:!0},l.createElement(mt,{size:48,picture:nt.picture})),l.createElement(N.Z,{item:!0,xs:12,sm:!0,container:!0},l.createElement(N.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(N.Z,{item:!0,xs:!0},l.createElement(y.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},nt.displayName),l.createElement(y.Z,{variant:"body2",color:"textSecondary"},nt.email),l.createElement(y.Z,{variant:"body2",color:"textSecondary"},Be)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),l.createElement(p.Z,null,l.createElement(D.ZP,{placement:"top",arrow:!0,title:Gt?`Sign out from ${ae}`:`Sign in to ${ae}`},l.createElement(f.Z,{variant:"outlined",color:"primary",onClick:()=>{(Gt?bt.signOut():bt.signIn()).catch(ke=>rn.post(ke))}},Gt?"Sign out":"Sign in"))))},ie=te=>{const{configuredProviders:ae}=te;return l.createElement(l.Fragment,null,ae.includes("google")&&l.createElement(Dt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:r.Kp,icon:he.Z}),ae.includes("microsoft")&&l.createElement(Dt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:r.p_,icon:he.Z}),ae.includes("github")&&l.createElement(Dt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:r.F4,icon:he.Z}),ae.includes("gitlab")&&l.createElement(Dt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:r.ux,icon:he.Z}),ae.includes("okta")&&l.createElement(Dt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:r.D,icon:he.Z}),ae.includes("bitbucket")&&l.createElement(Dt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:r.bq,icon:he.Z}),ae.includes("onelogin")&&l.createElement(Dt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:r.gW,icon:he.Z}),ae.includes("atlassian")&&l.createElement(Dt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:r.uB,icon:he.Z}),ae.includes("bitbucketServer")&&l.createElement(Dt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:r.Km,icon:he.Z}))},o=te=>{const{providerSettings:ae}=te,tt=(0,r.h_)(r.Ds).getOptionalConfig("auth.providers"),ft=(tt==null?void 0:tt.keys())||[],bt=ae!=null?ae:l.createElement(ie,{configuredProviders:ft});return!ae&&!(ft!=null&&ft.length)?l.createElement(et,null):l.createElement(_.rJ,{title:"Available Providers"},l.createElement(h.Z,{dense:!0},bt))},xe=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,be=()=>l.createElement(_.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:l.createElement(l.Fragment,null,l.createElement(y.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),l.createElement(_.Oi,{text:xe,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),l.createElement(f.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),Rt=te=>te.description?te.description:te.pluginId?`Registered in ${te.pluginId} plugin`:"Registered in the application",vt=({flag:te,enabled:ae,toggleHandler:Be})=>l.createElement(k.Z,{divider:!0,button:!0,onClick:()=>Be(te.name)},l.createElement(X.Z,null,l.createElement(D.ZP,{placement:"top",arrow:!0,title:ae?"Disable":"Enable"},l.createElement(b.Z,{color:"primary",checked:ae,name:te.name}))),l.createElement(A.Z,{primary:te.name,secondary:Rt(te)})),Vt=()=>{const te=(0,r.h_)(r.W0),ae=te.getRegisteredFlags(),Be=Object.fromEntries(ae.map(({name:Ee})=>[Ee,te.isActive(Ee)])),[tt,ft]=(0,l.useState)(Be),[bt,rn]=(0,l.useState)(""),Gt=l.useRef(),gn=(0,l.useCallback)(Ee=>{const ke=te.isActive(Ee)?r.CL.None:r.CL.Active;te.save({states:{[Ee]:ke},merge:!0}),ft(ot=>({...ot,[Ee]:ke===r.CL.Active}))},[te]);if(!ae.length)return l.createElement(be,null);const Ke=()=>{var Ee;rn(""),(Ee=Gt==null?void 0:Gt.current)==null||Ee.focus()},nt=ae.filter(Ee=>Ee.name.toLocaleLowerCase("en-US").includes(bt.toLocaleLowerCase("en-US"))),oe=()=>l.createElement(N.Z,{container:!0,style:{justifyContent:"space-between"}},l.createElement(N.Z,{item:!0,xs:6,md:8},l.createElement(y.Z,{variant:"h5"},"Feature Flags"),l.createElement(y.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),ae.length>=10&&l.createElement(N.Z,{item:!0,xs:6,md:4},l.createElement(E.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:Ee=>Ee&&Ee.focus(),InputProps:{...bt.length&&{endAdornment:l.createElement(S.Z,{"aria-label":"Clear filter",onClick:Ke,edge:"end"},l.createElement(Fe.Z,null))}},onChange:Ee=>rn(Ee.target.value),value:bt})));return l.createElement(_.rJ,{title:l.createElement(oe,null)},l.createElement(h.Z,{dense:!0},nt.map(Ee=>{const ke=Boolean(tt[Ee.name]);return l.createElement(vt,{key:Ee.name,flag:Ee,enabled:ke,toggleHandler:gn})})))},de=()=>{var te;const ae=(0,r.h_)(r.$4),Be=(0,r.h_)(r.$v),{value:tt,loading:ft,error:bt}=(0,ct.default)(async()=>({profile:await ae.getProfileInfo(),identity:await ae.getBackstageIdentity()}),[]);return(0,l.useEffect)(()=>{bt&&Be.post({message:`Failed to load user identity: ${bt}`,severity:"error"})},[bt,Be]),ft||bt?{profile:{},displayName:"",loading:ft}:{profile:tt.profile,backstageIdentity:tt.identity,displayName:(te=tt.profile.displayName)!=null?te:tt.identity.userEntityRef,loading:ft}},Tt=(0,F.Z)(te=>({avatar:{width:({size:ae})=>ae,height:({size:ae})=>ae,fontSize:({size:ae})=>ae*.7,border:`1px solid ${te.palette.textSubtle}`}})),xt=te=>{const{size:ae}=te,{iconSize:Be}=_.po,tt=Tt(ae?{size:ae}:{size:Be}),{profile:ft}=de();return l.createElement(B.Z,{src:ft.picture,className:tt.avatar,alt:"Profile picture"})},ln=()=>{const te=(0,r.h_)(r.VE),ae=(0,r.h_)(r.$4),[Be,tt]=l.useState(!1),[ft,bt]=l.useState(void 0),rn=gn=>{bt(gn.currentTarget),tt(!0)},Gt=()=>{bt(void 0),tt(!1)};return l.createElement(l.Fragment,null,l.createElement(S.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:rn},l.createElement(dt.Z,null)),l.createElement(K.Z,{anchorEl:ft,open:Be,onClose:Gt},l.createElement(pe.Z,{"data-testid":"sign-out",onClick:()=>ae.signOut().catch(gn=>te.post(gn))},l.createElement(X.Z,null,l.createElement(Ut.Z,null)),"Sign Out")))},mn=()=>{const{profile:te,displayName:ae}=de();return l.createElement(_.rJ,{title:"Profile",variant:"gridItem"},l.createElement(N.Z,{container:!0,spacing:6},l.createElement(N.Z,{item:!0},l.createElement(xt,{size:96})),l.createElement(N.Z,{item:!0,xs:12,sm:!0,container:!0},l.createElement(N.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},l.createElement(N.Z,{item:!0,xs:!0},l.createElement(y.Z,{variant:"subtitle1",gutterBottom:!0},ae),l.createElement(y.Z,{variant:"body2",color:"textSecondary"},te.email))),l.createElement(N.Z,{item:!0},l.createElement(ln,null)))))},dn=()=>{const{isPinned:te,toggleSidebarPinState:ae}=(0,_.Pf)();return l.createElement(k.Z,null,l.createElement(A.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),l.createElement(p.Z,null,l.createElement(D.ZP,{placement:"top",arrow:!0,title:`${te?"Unpin":"Pin"} Sidebar`},l.createElement(b.Z,{color:"primary",checked:te,onChange:()=>ae(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},Ln=({id:te,activeId:ae,icon:Be})=>Be?(0,l.cloneElement)(Be,{color:ae===te?"primary":void 0}):l.createElement(Ct.Z,{color:ae===te?"primary":void 0}),it=(0,F.Z)(te=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[te.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[te.breakpoints.down("xs")]:{paddingLeft:0}}})),$e=({children:te,title:ae,value:Be,...tt})=>l.createElement(D.ZP,{placement:"top",arrow:!0,title:ae},l.createElement(G.Z,{value:Be,...tt},te)),Zt=()=>{const te=it(),ae=(0,r.h_)(r.hg),Be=(0,Wt.Z)(ae.activeThemeId$(),ae.getActiveThemeId()),tt=ae.getInstalledThemes(),ft=(bt,rn)=>{tt.some(Gt=>Gt.id===rn)?ae.setActiveThemeId(rn):ae.setActiveThemeId(void 0)};return l.createElement(k.Z,{className:te.list,classes:{container:te.container}},l.createElement(A.Z,{className:te.listItemText,primary:"Theme",secondary:"Change the theme mode"}),l.createElement(p.Z,{className:te.listItemSecondaryAction},l.createElement(fn.Z,{exclusive:!0,size:"small",value:Be!=null?Be:"auto",onChange:ft},tt.map(bt=>{var rn;const Gt=(rn=tt.find(gn=>gn.id===bt.id))==null?void 0:rn.icon;return l.createElement($e,{key:bt.id,title:`Select ${bt.title}`,value:bt.id},l.createElement(l.Fragment,null,bt.title,"\xA0",l.createElement(Ln,{id:bt.id,icon:Gt,activeId:Be})))}),l.createElement(D.ZP,{placement:"top",arrow:!0,title:"Select auto theme"},l.createElement(G.Z,{value:"auto",selected:Be===void 0},"Auto\xA0",l.createElement(Ct.Z,{color:Be===void 0?"primary":void 0}))))))},Je=()=>{const{isMobile:te}=(0,_.Pf)();return l.createElement(_.rJ,{title:"Appearance",variant:"gridItem"},l.createElement(h.Z,{dense:!0},l.createElement(Zt,null),!te&&l.createElement(dn,null)))},Pe=()=>{const{backstageIdentity:te}=de();return te?l.createElement(N.Z,{container:!0,spacing:1},l.createElement(N.Z,{item:!0,xs:12},l.createElement(y.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",l.createElement(Et.rI,{entityRefs:[te.userEntityRef],getTitle:ae=>ae}))),l.createElement(N.Z,{item:!0,xs:12},l.createElement(y.Z,{variant:"subtitle1"},"Ownership Entities:"," ",l.createElement(Et.rI,{entityRefs:te.ownershipEntityRefs,getTitle:ae=>ae})))):l.createElement(y.Z,null,"No Backstage Identity")},T=()=>l.createElement(_.rJ,{title:"Backstage Identity"},l.createElement(Pe,null)),M=()=>l.createElement(N.Z,{container:!0,direction:"row",spacing:3},l.createElement(N.Z,{item:!0,xs:12,md:6},l.createElement(mn,null)),l.createElement(N.Z,{item:!0,xs:12,md:6},l.createElement(Je,null)),l.createElement(N.Z,{item:!0,xs:12,md:6},l.createElement(T,null))),J="plugin.user-settings.settingsLayout",ne="plugin.user-settings.settingsLayoutRoute",re=()=>null;(0,r.R5)(re,ne,!0),(0,r.R5)(re,"core.gatherMountPoints",!0);const Ae=te=>{const{title:ae,children:Be}=te,{isMobile:tt}=(0,_.Pf)(),ft=(0,r.vJ)(Be,bt=>bt.selectByComponentData({key:ne,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(rn=>rn.props));return l.createElement(_.T3,{themeId:"home"},!tt&&l.createElement(_.h4,{title:ae!=null?ae:"Settings"}),l.createElement(_.tn,{routes:ft}))};(0,r.R5)(Ae,J,!0),Ae.Route=re;const Ie=te=>{const{providerSettings:ae,tabs:Be}=te;return l.createElement(Ae,null,l.createElement(Ae.Route,{path:"general",title:"General"},l.createElement(M,null)),l.createElement(Ae.Route,{path:"auth-providers",title:"Authentication Providers"},l.createElement(o,{providerSettings:ae})),l.createElement(Ae.Route,{path:"feature-flags",title:"Feature Flags"},l.createElement(Vt,null)),Be)},Ve=te=>{const{providerSettings:ae}=te,Be=(0,t.pC)(),tt=(0,r.vJ)(Be,bt=>bt.selectByComponentData({key:J}).getElements()),ft=(0,r.vJ)(Be,bt=>bt.selectByComponentData({key:ne}).getElements());return l.createElement(l.Fragment,null,tt.length!==0&&tt||l.createElement(Ie,{tabs:ft,providerSettings:ae}))},at=ne,Se=te=>l.createElement(Ae.Route,{path:te.path,title:te.title},l.createElement(l.Fragment,null,"props.children"));(0,r.R5)(Se,at,"UserSettingsTab")},18473:function(Kt,d,e){e.d(d,{CT:function(){return C},EI:function(){return l},Vt:function(){return _},uW:function(){return r}});var n=e(2784);function c(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const m=c(),u=y=>`__@backstage/${y}__`;function r(y,f){const F=u(y);let B=m[F];return B||(B=f(),m[F]=B,B)}function l(y){Object.freeze(y);const f={atVersion(F){return y[F]}};return Object.defineProperty(f,"$map",{configurable:!0,enumerable:!0,get(){return y}}),f}function C(y){return r(y,()=>(0,n.createContext)(void 0))}function _(y){return(0,n.useContext)(C(y))}function t(y){return{set(f){globalThis[`__@backstage/${y}__`]=createContext(l(f))},reset(){delete globalThis[`__@backstage/${y}__`]}}}},85310:function(Kt){Kt.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},51020:function(Kt){Kt.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);})();

//# sourceMappingURL=module-backstage.a4795c34.js.map