"use strict";(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4026],{16190:function(w,B,t){t.d(B,{D:function(){return k},L:function(){return $}});var e=t(18868),u=t(49558),E=t(30705),s=t(73495),P=t(64279),n=t(2784),U=t(12053),L=t(26228),K=t(75951),Z=t.n(K),y=t(90436),x=t(34520);const k=[{component:e.E,name:"EntityPicker",schema:e.n},{component:e.o,name:"EntityNamePicker",validation:e.p,schema:e.q},{component:e.t,name:"EntityTagsPicker",schema:e.w},{component:e.R,name:"RepoUrlPicker",validation:e.x,schema:e.y},{component:e.O,name:"OwnerPicker",schema:e.z},{component:e.B,name:"OwnedEntityPicker",schema:e.C}],N=({createdAt:c})=>{const O=L.ou.fromISO(c),v=L.Xp.fromDateTimes(O,L.ou.local()).toDuration().valueOf();return n.createElement(y.Z,{paragraph:!0},Z()(v,{round:!0})," ago")},G=({entityRef:c})=>{var O,v,T;const D=(0,E.h_)(s.Ah),{value:p,loading:o,error:C}=(0,P.default)(()=>D.getEntityByRef(c||""),[D,c]);return c?o||C?null:n.createElement(s.dx,{entityRef:(0,x.of)(c),title:(T=(v=(O=p==null?void 0:p.spec)==null?void 0:O.profile)==null?void 0:v.displayName)!=null?T:p==null?void 0:p.metadata.name}):n.createElement(y.Z,{paragraph:!0},"Unknown")},j=({status:c})=>{switch(c){case"processing":return n.createElement(u.wA,null,c);case"completed":return n.createElement(u.Kq,null,c);case"error":default:return n.createElement(u.vK,null,c)}},d=({entityRef:c})=>{const O=(0,E.h_)(U.lc),{value:v,loading:T,error:D}=(0,P.default)(()=>O.getTemplateParameterSchema(c||""),[O,c]);return T||D||!c?null:n.createElement(s.dx,{entityRef:(0,x.of)(c),title:v==null?void 0:v.title})},V=c=>{var O;const{initiallySelectedFilter:v="owned"}=c,T=(0,E.h_)(U.lc),D=(0,E.tg)(e.d),[p,o]=(0,n.useState)(v),{value:C,loading:F,error:X}=(0,P.default)(()=>{var m;return T.listTasks?(m=T.listTasks)==null?void 0:m.call(T,{filterByOwnership:p}):(console.warn("listTasks is not implemented in the scaffolderApi, please make sure to implement this method."),Promise.resolve({tasks:[]}))},[T,p]);return F?n.createElement(u.Ex,null):X?n.createElement(n.Fragment,null,n.createElement(u.yu,{error:X}),n.createElement(u.ub,{missing:"info",title:"No information to display",description:"There is no Tasks or there was an issue communicating with backend."})):n.createElement(s._i,null,n.createElement(s._i.Filters,null,n.createElement(e.F,{filter:p,onSelectOwner:m=>o(m)})),n.createElement(s._i.Content,null,n.createElement(u.iA,{data:(O=C==null?void 0:C.tasks)!=null?O:[],title:"Tasks",columns:[{title:"Task ID",field:"id",render:m=>n.createElement(u.rU,{to:`${D()}/tasks/${m.id}`},m.id)},{title:"Template",render:m=>{var A;return n.createElement(d,{entityRef:(A=m.spec.templateInfo)==null?void 0:A.entityRef})}},{title:"Created",field:"createdAt",render:m=>n.createElement(N,{createdAt:m.createdAt})},{title:"Owner",field:"createdBy",render:m=>{var A,S;return n.createElement(G,{entityRef:(S=(A=m.spec)==null?void 0:A.user)==null?void 0:S.ref})}},{title:"Status",field:"status",render:m=>n.createElement(j,{status:m.status})}]})))},$=c=>n.createElement(u.T3,{themeId:"home"},n.createElement(u.h4,{pageTitleOverride:"Templates Tasks",title:n.createElement(n.Fragment,null,"List template tasks ",n.createElement(u.Fw,{shorthand:!0,alpha:!0})),subtitle:"All tasks that have been started"}),n.createElement(u.VY,null,n.createElement(V,{...c})))},24026:function(w,B,t){t.r(B),t.d(B,{Router:function(){return me}});var e=t(2784),u=t(39857),E=t(73557),s=t(49558),P=t(73495),n=t(82108),U=t.n(n),L=t(95544),K=t(90436),Z=t(5806),y=t(21324),x=t(86619),k=t(19996),N=t(25505),G=t(38016),j=t(88013),d=t(30705),V=t(77277),$=t(61837),c=t(41156),O=t(88188),v=t(75650),T=t(56563),D=t(34520),p=t(31011),o=t(18868),C=t(12053),F=t(16190),X=t(32272),m=t(19126),A=t.n(m),S=t(82394),De=t.n(S),Me=t(49462),fe=t(68111),q=t(72779),ve=t.n(q),Te=t(26228),ee=t(75951),pe=t.n(ee),Ce=t(77799),ge=t(72847),he=t(39362);const te=e.createElement(N.Z,{fontSize:"small"}),ne=e.createElement(k.Z,{fontSize:"small"}),ae=()=>{const a=(0,d.h_)(d.$v),{error:l,loading:r,availableTypes:i,selectedTypes:_,setSelectedTypes:M}=(0,P.Uh)();return r?e.createElement(s.Ex,null):l?(a.post({message:`Failed to load entity types with error: ${l}`,severity:"error"}),null):i?e.createElement(L.Z,{pb:1,pt:1},e.createElement(K.Z,{variant:"button"},"Categories"),e.createElement(j.ZP,{multiple:!0,"aria-label":"Categories",options:i,value:_,onChange:(f,g)=>M(g),renderOption:(f,{selected:g})=>e.createElement(Z.Z,{control:e.createElement(y.Z,{icon:te,checkedIcon:ne,checked:g}),label:U()(f)}),size:"small",popupIcon:e.createElement(G.Z,null),renderInput:f=>e.createElement(x.Z,{...f,variant:"outlined"})})):null},le=a=>{const{title:l,to:r}=a,{allowed:i}=(0,T.gI)({permission:v.x7}),_=(0,c.Z)(M=>M.breakpoints.down("xs"));return!r||!i?null:_?e.createElement($.Z,{component:u.rU,color:"primary",title:l,size:"small",to:r},e.createElement(O.Z,null)):e.createElement(V.Z,{component:u.rU,variant:"contained",color:"primary",to:r},l)},oe=a=>{const{loading:l,error:r,entities:i}=(0,P.wp)(),{groups:_,TemplateCardComponent:M}=a,f=(0,d.h_)(d.VE),g=(0,d.qD)(),h=(0,d.tg)(o.v),I=(0,d.tg)(o.G),z=(0,E.s0)(),Y=(0,e.useCallback)(W=>{const{namespace:J,name:Q}=(0,D.of)((0,D.eE)(W));z(I({namespace:J,templateName:Q}))},[z,I]);return l?e.createElement(s.Ex,null):r?(f.post(r),null):!i||!i.length?e.createElement(K.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",e.createElement(s.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):e.createElement(e.Fragment,null,_.map(({title:W,filter:J},Q)=>{const _e=i.filter(R=>J(R)).map(R=>{var H,b;const{kind:ue,namespace:de,name:Pe}=(0,D.of)((0,D.eE)(R)),Oe=(H=R.metadata.annotations)!=null&&H["backstage.io/techdocs-ref"]&&h?[{icon:(b=g.getSystemIcon("docs"))!=null?b:s.zG,text:"View TechDocs",url:h({kind:ue,namespace:de,name:Pe})}]:[];return{template:R,additionalLinks:Oe}});return e.createElement(p.Gc,{key:Q,templates:_e,title:W,components:{CardComponent:M},onSelected:Y})}))},re={title:"Templates",filter:()=>!0},se=a=>[...a,{title:"Other Templates",filter:l=>![...a].some(({filter:r})=>r(l))}],ce=a=>{const l=(0,d.tg)(o.r),{TemplateCardComponent:r,groups:i=[]}=a,_=i.length?se(i):[re];return e.createElement(P.UO,null,e.createElement(s.T3,{themeId:"website"},e.createElement(s.h4,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization"},e.createElement(o.H,{...a.contextMenu})),e.createElement(s.VY,null,e.createElement(s.yW,{title:"Available Templates"},e.createElement(le,{title:"Register Existing Component",to:l&&l()}),e.createElement(s.qt,null,"Create new software components using standard templates. Different templates create different kinds of components (services, websites, documentation, ...).")),e.createElement(P._i,null,e.createElement(P._i.Filters,null,e.createElement(P.nN,null),e.createElement(P.tW,{initialFilter:"template",hidden:!0}),e.createElement(P.EW,{initialFilter:"all",availableFilters:["all","starred"]}),e.createElement(ae,null),e.createElement(P.xE,null)),e.createElement(P._i.Content,null,e.createElement(oe,{groups:_,TemplateCardComponent:r}))))))},ie=a=>{const l=(0,d.tg)(o.I),r=(0,d.tg)(o.J),{secrets:i}=(0,C.TD)(),_=(0,d.h_)(C.lc),M=(0,E.s0)(),{templateName:f,namespace:g}=(0,d.Oi)(o.G),h=(0,D.eE)({kind:"Template",namespace:g,name:f}),I=async Y=>{const{taskId:W}=await _.scaffold({templateRef:h,values:Y,secrets:i});M(r({taskId:W}))},z=()=>e.createElement(E.Fg,{to:l()});return e.createElement(d.fC,{attributes:{entityRef:h}},e.createElement(s.T3,{themeId:"website"},e.createElement(s.h4,{pageTitleOverride:"Create a new component",title:"Create a new component",subtitle:"Create new software components using standard templates in your organization"}),e.createElement(p.h4,{namespace:g,templateName:f,onCreate:I,onError:z,extensions:a.customFieldExtensions,FormProps:a.FormProps,layouts:a.layouts})))};function Ee(a){const[l,r]=(0,e.useState)();let i=null;return(l==null?void 0:l.type)==="local"?i=e.createElement(o.K,{directory:l.directory,fieldExtensions:a.customFieldExtensions,onClose:()=>r(void 0),layouts:a.layouts}):(l==null?void 0:l.type)==="form"?i=e.createElement(o.L,{defaultPreviewTemplate:a.defaultPreviewTemplate,customFieldExtensions:a.customFieldExtensions,onClose:()=>r(void 0),layouts:a.layouts}):(l==null?void 0:l.type)==="field-explorer"?i=e.createElement(o.M,{customFieldExtensions:a.customFieldExtensions,onClose:()=>r(void 0)}):i=e.createElement(s.VY,null,e.createElement(o.k,{onSelect:_=>{_==="local"?o.W.requestDirectoryAccess().then(M=>r({type:"local",directory:M})).catch(()=>{}):_==="form"?r({type:"form"}):_==="field-explorer"&&r({type:"field-explorer"})}})),e.createElement(s.T3,{themeId:"home"},e.createElement(s.h4,{title:"Template Editor",subtitle:"Edit, preview, and try out templates and template forms"}),i)}const me=a=>{const{components:{TemplateCardComponent:l,TemplateOutputsComponent:r,TaskPageComponent:i=o.S}={}}=a,_=(0,E.pC)()||a.children,M=(0,C.PT)(_),f=[...M,...F.D.filter(({name:h})=>!M.some(I=>I.name===h))],g=(0,C.zS)(_);return e.createElement(E.Z5,null,e.createElement(E.AW,{path:"/",element:e.createElement(ce,{TemplateCardComponent:l,contextMenu:a.contextMenu,groups:a.groups})}),e.createElement(E.AW,{path:o.G.path,element:e.createElement(C.A3,null,e.createElement(ie,{customFieldExtensions:f,layouts:g,FormProps:a.FormProps}))}),e.createElement(E.AW,{path:o.J.path,element:e.createElement(i,{TemplateOutputsComponent:r})}),e.createElement(E.AW,{path:o.N.path,element:e.createElement(C.A3,null,e.createElement(Ee,{customFieldExtensions:f,layouts:g}))}),e.createElement(E.AW,{path:o.P.path,element:e.createElement(o.A,null)}),e.createElement(E.AW,{path:o.Q.path,element:e.createElement(F.L,null)}),e.createElement(E.AW,{path:"*",element:e.createElement(s.mf,{status:"404",statusMessage:"Page not found"})}))}}}]);})();

//# sourceMappingURL=4026.a7b62d5c.chunk.js.map